---
title: Обновление кластера больших данных с поддержкой управления конфигурацией
titleSuffix: SQL Server big data clusters
description: Обновление кластера больших данных с поддержкой управления конфигурацией
author: MikeRayMSFT
ms.author: mikeray
ms.reviewer: rahul.ajmera
ms.date: 02/11/2021
ms.topic: reference
ms.prod: sql
ms.technology: big-data-cluster
ms.openlocfilehash: 0a9f6addcf73e0c50d67f75f19fedd51b2f3dbc9
ms.sourcegitcommit: 8dc7e0ececf15f3438c05ef2c9daccaac1bbff78
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/13/2021
ms.locfileid: "100344016"
---
# <a name="upgrading-to-a-configuration-management-enabled-cluster-cu8-or-lower-to-cu9"></a>Обновление кластера с поддержкой управления конфигурацией (с версии накопительного пакета обновления 8 или более ранней до версии 9 или поздней)

[!INCLUDE[SQL Server 2019](../includes/applies-to-version/sqlserver2019.md)]
Начиная с накопительного пакета обновления 9 кластеры больших данных включают функцию управления конфигурацией, которая позволяет администраторам изменять или настраивать различные части кластера больших данных после развертывания и получать более подробные сведения о конфигурациях, выполняемых в кластере. До накопительного пакета обновления 9 конфигурации кластера больших данных обычно изменялись только во время развертывания, хотя некоторые конфигурации SQL можно было настраивать с помощью пользовательского файла `mssql-custom.conf`. Теперь вместо этого обходного пути параметры можно настраивать с помощью функции управления конфигурацией.

## <a name="migrating-sql-configurations-in-mssql-customconf-to-the-configuration-management-system"></a>Перенос конфигураций SQL в систему управления конфигурацией в файле mssql-custom.conf
Если вы создали пользовательский экземпляр `mssql-custom.conf` для основных экземпляров SQL Server, однократно выполните приведенные ниже инструкции, чтобы получить возможность управлять параметрами через систему конфигурации, а не через файл. Если не выполнить их, функция управления конфигурацией не будет управлять этими конфигурациями SQL и параметры из `mssql-custom.conf` будут переопределять все изменения, внесенные с помощью этой функции.

Шаги:
1. Обновление кластера больших данных до накопительного пакета обновления 9
> [!NOTE]
> Параметры, определенные с помощью файла `mssql-custom.conf`, не будут изменены или удалены. Они просто не будут отражаться в системе конфигурации и контролироваться ею.

2. Задайте и примените все параметры, ранее определенные в файле `mssql-custom.conf`, с помощью новой функции конфигурации. Пошаговое руководство по изменению параметров см. в статье [Общие сведения о настройке кластеров больших данных SQL Server после развертывания](configure-bdc-postdeployment.md). Полный список доступных параметров см. в статье [Свойства конфигурации кластеров больших данных SQL Server](reference-config-bdc-overview.md). Обратите внимание, что некоторые параметры, например customerFeedback, могли изменить область действия, но по-прежнему доступны.
3. Переименуйте файл `mssql-custom.conf` в `deprecated-mssql-custom.conf` в контейнере `mssql-server` в каждом главном модуле pod. Если такой модуль только один, это должен быть модуль `master-0`. Если необходимо перейти на более раннюю версию или откатиться к кластеру, не поддерживающему конфигурацию (накопительный пакет обновления 8 или более ранний), этот файл можно использовать повторно для применения пользовательских конфигураций SQL.

## <a name="downgrading-from-a-configuration-management-enabled-cluster-to-a-non-configuration-management-enabled-cluster-cu9-to-cu8-or-lower"></a>Переход с кластера с поддержкой управления конфигурацией на кластер без такой поддержки (с версии накопительного пакета обновления 9 или более поздней на версию 8 или более раннюю)
Переход с кластера с поддержкой управления конфигурацией (накопительный пакет обновления 9 или более поздней версии) на кластер без такой поддержки (накопительный пакет обновления 8 или более ранней версии) приведет к невозможности настройки кластера больших данных после развертывания. Кроме того, потребуется использовать дополнительный файл `mssql-custom.conf` для настройки конфигурации SQL. Если вы переименовали файл в `deprecated-mssql-custom.conf` после обновления до накопительного пакета обновления 9 или более поздней версии, переименуйте его обратно в `mssql-custom.conf`. Если вы удалили этот файл или не создавали его ранее и теперь хотите определить особые конфигурации SQL, создайте его, выполнив инструкции в статье [Свойства конфигурации главного экземпляра SQL Server (до выпуска накопительного пакета обновления 9)](reference-config-master-instance.md). Все параметры, определенные и измененные с помощью функции управления конфигурацией, будут сброшены к предыдущим конфигурациям или системным значениям по умолчанию. 

После перевода кластера на более раннюю версию параметры будут установлены в значения по умолчанию или значения, указанные в файле bdc.json развертывания. После перехода на более раннюю версию дополнительных действий не требуется.