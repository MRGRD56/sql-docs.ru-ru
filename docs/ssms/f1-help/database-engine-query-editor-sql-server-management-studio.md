---
title: Редактор запросов SSMS
description: Редактор запросов SQL Server Management Studio (SSMS)
ms.prod: sql
ms.prod_service: sql-tools
ms.technology: ssms
ms.topic: conceptual
f1_keywords:
- sql13.swb.tsqlquery.f1
- sql13.swb.tsqlresults.f1
- sql13.swb.query.advanced.f1
- sql13.swb.query.ansi.f1
- sql13.swb.query.general.f1
- sql13.swb.query.general.f1
- sql13.swb.sqleditors.multiserverresultssettings
dev_langs:
- TSQL
helpviewer_keywords:
- SQL Server Management Studio [SQL Server], editor
- SQL Server Management Studio [SQL Server], Database Engine Query Editor
- SQL Server Management Studio [SQL Server], templates
- SQL Server Management Studio [SQL Server], query editor
- Query Editor [SQL Server Management Studio]
- Query Editor [Database Engine]
- Query Editor [Database Engine], Features
- Query Editor [Database Engine], Toolbar
- Query Editor [SQL Server Management Studio], full screen mode
- Query Editor [Database Engine], templates
- Query Editor [SQL Server Management Studio], about Query Editor
- Transact-SQL Editor See Query Editor [Database Engine]
- Database Engine Query Editor See Query Editor [Database Engine]
- Code Editor [SQL Server Management Studio], about Query Editor
- editors [SQL Server Management Studio], Database Engine Query Editor
- full screen mode [SQL Server Management Studio]
- writing scripts
- modifying scripts
- writing queries
- scripts [SQL Server], SQL Server Management Studio
- queries [SQL Server], SQL Server Management Studio
ms.assetid: 05cfae9b-96d5-4a35-a098-0bc3a548bcfc
author: markingmyname
ms.author: maghan
ms.reviewer: ''
ms.custom: seo-lt-2019, contperfq1
ms.date: 08/28/2020
ms.openlocfilehash: 219ebb8a431b997951b22d443877dfb751665384
ms.sourcegitcommit: 5f3e0eca9840db20038f0362e5d88a84ff3424af
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2020
ms.locfileid: "92344070"
---
# <a name="sql-server-management-studio-ssms-query-editor"></a>Редактор запросов SQL Server Management Studio (SSMS)

[!INCLUDE [SQL Server ASDB, ASDBMI, ASDW ](../../includes/applies-to-version/sql-asdb-asdbmi-asa.md)]

В этой статье описываются возможности и функции редактора запросов SQL Server Management Studio (SSMS).

> [!Note]
> Если вы хотите узнать, как использовать справку F1 по Transact-SQL (T-SQL), ознакомьтесь с разделом [Справка F1 по Transact-SQL](#transact-sql-f1-help).
>
> Если вы хотите узнать о задачах, которые можно выполнять с помощью редактора, перейдите к разделу [Задачи редактора](#editor-tasks).

Редакторы в среде SSMS совместно используют стандартную архитектуру. Текстовый редактор реализует базовые функциональные возможности и может быть использован в качестве базового редактора для текстовых файлов. Другие редакторы (редакторы запросов) расширяют эти функциональные возможности, подключая языковую службу, определяющую синтаксис одного из языков, поддерживаемых в SQL Server. В редакторах запросов также присутствуют различные уровни поддержки таких функций редактора, как IntelliSense или отладка. В набор редакторов запросов входят редактор запросов компонента ядра СУБД, используемый для создания скриптов, содержащих инструкции T-SQL и XQuery, редактор многомерных выражений для работы с языком многомерных выражений, редактор расширений интеллектуального анализа данных для работы с языком расширений интеллектуального анализа данных и редактор XML/A для работы с языком XML для аналитики.
Вы можете использовать редактор запросов, чтобы создавать и выполнять скрипты, содержащие инструкции Transact-SQL.

![Создать запрос](media/database-engine-query-editor-sql-server-management-studio/new-query.png)

## <a name="sql-editor-toolbar"></a>Панель инструментов редактора SQL

Если открыт редактор запросов, отображается панель инструментов редактора SQL со следующими кнопками.

Можно также добавить панель инструментов редактора SQL, выбрав меню **Вид** , **Панели инструментов**, а затем выбрав **Редактор SQL**. Если добавить панель инструментов редактора SQL, когда окно редактора запросов не открыто, все кнопки будут недоступны.

![Панель инструментов редактора](media/database-engine-query-editor-sql-server-management-studio/editor-toolbar.png)

### <a name="connect-using-the-editor-toolbar"></a>Кнопка "Подключиться" на панели инструментов редактора

Открывает диалоговое окно **[Соединение с сервером](connect-to-server-database-engine.md)** . Используйте это диалоговое окно, чтобы установить соединение с сервером.

Подключиться к базе данных можно также с помощью [контекстного меню](#connection-using-the-context-menu).

### <a name="change-connection-using-the-editor-toolbar"></a>Кнопка "Изменить подключение" на панели инструментов редактора

Открывает диалоговое окно **Соединение с сервером** . Используйте это диалоговое окно, чтобы установить [соединение с другим сервером](f1-help-for-server-connections-sql-server-management-studio.md).

Изменить подключение можно также с помощью [контекстного меню](#connection-using-the-context-menu).

### <a name="available-databases-using-the-editor-toolbar"></a>Кнопка "Доступные базы данных" на панели инструментов редактора

Изменяет подключение и соединяет с другой базой данных того же сервера.

### <a name="execute-using-the-editor-toolbar"></a>Кнопка "Выполнить" на панели инструментов редактора

Выполняет выбранный код или, если код не выбран, выполняет весь код редактора запросов.

Запрос можно **выполнить** также с помощью клавиши F5 или [контекстного меню](#execute-using-the-context-menu).

### <a name="cancel-executing-query-using-the-editor-toolbar"></a>Кнопка "Отменить выполнение запроса" на панели инструментов редактора

Отправляет на сервер запрос отмены. Отмена выполнения некоторых запросов занимает некоторое время, так как необходимо дождаться подходящих условий отмены. После отмены транзакций могут происходить задержки на время отката транзакций.

Отменить выполнение запроса можно также с помощью клавиш ALT+BREAK.

### <a name="parse-using-the-editor-toolbar"></a>Кнопка "Анализ" на панели инструментов редактора

Проверяет синтаксис выбранного кода. Если код не выбран, проверяется весь синтаксис кода в окне редактора запросов.

Проверить код в редакторе запросов можно также с помощью клавиш CTRL+F5.

### <a name="display-estimated-execution-plan-using-the-editor-toolbar"></a>Кнопка "Показать предполагаемый план выполнения" на панели инструментов редактора

Запрашивает план выполнения запроса у обработчика запросов, не выполняя этот запрос, и выводит план в окне **План выполнения**. Этот план использует статистику индексов для оценки ожидаемого числа строк, возвращаемых на каждом этапе выполнения запроса. Фактически используемый план запроса может отличаться от предполагаемого плана выполнения. Это может происходить, если количество возвращаемых строк расходится с оценкой, поэтому обработчик запросов вносит изменения в план в целях повышения его эффективности.

Отобразить предполагаемый план выполнения можно также с помощью клавиш CTRL+L или [контекстного меню](#display-estimated-execution-plan-using-the-context-menu).

### <a name="query-options-using-the-editor-toolbar"></a>Кнопка "Параметры запроса" на панели инструментов редактора

Открывает диалоговое окно **Параметры запроса** . С помощью этого диалоговое окно можно настроить параметры по умолчанию для выполнения запроса и для получения результатов запроса.

Открыть окно **Параметры запроса** можно также с помощью [контекстного меню](#query-options-using-the-context-menu).

### <a name="intellisense-enabled-using-the-editor-toolbar"></a>Кнопка "Функция Intellisense включена" на панели инструментов редактора

Указывает, доступны ли функциональные возможности технологии [IntelliSense](../scripting/configure-intellisense-sql-server-management-studio.md) в редакторе запросов ядра СУБД. По умолчанию этот параметр активирован.

Вызвать команду **Функция Intellisense включена** можно также с помощью клавиш CTRL+B > CTRL+I или [контекстного меню](#intellisense-enabled-using-the-context-menu).

### <a name="include-actual-execution-plan-using-the-editor-toolbar"></a>Кнопка "Включить действительный план выполнения" на панели инструментов редактора

Выполняет запрос, возвращает результаты запроса и использует план выполнения для запроса. Запросы отображаются в виде графического плана запроса в окне **План выполнения**.

Вызвать команду **Включить действительный план выполнения** можно также с помощью клавиш CTRL+M или [контекстного меню](#include-actual-execution-plan-using-the-context-menu).

### <a name="include-live-query-statistics-using-the-editor-toolbar"></a>Кнопка "Включить статистику активных запросов" на панели инструментов редактора

Позволяет анализировать процесс выполнения запроса в режиме реального времени по мере передачи управления от одного оператора плана запроса другому.

Вызвать команду **Включить статистику активных запросов** можно также с помощью [контекстного меню](#include-live-query-statistics-using-the-context-menu).

### <a name="include-client-statistics-using-the-editor-toolbar"></a>Кнопка "Включить статистику клиента" на панели инструментов редактора

Включает окно **Статистика клиента** , содержащее статистические данные по запросу и сетевым пакетам, а также по времени выполнения запроса.

Вызвать команду **Включить статистику активных запросов** можно также с помощью клавиш SHIFT+ALT+S или [контекстного меню](#include-client-statistics-using-the-context-menu).

### <a name="results-to-text-using-the-editor-toolbar"></a>Кнопка "Результаты в текст" на панели инструментов редактора

Возвращает результаты запроса в текстовом виде в окне **Результаты** .

Вывести результаты в текст можно также с помощью клавиш CTRL+T или [контекстного меню](#results-using-the-context-menu).

### <a name="results-to-grid-using-the-editor-toolbar"></a>Кнопка "Результаты в сетку" на панели инструментов редактора

Возвращает результаты запроса в виде одной или нескольких сеток в окне **Результаты** . По умолчанию параметр включен.

Вывести результаты в сетку можно также с помощью клавиш CTRL+D или [контекстного меню](#results-using-the-context-menu).

### <a name="results-to-file-using-the-editor-toolbar"></a>Кнопка "Результаты в виде файла" на панели инструментов редактора

По завершении выполнения запроса открывается диалоговое окно **Сохранить результаты** . В поле **Сохранить в**выберите папку, в которой необходимо сохранить файл. В поле **Имя файла** введите имя файла, а затем нажмите кнопку **Сохранить**, чтобы сохранить результаты запроса в файл **отчета** с расширением RPT. Для настройки дополнительных параметров выберите стрелку вниз на кнопке **Сохранить**, а затем пункт **Выбор кодировки для сохранения**.

Вывести результаты в текст можно также с помощью клавиш CTRL+SHIFT+F или [контекстного меню](#results-using-the-context-menu).

### <a name="comment-out-the-selected-lines-using-the-editor-toolbar"></a>Кнопка "Закомментировать выделенные строки" на панели инструментов редактора

Преобразует текущую строку в комментарий, добавляя оператор комментария (--) в начало строки.

Закомментировать строку можно также с помощью клавиш CTRL+K > CTRL+C.

### <a name="uncomment-the-selected-lines-using-the-editor-toolbar"></a>Кнопка "Раскомментировать выделенные строки" на панели инструментов редактора

Преобразует текущую строку в активную инструкцию исходного кода, удаляя оператор комментария (--) в начале строки.

Раскомментировать строку можно также с помощью клавиш CTRL+K > CTRL+U.

### <a name="decrease-indent-using-the-editor-toolbar"></a>Кнопка "Уменьшить отступ" на панели инструментов редактора

Перемещает текст строки влево, удаляя пробелы в начале строки.

### <a name="increase-line-indent-using-the-editor-toolbar"></a>Кнопка "Увеличить отступ строки" на панели инструментов редактора

Перемещает текст строки вправо, добавляя пробелы в начале строки.

### <a name="specify-values-for-template-parameters-using-the-editor-toolbar"></a>Кнопка "Задание значений для параметров шаблона" на панели инструментов редактора

Открывает диалоговое окно, которое можно использовать, чтобы задать значения параметров в хранимых процедурах и функциях.

## <a name="context-menu"></a>Контекстное меню

Чтобы вызвать контекстное меню, *щелкните правой кнопкой мыши* любую область редактора запросов. В контекстном меню отображаются те же команды, что и на панели инструментов редактора SQL. В контекстном меню, помимо команд **Подключиться** и **Выполнить**, отображаются и другие команды, например **Вставить фрагмент кода** и **Заключить в**.

![Параметры](media/database-engine-query-editor-sql-server-management-studio/context-menu.png)

### <a name="insert-snippet-using-the-context-menu"></a>Команда "Вставить фрагмент кода" в контекстном меню

[Фрагмент кода T-SQL](../scripting/add-transact-sql-snippets.md) — это шаблон, который можно использовать в качестве отправной точки при написании новых инструкций Transact-SQL в редакторе запросов.

### <a name="surround-with-using-the-context-menu"></a>Команда "Заключить в" в контекстном меню

Фрагмент кода, который можно использовать в качестве отправной точки при включении набора инструкций Transact-SQL в блок BEGIN, IF или WHILE.

### <a name="connection-using-the-context-menu"></a>Команда "Подключиться" в контекстном меню

![Соединения](media/database-engine-query-editor-sql-server-management-studio/context-menu-connections.png)

В отличие от панели инструментов SSMS в контекстном меню есть больше вариантов **подключения**.

- **Подключиться** — открывает диалоговое окно "Соединение с сервером". Используйте это диалоговое окно, чтобы установить соединение с сервером.

- **Отключить** — отключает текущее окно редактора запросов от сервера.

- **Отключить все запросы** — отключает все соединения запросов.

- **Изменить соединение** — открывает диалоговое окно "Соединение с сервером". Используйте это диалоговое окно, чтобы установить соединение с другим сервером.

### <a name="open-server-in-object-explorer-using-the-context-menu"></a>Команда "Открыть сервер в обозревателе объектов" в контекстном меню

В обозревателе объектов представлен иерархический пользовательский интерфейс для просмотра и управления объектами в каждом экземпляре SQL Server. Панель сведений обозревателя объектов предлагает табличное представление объектов экземпляра и возможность поиска указанных объектов. Возможности обозревателя объектов могут незначительно различаться в зависимости от типа сервера, но в общем случае включают функции разработки для баз данных, а также функции управления для всех типов серверов.

### <a name="execute-using-the-context-menu"></a>Команда "Выполнить" в контекстном меню

Выполняет выбранный код или, если код не выбран, выполняет весь код в редакторе запросов.

### <a name="display-estimated-execution-plan-using-the-context-menu"></a>Команда "Показать предполагаемый план выполнения" в контекстном меню

Запрашивает план выполнения запроса у обработчика запросов, не выполняя этот запрос, и выводит план в окне **План выполнения** . Этот план использует статистику индексов для оценки ожидаемого числа строк, возвращаемых на каждом этапе выполнения запроса. Фактически используемый план запроса может отличаться от предполагаемого плана выполнения. Это может происходить, если количество возвращаемых строк расходится с оценкой, поэтому обработчик запросов вносит изменения в план в целях повышения его эффективности.

### <a name="intellisense-enabled-using-the-context-menu"></a>Команда "Функция Intellisense включена" в контекстном меню

Указывает, доступны ли функциональные возможности технологии IntelliSense в редакторе запросов ядра СУБД. По умолчанию этот параметр активирован.

### <a name="trace-query-in-sql-server-profiler-using-the-context-menu"></a>Команда "Трассировка запроса в приложении SQL Server Profiler" в контекстном меню

SQL Server Profiler — это интерфейс для создания трассировок и управления ими, а также для анализа и воспроизведения полученных результатов. События сохраняются в файле трассировки, который затем может быть проанализирован или использован для воспроизведения определенных последовательностей шагов для выявления возникших проблем.

### <a name="analyze-query-in-database-engine-tuning-advisor-using-the-context-menu"></a>Команда "Анализ запроса в помощнике по настройке ядра СУБД" в контекстном меню

Помощник по настройке ядра СУБД (Майкрософт) анализирует базы данных и составляет рекомендации по оптимизации производительности запросов. Помощник по настройке ядра СУБД используется для выбора и создания оптимальных наборов индексов, индексированных представлений и секций таблицы, не обладая экспертным уровнем понимания структуры баз данных или внутренних процессов SQL Server. Помощник по настройке ядра СУБД позволяет выполнять следующие задачи.

### <a name="design-query-in-editor-using-the-context-menu"></a>Команда "Создать запрос в редакторе" в контекстном меню

Конструктор запросов и представлений открывается при открытии определения представления, показе результатов запроса или представления, при создании или открытии запроса.

### <a name="include-actual-execution-plan-using-the-context-menu"></a>Команда "Включить действительный план выполнения" в контекстном меню

Выполняет запрос, возвращает результаты запроса и использует план выполнения для запроса. Запросы отображаются в виде графического плана запроса в окне **План выполнения**.

### <a name="include-live-query-statistics-using-the-context-menu"></a>Команда "Включить статистику активных запросов" в контекстном меню

Позволяет анализировать процесс выполнения запроса в режиме реального времени по мере передачи управления от одного оператора плана запроса другому.

### <a name="include-client-statistics-using-the-context-menu"></a>Команда "Включить статистику клиента" в контекстном меню

Включает окно **Статистика клиента** , содержащее статистические данные по запросу и сетевым пакетам, а также по времени выполнения запроса.

### <a name="results-using-the-context-menu"></a>Команды для вывода результатов в контекстном меню

![Варианты вывода результатов](media/database-engine-query-editor-sql-server-management-studio/context-menu-results.png)

В контекстном меню можно выбрать любой вариант вывода *результатов*.

- **Результаты в текст** — отображает результаты запроса в текстовом виде в окне **Результаты**.

- **Результаты в сетку** — отображает результаты запроса в виде одной или нескольких сеток в окне **Результаты**.

- **Результаты в виде файла** — после выполнения запроса открывается диалоговое окно **Сохранить результаты**. В поле **Сохранить в**выберите папку, в которой необходимо сохранить файл. В поле **Имя файла** введите имя файла, а затем нажмите кнопку **Сохранить**, чтобы сохранить результаты запроса в файл **отчета** с расширением RPT. Для настройки дополнительных параметров выберите стрелку вниз на кнопке **Сохранить**, а затем пункт **Выбор кодировки для сохранения**.

### <a name="properties-window-using-the-context-menu"></a>Команда "Окно свойств" в контекстном меню

[Окно свойств](../menu-help/properties-window-f1-help-management-studio.md) описывает состояние элемента в SQL Server Management Studio, например подключение или оператор Showplan, и сведения об объектах базы данных, таких как таблицы, представления и конструкторы.

Окно свойств используется для просмотра свойств текущего соединения. Многие свойства в окне свойств доступны только для чтения, однако могут быть изменены другими средствами Management Studio. Например, свойство "База данных" запроса в окне свойств доступно только для чтения, но может изменяться на панели инструментов.

### <a name="query-options-using-the-context-menu"></a>Команда "Параметры запроса" в контекстном меню

Открывает диалоговое окно **Параметры запроса** . С помощью этого диалогового окна можно настроить параметры по умолчанию для выполнения запроса и получения результатов запроса.

## <a name="transact-sql-f1-help"></a>Справка F1 по Transact-SQL

При нажатии клавиши F1 редактор запросов открывает раздел справки по нужной вам инструкции Transact-SQL. Чтобы сделать это, выделите имя инструкции Transact-SQL и нажмите клавишу F1. После этого поисковая система справки выполнит поиск раздела, имеющего атрибут справки F1, соответствующий выделенной строке.

Если поисковой системе справки не удастся найти раздел с ключевым словом справки F1, точно соответствующим выделенной строке, будет отображен этот раздел. В этом случае есть два способа поиска нужной информации:

- Скопируйте и вставьте из буфера редактора строку, выделенную на вкладке поиска электронной документации по SQL Server, и воспользоваться функцией поиска.

- Выделите только ту часть инструкции Transact-SQL, которая вероятнее всего совпадет с ключевым словом справки F1, относящимся к разделу, и повторно нажмите клавишу F1. Средству поиска справки необходимо полное соответствие между выделенной строкой и ключевым словом справки F1, назначенным для раздела. Если выделенная строка содержит элементы, уникальные для вашей среды, например имена столбцов или параметров, поисковая система не сможет найти совпадение. Примерами строк для выделения могут служить следующие:

  - Имя инструкции Transact-SQL, такое как SELECT, CREATE DATABASE или BEGIN TRANSACTION.

  - Имя встроенной функции, например SERVERPROPERTY или @@VERSION.

  - Имя системной хранимой процедуры, таблицы или представлений, такое как sys.data_spaces или sp_tableoption.

## <a name="editor-tasks"></a>Задачи редактора

| Описание задачи | Раздел |
|------------------|-------|
| Описывает различные способы открытия редакторов в среде SSMS.| [Открытие редактора](../scripting/open-an-editor-sql-server-management-studio.md) |
| Настройка параметров для различных редакторов, например нумерация линий или параметры IntelliSense. | [Настройка редакторов](../scripting/configure-editors-sql-server-management-studio.md) |
| Управление режимом просмотра, например переносом по словам, разделением окна или вкладками.| [Управление режимами редактирования и просмотра](../scripting/manage-the-editor-and-view-mode.md) |
| Настройка параметров форматирования, например скрытый текст или выступы. | [управлять форматированием кода](../scripting/manage-code-formatting.md) |
| Способы навигации по тексту в окне редактора, например функции добавочного поиска или перехода. | [Перемещение по коду и тексту](../scripting/navigate-code-and-text.md) |
| Настройка параметров присвоения цветов различным классам синтаксиса, что облегчает чтение сложных инструкций. | [Выделение цветом в редакторах запросов](../scripting/color-coding-in-query-editors.md) |
| Перетаскивание текста с одного места в скрипте в другое.| [Перетаскивание текста](../scripting/drag-and-drop-text.md) |
| Установка закладок для более легкого поиска важных элементов кода. | [Управление закладками](../scripting/manage-bookmarks.md) |
| Вывод скриптов или результатов в окно или сетку.| [Печать кода и результаты](../scripting/print-code-and-results.md) |
| Просмотр и использование базовых функций редактора запросов многомерных выражений. | [Создание скриптов Analysis Services](/analysis-services/instances/create-analysis-services-scripts-in-management-studio) |
| Просмотр и использование базовых функций редактора запросов расширения интеллектуального анализа данных. | [Создание DMX-запроса](/analysis-services/data-mining/create-a-dmx-query-in-sql-server-management-studio) |
| Просмотр и использование базовых функций редактора запросов XML/A. | [Редактор XML](../scripting/xml-editor-sql-server-management-studio.md) |
| Использование функций sqlcmd в редакторе запросов ядра СУБД.| [Изменение скриптов SQLCMD](../scripting/edit-sqlcmd-scripts-with-query-editor.md) |
| Использование фрагментов кода в редакторе запросов ядра СУБД. Фрагменты кода — это шаблоны часто используемых инструкций или блоков. Их можно настроить или расширить, включив в них фрагменты, специфичные для сайта.| [Фрагменты кода T-SQL](../scripting/add-transact-sql-snippets.md) |
| Использование отладчика Transact\-SQL для пошагового просмотра кода и просмотра отладочных данных, например значений переменных и параметров.| [Отладчик T-SQL.](../scripting/transact-sql-debugger.md) |

## <a name="see-also"></a>См. также раздел

- [Настройка меню и сочетаний клавиш](../customize-menus-and-shortcut-keys.md)
- [Сочетания клавиш среды SQL Server Management Studio](../../ssms/sql-server-management-studio-keyboard-shortcuts.md)