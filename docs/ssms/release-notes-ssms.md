---
title: Заметки о выпуске SSMS
description: Заметки о выпуске SQL Server Management Studio (SSMS)
ms.prod: sql
ms.prod_service: sql-tools
ms.technology: ssms
ms.topic: conceptual
ms.assetid: 3dc76cc1-3b4c-4719-8296-f69ec1b476f9
author: dzsquared
ms.author: drskwier
ms.reviewer: maghan
ms.custom: seo-lt-2019
ms.date: 10/27/2020
ms.openlocfilehash: ce232d98e441d6ce217a2f97f6b8b1b5e130b7f3
ms.sourcegitcommit: b09f069c6bef0655b47e9953a4385f1b52bada2b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/27/2020
ms.locfileid: "92734646"
---
# <a name="release-notes-for-sql-server-management-studio-ssms"></a>Заметки о выпуске SQL Server Management Studio (SSMS)

[!INCLUDE [SQL Server ASDB, ASDBMI, ASDW ](../includes/applies-to-version/sql-asdb-asdbmi-asa.md)]

В этой статье приводятся подробные сведения об обновлениях, улучшениях и исправлениях ошибок в текущей и предыдущих версиях SQL Server Management Studio.

## <a name="current-ssms-release"></a>Текущий выпуск SSMS

### <a name="1871"></a>18.7.1

![загрузить](media/download-icon.png) [Загрузить SSMS 18.7](download-sql-server-management-studio-ssms.md)

- Номер выпуска: 18.7.1
- Номер сборки: 15.0.18358.0
- Дата выпуска: 27 октября 2020 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2147207&clcid=0x40a)

SSMS 18.7 является самым современным общедоступным выпуском SSMS. Если вам нужна предыдущая версия SSMS, см. список в разделе [Предыдущие выпуски SSMS](release-notes-ssms.md#previous-ssms-releases).

#### <a name="whats-new-in-1871"></a>Новые возможности версии 18.7.1

[!INCLUDE [ssms-ads-install](../includes/ssms-azure-data-studio-install.md)]


#### <a name="bug-fixes-in-1871"></a>Исправления ошибок в версии 18.7.1

| Добавления | Сведения |
|----------|---------|
| Хранилище запросов | Исправлена ошибка, возникающая при щелчке правой кнопкой мыши на узле в обозревателе объектов для хранилища запросов. |


#### <a name="known-issues-1871"></a>Известные проблемы (в версии 18.7.1)

| Добавления | Сведения | Обходной путь |
|----------|---------|------------|
| Службы Analysis Services | Ошибка при подключении к службам SSAS через MSMDPUMP.dll. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/40144696). | Недоступно |
| Службы Analysis Services | В редких случаях при использовании установки обновления для открытия редактора DAX после обновления SSMS может возникать ошибка "Объект не задан экземпляром объекта". | Чтобы устранить эту проблему, удалите, а затем переустановите SSMS. |
| Общие ошибки SSMS | В диалоговом окне New Server Audit Specification (Создать спецификацию аудита сервера) может происходить сбой SSMS с ошибкой нарушения прав доступа. | Недоступно |
| Общие ошибки SSMS | Расширения SSMS с использованием объектов SMO должны быть перекомпилированы для нового пакета v161 SMO, предназначенного для среды SSMS. Доступна предварительная версия по адресу https://www.nuget.org/packages/Microsoft.SqlServer.SqlManagementObjects.SSMS/. </br></br> Расширения, скомпилированные для предыдущих версий 160 пакета Microsoft.SqlServer.SqlManagementObjects, по-прежнему будут работать. | Недоступно |
| Службы Integration Services | При импорте пакетов в Integration Services или экспорте из Integration Services, а также при экспорте пакетов из Azure-SSIS Integration Runtime утрачиваются скрипты пакетов, содержащих задачи или компоненты скрипта. Обходное решение. Удалите папку C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\CommonExtensions\MSBuild. | Недоступно |
| Службы Integration Services | Удаленные подключения к службам интеграции могут завершаться ошибкой "Указанная служба не существует как установленная служба" в более новой операционной системе. Обходное решение. В разделах Computer\HKEY_CLASSES_ROOT\AppID и Computer\HKEY_CLASSES_ROOT\WOW6432Node\AppID найдите записи, связанные со службами интеграции, и в этих кустах переименуйте раздел реестра с именем "LocalService" на "LocalService_A" для конкретной версии служб интеграции, которую нужно подключить. | Н/Д |
| Обозреватель объектов | Выпуски SSMS, предшествующие 18.7, имеют критически важное изменение в обозревателе объектов из-за изменений, связанных с механизмом [SQL по запросу для Azure Synapse Analytics](https://docs.microsoft.com/azure/synapse-analytics/sql/on-demand-workspace-overview). | Чтобы продолжить использование обозревателя объектов в SSMS с SQL по запросу для Azure Synapse Analytics, требуется SSMS 18.7 или более поздней версии. |

В статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server) представлены сведения о других известных проблемах. Там же можно отправить отзыв группе разработчиков.

## <a name="previous-ssms-releases"></a>Предыдущие выпуски SSMS

[!INCLUDE[ssms-connect-aazure-ad](../includes/ssms-connect-azure-ad.md)]

Чтобы скачать предыдущую версию SSMS, щелкните ссылку для скачивания в соответствующем разделе.

| Версия SSMS | Номер сборки | Дата выпуска |
|--------------|--------------|--------------|
| [18,7](#187) | 15.0.18357.0 | 20 октября 2020 г. |
| [18.6](#186) | 15.0.18338.0 | 22 июля 2020 г. |
| [18.5.1](#1851) | 15.0.18333.0 | 9 июня 2020 г. |
| [18.5](#185) | 15.0.18330.0 | 7 апреля 2020 г. |
| [18.4](#184) | 15.0.18206.0 | 4 ноября 2019 г. |
| [18.3.1](#1831) | 15.0.18183.0 | 2 октября 2019 г. |
| [18.2](#182) | 15.0.18142.0 | 25 июля 2019 г. |
| [18.1](#181) | 15.0.18131.0 | 11 июня 2019 г. |
| [18.0](#180) | 15.0.18118.0 | 24 апреля 2019 г. |
| [17.9.1](#1791) | 14.0.17289.0 | 21 ноября 2018 г. |
| [16.5.3](#1653) | 13.0.16106.4 | 30 января 2017 г. |

### <a name="187"></a>18,7

![загрузить](media/download-icon.png) [Загрузить SSMS 18.7](download-sql-server-management-studio-ssms.md)

- Номер выпуска: 18.7
- Номер сборки: 15.0.18357.0
- Дата выпуска: 20 октября 2020 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2146265&clcid=0x40a)

SSMS 18.7 является самым современным общедоступным выпуском SSMS. Если вам нужна предыдущая версия SSMS, см. список в разделе [Предыдущие выпуски SSMS](release-notes-ssms.md#previous-ssms-releases).

#### <a name="whats-new-in-187"></a>Новые возможности версии 18.7

[!INCLUDE [ssms-ads-install](../includes/ssms-azure-data-studio-install.md)]

| Изменения | Сведения |
|----------|---------|
| Интеграция установки Azure Data Studio | При установке SSMS также устанавливается Azure Data Studio. |
| Always Encrypted | Чтобы распознать новые конечные точки HSM, необходимо обновить среду SSMS. Это можно выполнить путем использования нового пакета NugetPackage от поставщика AKV. |
| Импорт неструктурированного файла | Повышение эффективности прогнозирования типов данных за счет изучения 300 строк по умолчанию. |
| Импорт неструктурированного файла | Предотвратите объявление столбцов, которые следует объявить как SmallInt, как TinyInt. |
| Импорт неструктурированного файла | Внесено улучшение, позволяющее правильно очищать таблицы хранилища данных при сбое импорта данных. |
| Resource Governor | Добавлена поддержка десятичных значений. |
| Инструкция ShowPlan | Добавлен оператор PREDICT. |
| Пользовательский интерфейс XEvent | Добавлена возможность создавать сценарии расширенных событий с использованием имени wait_type. Пользователи запрашивают использование значения столбца map_value вместо map_key в предикате фильтра wait_type, поскольку значение ключа изменяется во время обновления версии. Исправление: Добавлен флажок, а также предоставлена возможность, благодаря которой пользователи могут выбрать map_value или map_key в качестве значения предиката фильтра wait_type. |

#### <a name="bug-fixes-in-187"></a>Исправления ошибок в версии 18.7

| Добавления | Сведения |
|----------|---------|
| Возможности доступа | Исправлена последовательность перехода кнопок в окне "Следующие параметры не поддерживаются", которая появляется при создании запроса к хранилищу данных. |
| Специальные возможности | Мастер импорта и экспорта: неправильная разметка страницы в режиме высокого разрешения. |
| Монитор активности | Исправлена ошибка, из-за которой монитор активности приостанавливался при открытии вкладки "Процессы". См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37050118). |
| Группа доступности AlwaysOn | Исправлена ошибка, из-за которой не работала отработка отказа группы доступности для горизонтального увеличения масштаба для чтения. |
| Службы Analysis Services | Обновлены компоненты Power Query до версии 2.84.982 для сценариев табличных моделей AS. |
| Службы Analysis Services | Исправлена проблема, которая могла приводить к ошибке при попытке подключиться к SSAS через msmdpump.dll. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/40144696). |
| Резервное копирование и восстановление | Исправлена проблема, из-за которой при выборе пункта "Просмотреть свойства подключения" была обнаружена ошибка SMO в свойстве HostDistribution для SQL 2016 и более ранних версий. |
| Конструктор баз данных | Исправлена проблема, приводившая к сбою SSMS при обработке десятичных чисел. |
| Диаграммы базы данных. | Исправлена проблема, которая могла привести к сбою или зависанию SSMS при использовании диаграмм базы данных, в которых диалоговое окно "Добавить таблицу" могло не отображаться должным образом. |
| Зеркальное отображение базы данных | Исправлена проблема, которая приводила к сбою зеркального отображения конфигурации. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/32897281). |
| Общие ошибки SSMS | Исправлена проблема, при которой попытка подключения к базе данных SQL Azure могла занять несколько секунд (вход в систему SQL в пользовательской базе данных). |
| Общие ошибки SSMS | Исправлена проблема, из-за которой среда SSMS не выполняла обработку и не отображала захваченные взаимоблокировки (XDL-файлы). |
| Общие ошибки SSMS | Устранена проблема, из-за которой при попытке открыть параметры журнала ошибок для SQL Server 2008 R2 и ниже приводилась ошибка, из-за которой было невозможно найти свойство ErrorLogSizeKb. |
| Общие ошибки SSMS | Общие исправления и улучшения, связанные с поддержкой [SQL по запросу для Azure Synapse Analytics](https://docs.microsoft.com/azure/synapse-analytics/sql/on-demand-workspace-overview). |
| Импорт неструктурированного файла | Исправлена ошибка, из-за которой мастер не обнаруживал, что файл может использоваться другим приложением, и вместо этого выдавал ошибку. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40761574). |
| Импорт и экспорт приложения уровня данных | Исправлен уровень служб по умолчанию. Теперь при импорте BACPAC-файла будет использоваться Standard S0 (то же самое, что портал Azure и поведение SqlPackage.exe). |
| Импорт неструктурированного файла | Исправлена ошибка, из-за которой мастер не обнаруживал, что файл может использоваться другим приложением, и вместо этого выдавал ошибку. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40761574). |
| Службы Integration Services | Исправлена проблема, из-за которой элементы поля со списком для подписки Azure дублировались в мастере создания IR и мастере миграции заданий, если разные подписки имели одинаковое имя. |
| Службы Integration Services | Исправлена проблема, при которой кнопка "Подключить" иногда не была представлена в мастере создания IR. |
| Службы Integration Services | Исправлена проблема, из-за которой элементы поля "Использовать переменную среды" были не упорядочены в диалоговом окне "Задание значения параметра". |
| IntelliSense | Исправлена проблема аварийного завершения в SSMS, которая могла возникать при выполнении запроса. |
| IntelliSense | Исправлена проблема, из-за которой IntelliSense не работал, если пользователь подключался к группе доступности, настроенной для маршрутизации только для чтения. |
| Связанные серверы | Исправлена проблема, из-за которой пользователь с разрешением "УПРАВЛЕНИЕ СЕРВЕРОМ" (но не в роли sysadmin) не мог добавлять связанный сервер. |
| Средство просмотра журнала | Исправлена проблема, из-за которой для пользователя с разрешениями на просмотр состояния сервера было невозможно просмотреть журналы ошибок SQL Server. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/32899204). |
| Обозреватель объектов | Исправлена проблема, из-за которой выбор меню **Запустить PowerShell** на некоторых узлах обозревателя объектов (например, "Управление политиками", "Расширенные события") приводил к неправильному запуску PowerShell. |
| зарегистрированные серверы | Исправлена проблема, из-за которой SSMS аварийно завершал работу при попытке зарегистрировать централизованный сервер управления. |
| зарегистрированные серверы | Исправлена проблема, из-за которой отсутствовали элементы меню для запуска Azure Data Studio с зарегистрированных серверов. |
| Отчеты | Исправлена проблема, из-за которой на панели мониторинга производительности вам не удавалось перейти ко вложенным ссылкам (например, **Дорогостоящие запросы** ). Эта проблема была распространена в большинстве локализованных версий SSMS. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/41454499). |
| Инструкция ShowPlan | Исправлена проблема, приводившая к аварийному завершению работы среды SSMS при использовании узла поиска для поиска текста. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40421650). |
| Инструкция ShowPlan | Добавление суффикса KB в строку подсказки временно предоставляемого буфера памяти |
| Оценка уязвимости | Исправлена проблема, из-за которой SSMS выдавал ошибку при попытке задать базовые показатели в оценке уязвимости. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40578565). |
| Пользовательский интерфейс XEvent | Исправлена ошибка, из-за которой нажатие F1 не приводило к отображению правильной страницы в DOCS. |
| Пользовательский интерфейс XEvent | Исправлен журнал в средстве просмотра XEvent, в котором всплывающая подсказка неправильно отображала текст, закодированный с помощью суррогатных пар. |

#### <a name="known-issues-187"></a>Известные проблемы (в версии 18.7)

| Добавления | Сведения | Обходной путь |
|----------|---------|------------|
| Службы Analysis Services | Ошибка при подключении к службам SSAS через MSMDPUMP.dll. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/40144696). | Недоступно |
| Службы Analysis Services | В редких случаях при использовании установки обновления для открытия редактора DAX после обновления SSMS может возникать ошибка "Объект не задан экземпляром объекта". | Чтобы устранить эту проблему, удалите, а затем переустановите SSMS. |
| Общие ошибки SSMS | В диалоговом окне New Server Audit Specification (Создать спецификацию аудита сервера) может происходить сбой SSMS с ошибкой нарушения прав доступа. | Недоступно |
| Общие ошибки SSMS | Расширения SSMS с использованием объектов SMO должны быть перекомпилированы для нового пакета v161 SMO, предназначенного для среды SSMS. Доступна предварительная версия по адресу https://www.nuget.org/packages/Microsoft.SqlServer.SqlManagementObjects.SSMS/. </br></br> Расширения, скомпилированные для предыдущих версий 160 пакета Microsoft.SqlServer.SqlManagementObjects, по-прежнему будут работать. | Недоступно |
| Службы Integration Services | При импорте пакетов в Integration Services или экспорте из Integration Services, а также при экспорте пакетов из Azure-SSIS Integration Runtime утрачиваются скрипты пакетов, содержащих задачи или компоненты скрипта. Обходное решение. Удалите папку C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\CommonExtensions\MSBuild. | Недоступно |
| Службы Integration Services | Удаленные подключения к службам интеграции могут завершаться ошибкой "Указанная служба не существует как установленная служба" в более новой операционной системе. Обходное решение. В разделах Computer\HKEY_CLASSES_ROOT\AppID и Computer\HKEY_CLASSES_ROOT\WOW6432Node\AppID найдите записи, связанные со службами интеграции, и в этих кустах переименуйте раздел реестра с именем "LocalService" на "LocalService_A" для конкретной версии служб интеграции, которую нужно подключить. | Н/Д |
| Обозреватель объектов | Выпуски SSMS, предшествующие 18.7, имеют критически важное изменение в обозревателе объектов из-за изменений, связанных с механизмом [SQL по запросу для Azure Synapse Analytics](https://docs.microsoft.com/azure/synapse-analytics/sql/on-demand-workspace-overview). | Чтобы продолжить использование обозревателя объектов в SSMS с SQL по запросу для Azure Synapse Analytics, требуется SSMS 18.7 или более поздней версии. |
| Хранилище запросов | При щелчке правой кнопкой мыши на узле в обозревателе объектов для хранилища запросов возникает ошибка. | Доступ к элементам следует осуществлять напрямую, развернув узел и щелкнув правой кнопкой мыши отдельные дочерние параметры. |

### <a name="186"></a>18.6

![загрузить](media/download-icon.png) [Загрузить SSMS 18.6](https://go.microsoft.com/fwlink/?linkid=2146265)

- Номер выпуска: 18.6
- Номер сборки: 15.0.18338.0
- Дата выпуска: 22 июля 2020 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2135491&clcid=0x40a)

#### <a name="whats-new-in-186"></a>Новые возможности версии 18.6

| Изменения | Сведения |
|----------|---------|
| Службы Analysis Services | Обновлено до последней версии клиентских библиотек AS. |
| Аудит | Добавлена поддержка идентификатора действия SENSITIVE_BATCH_COMPLETED_GROUP (строка вместо числа). |
| Аудит | В средство просмотра аудита добавлены следующие поля: affected_rows, response_rows, connection_id, duration_milliseconds и data_sensitivity_information. |
| Классификация данных | Обновлен компонент SSMS для поддержки импорта и экспорта политики, экспортированной с помощью командлетов PowerShell. |
| Импорт неструктурированного файла | Добавлена поддержка файлов фиксированной ширины и обнаружения типов файлов для файлов CSV/TSV, чтобы убедиться, что они анализируются как файлы CSV/TSV соответственно. |
| Службы Integration Services | Добавлена поддержка заданий агента управляемого экземпляра Azure SQL для выполнения пакета служб SSIS из хранилища пакетов в Azure-SSIS IR. |
| Написание скриптов и SMO | Добавлена поддержка динамического маскирования данных в [Azure Synapse Analytics](/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is) (ранее — SQL Azure DW). |
| Написание скриптов и SMO | Добавлена поддержка политики безопасности скриптов в [Azure Synapse Analytics](/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is) (ранее — SQL DW). |

#### <a name="bug-fixes-in-186"></a>Исправления ошибок в версии 18.6

| Добавления | Сведения |
|----------|---------|
| Возможности доступа | Скорректированы цвета границ для специальных возможностей на странице **Общие свойства базы данных** (границы вокруг сетки и поля имени стали темнее для обеспечения контрастности > 3 : 1). |
| Возможности доступа | Добавлена обработка выполнения запроса для обновления экранного диктора (на компьютере должен быть установлен NetFx4.8+). |
| Always Encrypted | Исправлена проблема, когда в диалоговом окне *Новый ключ шифрования столбца* указывается, что параметр CEK не поддерживает анклав, даже если CMK поддерживает анклав. |
| Службы Analysis Services | Исправлена ошибка при просмотре секций Analysis Services, которые могли вызвать необработанное исключение. |
| **Диаграммы базы данных** | Исправлена нерешенная проблема с **диаграммами баз данных** , которая приводила к сбою и повреждению существующих диаграмм и SSMS. Если вы создали или сохранили диаграмму с помощью SSMS 18.0 и 18.5.1 и эта диаграмма включает *текстовую заметку* , вы не сможете открыть такую диаграмму в любой версии SSMS. С помощью этого исправления SSMS 18.6 может открыть и сохранить диаграмму, созданную с помощью SSMS 17.9.1 и более ранних версий. В SSMS 17.9.1 и более ранних версиях также можно открыть диаграмму после ее сохранения в SSMS 18.6. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649). |
| Классификация данных | Исправлена проблема, при которой имя столбца не отображается в области рекомендаций панели классификации данных. |
| Общие ошибки SSMS | Устранена проблема, из-за которой свойства базы данных *Размер* и *Доступное пространство* имеют неверные значения для базы данных SQL Azure (уровень службы "Гипермасштабирование"). |
| Общие ошибки SSMS | Исправлена проблема, из-за которой в свойстве базы данных "Размер" указывается максимальный размер вместо фактического размера базы данных SQL Azure. (Примечание: для DW все равно указывается максимальный размер.) |
| Общие ошибки SSMS | Устранены три распространенных источника зависаний в SSMS. |
| Общие ошибки SSMS | Устранено несколько проблем, связанных с диалоговым окном подключения SSMS, когда *забывались* введенные данные (сервер/пользователь/пароли). См. статьи [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40256401) и [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40015519). |
| Общие ошибки SSMS | Исправлена ошибка в диалоговом окне **Свойства статистики** , где выбран флажок **Обновить статистику для этих столбцов** , когда нажатие кнопки **OK** не дает никакого результата. Статистика не обновляется, и при попытке создать скрипт действия выдается сообщение *Нет действий для включения в скрипт*. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37799992). |
| Общие ошибки SSMS | Исправлены проблемы, связанные с [CVE-2020-1455](https://portal.msrc.microsoft.com/en-US/security-guidance/advisory/CVE-2020-1455). | 
| Импорт и экспорт приложения уровня данных | Исправлена проблема, из-за которой среда SSMS выдавала ошибку при импорте файла BACPAC. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/40229137). |
| Службы Integration Services | Исправлена ошибка, при которой клиенты не могли изменить шаг задания агента SQL Server при использовании SSMS версии 18.4 или более ранней для выполнения пакетов служб SSIS в Управляемом экземпляре Azure SQL. |
| Службы Integration Services | Исправлена ошибка, из-за которой на вкладке **Параметры выполнения** отсутствовал параметр **Использовать 32-разрядную среду выполнения** для выполнения пакета служб SSIS в шаге задания агента SQL для локального сервера SQL Server. |
| Редактор и IntelliSense | Исправлена проблема, из-за которой при выборе "Файл" > "Создать" > "Запрос ядра СУБД" появлялось диалоговое окно с сообщением об ошибке. |
| Обозреватель объектов | Исправлена проблема, из-за которой при щелчке правой кнопкой мыши по узлу таблицы или индекса в обозревателе объектов для базы данных SQL Azure было недоступно *окно свойств*. |
| Обозреватель объектов | Устранена ошибка, из-за которой среда SSMS не могла расширить узел баз данных для главного экземпляра в Azure, если на уровне управления возникала ошибка sys.database_service_objectives. |
| Отчеты | Исправлено несколько стандартных отчетов, которые не работали в Linux. </br></br> Пример Отчет о потреблении памяти завершался ошибкой, похожей на "Недопустимый /var/opt/mssql/log/log_116.trc\log.trc..."). |
| Написание скриптов и SMO | Обновлена логика создания баз данных SQL Azure для использования Gen5_2 в качестве SLO по умолчанию. |
| Пользовательский интерфейс XEvent | Исправлена неустраненная проблема (впервые появилась в SSMS 18.0), где при выборе команды "Сохранить в файл XEL" возникала ошибка. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37695592). |

#### <a name="known-issues-186"></a>Известные проблемы (18.6)

| Добавления | Сведения | Обходной путь |
|----------|---------|------------|
| Службы Analysis Services | Ошибка при подключении к службам SSAS через MSMDPUMP.dll. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/40144696). | Недоступно |
| Общие ошибки SSMS | В диалоговом окне New Server Audit Specification (Создать спецификацию аудита сервера) может происходить сбой SSMS с ошибкой нарушения прав доступа. | Недоступно |
| Общие ошибки SSMS | Расширения SSMS с использованием объектов SMO должны быть перекомпилированы для нового пакета v161 SMO, предназначенного для среды SSMS. Доступна предварительная версия по адресу https://www.nuget.org/packages/Microsoft.SqlServer.SqlManagementObjects.SSMS/. </br></br> Расширения, скомпилированные для предыдущих версий 160 пакета Microsoft.SqlServer.SqlManagementObjects, по-прежнему будут работать. | Недоступно |
| Службы Integration Services | При импорте пакетов в Integration Services или экспорте из Integration Services, а также при экспорте пакетов из Azure-SSIS Integration Runtime утрачиваются скрипты пакетов, содержащих задачи или компоненты скрипта. Обходное решение. Удалите папку C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\CommonExtensions\MSBuild. | Недоступно|
| Службы Integration Services | Удаленные подключения к службам интеграции могут завершаться ошибкой "Указанная служба не существует как установленная служба" в более новой операционной системе. Обходное решение. В разделах Computer\HKEY_CLASSES_ROOT\AppID и Computer\HKEY_CLASSES_ROOT\WOW6432Node\AppID найдите записи, связанные со службами интеграции, и в этих кустах переименуйте раздел реестра с именем "LocalService" на "LocalService_A" для конкретной версии служб интеграции, которую нужно подключить. | Недоступно|

### <a name="1851"></a>18.5.1

![загрузить](media/download-icon.png) [Загрузить SSMS 18.5.1](https://go.microsoft.com/fwlink/?linkid=2132606)

- Номер выпуска: 18.5.1
- Номер сборки: 15.0.18333.0
- Дата выпуска: 9 июня 2020 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2132606&clcid=0x40a)

#### <a name="bug-fixes-in-1851"></a>Исправления ошибок в версии 18.5.1

| Добавления | Сведения |
|----------|---------|
| Службы Analysis Services | Повышение производительности при развертывании списка баз данных при подключении к Azure или серверам Power BI. |
| Службы Analysis Services | Исправлена проблема, при которой при попытке открыть мастер синхронизации баз данных сервера Analysis Services возникала ошибка. |
| Службы Analysis Services | Исправлена проблема, из-за которой пользователям не удавалось запросить SSAS 2017 и более ранние версии с разрешениями на данные ячеек. |
| Общие ошибки SSMS | [Конструктор таблиц — исправлен звуковой сигнал при попытке перейти в сетку конструктора таблиц](https://feedback.azure.com/forums/908035/suggestions/40318435). |

#### <a name="known-issues-1851"></a>Известные проблемы (в версии 18.5.1)

| Добавления | Сведения | Обходной путь |
|----------|---------|------------|
| Общие ошибки SSMS | Существует известная ошибка, связанная со структурой схемы, которая приводит к повреждению существующих схем. Например, вы создаете проект схемы с помощью SSMS 17.9.1, а затем обновляете или сохраняете его с помощью SSMS 18. x, а затем пытаетесь открыть его с помощью 17.9.1. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649). | Недоступно |
| Общие ошибки SSMS | В диалоговом окне New Server Audit Specification (Создать спецификацию аудита сервера) может происходить сбой SSMS с ошибкой нарушения прав доступа. | Недоступно ||
| Написание скриптов и SMO | Расширения SSMS с использованием объектов SMO нужно перекомпилировать для нового пакета v160 SMO. | Недоступно |
| Службы Integration Services | При импорте пакетов в Integration Services или экспорте из Integration Services, а также при экспорте пакетов из Azure-SSIS Integration Runtime утрачиваются скрипты пакетов, содержащих задачи или компоненты скрипта. Инструкции по решению: | Удалите папку C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\CommonExtensions\MSBuild. |

### <a name="185"></a>18.5

![скачать](media/download-icon.png) [Скачать SSMS 18.5](https://go.microsoft.com/fwlink/?linkid=2125901)

- Номер выпуска: 18.5
- Номер сборки: 15.0.18330.0
- Дата выпуска: 7 апреля 2020 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2125901&clcid=0x40a)

#### <a name="whats-new-in-185"></a>Новые возможности версии 18.5

| Изменения | Сведения |
|----------|---------|
| Службы Analysis Services | Добавлена поддержка конечной точки Power BI для сопоставления в Azure Analysis Services. |
| Службы Analysis Services | Profiler: добавлена поддержка определения трассировки Analysis Services 15.1. |
| Классификация данных | Добавлена кнопка в представление результатов сканирования оценки уязвимостей (VA), чтобы исправить правило классификации данных при переходе на панель классификации. |
| Классификация данных | Добавлена поддержка ранга конфиденциальности в Классификации данных. |
| Уровень "Гипермасштабирование" | Добавлена поддержка возможности *Импорт приложения уровня данных* (BACPAC-файла) для гипермасштабирования SQL Azure. |
| Службы Integration Services | Добавлена поддержка выполнения пакета служб SSIS из файловой системы в задании агента Управляемого экземпляра (MI). |
| Службы Integration Services | В программе dtexec с поддержкой Azure стала более удобной для пользователей настройка вызова выполнения пакетов Integration Services (SSIS) в Azure-SSIS Integration Runtime.
| Службы Integration Services | Добавлена поддержка подключения Azure-SSIS Integration Runtime и выполнения пакетов служб SSIS в хранилищах пакетов, а также управление этими пакетами.
| Службы Integration Services | Добавлена поддержка миграции локальных заданий агента SSIS в конвейеры и триггеры ADF.
| Службы Integration Services | Улучшено взаимодействие с пользователем при экспорте проектов SSIS из базы данных SSIS. По сравнению со старым процессом экспорта, который предусматривал загрузку и обновление пакетов в проекте SSIS, новый процесс не зависит от версии и не предполагает загрузку и обновление пакетов в проекте SSIS. Вместо этого пакеты сохраняются в проектах в том виде, в котором они находятся в базе данных SSIS, за исключением случаев изменения уровня защиты на EncryptSensitiveWithUserKey. |
| Написание скриптов и SMO | Добавлено новое свойство DwMaterializedViewDistribution для объекта View. |
| Написание скриптов и SMO | Больше не поддерживаются *функциональные ограничения* (эта предварительная версия функции удалена из SQL Azure и локального SQL Server). |
| Написание скриптов и SMO | Добавлена поддержка *записной книжки* в качестве места назначения для мастера создания скриптов. |
| Написание скриптов и SMO | Добавлена поддержка *SQL по запросу*. |
| Написание скриптов и SMO | [API "Оценка SQL"](../tools/sql-assessment-api/sql-assessment-api-overview.md) — поля Platform, Name и engineEdition теперь могут содержать обычные списки, разделенные запятыми (для *платформ* : \[*Windows* , *Linux*\]), а не только регулярные выражения (для *платформ* : *\/Windows\|Linux\/* ).
| Написание скриптов и SMO | [API "Оценка SQL"](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлено 13 правил оценки. Дополнительные сведения см. на [GitHub](https://github.com/microsoft/sql-server-samples/tree/master/samples/manage/sql-assessment-api). |

#### <a name="bug-fixes-in-185"></a>Исправления ошибок в версии 18.5

| Добавления | Сведения |
|----------|---------|
| Возможности доступа | Мастер "Создание расписания" в Фабрике данных SSIS — исправлена проблема, при которой порядок фокусировки не является логическим в режиме сканирования экранного диктора в мастере *Создание расписания*. |
| Возможности доступа | Мастер базы данных с поддержкой переноса — исправлена проблема, при которой средство чтения с экрана не уведомляет об имени таблицы запроса при предоставлении сведений о таблице. |
| Службы Analysis Services | Исправлено кэшированное подключение при создании скриптов в AS с подключением Azure Active Directory (AAD). |
| Всегда включено | Исправлена ошибка, из-за которой первая база данных, добавленная в группу доступности Always On, не присоединялась правильно.
| Всегда включено | Исправлена проблема, из-за которой при попытке отобразить панель мониторинга при подключении к конечной точке кластера больших данных возникала ошибка. |
| Аудит | Исправлена ошибка, из-за которой работа окна слияния журналов аудита аварийно завершалась, если в корневой папке учетной записи хранения была папка с пустым именем. |
| Аудит | Исправлена проблема, при которой в окне слияния журналов аудита не отображались все серверы, если в корне контейнера слишком много элементов. |
| Классификация данных | Исправлена проблема, при которой мастер *Классификация данных* не открывался при работе с базами данных с большим количеством таблиц. |
| Классификация данных | Теперь мы ввели принудительное использование разных идентификаторов GUID для каждой структуры label/infoType и GUID в процессе проверки. |
| Классификация данных | Процесс классификации в SQL Server 2019 теперь не поддерживается. |
| Классификация данных | Исправлены предыдущие проверочные тесты (добавление ранга, удаление недопустимого свойства *InformationTypes* ) и добавлены новые для первых двух точек. |
| Классификация данных | Кнопка, расположенная над таблицей классифицированных столбцов, теперь минимизирует панель рекомендаций должным образом. |
| Общие ошибки SSMS | Обновлены версии драйверов MSODBC и MSOLEDB. |
| Общие ошибки SSMS | Устранены по крайней мере две распространенных причины зависания и сбоев в SSMS. |
| Общие ошибки SSMS | Устранен еще один случай зависания диалогового окна *Восстановление* при нажатии кнопки обзора. |
| Общие ошибки SSMS | Исправлен *новый графический интерфейс базы данных* для SQL по запросу. |
| Общие ошибки SSMS | Исправлены шаблоны *New External Table...* (Добавить внешнюю таблицу...) и *New External Data Source...* (Добавить внешний источник данных...) для SQL по запросу. |
| Общие ошибки SSMS | Исправлены свойства базы данных, свойства подключения, скрытие отчетов и переименование для SQL по запросу. |
| Общие ошибки SSMS | Always Encrypted. Исправлена ошибка, из-за которой раскрывающийся список имен ключей становится доступным только для чтения при выборе нового ключа с поддержкой анклава. |
| Общие ошибки SSMS | Очищена сетка *параметров свойств базы данных* , в которой отображались две *разных категории*. |
| Общие ошибки SSMS | Исправлена проблема, когда полоса прокрутки появлялась с середины в сетке свойств базы данных. |
| Общие ошибки SSMS | Исправлена проблема, которая приводила к сбою SSMS при открытии SQL Server при подключении к серверу Analysis Services. |
| Общие ошибки SSMS | Диалоговое окно подключения — исправлена проблема, при которой не удавалось снять флажок "Запомнить пароль". |
| Общие ошибки SSMS | Исправлена проблема, при которой учетные данные, связанные с сервером или пользователями, всегда запоминались. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37875172). |
| Общие ошибки SSMS | Исправлена проблема, при которой окна редакторов не обновлялись должным образом. Для этого необходимо было отключить аппаратное ускорение в разделе *Инструменты > Параметры > Среда*. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37474042). |
| Общие ошибки SSMS | Исправлена проблема, при которой проверка подлинности Azure Active Directory не работала через прокси-сервер. |
| Высокое разрешение и масштабирование | Исправлена проблема, из-за которой элементы управления в разделе *Свойства индекса* отображались неправильно (кнопки перекрывали сетку). См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/36030424). |
| Высокое разрешение и масштабирование | Исправлено несколько проблем в диалоговом окне *Свойства базы данных* , когда обрезались элементы управления при отображении на дисплеях с разрешением 4K. |
| Высокое разрешение и масштабирование | Исправлены мастера публикации и подписки для работы с дисплеями с разрешением 4K. |
| Высокое разрешение и масштабирование | Незначительное исправление на новой странице спецификации сервера аудита. |
| Высокое разрешение и масштабирование | Исправлена проблема с отображением мастера высокой доступности на дисплеях с разрешением 4К. |
| Высокое разрешение и масштабирование | Исправлена ошибка, из-за которой пользователь не мог добавить целевой объект в окно Xevent New Session (Новый сеанс Xevent) и Set Session Event Filters (Установка фильтров событий сеанса) в мастере сеансов Xevent при масштабе отображения 125 %. |
| Высокое разрешение и масштабирование | Исправлена ошибка, из-за которой интерфейс *резервного копирования базы данных по URL-адресу* пропадал из поля зрения при масштабировании более 100 %. |
|Импорт неструктурированного файла | Обновлен мастер импорта неструктурированных файлов, позволяющий проверить все на наличие столбца с разрешенными значениями null. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/38027137). |
| Обозреватель объектов | Исправлена ошибка, из-за которой в обозревателе объектов могла отображаться неправильная информация при использовании строк подключения в диалоговом окне подключения. |
| Обозреватель объектов | Исправлена ошибка, из-за которой в обозревателе объектов медленно развертывались таблицы баз данных, если в базе данных есть тысячи таблиц (более 20 000). |
| Пользовательский интерфейс хранилища запросов | Исправлен отчет TRC, в котором количество выполнений (для метрики *времени ожидания* ) вычислялось неправильно в качестве суммы выполнений для каждой отдельной категории ожидания. В случае одного выполнения запроса он будет зарегистрирован для каждой категории ожидания, которую ожидал запрос. Таким образом, если TRC просто суммирует запросы по категории ожидания, увеличивается количество выполнений. На самом деле в пределах категории ожидания значение должно быть максимальным. |
| Пользовательский интерфейс хранилища запросов | Исправлена ошибка, при которой в подробном представлении TRC отображались неправильные данные, когда результирующий набор фильтровался по верхним X результатам. Это происходило, потому что запрос использовал несколько обобщенных табличных выражений, которые затем объединялись для создания окончательного результирующего набора. Если верхние X результатов вставлялись в CTE, иногда удавалось отфильтровывать необходимые строки. Иногда это может приводить к созданию недетерминированного результирующего набора. Исправление заключается в том, чтобы предложение верхних X результатов не отправлялось принудительно в CTE. |
| Пользовательский интерфейс хранилища запросов | Исправлена проблема со сводкой плана как в виде сетки, так и в виде диаграммы, при которой требовалось время ожидания выполнения последнего запроса. Отсутствие этого столбца нарушает запрос. В наборе изменений предусмотрено добавление этого столбца к CTE статистики времени ожидания. |
| Инструкция ShowPlan | В SSMS улучшены возможности отображения оценочного количества строк для операторов с несколькими выполнениями: 1) свойство *Estimated Number of Rows* (предполагаемое количество строк) изменено на Estimated Number of Rows Per Execution (Расчетное число строк для выполнения); 2) добавлено новое свойство *Estimated Number of Rows for All Executions* (Расчетное число строк для всех выполнений); 3) свойство *Фактическое количество строк* изменено на *Actual Number of Rows for All Executions* (Фактическое число строк для всех выполнений). |
| Агент SQL | Исправлена проблема, из-за которой попытка изменить шаг задания Агента SQL приводила к зависанию пользовательского интерфейса SSMS. SSMS теперь позволяет просматривать (с помощью кнопки *Просмотреть* ) файл выходных данных, имя которого токенизировано (по крайней мере в виде простых макросов или токенов, которые поддерживает Агент SQL и которые не определены во время выполнения). Кроме того, служба SSMS не отключает кнопку "Просмотреть", когда пользователь не имеет доступа к файлу (в соответствии с разрешениями SQL). См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/39063124). |
| Агент SQL | Исправлена последовательность вкладок на странице "Шаг задания". |
| Агент SQL | Кнопки "Далее" и "Назад" на странице "Шаг задания" поменяли местами, чтобы они располагались в логическом порядке. |
| Агент SQL | Изменено окно "Расписание заданий", чтобы не обрезался пользовательский интерфейс. |
| Написание скриптов и SMO | Исправлено создание скриптов базы данных для SQL по запросу. |
| Написание скриптов и SMO | Удалено явное приведение SQLVARIANT (недопустимый синтаксис T-SQL для SqlOnDemand), что исправляет создание скриптов для SQL по запросу. |
| Написание скриптов и SMO | Исправлена проблема, при которой пропускался коэффициент FILLFACTOR в индексах для SQL Azure. |
| Написание скриптов и SMO | Исправлена проблема, связанная с созданием скриптов для внешних объектов. |
| Написание скриптов и SMO | Исправлена проблема, из-за которой для *создания скриптов* нельзя было выбрать параметр для расширенных свойств для базы данных SQL. Кроме того, исправлено создание скриптов таких расширенных свойств. |
| Написание скриптов и SMO | [API "Оценка SQL"](../tools/sql-assessment-api/sql-assessment-api-overview.md) — была неправильная ссылка на справку в правиле XTPHashAvgChainBuckets. |
| Пользовательский интерфейс XEvent | Исправлена проблема выбора элемента сетки при наведении указателя мыши. См. статьи [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/38262124) и [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/37873921). |

#### <a name="known-issues-185"></a>Известные проблемы (в версии 18.5)

| Добавления | Сведения | Обходной путь |
|----------|---------|------------|

- Диаграмма базы данных, созданная в среде SSMS, работающей на одном компьютере, не может быть изменена с другого компьютера (это приведет к сбою SSMS). Дополнительные сведения см. в статье 37992649, [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649).

- При импорте пакетов в Integration Services или экспорте из Integration Services, а также при экспорте пакетов из Azure-SSIS Integration Runtime утрачиваются скрипты пакетов, содержащих задачи или компоненты скрипта. Чтобы устранить эту проблему, удалите папку *C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\CommonExtensions\MSBuild*.

- В диалоговом окне New Server Audit Specification (Создать спецификацию аудита сервера) может происходить сбой SSMS с ошибкой нарушения прав доступа.

- Расширения SSMS с использованием объектов SMO должны быть перекомпилированы для нового объекта SMO версии 160 (пакет будет доступен на сайте nuget.org сразу после выпуска SSMS 18.5).

- [Ошибка при подключении к службам SSAS через MSMDPUMP.dll в среде SSMS](https://feedback.azure.com/forums/908035-sql-server/suggestions/40144696-error-when-connecting-to-ssas-via-msmdpump-dll-in).

### <a name="184"></a>18.4

![скачать](media/download-icon.png) [Скачать SSMS 18.4](https://go.microsoft.com/fwlink/?linkid=2108895)

- Номер выпуска: 18.4
- Номер сборки: 15.0.18206.0
- Дата выпуска: 4 ноября 2019 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2108895&clcid=0x40a)

| Изменения | Сведения |
|----------|---------|
| Классификация данных | Добавлена поддержка пользовательской политики защиты информации для классификации данных. |
| Хранилище запросов | В диалоговое окно свойств добавлен параметр *Макс. план на запрос*. |
| Хранилище запросов | Добавлена поддержка новых пользовательских политик сбора данных. |
| Хранилище запросов | В параметры добавлен **режим записи статистики ожидания** в разделе **Свойства базы данных** на странице **Хранилище запросов**. |
| Написание скриптов и SMO | Добавлена поддержка скрипта материализованного представления в хранилище данных SQL. |
| Написание скриптов и SMO | Добавлена поддержка *SQL по запросу*. |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлено 50 правил оценки (подробнее см. на GitHub). |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлены базовые математические выражения и условия сопоставления с правилами. |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлена поддержка объекта RegisteredServer. |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — обновлен способ хранения правил в формате JSON, а также механизм применения переопределений и настроек. |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — обновлены правила поддержки SQL в Linux. |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — обновлен формат набора правил JSON и добавлена версия схемы. |
| Написание скриптов и SMO | [API оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — обновлены выходные данные командлетов для повышения удобства чтения рекомендаций. |
| Профилировщик XEvent | В сеансы профилировщика XEvent добавлено событие *error_reported*. |

#### <a name="bug-fixes-in-184"></a>Исправления ошибок в выпуске 18.4

| Добавления | Сведения |
|----------|---------|
| Службы Analysis Services | Устранена проблема, из-за которой в редакторе скриптов DAX для многомерных баз данных не отображались таблицы в IntelliSense. |
| Службы Analysis Services | Для преобразования в строку подсистемы используйте средство синтаксического анализа DAX. Это относится к международным разделителям, десятичным знакам и пробелам. |
| Always Encrypted | Устранена проблема, из-за которой при *проверке утверждения* *учитывался регистр*. |
| Always Encrypted | Устранена проблема, из-за которой отчеты об ошибках и предупреждения не работали должным образом. |
| Мастер копирования баз данных | Устранены различные проблемы усечения и макета при отображении этого диалогового окна. |
| Общие ошибки SSMS | Устранена давнишняя проблема, из-за которой среда SSMS не учитывала сведения о соединении, передаваемые в командной строке, если при этом также указывались файлы SQL. |
| Общие ошибки SSMS | Устранена ошибка в SSMS, возникавшая при попытке отобразить защищаемые объекты в объектах фильтра репликации. |
| Общие ошибки SSMS | Устранена проблема удаления параметра командной строки -P за счет того, что среда SSMS теперь должна просматривать свой кэш учетных данных: если необходимые учетные данные найдены, для соединения будут использоваться они. |
| Импорт неструктурированного файла | Устранена проблема, из-за которой функция *импорта неструктурированных файлов* обрабатывала текстовые квалификаторы неправильно. |
| Обозреватель объектов | Устранена проблема, из-за которой при удалении базы данных SQL Azure в обозревателе объектов отображалось неверное сообщение. |
| Результаты запроса | Устранена появившаяся в SSMS 18.3.1 ошибка, из-за которой сетки создавались слишком узкими и в конце самой длинной строки в каждом столбце отображалось многоточие ( *...* ). |
| Средства репликации | Устранена проблема, из-за которой приложение выдавало ошибку ("Не удалось загрузить файл или сборку...") при попытке изменить задания Агента SQL. |
| Написание скриптов и SMO | Устранена проблема, из-за которой команда *Создать скрипт для таблицы...* для хранилища данных SQL, в котором использовались параметры сортировки Japanese_BIN2, не работала.|
| Написание скриптов и SMO | Устранена проблема, из-за которой команда ScriptAlter() завершала выполнение инструкций на сервере.|
| Агент SQL | Устранена проблема, из-за которой пользовательский интерфейс оператора агента не обновлял имя оператора, когда его изменяли в пользовательском интерфейсе, и создать для него скрипт было невозможно. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/32897647).|

#### <a name="known-issues-184"></a>Известные проблемы (18.4)

- Диаграмма базы данных, созданная в среде SSMS, работающей на одном компьютере, не может быть изменена с другого компьютера (это приведет к сбою SSMS). Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649).

- При переключении между несколькими окнами запросов возникают проблемы перерисовки. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37474042). Для решения этой проблемы можно отключить аппаратное ускорение в разделе *"Сервис" > "Параметры"* .

В статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server) представлены сведения о других известных проблемах. Там же можно отправить отзыв группе разработчиков.

### <a name="1831"></a>18.3.1

![скачать](media/download-icon.png) [Скачать SSMS 18.3.1](https://go.microsoft.com/fwlink/?linkid=2105412)

- Номер выпуска: 18.3.1
- Номер сборки: 15.0.18183.0
- Дата выпуска: 2 октября 2019 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2105412&clcid=0x40a)

#### <a name="whats-new-in-1831"></a>Новые возможности версии 18.3.1

| Изменения | Сведения |
|----------|---------|
| Классификация данных | Добавление сведений о классификации данных в пользовательский интерфейс свойств столбца ( *Тип информации* , *Идентификатор типа информации* , *Метка конфиденциальности* и *Идентификатор метки конфиденциальности* не отображаются в пользовательском интерфейсе SSMS). |
| Редактор и IntelliSense | Обновлена поддержка возможностей, недавно добавленных в SQL Server 2019 (например, *ALTER SERVER CONFIGURATION* ). |
| Службы Integration Services | Добавлен новый элемент меню выбора `Tools > Migrate to Azure > Configure Azure-enabled DTExec`, который вызывает выполнение пакетов служб SSIS в Azure-SSIS Integration Runtime как действия "Выполнить пакет SSIS" в конвейерах ADF. |
| Написание скриптов и SMO | Добавлена поддержка скриптов для ограничения уникальности хранилища данных SQL Azure. |
| Написание скриптов и SMO | Классификация данных </br> — Добавлена поддержка SQL версии 10 (SQL 2008) и более поздних версий. </br> — Добавлен новый атрибут конфиденциальности "rank" для SQL версии 15 (SQL 2019) и более поздних версий и базы данных SQL Azure. |
| Написание скриптов и SMO | [API Оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлена версия в формат набора правил. |
| Написание скриптов и SMO | [API Оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлены новые проверки. |
| Написание скриптов и SMO | [API Оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — добавлена поддержка управляемого экземпляра SQL Azure. |
| Написание скриптов и SMO | [API Оценки SQL](../tools/sql-assessment-api/sql-assessment-api-overview.md) — обновленное представление командлетов по умолчанию для отображения результатов в виде таблицы. |

#### <a name="bug-fixes-in-1831"></a>Исправления ошибок в выпуске 18.3.1

| Добавления | Сведения |
|----------|---------|
| Службы Analysis Services | Устранение проблемы масштабирования в редакторе запросов многомерных выражений.|
| Службы Analysis Services | Исправлена проблема в пользовательском интерфейсе XEvent, которая не позволяет пользователям создавать новые сеансы. |
| Развертывание базы данных в SQL Azure | Исправлена проблема (в DacFx), которая приводила к тому, что эта функция не работала.|
| Общие ошибки SSMS | Исправлена проблема, которая приводила к сбою SSMS при использовании функции сортировки в средстве просмотра XEvent. |
| Общие ошибки SSMS | Исправлены старые проблемы, из-за которых восстановление базы данных SSMS могло зависать. </br></br> Дополнительные сведения см. в статье с отзывами пользователей SQL Server. </br> [RESTORE DATABASE — выберите устройства резервного копирования, которые замедляют загрузку](https://feedback.azure.com/forums/908035/suggestions/32899099/).  </br> [Среда SSMS 2016 очень медленно работает в диалоговых окнах восстановления базы данных](https://feedback.azure.com/forums/908035/suggestions/32900767/). </br> [Восстановление базы данных выполняется медленно](https://feedback.azure.com/forums/908035/suggestions/32900224/).  </br> [Восстановление базы данных с устройства зависает при нажатии "..."](https://feedback.azure.com/forums/908035/suggestions/34281658/).  |
| Общие ошибки SSMS | Исправлена проблема, из-за которой язык по умолчанию для всех имен входа отображался как арабский. </br></br> Дополнительные сведения см. в статье с отзывами пользователей SQL Server. [В SSMS 18.2 язык по умолчанию отображается с ошибкой](https://feedback.azure.com/forums/908035/suggestions/38236363). |
| Общие ошибки SSMS | Исправлена сложность в обнаружении диалогового окна *Параметры запроса* (когда пользователь щелкает правой кнопкой мыши окно редактора T-SQL); его размер теперь можно менять.|
| Общие ошибки SSMS | Сообщение *Время выполнения* в таблице результатов или файле (появилось в SSMS 18.2) теперь можно настроить в разделе "Сервис" > "Параметры" > "Выполнение запросов" > "SQL Server" > "Дополнительно" > "Показать время выполнения". |
| Общие ошибки SSMS | В диалоговом окне подключения поля *Пароль Active Directory* и *Интегрированная проверка Active Directory* заменены на поля *Пароль Azure Active Directory* и *Интегрированная проверка Azure Active Directory* соответственно. |
| Общие ошибки SSMS | Исправлена проблема, из-за которой пользователи не могли использовать SSMS для настройки аудита на управляемых экземплярах SQL Azure, если они были расположены с отрицательным смещением по UTC. |
| Общие ошибки SSMS | Устранена проблема в пользовательском интерфейсе XEvent, когда наведение указателя мыши на сетку приводило к выделению строк. </br></br> Дополнительные сведения см. в статье с отзывами пользователей SQL Server. [В пользовательском интерфейсе расширенных событий SSMS действия выделяются при наведении указателя](https://feedback.azure.com/forums/908035/suggestions/38262124). |
| Импорт неструктурированного файла | Исправлена проблема, из-за которой при импорте неструктурированного файла не импортировались все данные, путем предоставления пользователю возможности выбрать простое или расширенное обнаружение типов данных.</br></br> Дополнительные сведения см. в статье с отзывами пользователей SQL Server. [Импорт неструктурированного файла SSMS не позволяет импортировать все данные](https://feedback.azure.com/forums/908035/suggestions/38096989). |
| Службы Integration Services | Добавьте новый тип операции *StartNonCatalogExecution* для отчета по операциям служб SSIS.|
| Службы Integration Services | Исправлена проблема в конвейерах фабрики данных Azure, создаваемых служебной программой `DTExec` с поддержкой Azure, для использования правильного типа параметра. (явно для 18.3.1) |
| Написание скриптов и SMO | Исправлена проблема, которая приводила к возникновению ошибок SMO при выборке свойств при использовании **SMO.Server.SetDefaultInitFields(true)** .|
| Пользовательский интерфейс хранилища запросов | Устранена проблема, из-за которой ось Y не масштабировалась при выборе метрики *Счетчик выполнений* в представлении *Отслеженный запрос*. |
| Оценка уязвимости | Отключены очистка и утверждение базовых показателей для баз данных SQL Azure.|

#### <a name="known-issues-1831"></a>Известные проблемы (18.3.1)

- Диаграмма базы данных, созданная в среде SSMS, работающей на одном компьютере, не может быть изменена с другого компьютера (это приведет к сбою SSMS). Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649).

- При переключении между несколькими окнами запросов возникают проблемы перерисовки. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37474042). Для решения этой проблемы можно отключить аппаратное ускорение в разделе "Сервис" > "Параметры".

В статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server) представлены сведения о других известных проблемах. Там же можно отправить отзыв группе разработчиков.

### <a name="182"></a>18.2

![скачать](media/download-icon.png) [Скачать SSMS 18.2](https://go.microsoft.com/fwlink/?linkid=2099720)

- Номер выпуска: 18.2
- Номер сборки: 15.0.18142.0
- Дата выпуска: 25 июля 2019 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2099720&clcid=0x40a)

#### <a name="whats-new-in-182"></a>Новые возможности версии 18.2

| Добавления | Сведения |
|----------|---------|
| Службы Integration Services (SSIS) | Оптимизация производительности для планировщика пакетов служб SSIS в Azure. |
| Редактор и IntelliSense | Добавлена поддержка классификации данных. |
| OPTIMIZE_FOR_SEQUENTIAL_KEY | Добавлена поддержка IntelliSense. |
| OPTIMIZE_FOR_SEQUENTIAL_KEY | Включение оптимизации в ядре СУБД, что позволяет повысить пропускную способность для операций вставки с высокой степенью параллелизма в индекс. Этот параметр предназначен для индексов с состоянием состязания, возникающим при операциях вставки последней страницы (это характерно для индексов с последовательным ключом, включая столбец идентификаторов, последовательность или столбец даты и времени). См. подробности в разделе [CREATE INDEX](../t-sql/statements/create-index-transact-sql.md#sequential-keys). |
| Выполнение запроса или результаты | Добавлено *Время завершения* в сообщениях для отслеживания завершения запросов. |
| Выполнение запроса или результаты | Разрешено отображение дополнительных данных (результат в тексте) и их сохранение в ячейках (результат в сетке). Теперь SSMS допускает до 2 млн символов для обоих вариантов (начиная с 256 и 64 тыс. соответственно). Это также устраняет проблему, из-за которой пользователи не могут получить более 43 680 символов из ячеек сетки. |
| Инструкция ShowPlan | Добавлен новый атрибут в QueryPlan, когда включена [встроенная скалярная функция UDF](../relational-databases/performance/intelligent-query-processing.md#scalar-udf-inlining) (ContainsInlineScalarTsqlUdfs). |
| SMO | Добавлена поддержка *API Оценки SQL*. Дополнительные сведения см. в разделе [SQL Assessment API](../tools/sql-assessment-api/sql-assessment-api-overview.md). |
|  |  |

#### <a name="bug-fixes-in-182"></a>Исправления ошибок в выпуске 18.2

| Добавления | Сведения |
|------------|-------|
| Возможности доступа | Пользовательский интерфейс XEvent (сетка) обновлен: нажатие клавиши F3 вызывает сортировку. |
| Всегда включено | Исправлена проблема, из-за которой среда SSMS выдавала ошибку при попытке удаления группы доступности (AG). |
| Всегда включено | Устранена проблема, из-за которой среда SSMS неправильно отображала мастер отработки отказа, если реплики были настроены как синхронные при использовании групп доступности с масштабированием для чтения (тип кластера = NONE). Теперь в SSMS доступен мастер для параметра Force_Failover_Allow_Data_Loss, единственный допустимый для типа доступности кластера "NONE". |
| Всегда включено | Исправлена проблема, при которой мастер ограничивал количество допустимых синхронизаций до трех. |
| Классификация данных | Исправлена проблема, из-за которой в среде SSMS происходила ошибка *Индекс (от нуля) должен быть не меньше нуля* при попытке просмотра отчетов о классификации данных в базах данных с уровнями совместимости менее 150. |
| Общие ошибки SSMS | Исправлена проблема, при которой пользователь не смог перейти на панель результатов с горизонтальной прокруткой с помощью колесика мыши. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/34145641). |
| Общие ошибки SSMS | Обновлен *монитор активности* для игнорирования благоприятных типов ожидания SQLTRACE_WAIT_ENTRIES. |
| Общие ошибки SSMS | Устранена проблема, из-за которой не сохранялись некоторые параметры цвета *("Текстовый редактор" > "Вкладка редактора и строка состояния")* . См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37924165).
| Общие ошибки SSMS | В диалоговом окне соединения пункт *Azure Active Directory — универсальная с поддержкой MFA* заменен на *Azure Active Directory — универсальная с MFA* (функциональность аналогична, но, надеемся, суть будет яснее). |
| Общие ошибки SSMS | В среде SSMS теперь используются правильные значения по умолчанию при создании базы данных SQL Azure. |
| Общие ошибки SSMS | Исправлена проблема, из-за которой пользователю не удавалось *запустить PowerShell* из узла в окне [Регистрация серверов](register-servers/register-servers.md), если сервер являлся [контейнером SQL Linux](../linux/quickstart-install-connect-docker.md). |
| Импорт неструктурированного файла | Исправлена проблема, из-за которой *импорт неструктурированного файла* не работал после обновления с SSMS 18.0 до 18.1. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37912636). |
| Импорт неструктурированного файла | Исправлена проблема, из-за которой *мастер импорта неструктурированных файлов сообщает о дублировании или неправильном столбце* в CSV-файле с заголовками с символами Юникода. |
| Обозреватель объектов | Устранена проблема, из-за которой некоторые пункты меню (например, *мастер импорта и экспорта* SQL Server) отсутствовали или были отключены при подключении к SQL Express. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37500016). |
| Обозреватель объектов | Устранена проблема, из-за которой в среде SSMS происходил сбой при перетаскивании объекта из обозревателя объектов в редактор. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37887988). |
| Обозреватель объектов | Исправлена проблема, при которой переименование баз данных приводило к тому, что в обозревателе объектов отображались неверные имена баз данных. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37638472). |
| Обозреватель объектов | Устранена давняя проблема, приводившая к возникновению ошибки при попытке развернуть узел *Таблицы* в обозревателе объектов для базы данных, для которой настроено использование параметров сортировки, не поддерживаемых Windows (пользователь не мог развернуть таблицы). Примером таких параметров сортировки может быть Korean_Wansung_Unicode_CI_AS. |
| [Регистрация серверов](register-servers/register-servers.md) | Исправлена проблема, из-за которой при попытке выполнить запрос к нескольким серверам (в *группе* в разделе "Зарегистрированные серверы"), когда зарегистрированный сервер использовал либо *встроенную проверку Active Directory* , либо *универсальную проверку Azure Active Directory с MFA* , происходил сбой, так как SSMS не удавалось подключиться. |
| [Регистрация серверов](register-servers/register-servers.md) | Исправлена проблема, из-за которой при попытке выполнить запрос к нескольким серверам (в *группе* в разделе "Зарегистрированные серверы"), когда зарегистрированный сервер использует либо *проверку пароля Active Directory* , либо *проверку подлинности SQL* подлинности и пользователь решает не сохранять пароль, происходит сбой SSMS. |
| Отчеты | Исправлена проблема в отчетах об *использовании места на диске* , при которой происходит сбой отчета, когда файлы данных имеют большое количество экстентов. |
| Средства репликации | Исправлена проблема, из-за которой монитор репликации не работал с базой данных издателя в группе доступности и распространителем в группе доступности (ранее была исправлена в SSMS 17.x). |
| Агент SQL | Устранена проблема, из-за которой при добавлении, вставке, изменении или удалении шагов задания фокус переносился в первую строку, а не в активную. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/38070892). |
| Написание скриптов и SMO | Исправлена проблема, из-за которой инструкция *CREATE OR ALTER* не приводила к созданию скриптов для объектов, имеющих расширенные свойства. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/37236748). |
| Написание скриптов и SMO | Исправлена проблема, из которой SSMS не удавалось правильно создать скрипт CREATE EXTERNAL LIBRARY. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37868089). |
| Написание скриптов и SMO | Исправлена проблема, из-за которой при попытке *создать скрипты* для базы данных с несколькими тысячами таблиц диалоговое окно прогресса зависает. |
| Написание скриптов и SMO | Устранена проблема, из-за которой не удавалось создавать скрипты для *внешней таблицы* в SQL 2019. |
| Написание скриптов и SMO | Устранена проблема, из-за которой не удавалось создавать скрипты для *внешнего источника данных* в SQL 2019. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/34295080). |
| Написание скриптов и SMO | Устранена проблема, при которой *расширенные свойства* столбцов не вносились в сценарий при выборе базы данных SQL Azure в качестве целевого объекта. Дополнительные сведения см. на сайте [StackOverflow](https://stackoverflow.com/questions/56952337/how-can-i-script-the-descriptions-of-columns-in-ms-sql-server-management-studio). |
| Написание скриптов и SMO | Вставка на последней странице: SMO — добавление свойства *Index.IsOptimizedForSequentialKey*. |
|**Установка SSMS**| **Устранена ошибка, из-за которой программа установки SSMS ошибочно блокировала установку SSMS, сообщая о несоответствующих языках. Проблема могла возникать в некоторых аномальных ситуациях, например при прерванной установке или неправильном удалении предыдущей версии SSMS. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37483594/).** |
| Профилировщик XEvent | Исправлена проблема со сбоем при закрытии средства просмотра. |

#### <a name="known-issues-182"></a>Известные проблемы (18.2)

- Диаграмма базы данных, созданная в среде SSMS, работающей на одном компьютере, не может быть изменена с другого компьютера (это приведет к сбою SSMS). Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649).

- При переключении между несколькими окнами запросов возникают проблемы перерисовки. См. статью [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37474042). Для решения этой проблемы можно отключить аппаратное ускорение в разделе **Сервис** > **Параметры**.

- Существует ограничение на размер данных, отображаемых из результатов SSMS в сетке, тексте или файле.

- При удалении базы данных SQL Azure в обозревателе объектов выдается ошибка, хотя на самом деле удаление завершается успешно.

- В качестве языка по умолчанию для имен входа SQL в диалоговом окне "Свойства имени входа" может отображаться арабский независимо от языка по умолчанию, на самом деле заданного для имени входа. Чтобы узнать фактический язык по умолчанию для данного имени входа, используйте T-SQL для получения значения **default_language_name** из представления **master.sys.server_principles**.

### <a name="181"></a>18.1

![скачать](media/download-icon.png) [Скачать SSMS 18.1](https://go.microsoft.com/fwlink/?linkid=2094583)

- Номер выпуска: 18.1
- Номер сборки: 15.0.18131.0
- Дата выпуска: 11 июня 2019 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x804) | [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x404) | [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x409) | [Французский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x40c) | [Немецкий](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x407) | [Итальянский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x410) | [Японский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x411) | [Корейский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x412) | [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x416) | [Русский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x419) | [Испанский](https://go.microsoft.com/fwlink/?linkid=2094583&clcid=0x40a)

#### <a name="whats-new-in-181"></a>Новые возможности версии 18.1

| Изменения | Сведения |
| :-------| :------|
| Схемы баз данных | [Схемы баз данных были добавлены обратно в SSMS](https://feedback.azure.com/forums/908035/suggestions/37507828).
| SSBDIAGNOSE.EXE |Программа командной строки для диагностики SQL Server возвращена в пакет SSMS.|
| Службы Integration Services (SSIS) | Поддержка планирования пакета служб SSIS, расположенного в каталоге служб SSIS в Azure или в файловой системе, в Azure. Три записи для запуска диалогового окна "Создание расписания": пункт меню *Новое расписание...* , который отображается, если щелкнуть правой кнопкой мыши пакет MSSQL Integration Services в каталоге служб MSSQL Integration Services в Azure; пункт меню *Планирование выполнения пакета MSSQL Integration Services в Azure* в разделе *Миграция в Azure* меню *Сервис* и "Расписание MSSQL Integration Services в Azure", который отображается, если щелкнуть правой кнопкой мыши папку заданий агента SQL Server из управляемого экземпляра SQL Azure.|

#### <a name="bug-fixes-in-181"></a>Исправления ошибок в выпуске 18.1

| Добавления | Сведения |
|---------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Возможности доступа | Улучшенная доступность пользовательского интерфейса для задания агента. |'
| Возможности доступа | Улучшены специальные возможности на странице "Монитор Stretch": добавлено доступное имя для кнопки *Автообновление* , а также интеллектуальное доступное имя, которое поможет пользователям не только узнать, какая кнопка выбрана, но и понять, к чему приведет ее нажатие. |
| Интеграция со средой ADS| Устранена вероятность сбоя в среде SSMS при попытке использования зарегистрированных в ADS серверов.|
| Конструктор баз данных | Добавлена поддержка параметров сортировки Latin1_General_100_BIN2_UTF8 (доступны в SQL Server 2019 CTP3.0). |
| Классификация данных | Запрещено добавление меток чувствительности к столбцам в таблице журнала, что не поддерживается. |
| Классификация данных | Устранена проблема, связанная с неправильной обработкой уровней совместимости (между сервером и базой данных). |
| Конструктор баз данных | Добавлена поддержка параметров сортировки Latin1_General_100_BIN2_UTF8 (доступны в SQL2019 CTP3.0). |
| Общие ошибки SSMS | Устранена проблема с неправильным созданием сценариев для псевдостолбцов в индексе. |
| Общие ошибки SSMS | Устранена проблема на странице "Свойства входа", из-за которой при выборе кнопки *Добавить учетные данные* кнопки могло появиться исключение "Пустая ссылка". |
| Общие ошибки SSMS | Исправлено отображение размера денежного столбца на странице свойств индекса. |
| Общие ошибки SSMS | Исправлена проблема, когда среда SSMS не учитывает параметры Intellisense из меню *Сервис — Параметры* в окне редактора SQL. |
| Общие ошибки SSMS | Устранена проблема, из-за которой среда SSMS не учитывала параметры справки (автономный режим и Интернет). |
| Высокое разрешение | Фиксированный макет элементов управления в диалоговых окнах ошибок для неподдерживаемых параметров запроса. |
| Высокое разрешение | Исправлен макет элементов управления на странице *Новая группа доступности* , который используется в некоторых локализованных версиях SSMS. |
| Высокое разрешение | Фиксированный макет страницы *Создание расписания задания*. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37632094). |
| Импорт неструктурированного файла | Устранена проблема, из-за которой строки могли быть незаметно потеряны во время импорта.|
| Редактор и IntelliSense | Сокращен трафик запросов на основе SMO к базе данных SQL Azure для IntelliSense. |
| Редактор и IntelliSense | Исправлена грамматическая ошибка в подсказке, отображаемой при вводе команды T-SQL для создания записи пользователя. Кроме того, исправлено сообщение об ошибке для устранения неоднозначности между пользователями и именами входа. |
| Средство просмотра журнала | Устранена проблема, из-за которой в SSMS всегда открывался журнал текущего сервера (или агента), даже если дважды щелкнуть старый архив в обозревателе объектов. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37633648). |
| Установка SSMS | Исправлена проблема, которая вызывала ошибку программы установки SSMS, если путь к журналу установки содержит пробелы. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37496110). |
| Установка SSMS | Устранена проблема, когда происходил выход из SSMS сразу после отображения экране-заставки. </br> Дополнительные сведения см. на сайтах: [Отзывы пользователей SQL Server ](https://feedback.azure.com/forums/908035/suggestions/37502512), [SSMS отказывается запускаться](https://dba.stackexchange.com/questions/238609/ssms-refuses-to-start) и [Администраторы баз данных](https://dba.stackexchange.com/questions/237086/sql-server-management-studio-18-wont-open-only-splash-screen-pops-up). |
| Обозреватель объектов | Снято ограничение на включение *запуска PowerShell* при подключении к SQL в Linux. |
| Обозреватель объектов | Исправлена проблема, которая приводила к сбою SSMS при попытке развернуть узел "Группа горизонтального увеличения масштаба PolyBase" (если есть подключение к вычислительному узлу). |
| Обозреватель объектов | Исправлена проблема, при которой *отключенный* пункт меню оставался включен даже после отключения заданного индекса. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37735375). |
| Отчеты | Исправление отчетов выводит GrantedQueryMemory в КБ (отчет панели мониторинга производительности SQL). Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37167289). |
| Отчеты | Улучшенная трассировка блока журнала в сценариях Always On. |
| Инструкция ShowPlan | Добавлен новый элемент showplan *SpillOccurred* для схемы showplan. |
| Инструкция ShowPlan | Добавлены удаленные операции чтения ( *ActualPageServerReads* , *ActualPageServerReadAheads* , *ActualLobPageServerReads* , *ActualLobPageServerReadAheads* ) для схемы showplan. |
| Написание скриптов и SMO | Избегайте запрашивать ограничения границ при создании скриптов для неграфовых таблиц. |
| Написание скриптов и SMO | Снято ограничение классификации конфиденциальности при создании скриптов столбцов с *Классификацией данных*. |
| Написание скриптов и SMO | Устранена проблема, из-за которой команда "Создать сценарий" в графовой таблице вызывала сбой при создании данных. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035-sql-server/suggestions/32898466). |
| Написание скриптов и SMO | Устранена проблема, из-за которой метод EnumObjects() не получал имя схемы для синонима. |
| Написание скриптов и SMO | Устранена проблема в UIConnectionInfo.LoadFromStream(), когда не считывался раздел *AdvancedOptions* , если не был указан пароль. |
| Агент SQL | Исправлена проблема, которая вызывала аварийное завершение SSMS при работе с окном "Свойства задания". Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37164244). |
| Агент SQL | Исправлена проблема, когда кнопка "Просмотреть" в окне *Свойства шага задания* была не всегда включена, что мешало просмотреть вывод шага задания. |
| Пользовательский интерфейс XEvent | Добавлен столбец "Пакет" в списке XEvents для различения событий с одинаковыми именами. |
| Пользовательский интерфейс XEvent | В XEventUI добавлено отсутствующее сопоставление типа класса "ВНЕШНЯЯ БИБЛИОТЕКА". |

#### <a name="known-issues-181"></a>Известные проблемы (18.1)

- При перетаскивании объекта таблицы из обозревателя объектов в редактор запросов может отображаться сообщение об ошибке. Нам известно об этой проблеме, и планируем устранить ее в следующем выпуске.

- После закрытия SSMS 18.1 параметры цвета *Групповые соединения* и *Соединения с одиночным сервером* в разделе "Параметры" -> "Текстовый редактор" -> "Вкладка редактора и строка состояния" -> "Макет и цвета строки состояния" не сохраняются. После повторного открытия SSMS параметры раздела "Макет и цвета строки состояния" возвращаются к значениям по умолчанию (белый цвет).

- Существует ограничение на размер данных, отображаемых из результатов SSMS в сетке, тексте или файле.

- Диаграмма базы данных, созданная в среде SSMS, работающей на одном компьютере, не может быть изменена с другого компьютера (это приведет к сбою SSMS). Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37992649).

### <a name="180"></a>18.0

![скачать](media/download-icon.png) [Скачать SSMS 18.0](https://go.microsoft.com/fwlink/?linkid=2088649)

- Номер выпуска: 18.0  
- Номер сборки: 15.0.18118.0  
- Дата выпуска: 24 апреля 2019 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x804)| [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x404)| [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x409)| [Французский](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x40c)| [Немецкий](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x407)| [Итальянский](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x410)| [Японский](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x411)| [Корейский](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x412)| [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x416)| [Русский](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x419)| [Испанский](https://go.microsoft.com/fwlink/?linkid=2088649&clcid=0x40a)

#### <a name="whats-new-in-180"></a>Новые возможности версии 18.0

| Изменения| Сведения|
| :-------| :------|
|Поддержка для SQL Server 2019|Это первый выпуск SSMS, который полностью *сочетается* с SQL Server 2019 (compatLevel 150).|
|Поддержка для SQL Server 2019|Поддержка "BATCH_STARTED_GROUP" и "BATCH_COMPLETED_GROUP" в SQL Server 2019 и управляемом экземпляре базы данных SQL.|
|Поддержка для SQL Server 2019|SMO: Добавлена поддержка SMO для встраивания определяемых пользователем функций.|
|Поддержка для SQL Server 2019|GraphDB: Добавление флага в showplan для последовательности Graph TC.|
|Поддержка для SQL Server 2019|Always Encrypted: добавлена поддержка для AEv2 и Enclave.|
|Поддержка для SQL Server 2019|Always Encrypted: диалоговое окно соединения имеет новую вкладку "Always Encrypted", когда пользователь нажимает кнопку "Параметры", чтобы включить и настроить поддержку анклава.|
|Более компактный файл SSMS для скачивания.| Текущий размер — примерно 500 МБ, около половины от размера пакета SSMS 17.x.
|SSMS работает на основе изолированной оболочки Visual Studio 2017|Новая оболочка (среда SSMS работает на основе Visual Studio 2017 15.9.11) включает все исправления специальных возможностей, внесенные в SSMS и Visual Studio, а также все новейшие исправления безопасности.|
|Улучшения специальных возможностей SSMS| Мы проделали большую работу, чтобы устранить проблемы со специальными возможностями во всех инструментах (SSMS, DTA и Profiler).|
|Теперь SSMS можно установить в пользовательской папке| Этот параметр доступен из командной строки (удобно для автоматической установки) и пользовательского интерфейса установки. Передайте этот дополнительный аргумент программе SSMS-Setup-ENU.exe:   SSMSInstallRoot=C:\MySSMS18 Новое расположение установки SSMS по умолчанию: %ProgramFiles(x86)%\Microsoft SQL Server Management Studio 18\Common7\IDE\ssms.exe.  Это не означает, что SSMS имеет несколько экземпляров.|
|SSMS допускает установку на языке, отличном от языка операционной системы|Блокировка разных языков установки снята. Например, немецкий SSMS можно установить на французскую версию Windows. Если язык операционной системы не соответствует языку SSMS, пользователю следует изменить язык в разделе **Сервис** > **Параметры** > **Международные настройки** ; в противном случае SSMS будет отображать интерфейс пользователя на английском языке.|
|SSMS больше не использует компоненты совместно с ядром SQL|Были приняты значительные меры, чтобы избежать совместного использования компонентов с ядром SQL, что часто приводило к проблемам с обслуживанием, так как при установке одного решения перезаписывались файлы другого, и наоборот.|
|SSMS требует NetFx 4.7.2 или более поздней версии|Мы обновили минимальное требование с NetFx4.6.1 до NetFx4.7.2. Теперь можно воспользоваться преимуществами новых функциональных возможностей, предоставляемых этой платформой.|
|Возможность переноса параметров SSMS| При запуске SSMS 18 в первый раз пользователю будет предложено перенести параметры из версии 17.x. Файлы настроек пользователя теперь хранятся в виде обычного XML-файла, улучшая мобильность и допуская редактирование.|
|Поддержка высокого разрешения экрана| Поддержка высокого разрешения включена по умолчанию.|
|SSMS поставляется вместе с драйвером Microsoft OLE DB| См. подробности в разделе [Где скачать драйвер Microsoft OLE DB для SQL Server](../connect/oledb/download-oledb-driver-for-sql-server.md).|
|SSMS не поддерживается в Windows 8. Требуется Windows 10 и Windows Server 2016 версии 1607 (10.0.14393) или более поздней|Из-за новой зависимости от NetFx 4.7.2 SSMS 18.0 не устанавливается на Windows 8, более старых версиях Windows 10 и Windows Server 2016. Программа установки SSMS блокирует эти системы. Windows 8.1 по-прежнему поддерживается.|
|Больше SSMS не добавляется в переменную среды PATH|Путь к SSMS.EXE (и средствам в целом) больше не добавляется в общий путь. Пользователи могут добавить его самостоятельно или, в современной версии Windows, использовать меню "Пуск".|
|Идентификаторы пакетов больше не нужны для разработки расширений SSMS| Раньше SSMS выборочно загружала только хорошо известные пакеты, поэтому разработчикам приходилось регистрировать собственные пакеты. Это больше не требуется.|
|Общие ошибки SSMS|Предоставление параметра конфигурации AUTOGROW_ALL_FILES для файловых групп в SSMS.|
|Общие ошибки SSMS|Из графического пользовательского интерфейса SSMS удалены рискованные параметры "использование упрощенных пулов" и "повышение приоритета". Дополнительные сведения см. на странице [сведений о повышении приоритета и его недостатках](https://deep.data.blog/2010/01/26/priority-boost-details-and-why-its-not-recommended/).
|Общие ошибки SSMS|Новые меню и настраиваемые сочетания клавиш для создания файлов: **CTRL+ALT+N**. Сочетание **CTRL+N** по-прежнему создает новый запрос.|
|Общие ошибки SSMS|Диалоговое окно **Новое правило брандмауэра** теперь позволяет пользователю указать имя правила вместо автоматически созданного от лица этого пользователя имени.|
|Общие ошибки SSMS|Усовершенствована функция IntelliSense в редакторе, особенно для T-SQL версии 140 и выше.|
|Общие ошибки SSMS|В пользовательском интерфейсе SSMS добавлена поддержка UTF-8 в диалоговом окне параметров сортировки.|
|Общие ошибки SSMS|Переход на диспетчер учетных данных Windows для паролей MRU в диалоговом окне соединения. Это решает давнюю проблему с ненадежностью сохранения паролей.|
|Общие ошибки SSMS|Улучшена поддержка в системах с несколькими мониторами, которая гарантирует, что дополнительные диалоговые и всплывающие окна будут появляться на нужном мониторе.|
|Общие ошибки SSMS|Предоставлена конфигурация сервера "контрольная сумма резервной копии по умолчанию" на странице параметров базы данных в диалоговом окне "Свойства сервера". Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/08035-sql-server/suggestions/34634974](https://feedback.azure.com/forums/08035-sql-server/suggestions/34634974).|
|Общие ошибки SSMS|Предоставлен параметр "Максимальный размер файлов журнала ошибок" в разделе "Настройка журналов ошибок SQL Server". Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/33624115](https://feedback.azure.com/forums/908035/suggestions/33624115).|
|Общие ошибки SSMS|Добавлен пункт "Миграция в Azure" в меню "Сервис" — мы интегрировали помощник по миграции баз данных и службу Azure Database Migration Service, чтобы предоставить быстрый и удобный доступ для ускорения миграции в Azure.|
|Общие ошибки SSMS|Добавлена логика, предлагающая пользователю зафиксировать открытые транзакции при использовании функции "Изменить подключение".|
|Интеграция с Azure Data Studio|Добавлен пункт меню для запуска или скачивания Azure Data Studio.|
|Интеграция с Azure Data Studio|В обозреватель объектов добавлен пункт меню "Запуск Azure Data Studio".|
|Интеграция с Azure Data Studio|При щелчке правой кнопкой мыши узла базы данных в обозревателе объектов пользователь видит контекстные меню для выполнения запроса или создания записной книжки в Azure Data Studio.|
|Поддержка Azure SQL| Свойства базы данных SLO/Edition/MaxSize теперь принимают пользовательские имена, что облегчает поддержку будущих выпусков базы данных SQL Azure.|
|Поддержка Azure SQL| Добавлена поддержка для номеров SKU виртуальных ядер ("Общего назначения" и "Критически важный для бизнеса"): Gen4_24 и все Gen5.|
|Управляемый экземпляр SQL Azure|Добавлены новые "имена входа Azure AD" как новый тип входа в SMO и SSMS при подключении к управляемым экземплярам SQL Azure.|
|Всегда включено|Повторное хэширование RTO (предполагаемое время восстановления) и RPO (предполагаемая потеря данных) на панели мониторинга SSMS Always On. См. обновленную документацию в [https://docs.microsoft.com/sql/database-engine/availability-groups/windows/monitor-performance-for-always-on-availability-groups](../database-engine/availability-groups/windows/monitor-performance-for-always-on-availability-groups.md).|
|Always Encrypted| Теперь флажок "Включить Always Encrypted" на новой вкладке "Always Encrypted" в диалоговом окне "Соединение с сервером" позволяет легко включить или отключить шифрование Always Encrypted для подключения к базе данных.|
|Always Encrypted с безопасными анклавами.| Добавлено несколько улучшений поддержки Always Encrypted с безопасными анклавами в SQL Server 2019.  Текстовое поле для указания URL-адреса аттестации анклава в диалоговом окне подключения к серверу (новая вкладка Always Encrypted).  Новый флажок в диалоговом окне "Новый главный ключ столбца" для указания, будет ли новый главный ключ столбца разрешать вычисления анклава.  Другие диалоговые окна управления ключами Always Encrypted теперь предоставляют сведения, в каких главных ключах столбца разрешены вычисления анклава.|
|Файлы аудита|Изменен метод проверки подлинности с ключа учетной записи хранения на проверку подлинности на основе Azure AD.|
|Классификация данных| Переупорядочено меню задач классификации данных: добавлено подменю в меню задач базы данных, а также добавлена возможность открыть отчет из меню без предварительного открытия окна классификации данных.|
|Классификация данных|Добавлен новый компонент "Классификация данных" в SMO. Объект столбца теперь предоставляет новые свойства: SensitivityLabelName, SensitivityLabelId, SensitivityInformationTypeName, SensitivityInformationTypeId и IsClassified (только для чтения). См. подробности в разделе [ADD SENSITIVITY CLASSIFICATION (Transact-SQL)](../t-sql/statements/add-sensitivity-classification-transact-sql.md)|
|Классификация данных|Добавлен пункт "Классификационный отчет" в меню "Классификация данных".|
|Классификация данных| Обновлены рекомендации.|
|Повышение уровня совместимости базы данных|Добавлен новый параметр в разделе **_Имя базы данных_ *_ > _* _Задачи_ *_ > _* _Обновление базы данных_ *_. Он запускает новый _* помощник по настройке запросов (QTA)** , который помогает пользователям выполнять следующие действия: сбор базовых показателей производительности перед обновлением уровня совместимости базы данных; переход на требуемый уровень совместимости базы данных;  второй этап сбора данных о производительности для той же нагрузки; обнаружение регрессии рабочих нагрузок и предоставление проверенных рекомендаций по повышению их производительности.  Это похоже на процесс обновления базы данных, описанный в разделе [Сценарии использования хранилища запросов](../relational-databases/performance/query-store-usage-scenarios.md#CEUpgrade), кроме последнего шага — помощник по обновлению не опирается на последнее известное рабочее состояние при выдаче рекомендаций.|
|Мастер приложений уровня данных|Добавлена поддержка импорта и экспорта приложения уровня данных с графовыми таблицами.|
|Мастер импорта неструктурированных файлов|Добавлена логика для уведомления пользователя о том, что импорт мог вызвать переименование столбцов.|
|Службы Integration Services (SSIS)|Добавлена поддержка функций, позволяющих клиентам планировать запуск пакетов SSIS в средах Azure-SSIS IR облака Azure для государственных организаций.|
|Службы Integration Services (SSIS)|При использовании агента SQL управляемого экземпляра SQL Azure через SSMS вы можете настроить диспетчер подключений и параметров на этапе задания агента SSIS.|
|Службы Integration Services (SSIS)|При подключении к базе данных SQL Azure или управляемому экземпляру Azure SQL можно подключиться к *default* как к исходной базе данных.|
|Службы Integration Services (SSIS)|Добавлен новый элемент **Попробуйте службы SSIS в фабрике данных Azure** в узле "Каталоги служб Integration Services", который можно использовать для запуска мастера создания среды выполнения интеграции и быстрого создания среды выполнения интеграции Azure-SSIS.
|Службы Integration Services (SSIS)|Добавлена кнопка **Создать среду выполнения интеграции MSSQL Integration Services** в мастере создания каталога, которую можно использовать для запуска мастера создания среды выполнения интеграции и быстрого создания среды выполнения интеграции Azure-MSSQL Integration Services.|
|Службы Integration Services (SSIS)|Теперь ISDeploymentWizard поддерживает проверку подлинности SQL, встроенную проверку подлинности Azure Active Directory и проверку пароля Azure Active Directory в режиме командной строки.|
|Службы Integration Services (SSIS)|Мастер развертывания теперь поддерживает создание и развертывание для среды выполнения интеграции SSIS в фабрике данных Azure.|
|Скрипты объектов|Добавлены новые элементы меню для CREATE OR ALTER при написании скриптов объектов.|
|Хранилище запросов|Повышена удобочитаемость некоторых отчетов (общее потребление ресурсов) путем добавления разделителя тысяч для чисел, отображаемых на оси Y диаграмм.|
|Хранилище запросов|Добавлен новый отчет "Статистика ожидания запросов".|
|Хранилище запросов|Добавлена метрика "Число выполнений" в представлении "Отслеживаемый запрос".|
|Средства репликации|Добавлена поддержка указания нестандартных портов в мониторе репликации и SSMS.|
|Инструкция ShowPlan|Добавлено фактическое истекшее время, фактическое и предполагаемое количество строк в узле оператора ShowPlan, если они доступны. Благодаря этому изменению фактический план согласуется с планом статистики активных запросов.|
|Инструкция ShowPlan|Изменены подсказки и добавлен комментарий при нажатии на кнопку "Изменить запрос" в ShowPlan, чтобы уведомить пользователя, что ShowPlan может быть усечен ядром SQL, если запрос содержит более 4000 символов.|
|Инструкция ShowPlan|Добавлена логика для отображения оператора Materializer (внешний выбор).|
|Инструкция ShowPlan|Добавлен новый атрибут showplan BatchModeOnRowStoreUsed для быстрой идентификации запросов, использующих функцию пакетного сканирования rowstore. Каждый раз, когда запрос выполняет пакетное сканирование rowstore, новый атрибут (BatchModeOnRowStoreUsed="true") добавляется к элементу StmtSimple.|
|Инструкция ShowPlan|Добавлена поддержка инструкции Showplan для LocalCube RelOp для DW ROLLUP и CUBE.|
|Инструкция ShowPlan|Новый оператор LocalCube для новой агрегатной функции ROLLUP и CUBE в Azure Synapse Analytics.|
|SMO| Расширение поддержки SMO для создания возобновляемого индекса.|
|SMO| Добавлено новое событие для объектов SMO (PropertyMissing), чтобы разработчикам приложений было проще обнаружить проблемы с производительностью SMO.|
|SMO| Доступно новое свойство DefaultBackupChecksum в объекте конфигурации, которое сопоставляется с конфигурацией сервера "backup checksum default".|
|SMO| Предоставлено новое свойство ProductUpdateLevel для объекта Server, которое соответствует уровню обслуживания для используемой версии SQL (например, CU12, RTM и т. д.).|
|SMO| Предоставлено новое свойство LastGoodCheckDbTime для объекта Database, которое соответствует свойству базы данных lastgoodcheckdbtime. Если такое свойство недоступно, возвращается значение по умолчанию 1/1/1900 12:00:00.|
|SMO|Расположение файла RegSrvr.xml (файл конфигурации зарегистрированного сервера) изменено на "%AppData%\Microsoft\SQL Server Management Studio" (без версии, поэтому его можно совместно использовать для разных версий SSMS)|
|SMO|Добавлено облако-свидетель — новый тип кворума и ресурса.|
|SMO|Добавлена поддержка "ограничений ребер" в SMO и SSMS.|
|SMO|Добавлена поддержка каскадного удаления для пограничных ограничений в SMO и SSMS.|
|SMO|Добавлена поддержка разрешений на чтение и запись для классификации данных.|
|Оценка уязвимости| Включено меню задач оценки уязвимостей для хранилища данных SQL Azure.|
|Оценка уязвимости|Изменен набор правил оценки уязвимостей, которые выполняются на управляемом экземпляре SQL Azure, чтобы результаты оценки уязвимостей могли быть согласованы с базой данных SQL Azure.|
|Оценка уязвимости| Оценка уязвимостей теперь поддерживает хранилище данных SQL Azure.|
|Оценка уязвимости|Добавлена новая возможность экспорта результатов сканирования для оценки уязвимостей в Excel.|
|Средство просмотра XEvent|В средство просмотра XEvent в окне показа планов можно вывести дополнительные XEvents.|

#### <a name="bug-fixes-in-180"></a>Исправления ошибок в выпуске 18.0

| Изменения | Сведения|
|----------|--------|
|Сбои и зависания|Исправлен источник распространенных сбоев SSMS, связанный с объектами интерфейса графических устройств.|
|Сбои и зависания|Исправлен частый источник зависаний и снижения производительности при выборе "Скрипт как создать/изменить/удалить" (удалены ненужные операции принесения объектов SMO).|
|Сбои и зависания|Исправлено зависание системы при подключении к базе данных SQL Azure с помощью многофакторной проверки подлинности, если включены трассировки ADAL.|
|Сбои и зависания|Исправлено зависание системы (или предполагаемое зависание) в динамической статистике запросов при вызове из монитора активности (проблема проявлялась при использовании проверки подлинности SQL Server без заданного параметра "Конфиденциальные данные").|
|Сбои и зависания|Устранено зависание системы при выборе "Отчеты" в обозревателе объектов, которое проявлялось в больших задержках при подключении или временной недоступности ресурсов.|
|Сбои и зависания|Исправлено аварийное завершение работы SSMS, которое происходило при попытке использовать центральный сервер управления и серверы SQL Azure. Дополнительные сведения: [Ошибка приложения SSMS 17.5 и аварийное завершение при использовании центрального сервера управления](https://feedback.azure.com/forums/908035/suggestions/33374884) (на английском языке).|
|Сбои и зависания|Исправлено зависание системы в обозревателе объектов за счет оптимизации получения свойства IsFullTextEnabled.|
|Сбои и зависания|Исправлено зависание системы в мастере копирования баз данных за счет отказа от создания ненужных запросов для получения свойств базы данных.|
|Сбои и зависания|Устранена проблема, из-за которой решение SSMS зависает или дает сбой во время редактирования T-SQL.|
|Сбои и зависания|Устранена проблема, где SSMS зависает при редактировании больших сценариев T-SQL.|
|Сбои и зависания|Устранена проблема, которая приводила к нехватке памяти для SSMS при обработке больших наборов данных, возвращаемых запросами.|
|Общие ошибки SSMS|Исправлена проблема, когда ApplicationIntent не передавался при подключении в разделе "Зарегистрированные серверы".|
|Общие ошибки SSMS|Устранена проблема, из-за которой форма пользовательского интерфейса мастера создания сеанса XEvent неправильно отображалась на мониторах с высоким разрешением.|
|Общие ошибки SSMS|Исправлена проблема при попытке импортировать BACPAC-файл.|
|Общие ошибки SSMS|Устранена проблема, из-за которой при попытке отобразить свойства базы данных с FILEGROWTH > 2048GB возникала ошибка арифметического переполнения.|
|Общие ошибки SSMS|Устранена проблема, из-за которой в отчете панели мониторинга производительности указывались ожидания PAGELATCH и PAGEIOLATCH, которые отсутствовали во вложенных отчетах.|
|Общие ошибки SSMS|Очередной цикл обновлений, чтобы гарантировать, что SSMS будет учитывать ситуацию запуска на нескольких мониторах и открывать диалоговое окно на нужном мониторе.|
|Службы Analysis Services|Устранена проблема, при которой обрезались "Расширенные параметры" в пользовательском интерфейсе XEvent AS.|
|Службы Analysis Services|Устранена проблема с выдачей исключения "Файл не найден" при анализе DAX.|
|База данных SQL Azure|Устранена проблема, при которой список баз данных некорректно заполнялся для окна запроса базы данных SQL Azure при подключении к базе данных пользователя в базе данных SQL Azure вместо базы данных master.|
|База данных SQL Azure|Устранена проблема, из-за которой невозможно было добавить темпоральную таблицу в базу данных SQL Azure.|
|База данных SQL Azure|Включен параметр в подменю "Свойства статистики" меню "Статистика" в Azure, так как он полностью поддерживается уже довольно длительное время.|
|Общая поддержка SQL Azure|Исправлены ошибки в элементах управления пользовательского интерфейса Azure, которые мешали пользователю вывести список подписок Azure (если их было более 50). Кроме того, изменена сортировка. Теперь подписки сортируются по имени, а не по идентификатору. Пользователь сталкивался с этим, например, при попытке восстановить резервную копию по URL-адресу.|
|Общая поддержка SQL Azure|Устранена проблема в элементе управления пользовательского интерфейса Azure, связанная с перечислением подписок, при которой возникала ошибка "Индекс вне допустимого диапазона. Должен быть неотрицательным и меньше, чем размер коллекции", если у пользователя не было подписок в некоторых клиентах. Пользователь сталкивался с этим, например, при попытке восстановить резервную копию по URL-адресу.|
|Общая поддержка SQL Azure|Устранена проблема с указанием целей уровня обслуживания в коде, которая усложняла поддержку новых целей уровня обслуживания SQL Azure в SSMS. Теперь пользователь может войти в Azure и разрешить SSMS извлечь все соответствующие данные по целям уровня обслуживания (выпуск и максимальный размер).|
|Поддержка Управляемого экземпляра SQL Azure|Улучшена и усовершенствована поддержка управляемых экземпляров: отключены неподдерживаемые параметры в пользовательском интерфейсе и исправлена опция просмотра журналов аудита для обработки URL-адреса целевого объекта аудита.|
|Поддержка Управляемого экземпляра SQL Azure|Скрипты мастера создания и публикации скриптов не поддерживают предложения CREATE DATABASE.|
|Поддержка Управляемого экземпляра SQL Azure|Можно включить динамическую статистику запросов для управляемых экземпляров.|
|Поддержка Управляемого экземпляра SQL Azure|Раздел "Свойства базы данных -> Файлы" неправильно создавал скрипты для ALTER DB ADD FILE.|
|Поддержка Управляемого экземпляра SQL Azure|Исправлена регрессия с планировщиком агента SQL, где планирование ONIDLE выбиралось даже при выборе другого типа планирования.|
|Поддержка Управляемого экземпляра SQL Azure|Настройка MAXTRANSFERRATE, MAXBLOCKSIZE для резервного копирования в службе хранилища Azure.|
|Поддержка Управляемого экземпляра SQL Azure|Проблема, при которой резервная копия заключительного фрагмента журнала записывалась в скрипт перед выполнением операции RESTORE (не поддерживается в командной строке).|
|Поддержка Управляемого экземпляра SQL Azure|Мастер создания базы данных неверно записывал в скрипт инструкцию CREATE DATABASE.|
|Поддержка Управляемого экземпляра SQL Azure|Специальная обработка пакетов MSSQL Integration Services в среде SSMS при подключении к управляемым экземплярам.|
|Поддержка Управляемого экземпляра SQL Azure|Устранена проблема, из-за которой отображалась ошибка при попытке использовать монитор активности при подключении к управляемым экземплярам.|
|Поддержка Управляемого экземпляра SQL Azure|Улучшена поддержка учетных данных Azure AD (в обозревателе SSMS).|
|Поддержка Управляемого экземпляра SQL Azure|Улучшено написание скриптов для объектов файловых групп SMO.|
|Поддержка Управляемого экземпляра SQL Azure|Улучшен пользовательский интерфейс для учетных данных.|
|Поддержка Управляемого экземпляра SQL Azure|Добавлена поддержка логической репликации.|
|Поддержка Управляемого экземпляра SQL Azure|Устранена проблема, которая вызывала сбой при щелчке правой кнопкой мыши по базе данных и выборе команды "Импорт приложения уровня данных".|
|Поддержка Управляемого экземпляра SQL Azure|Устранена проблема, которая вызывала появление ошибок при щелчке правой кнопкой мыши по TempDB.|
|Поддержка Управляемого экземпляра SQL Azure|Устранена проблема при создании скрипта инструкции ALTER DB ADD FILE в объектах SMO, из-за которой созданный скрипт T-SQL мог быть пустым.|
|Поддержка Управляемого экземпляра SQL Azure|Улучшено отображение свойств, относящихся к серверу управляемых экземпляров (поколение оборудования, уровень служб, используемое и зарезервированное хранилище).|
|Поддержка Управляемого экземпляра SQL Azure|Устранена проблема, при которой создание скриптов базы данных ("Сценарий как CREATE...") не приводило к добавлению в скрипт дополнительных файловых групп и файлов. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/37326799](https://feedback.azure.com/forums/908035/suggestions/37326799). |
|Резервное копирование, восстановление, присоединение и отсоединение базы данных|Устранена проблема, при которой пользователю не удавалось присоединить базу данных, если имя физического MDF-файла не совпадало с исходным именем файла.|
|Резервное копирование, восстановление, присоединение и отсоединение базы данных|Устранена проблема, из-за которой среда SSMS не находила допустимый план восстановления или находила неоптимальный. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32897752](https://feedback.azure.com/forums/908035-sql-server/suggestions/32897752). |
|Резервное копирование, восстановление, присоединение и отсоединение базы данных|Устранена проблема, когда в мастере подключения баз данных не отображались переименованные вторичные файлы. Теперь файл отображается с комментарием (например, "Не найдено"). Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/32897434](https://feedback.azure.com/forums/908035/suggestions/32897434). |
|Мастер копирования баз данных|Когда мастер создания скриптов, переноса или копирования базы данных мастер пытается создать таблицу в таблице в памяти, это не приводит к принудительному включению ansi_padding.|
|Мастер копирования баз данных|В SQL Server 2017 и SQL Server 2019 мастер создания скриптов, переноса или копирования базы данных работает неправильно.|""
|Мастер копирования баз данных|Таблица скрипта мастера создания скриптов, переноса или копирования базы данных создается до создания связанного внешнего источника данных.|
|Диалоговое окно подключения|Включено удаление имен пользователей из предыдущего списка имен пользователей с помощью клавиши DEL. Дополнительные сведения см. в разделе [Разрешить удаление пользователей из окна входа в систему SSMS ](https://feedback.azure.com/forums/908035/suggestions/32897632).|
|Мастер импорта приложений уровня данных|Устранена проблема, когда мастер импорта приложений уровня данных не работал при подключении с помощью Azure Active Directory (Azure AD).|
|Классификация данных|Исправлена проблема с сохранением классификаций на панели классификации данных, когда имеются другие открытые панели классификации данных в других базах данных.|
|Мастер приложений уровня данных|Устранена проблема, из-за которой пользователю не удавалось импортировать приложение уровня данных (.dacpac) вследствие ограниченного доступа к серверу (например, при отсутствии доступа ко всем базам данных на сервере).|
|Мастер приложений уровня данных|Устранена проблема, из-за которой импорт выполнялся крайне медленно, когда на одном сервере SQL Azure было размещено много баз данных.|
|Внешние таблицы|Добавлена поддержка Rejected_Row_Location в шаблон, SMO, IntelliSense и таблицы свойств.|
|Мастер импорта неструктурированных файлов|Устранена проблема, при которой мастер импорта неструктурированных файлов некорректно обрабатывал двойные кавычки (экранирование). Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/32897998](https://feedback.azure.com/forums/908035/suggestions/32897998). |
|Мастер импорта неструктурированных файлов|Исправлена проблема, связанная с неправильной обработкой типов с плавающей запятой (в языковых стандартах, которые используют другой разделитель для чисел с плавающей запятой).|
|Мастер импорта неструктурированных файлов|Исправлена проблема, связанная с импортом битов, если значения равны 0 или 1. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32898535](https://feedback.azure.com/forums/908035-sql-server/suggestions/32898535). |
|Мастер импорта неструктурированных файлов|Устранена проблема, из-за которой *числа с плавающей точкой* вводились как значения *NULL*.|
|Мастер импорта неструктурированных файлов|Устранена проблема, при которой мастер импорта не мог обрабатывать отрицательные десятичные значения.|
|Мастер импорта неструктурированных файлов|Устранена проблема, когда мастеру не удавалось импортировать данные из CSV-файлов с одним столбцом.|
|Мастер импорта неструктурированных файлов|Исправлена проблема, из-за которой функция импорта неструктурированного файла не позволяла изменить целевую таблицу, если она уже существовала. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32896186](https://feedback.azure.com/forums/908035-sql-server/suggestions/32896186). |
|Окно справки|Улучшена логика, учитывающая режимы работы в сети и автономной работы (однако еще может остаться несколько проблем, требующих исправления).|
|Окно справки|Исправлена функция справки, которая теперь учитывает подключенный и автономный режимы. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32897791](https://feedback.azure.com/forums/908035-sql-server/suggestions/32897791). |
|Высокий уровень доступности и аварийное восстановление<BR> Группы доступности|Устранена проблема, при которой роли в мастере групп доступности отработки отказа всегда отображаются как "Разрешается".|
|Высокий уровень доступности и аварийное восстановление<BR> Группы доступности|Устранена проблема с неполным отображением предупреждений в панели мониторинга групп доступности SSMS.|
|Службы Integration Services|Устранена проблема параллельной установки, из-за которой мастеру развертывания не удавалось подключиться к SQL Server, если на одном компьютере были установлены SQL Server 2019 и SSMS 18.0.|
|Службы Integration Services|Устранена проблема, когда невозможно изменить задачу плана обслуживания при его разработке.|
|Службы Integration Services|Устранена проблема, из-за которой мастер развертывания зависал при переименовании развертываемого проекта.|
|Службы Integration Services|В компоненте планирования Azure-SSIS IR включены параметры среды.|
|Службы Integration Services|Устранена проблема, когда мастер создания среды выполнения интеграции SSIS перестает отвечать, если клиентская учетная запись относится к нескольким клиентам.|
|Монитор активности заданий|Исправлена проблема сбоев при использовании монитора активности заданий (с фильтрами).|
|Обозреватель объектов|Устранена проблема, из-за которой при попытке развернуть узел "Управление" в обозревателе объектов в SSMS возникало исключение "Невозможно привести объект типа DBNull к другим типам" (неправильно настроенный DataCollector).|
|Обозреватель объектов|Исправлена проблема, при которой обозреватель объектов не вставлял escape-символ для кавычек до вызова "Редактировать верхние N...", вызывая путаницу.|
|Обозреватель объектов|Исправлена проблема, при которой мастер импорта приложения уровня данных не запускался из дерева службы хранилища Azure.|
|Обозреватель объектов|Исправлена проблема в конфигурации Database Mail, при которой состояние флажка TLS/SSL не сохранялось. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32895541](https://feedback.azure.com/forums/908035-sql-server/suggestions/32895541). |
|Обозреватель объектов|Исправлена проблема, при которой в SSMS была неактивна опция закрытия существующих соединений при попытке восстановить базу данных с помощью is_auto_update_stats_async_on.|
|Обозреватель объектов|Устранена проблема, из-за которой при щелчке правой кнопкой мыши по узлам в обозревателе объектов (например, "Таблицы") и попытке выполнить какое-либо действие, например отфильтровать таблицы в меню "Фильтр" > "Параметры фильтра", форма параметров фильтра могла появиться на другом экране — не на том, где активна среда SSMS. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/34284106](https://feedback.azure.com/forums/908035-sql-server/suggestions/34284106). |
|Обозреватель объектов|Исправлена давняя проблема, при которой клавиша DELETE не работала в обозревателе объектов при попытке переименовать объект. Дополнительные сведения см. на страницах [https://feedback.azure.com/forums/908035-sql-server/suggestions/33073510](https://feedback.azure.com/forums/908035-sql-server/suggestions/33073510), [https://feedback.azure.com/forums/908035/suggestions/32910247](https://feedback.azure.com/forums/908035/suggestions/32910247) и в других повторяющихся разделах.|
|Обозреватель объектов|При отображении свойств существующих файлов базы данных размер отображается в столбце "Размер (МБ)", а не "Начальный размер (МБ)", который должен отображаться при создании базы данных. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32629024](https://feedback.azure.com/forums/908035-sql-server/suggestions/32629024). |
|Обозреватель объектов|Отключен элемент контекстного меню "Дизайн" в таблицах графов, так как этот тип таблицы не поддерживается в текущей версии SSMS.|
|Обозреватель объектов|Устранена проблема некорректного отображения диалогового окна "Создание расписания задания" на мониторах с высоким разрешением. Дополнительные сведения см. в разделе [https://feedback.azure.com/admin/v3/suggestions/35541262](https://feedback.azure.com/admin/v3/suggestions/35541262). |
|Обозреватель объектов|Исправлен способ отображения размера базы данных ("Размер (МБ)") в сведениях обозревателя объектов: используется всего 2 десятичных разряда и применяется форматирование с помощью разделителя групп разрядов. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/34379308](https://feedback.azure.com/forums/908035/suggestions/34379308).|
|Обозреватель объектов|Устранена проблема, которая вызывала сбой создания пространственного индекса с ошибкой вида "Чтобы выполнить это действие, задайте свойство PartitionScheme".|
|Обозреватель объектов|Немного улучшена работа обозревателя объектов, чтобы он по возможности не выдавал лишних запросов.|
|Обозреватель объектов|Расширена логика для запроса подтверждения при переименовании базы данных для всех объектов схемы (параметр можно настроить).|
|Обозреватель объектов|Добавлена поддержка надлежащего экранирования при фильтрации в обозревателе объектов. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/36678803](https://feedback.azure.com/forums/908035/suggestions/36678803). |
|Обозреватель объектов|Исправлено и улучшено представление сведений обозревателя объектов для отображения чисел с правильными разделителями. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/32900944](https://feedback.azure.com/forums/908035/suggestions/32900944). |
|Обозреватель объектов|Исправлено контекстное меню в узле "Таблицы" при подключении к SQL Express, где отсутствовала выноска "Создать", неправильно указывались таблицы графов и отсутствовала таблица с системным управлением версиями. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/37245529](https://feedback.azure.com/forums/908035/suggestions/37245529). |
|Скрипты объектов|Общее повышение производительности — создание скриптов WideWorldImporters теперь происходит в два раза быстрее по сравнению с SSMS 17.7.|
|Скрипты объектов|При создании сценариев для объектов опускается конфигурации уровня базы данных, которая имеет значения по умолчанию.|
|Скрипты объектов|Не создается динамический T-SQL при создании скрипта. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32898391](https://feedback.azure.com/forums/908035-sql-server/suggestions/32898391). |
|Скрипты объектов|Опускается синтаксис графа "как граница" и "как узел" при создании скрипта для таблицы в SQL Server 2016 и более ранних версий.|
|Скрипты объектов|Устранена проблема, когда возникал сбой написания скриптов для объектов базы данных при подключении к базе данных SQL Azure посредством Azure AD с MFA.|
|Скрипты объектов|Исправлена проблема, при которой попытка создать скрипт для пространственного индекса с использованием GEOMETRY_AUTO_GRID или GEOGRAPHY_AUTO_GRID в базе данных SQL Azure возникала ошибка.|
|Скрипты объектов|Устранена проблема, которая приводила к тому, что в ходе создания скриптов базы данных (из базы данных SQL Azure) целевым всегда выбирался локальный экземпляр SQL Server, даже если параметры создания скриптов обозревателя объектов соответствовали источнику.|
|Скрипты объектов|Устранена проблема, когда при попытке создать скрипт таблицы базы данных в хранилище данных SQL с использованием кластеризованных и некластеризованных индексов создавались неверные инструкции T-SQL.|
|Скрипты объектов|Устранена проблема, когда при попытке создать скрипт таблицы базы данных в хранилище данных SQL с использованием обычных кластеризованных индексов и кластеризованных индексов columnstore создавались неверные (дублирующиеся) инструкции T-SQL.|
|Скрипты объектов|Исправлено создание сценариев секционированных таблиц без значений диапазона (в базах данных хранилища данных SQL).|
|Скрипты объектов|Устранена проблема, при которой пользователь не мог создать скрипт аудита или спецификации аудита SERVER_PERMISSION_CHANGE_GROUP.|
|Скрипты объектов|Устранена проблема, когда пользователь не мог внести в скрипт статистику из хранилища данных SQL. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32897296](https://feedback.azure.com/forums/908035-sql-server/suggestions/32897296). |
|Скрипты объектов|Устранена проблема, когда мастер формирования скриптов показывал ошибки скриптов в таблице, если параметр "Продолжить выполнение сценария при ошибке" имел значение false.|
|Скрипты объектов|Улучшено создание скриптов в SQL Server 2019.|
|Profiler|В Profiler добавлено событие "Aggregate Table Rewrite Query" (Запрос на перезапись агрегатных таблиц).|
|Хранилище запросов|Устранена проблема, когда могло быть выдано исключение "DocumentFrame (SQLEditors)".|
|Хранилище запросов|Устранена проблема, когда при попытке задать настраиваемый интервал времени во встроенных отчетах хранилища запросов пользователь не мог указать период до полудня или после полудня для начального или конечного интервала.|
|Сетка результатов|Исправлена проблема в режиме высокой контрастности (выбранные номера строк не отображаются).|
|Сетка результатов|Устранена проблема, которая приводила к возникновению исключения "Индекс вне диапазона" при щелчке по сетке.|
|Сетка результатов|Устранена проблема, из-за которой игнорировался цвет фона для результата в сетке. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/32895916](https://feedback.azure.com/forums/908035/suggestions/32895916). |
|Инструкция ShowPlan|Новые свойства оператора предоставления памяти отображаются неправильно, если имеется больше одного потока.|
|Инструкция ShowPlan|Добавлены следующие 4 атрибута в RunTimeCountersPerThread действительного плана выполнения XML: HpcRowCount (количество строк, обработанных устройством *hpc* ), HpcKernelElapsedUs (истекшее время ожидания для выполняемого ядра), HpcHostToDeviceBytes (количество байтов, переданных из узла на устройство) и HpcDeviceToHostBytes (количество байтов, переданных с устройства в узел).|
|Инструкция ShowPlan|Устранена проблема, где аналогичные узлы плана выделяются в неправильном расположении.|
|SMO|Устранена проблема, из-за которой SMO/ServerConnection некорректно обрабатывал подключения на основе SqlCredential. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/33698941](https://feedback.azure.com/forums/908035-sql-server/suggestions/33698941). |
|SMO|Исправлена проблема, при которой в приложении, написанном с использованием SMO, возникала ошибка, если оно пыталось перечислить базы данных с одного сервера в нескольких потоках даже при использовании отдельных экземпляров SqlConnection в каждом потоке.|
|SMO|Исправлены проблемы со снижением производительности в операциях передачи из внешних таблиц.|
|SMO|Устранена проблема в потокобезопасности ServerConnection, которая вызывала в SMO утечку экземпляров SqlConnection при выборе Azure.|
|SMO|Устранена проблема, вызывавшая ошибку StringBuilder.FormatError при попытке восстановить базу данных, в имени которой использовались фигурные скобки.|
|SMO|Устранена проблема, из-за которой для всех баз данных Azure в SMO по умолчанию использовались параметры сортировки без учета регистра для всех сравнений строк вместо параметров сортировки, заданных для базы данных.|
|Редактор SSMS|Устранена проблема в системной таблице SQL, из-за которой после восстановления цветов по умолчанию цвет менялся на травяной вместо зеленого, что затрудняло чтение на белом фоне. Дополнительные сведения см. в разделе [Восстановление неправильного цвета по умолчанию для системной таблицы SQL](https://feedback.azure.com/forums/908035-sql-server/suggestions/32896906). Проблема будет повторяться в локализованных версиях SSMS.|
|Редактор SSMS|Устранена проблема, при которой IntelliSense не работал при подключении к хранилищу данных Azure SQLDW с использованием проверки подлинности Azure Active Directory (Azure AD).|
|Редактор SSMS|Исправлена проблема IntelliSense в Azure, когда у пользователя не было доступа к базе данных **master**.|
|Редактор SSMS|Исправлены фрагменты кода для создания темпоральных таблиц, которые не работали, когда параметры сортировки целевой базы данных зависели от регистра.|
|Редактор SSMS|Новая функция TRANSLATE теперь распознается технологией IntelliSense. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32898430](https://feedback.azure.com/forums/908035-sql-server/suggestions/32898430). |
|Редактор SSMS|Усовершенствованная поддержка в IntelliSense встроенной функции FORMAT. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32898676](https://feedback.azure.com/forums/908035-sql-server/suggestions/32898676). |
|Редактор SSMS|LAG и LEAD теперь распознается как встроенные функции. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035-sql-server/suggestions/32898757](https://feedback.azure.com/forums/908035-sql-server/suggestions/32898757). |
|Редактор SSMS|Исправлена проблема, при которой IntelliSense выдавала предупреждение при использовании "ALTER TABLE...ADD CONSTRAINT...WITH(ONLINE=ON)".|
|Редактор SSMS|Устранена проблема, из-за которой некоторые системные представления и функции с табличными значениями неправильно выделялись цветом.|
|Редактор SSMS|Устранена проблема, где щелчок вкладки редактора может привести к закрытию вкладки вместо получения фокуса. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/37291114](https://feedback.azure.com/forums/908035/suggestions/37291114). |
|Параметры SSMS|Исправлена проблема, при которой страница **Сервис** > **Параметры** > **Обозреватель объектов SQL Server** > **Команды** некорректно изменяла размер.|
|Параметры SSMS|Теперь SSMS по умолчанию отключает автоматическое скачивание DTD в редакторе XMLA, а сам редактор скриптов XMLA (использующий языковую службу XML) по умолчанию блокирует автоматическое скачивание DTD для потенциально вредоносных XMLA-файлов. Для управления этим поведением можно отключить параметр "Автоматически загружать DTD и схемы" в меню **Сервис** > **Параметры** > **Среда** > **Текстовый редактор** > **XML** > **Разное**.|
|Параметры SSMS|Восстановлено сочетание клавиш **CTRL+D** , использовавшееся в прежней версии SSMS. Дополнительные сведения см. в разделе [https://feedback.azure.com/forums/908035/suggestions/35544754](https://feedback.azure.com/forums/908035/suggestions/35544754). |
|конструктор таблиц|Исправлен сбой в функции "Изменить 200 строк".|
|конструктор таблиц|Устранена проблема, при которой конструктор позволял добавлять таблицу при подключении к базе данных SQL Azure.|
|Оценка уязвимости|Устранена проблема, из-за которой результаты проверки загружались некорректно.|
|XEvent|Добавлены два столбца action_name и class_type_desc, показывающие поля идентификатора действия и типа класса в виде читаемых строк.|
|XEvent|Удалено ограничение средства просмотра событий XEvent, которое составляло 1 000 000.|
|Профилировщик XEvent|Устранена проблема, при которой профилировщик XEvent не мог запуститься при подключении к SQL Server с 96 ядрами.|
|Средство просмотра XEvent|Устранена проблема, когда средство просмотра XEvent аварийно завершало работу при попытке сгруппировать события с помощью функций панели инструментов для расширенных событий.|

#### <a name="deprecated-and-removed-features-in-180"></a>Нерекомендуемые и удаленные функции в версии 18.0

Ниже приведены устаревшие и удаленные компоненты SSMS версии 18.0.

- Отладчик T-SQL.
- Диаграммы базы данных.
- Следующие средства больше не устанавливаются в составе SSMS:
  - OSQL.EXE
  - DReplay.exe
  - SQLdiag.exe
  - SSBDiagnose.exe
  - bcp.exe
  - sqlcmd.exe
- Средства Configuration Manager:
  - Диспетчер конфигурации SQL Server и диспетчер конфигурации сервера отчетов больше не являются частью установки SSMS.
- Стандартные политики DMF
  - Эти политики больше не устанавливаются вместе со средой SSMS. Они перемещены в Git. Пользователи могут скачивать и устанавливать их или что-то в них добавлять по желанию.
- Удален параметр командной строки SSMS "-P".
  - По соображениям безопасности удалена возможность указания открытых паролей в командной строке.
- Удалена команда "Создание скриптов > Опубликовать в веб-службе".
  - Эта нерекомендуемая функция удалена из пользовательского интерфейса SSMS.
- Удален узел "Обслуживание > Прежние версии" в обозревателе объектов.
  - Старые узлы "План обслуживания базы данных" и SQL Mail больше не доступны. Современные узлы Database Mail и "Планы обслуживания" продолжают работать в обычном режиме.

#### <a name="known-issues-180"></a>Известные проблемы (18.0)

- Могут возникнуть проблемы с установкой версии 18.0, при которых не удается запустить SQL Server Management Studio. Если вы столкнетесь с этой проблемой, выполните действия из статьи [SSMS2018 — установлена, но не запускается](https://feedback.azure.com/forums/908035-sql-server/suggestions/37502512-ssms2018-installed-but-will-not-run).

- Существует ограничение на размер данных, отображаемых из результатов SSMS в сетке, тексте или файле.

- При переключении между несколькими окнами запросов возникают проблемы перерисовки. Дополнительные сведения см. в статье [Отзывы пользователей SQL Server](https://feedback.azure.com/forums/908035/suggestions/37474042). Для решения этой проблемы можно отключить аппаратное ускорение в разделе "Сервис" > "Параметры".

### <a name="1791"></a>17.9.1

![скачать](media/download-icon.png) [Скачать SSMS 17.9.1](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x409)

- Номер выпуска: 17.9.1
- Номер сборки: 14.0.17289.0
- Дата выпуска: 21 ноября 2018 г.

#### <a name="bug-fixes-in-1791"></a>Исправления ошибок в выпуске 17.9.1

- Устранена проблема, из-за которой при использовании проверки подлинности "Azure Active Directory — универсальная с поддержкой MFA" в редакторе SQL-запросов пользователи могли столкнуться с прерыванием и повторной установкой подключения при каждом вызове запроса. Побочные эффекты закрытия соединения включают неожиданное удаление глобальных временных таблиц и иногда присвоение нового идентификатора SPID для соединения.
- Устранена давняя проблема, при которой план восстановления не может найти план восстановления или создает неэффективный план восстановления при определенных условиях.
- Устранена проблема в мастере импорта приложения уровня данных, которая могла вызывать ошибку при подключении к базе данных SQL Azure.

> [!NOTE]
> При установке на следующие платформы для использования неанглоязычных локализованных выпусков SSMS 17.x требуется [обновление для системы безопасности KB 2862966](https://support.microsoft.com/kb/2862966): Windows 8, Windows 7, Windows Server 2012 и Windows Server 2008 R2.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x804)| [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x404)| [Английский (США)](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x409)| [Французский](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x40c)| [Немецкий](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x407)| [Итальянский](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x410)| [Японский](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x411)| [Корейский](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x412)| [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x416)| [Русский](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x419)| [Испанский](https://go.microsoft.com/fwlink/?linkid=2043154&clcid=0x40a)

#### <a name="uninstall-and-reinstall-ssms-17x"></a>Удаление и повторная установка SSMS 17.x

Если в SSMS возникают проблемы, которые не удается устранить посредством удаления и повторной установки, попробуйте [восстановить](https://support.microsoft.com/help/4028054/windows-10-repair-or-remove-programs) Visual Studio 2015 IsoShell. Если восстановление Visual Studio 2015 IsoShell не помогло решить проблему, выполните следующие действия, которые помогут устранить ряд различных проблем:

1. Удалите SSMS так же, как обычное приложение (в разделе *Приложения и компоненты* , *Программы и компоненты* в зависимости от вашей версии Windows).

2. Удалите Visual Studio 2015 IsoShell **из командной строки с повышенными привилегиями** :

    ```PUSHD "C:\ProgramData\Package Cache\FE948F0DAB52EB8CB5A740A77D8934B9E1A8E301\redist"```

    ```vs_isoshell.exe /Uninstall /Force /PromptRestart```

3. Удалите распространяемый пакет Microsoft Visual C++ 2015 так же, как обычное приложение. Если на вашем компьютере есть обе версии x86 и x64, удалите их.

4. Повторно установите Visual Studio 2015 IsoShell **из командной строки с повышенными привилегиями** :  

    ```PUSHD "C:\ProgramData\Package Cache\FE948F0DAB52EB8CB5A740A77D8934B9E1A8E301\redist"```  

    ```vs_isoshell.exe /PromptRestart```

5. Повторно установите SSMS.

6. [Обновите распространяемый пакет Visual C++ 2015 до последней версии](https://support.microsoft.com/help/2977003/the-latest-supported-visual-c-downloads), если он не обновлен.

### <a name="1653"></a>16.5.3

![скачать](media/download-icon.png) [Скачать SSMS 16.5.3](https://go.microsoft.com/fwlink/?LinkID=840946)

- Номер выпуска: 16.5.3  
- Номер сборки: 13.0.16106.4  
- Дата выпуска: 30 января 2017 г.

[Китайский (упрощенное письмо)](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x804)| [Китайский (традиционное письмо)](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x404)| [Английский (США)](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x409)| [Французский](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x40c)| [Немецкий](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x407)| [Итальянский](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x410)| [Японский](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x411)| [Корейский](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x412)| [Португальский (Бразилия)](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x416)| [Русский](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x419)| [Испанский](https://go.microsoft.com/fwlink/?linkid=840946&clcid=0x40a)

#### <a name="bug-fixes-in-1653"></a>Исправления ошибок в выпуске 16.5.3

- Устранена проблема, появившаяся в SSMS 16.5.2. Эта проблема приводила к раскрытию узла "Таблица", если в таблице было несколько разреженных столбцов.

- Пользователи могут развертывать пакеты MSSQL Integration Services, содержащие диспетчер подключений OData, который используется для подключения ресурса Microsoft Dynamics AX или CRM Online к каталогу MSSQL Integration Services. Дополнительные сведения см. в разделе [Диспетчер соединений OData](../integration-services/connection-manager/odata-connection-manager.md).

- Настройка Always Encrypted для существующей таблицы завершается с ошибками, в которых указаны посторонние объекты. [Идентификатор Connect 3103181](https://connect.microsoft.com/SQLServer/feedback/details/3103181/setting-up-always-encrypted-on-an-existing-table-fails-with-errors-on-unrelated-objects)

- Настройка Always Encrypted для существующей базы данных с несколькими схемами не работает. [Идентификатор Connect 3109591](https://connect.microsoft.com/SQLServer/feedback/details/3109591/sql-server-2016-always-encrypted-against-existing-database-with-multiple-schemas-doesnt-work)

- Мастер зашифрованного столбца в Always Encrypted завершается с ошибкой из-за того, что база данных содержит представления, ссылающиеся на системные представления. [Идентификатор Connect 3111925](https://connect.microsoft.com/SQLServer/feedback/details/3111925/sql-server-2016-always-encrypted-encrypted-column-wizard-failed-task-failed-due-to-following-error-cannot-save-package-to-file-the-model-has-build-blocking-errors)

- При шифровании с помощью Always Encrypted ошибки из-за обновления модулей после шифрования обрабатываются неправильно.

- В меню *Открыть последние* не отображаются недавно сохраненные файлы. [Идентификатор Connect 3113288](https://connect.microsoft.com/SQLServer/feedback/details/3113288/ssms-2016-open-recent-menu-doesnt-show-recently-saved-files)

- SSMS замедляет работу при щелчке таблицы правой кнопкой мыши (при работе через удаленное подключение в Интернете). [Идентификатор Connect 3114074](https://connect.microsoft.com/SQLServer/feedback/details/3114074/ssms-slow-when-right-clicking-an-index-for-a-table-over-a-remote-internet-connection)

- Устранена проблема с полосой прокрутки конструктора SQL. [Идентификатор Connect 3114856](https://connect.microsoft.com/SQLServer/feedback/details/3114856/bug-in-scrollbar-on-sql-desginer-in-ssms-2016)

- Контекстное меню для таблиц мгновенно зависает

- SSMS иногда выдает исключения в мониторе активности и завершает работу с ошибкой. [Идентификатор Connect 697527](https://connect.microsoft.com/SQLServer/feedback/details/697527/)

- SSMS 2016 аварийно завершает работу с ошибкой "Процесс был завершен из-за внутренней ошибки в среде выполнения .NET: IP 71AF8579 (71AE0000), код выхода 80131506"

## <a name="additional-downloads"></a>Дополнительные скачиваемые файлы

Список всех загрузок для SQL Server Management Studio см. в [центре загрузки Майкрософт](https://www.microsoft.com/download/search.aspx?q=sql%20server%20management%20studio&p=0&r=10&t=&s=Relevancy~Descending).  
  
Чтобы получить последнюю версию среды SQL Server Management Studio, перейдите на страницу [Скачивание SQL Server Management Studio (SSMS)](../ssms/download-sql-server-management-studio-ssms.md).