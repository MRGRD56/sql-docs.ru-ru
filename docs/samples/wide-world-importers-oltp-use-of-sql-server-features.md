---
title: Использование функций и возможностей SQL Server | Документация Майкрософт
description: Сведения о SQL Server функциях и возможностях и их использовании в образце базы данных WideWorldImporters.
ms.prod: sql
ms.prod_service: sql
ms.technology: samples
ms.custom: ''
ms.date: 01/21/2017
ms.reviewer: ''
ms.topic: conceptual
ms.assetid: 06f89721-8478-4abc-8ada-e9c73b08bf51
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 6e20d90d91badcd0961ab03e219bbf6e9a8ae2c8
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100354061"
---
# <a name="use-of-sql-server-features-and-capabilities"></a>Использование функций и возможностей SQL Server

[!INCLUDE [SQL Server Azure SQL Database](../includes/applies-to-version/sql-asdb.md)]

WideWorldImporters использование функций и возможностей SQL Server в базе данных OLTP.

WideWorldImporters предназначен для демонстрации многих основных функций SQL Server, включая новейшие функции, появившиеся в SQL Server 2016. В следующей таблице перечислены функции и возможности SQL Server. Каждая строка также содержит описание того, как эти функции используются в WideWorldImporters.  
&nbsp;

|SQL Server функции или возможности|Использование в WideWorldImporters|
|:-------------------------------|:------------------------|
|Темпоральные таблицы|Существует много временных таблиц, включая все ссылочные таблицы стилей поиска и основные сущности, такие как Стоккитемс, Customers и поставщики. Использование временных таблиц позволяет удобно отследить историю этих сущностей.|
|Вызовы AJAX для JSON|Приложение часто использует вызовы AJAX для запроса следующих таблиц: persons, Customers, поставщики и Стоккитемс. Вызовы возвращают данные в формате JSON. Например, см. хранимую процедуру `Website.SearchForCustomers` .|
|Контейнеры свойств и значений JSON|Ряд таблиц содержит столбцы, которые хранят данные JSON для расширения реляционных данных в таблице. Например, `Application.SystemParameters` содержит столбец параметров приложения и `Application.People` содержит столбец для записи настроек пользователя. Эти таблицы используют `nvarchar(max)` столбец для записи данных JSON вместе с проверочным ограничением с помощью встроенной функции, `ISJSON` чтобы убедиться, что значения столбца являются допустимыми JSON.|
|Безопасность на уровне строк (RLS)|Безопасность на уровне строк (RLS) используется для ограничения доступа к таблице Customers на основе членства в роли. Каждая территория сбыта имеет роль и пользователя. Чтобы увидеть ограничение доступа RLS в действии, используйте соответствующий скрипт в sample-script.zip, который является частью [выпуска примера](https://go.microsoft.com/fwlink/?LinkID=800630).|
|операционной аналитике в режиме реального времени|(Полная версия базы данных) Базовые транзакционные таблицы `Sales.InvoiceLines` и `Sales.OrderLines` оба имеют некластеризованный индекс columnstore для поддержки эффективного выполнения аналитических запросов в транзакционной базе данных с минимальным влиянием на рабочую нагрузку. Выполнение транзакций и аналитики в одной базе данных также называется [гибридной транзакционной обработкой (HTAP)](https://wikipedia.org/wiki/Hybrid_Transactional/Analytical_Processing_(HTAP)). Чтобы увидеть это в действии, используйте соответствующий скрипт в sample-script.zip, который является частью [выпуска примера](https://go.microsoft.com/fwlink/?LinkID=800630).|
|PolyBase|Чтобы увидеть эту Polybase в действии, используя внешнюю таблицу с общедоступным набором данных, размещенным в хранилище блогов Azure, используйте соответствующий скрипт в sample-script.zip, который является частью [выпуска примера](https://go.microsoft.com/fwlink/?LinkID=800630).|
|Выполняющаяся в памяти OLTP|(Полная версия базы данных) Все типы таблиц оптимизированы для памяти, так что возвращающие табличное значение параметры (TVP) все преимущества от оптимизации памяти.<br/><br/>Две таблицы мониторинга `Warehouse.VehicleTemperatures` и `Warehouse.ColdRoomTemperatures` , оптимизированные для памяти. Оптимизация памяти позволяет заполнить таблицу Колдрумтемпературес с более высокой скоростью, чем традиционная таблица на диске. В таблице Вехиклетемпературес содержатся полезные данные JSON и они предоставляются для расширения сценариев Интернета вещей. Таблица Вехиклетемпературес в дальнейшем используется в сценариях, включающих EventHubs, Stream Analytics и Power BI.<br/><br/>Хранимая процедура `Website.RecordColdRoomTemperatures` компилируется в собственном виде для дальнейшего повышения производительности при записи температуры холодного комнаты.<br/><br/>Пример In-Memory OLTP в действии см. в разделе драйвер рабочей нагрузки «расположения автомобилей» в workload-drivers.zip, который является частью [выпуска примера](https://go.microsoft.com/fwlink/?LinkID=800630).|
|Кластеризованный индекс columnstore|(Полная версия базы данных) В таблице `Warehouse.StockItemTransactions` используется кластеризованный индекс columnstore. Ожидается, что количество строк в этой таблице будет увеличиваться, а кластеризованный индекс columnstore значительно сокращает размер таблицы на диске и повышает производительность запросов. Изменение в этой таблице доступно только для вставки. в рабочей нагрузке в сети нет обновления и удаления, а кластеризованный индекс columnstore хорошо работает для рабочих нагрузок вставки.|
|Динамическое маскирование данных|В схеме базы данных маскирование данных применяется к сведениям о банке, удерживаемым для поставщиков, в таблице `Purchasing.Suppliers` . Сотрудники, не являющиеся администраторами, не смогут получить доступ к этим сведениям.|
|Always Encrypted|Демонстрационный ролик для Always Encrypted входит в загружаемый samples.zip, который является частью [выпуска примера](https://go.microsoft.com/fwlink/?LinkID=800630). Демонстрация создает ключ шифрования, таблицу, используя шифрование для конфиденциальных данных, и небольшой пример приложения, которое вставляет данные в таблицу.|
|База данных с поддержкой переноса|`Warehouse.ColdRoomTemperatures`Таблица была реализована в виде темпоральной таблицы и оптимизирована для памяти в полной версии образца базы данных. Архивная таблица используется на диске и может быть перенесена в Azure.|
|Полнотекстовые индексы|Полнотекстовые индексы улучшают Поиск людей, клиентов и Стоккитемс. Индексы применяются к запросам, только если на экземпляре SQL Server установлено полнотекстовое индексирование. Непостоянный вычисляемый столбец используется для создания данных, которые индексируются в таблице Стоккитемс с полнотекстовым индексом.<br/><br/>`CONCAT` используется для сцепления полей, чтобы создать Сеарчдата с полнотекстовым индексом.<br/>Чтобы включить использование полнотекстовых индексов в образце, выполните следующую инструкцию в базе данных:<br/><br/>`EXECUTE [Application].[Configuration_ConfigureFullTextIndexing]`<br/><br/>Процедура создает полнотекстовый каталог по умолчанию, если он еще не существует, а затем заменяет представления поиска на полнотекстовые версии этих представлений.<br/><br/>Обратите внимание, что при использовании полнотекстовых индексов в SQL Server необходимо выбрать параметр Full-Text во время установки. В базе данных SQL Azure не требуется и не определена конфигурация для включения полнотекстовых индексов.|
|Индексированные материализованные вычисленные столбцы|Индексированные материализованные вычисленные столбцы, используемые в Супплиертрансактионс и Кустомертрансактионс.|
|Проверочные ограничения|Относительно сложное ограничение CHECK находится в `Sales.SpecialDeals` . Это гарантирует, что будет настроена только одна из DiscountAmount, Дискаунтперцентаже и UnitPrice.|
|Ограничения уникальности|Конструкция с множеством ко многим (и ограничения UNIQUE) настраивается для `Warehouse.StockItemStockGroups` .|
|Секционирование таблиц|(Полная версия базы данных) Таблицы `Sales.CustomerTransactions` и `Purchasing.SupplierTransactions` секционированы по годам с помощью функции секционирования `PF_TransactionDate` и схемы секционирования `PS_TransactionDate` . Секционирование используется для повышения управляемости больших таблиц.|
|Обработка списка|Предоставляется пример типа таблицы `Website.OrderIDList` . Он используется в качестве примера процедуры `Website.InvoiceCustomerOrders` . В процедуре используются обобщенные табличные выражения (CTE), TRY/CATCH, JSON_MODIFY, XACT_ABORT, NOCOUNT, THROW и XACT_STATE, чтобы продемонстрировать возможность обработки списка заказов, а не только в одном порядке, чтобы свести к минимуму круговые циклы от приложения к ядру СУБД.|
|Сжатие GZip|В `Warehouse.VehicleTemperature` представлении его таблица содержит полные данные датчика. Но если эти данные старше нескольких месяцев, они сжимаются для экономии пространства. Функция СЖАТИЯ использует сжатие GZip.<br/><br/>`Website.VehicleTemperatures`При извлечении ранее сжатых данных представление использует функцию распаковки.|
|Хранилище запросов|Хранилище запросов включено в базе данных. После выполнения нескольких запросов выполните следующие действия.<br/><br/>1. Откройте базу данных в Management Studio.<br/>2. Откройте хранилище запросов узлов, которое находится в базе данных.<br/>3. Откройте отчет " *основные ресурсы", потребляющие запросы*. Ознакомьтесь с выполнением запросов и просмотрите планы для только что запущенных запросов.|
|STRING_SPLIT|Столбец `DeliveryInstructions` в таблице `Sales.Invoices` содержит значение с разделителями-запятыми, которое можно использовать для демонстрации STRING_SPLIT.|
|Аудит|SQL Server аудит можно включить для этого образца базы данных, выполнив следующую инструкцию в базе данных:<br/><br/>`EXECUTE [Application].[Configuration_ApplyAuditing]`<br/><br/>В базе данных SQL Azure аудит включается с помощью [портал Azure](https://portal.azure.com/).<br/><br/>Операции безопасности, включающие имена входа, роли и разрешения, регистрируются во всех системах, где включен аудит (включая системы Standard Edition). Аудит направляется в журнал приложений, так как он доступен во всех системах и не требует дополнительных разрешений. Выдается предупреждение о том, что для повышения безопасности необходимо перенаправить журнал безопасности или файл в защищенную папку. Чтобы описать необходимую дополнительную конфигурацию, необходимо указать ссылку.<br/><br/>Для систем оценки, разработчиков и выпусков Enterprise Edition проводится аудит доступа ко всем финансовым данным о транзакциях.|
| &nbsp; | &nbsp; |
