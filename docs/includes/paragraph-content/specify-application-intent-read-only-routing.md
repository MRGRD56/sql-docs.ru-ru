---
title: включить файл
description: включить файл
services: sql-database
author: MightyPen
ms.service: sql-database
ms.topic: include
ms.date: 04/05/2018
ms.author: genemi
ms.custom: include file
ms.openlocfilehash: a443b615a6a04b588ed6dc84c6a8a4f6ed12e2f0
ms.sourcegitcommit: c7f40918dc3ecdb0ed2ef5c237a3996cb4cd268d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2020
ms.locfileid: "91726765"
---
## <a name="specifying-application-intent"></a>Задание намерения приложения

В строке подключения можно указать ключевое слово **ApplicationIntent**. Присваиваемые значения: **ReadWrite** или **ReadOnly**. Значение по умолчанию — **ReadWrite**.

При указании **ApplicationIntent=ReadOnly** клиент запрашивает рабочую нагрузку чтения при установке соединения. Сервер принудительно реализует намерение в момент соединения и во время выполнения инструкции **USE** для базы данных.

Ключевое слово **ApplicationIntent** не работает с базами данных прежних версий, доступными только для чтения.  


#### <a name="targets-of-readonly"></a>Целевые объекты ReadOnly

Если при подключении выбрано значение **ReadOnly**, подключение назначается любой из следующих специальных конфигураций, которые применяются к базе данных:

- [AlwaysOn](~/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md)
    - База данных может допускать или не допускать рабочую нагрузку чтения для целевой базы данных AlwaysOn. Этот вариант контролируется с помощью предложения **ALLOW_CONNECTIONS** инструкций Transact-SQL **PRIMARY_ROLE** и **SECONDARY_ROLE**.

- [Георепликация](/azure/sql-database/sql-database-geo-replication-overview)

- [Горизонтальное масштабирование для чтения](/azure/sql-database/sql-database-read-scale-out)

Если все эти специальные целевые объекты недоступны, выполняется чтение из обычной базы данных.

&nbsp;

Ключевое слово **ApplicationIntent** позволяет включить *маршрутизацию только для чтения*.


## <a name="read-only-routing"></a>Маршрутизация только для чтения

Маршрутизация только для чтения — это функция, которая способна обеспечить доступность реплики базы данных только для чтения. Чтобы включить маршрутизацию только для чтения, необходимо выполнить следующие условия:

- Необходимо установить соединение с прослушивателем группы доступности Always On.

- Ключевое слово строки подключения **ApplicationIntent** должно быть установлено в значение **ReadOnly**.

- Группа доступности должна быть настроена администратором базы данных на поддержку маршрутизации только для чтения.

Возможно, не все соединения, для каждого из которых используется маршрутизация только для чтения, будут подключаться к одной и той же реплике только для чтения. Изменения в синхронизации баз данных или в конфигурации маршрутизации сервера могут привести к тому, что клиент будет подключаться к различным репликам только для чтения. Можно сделать так, чтобы все запросы только для чтения подключались к одной реплике только для чтения. Для этого *не* передавайте прослушиватель группы доступности в ключевое слово строки подключения **Server**. Вместо этого укажите имя экземпляра, доступного только для чтения.

Маршрутизация только для чтения может занять больше времени, чем подключение к первичной реплике. Это происходит потому, что при маршрутизации с правом доступа только для чтения выполняется подключение к первичной реплике, а затем выполняется поиск наиболее подходящей вторичной реплики, доступной для чтения. При выполнении этих нескольких действий время ожидания входа нужно увеличить как минимум на 30 секунд.