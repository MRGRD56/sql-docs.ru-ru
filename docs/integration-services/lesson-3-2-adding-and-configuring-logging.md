---
description: Занятие 3-2. Добавление и настройка ведения журнала
title: Шаг 2. Добавление и настройка ведения журнала | Документация Майкрософт
ms.custom: ''
ms.date: 01/04/2019
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: tutorial
ms.assetid: 56105f3f-e500-4669-8c8e-acf434527727
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 32daaf012159bd42a6f73330bc8371157e459609
ms.sourcegitcommit: 1f826eb3f73bd4d94bc9638b9cdd60991a2e2fa0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "98125629"
---
# <a name="lesson-3-2-add-and-configure-logging"></a>Занятие 3-2. Добавление и настройка ведения журнала

[!INCLUDE[sqlserver-ssis](../includes/applies-to-version/sqlserver-ssis.md)]



В этой задаче включается ведение журнала потоков данных для пакета "Урок 3.dtsx". Затем нужно настроить регистратор для текстовых файлов, чтобы записать в журнал события PipelineExecutionPlan и PipelineExecuteTrees. Регистратор текстовых файлов создает журналы, которые легко просматривать и пересылать. Простота этих файлов журнала делает их удобными во время базового тестирования пакета. Для просмотра записей журнала можно использовать окно **События журнала** конструктора служб [!INCLUDE[ssIS](../includes/ssis-md.md)].  
  
## <a name="add-logging-to-the-package"></a>Добавление ведения журнала в пакет  
  
1.  В меню **SSIS** выберите **Ведение журнала**.  
    В Visual Studio 2019 меню **SSIS** доступно при выборе пунктов "Расширения" -> "SSIS". Убедитесь, что выбрана вкладка **Поток данных**, а не **Поток управления**.
  
2.  В диалоговом окне **Настройка журналов служб SSIS** на панели **Контейнеры** убедитесь, что выбран самый верхний объект. Он представляет пакет занятия 3.
  
3.  На вкладке **Поставщики и журналы** в окне **Тип поставщика** выберите **Регистратор служб SSIS для текстовых файлов** и нажмите кнопку **Добавить**.  
  
    Службы Integration Services добавят в пакет новый регистратор текстовых файлов с именем по умолчанию **Регистратор служб SSIS для текстовых файлов**. Теперь можно настроить новый регистратор.  
  
4.  В столбце **Имя** введите **Файл журнала занятия 3**.  
  
5.  При желании измените столбец **Описание**.  
  
6.  В столбце **Конфигурация** выберите **\<New Connection>** , чтобы указать, куда [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] будут записывать сведения журнала.  
  
    В диалоговом окне **Редактор диспетчера подключения файлов** в поле **Тип применения** выберите **Создать файл**, после чего нажмите кнопку **Обзор**. По умолчанию в диалоговом окне **Выбрать файл** открывается папка проекта, но можно сохранить сведения журнала в любом расположении.  
  
7.  В диалоговом окне **Выбрать файл** в поле **Имя файла** введите **TutorialLog.log** и нажмите кнопку **Открыть**.
  
8.  Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Редактор диспетчера подключения файлов**.  
  
9. На панели **Контейнеры** раскройте все узлы иерархии контейнера пакета и снимите все флажки, включая **Извлечь данные валют образца** . Теперь установите флажок **Извлечь данные валют образца** , чтобы получить события только для данного узла.  
  
    > [!NOTE]  
    > Если флажок **Извлечь данные валют образца** не установлен и недоступен для выбора, то задача использует параметры журнала родительского контейнера, и невозможно включить события журнала, которые являются специфичными для этой задачи. Чтобы разрешить этот экземпляр, снимите флажок родительского объекта.
  
10. На вкладке **Подробности** в столбце **События** выберите события **PipelineExecutionPlan** и **PipelineExecutionTrees** .  
  
11. Выберите **Дополнительно**, чтобы просмотреть подробности, которые регистратор записывает в журнал для каждого события. По умолчанию для выбранных событий автоматически выбираются все категории сведений.  
  
12. Выберите **Основной**, чтобы скрыть категории сведений.  
  
13. На вкладке **Поставщики и журналы** в столбце **Имя** выберите **Файл журнала занятия 3**. Как только будет создан регистратор для пакета, при желании можно отменить его выбор, чтобы прекратить регистрацию. При этом регистратор не надо удалять и создавать заново.  
  
14. Щелкните **ОК**.  
  
## <a name="go-to-next-task"></a>Переход к следующей задаче  
[Шаг 3. Тестирование пакета занятия 3](../integration-services/lesson-3-3-testing-the-lesson-3-tutorial-package.md)  
  
