---
description: Инструменты устранения неполадок при разработке пакета
title: Инструменты устранения неполадок при разработке пакета | Документы Майкрософт
ms.custom: ''
ms.date: 03/17/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Integration Services packages, troubleshooting
- SSIS packages, troubleshooting
- Integration Services, troubleshooting
- errors [Integration Services], troubleshooting
- packages [Integration Services], troubleshooting
ms.assetid: 41dd248c-dab3-4318-b8ba-789a42d5c00c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: e4f59f38a15bf7a703bbdf18277b4e384d1f4c94
ms.sourcegitcommit: c5078791a07330a87a92abb19b791e950672e198
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "88495148"
---
# <a name="troubleshooting-tools-for-package-development"></a>Инструменты устранения неполадок при разработке пакета

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат функции и средства, которые можно использовать для устранения неполадок в пакетах при разработке в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].  
  
## <a name="troubleshooting-design-time-validation-issues"></a>Устранение неполадок проверки во время разработки  
 В текущем выпуске служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] при открытии пакета система проверяет все соединения до проверки всех компонентов потока данных, при этом все медленно работающие или недоступные соединения переводятся в режим "вне сети". Благодаря этому уменьшаются задержки при проверке потока данных пакета.  
  
 После открытия пакета можно отключить соединение, щелкнув правой кнопкой мыши диспетчер соединений в области **Диспетчеры соединений** и выбрав команду **Работать автономно**. Это может ускорить выполнение операций в конструкторе служб SSIS.  
  
 Соединения, переведенные в режим «вне сети», остаются вне сети, пока вы не выполните одно из следующих действий.  
  
-   Проверка соединения: для этого щелкните правой кнопкой мыши диспетчер соединений в области **Диспетчеры соединений** конструктора служб SSIS, затем нажмите кнопку **Проверить соединение**.  
  
     Например, если соединение изначально настроено на работу вне сети при открытии пакета: измените строку подключения, чтобы решить эту проблему, и нажмите кнопку **Проверить соединение** , чтобы проверить соединение.  
  
-   Откройте повторно пакет или проект, в котором содержится пакет. Проверка снова выполняется для всех соединений в пакете.  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат следующие дополнительные возможности, которые помогают избежать ошибок проверки.  
  
-   **Установка режима «вне сети» для всего пакета и всех соединений, если источники данных недоступны**. Режим **Работать вне сети** можно включить в меню **Службы SSIS** . В отличие от свойства **DelayValidation** , флажок **Работать вне сети** доступен даже перед открытием пакета. Флажок **Работать вне сети** можно также установить для ускорения работы конструктора и снять его только для проверки пакета.  
  
-   **Настройте свойство DelayValidation в элементах пакета, которые являются недопустимыми до времени выполнения**. Чтобы избежать ошибок проверки, можно присвоить свойству **DelayValidation** значение **True** для элементов пакета, конфигурация которых недопустима во время разработки. Например, может существовать задача потока данных, использующая целевую таблицу, которая не существует до тех пор, пока задача «Выполнение SQL» не создаст таблицу во время выполнения. Свойство **DelayValidation** можно включить на уровне пакета или на уровне отдельных задач или контейнеров, содержащихся в пакете. Обычно при развертывании пакета этому свойству необходимо присвоить значение **True** для тех же элементов пакета, чтобы избежать ошибок проверки времени выполнения.  
  
     Свойство **DelayValidation** устанавливается в задаче потока данных, но не в отдельных компонентах потока данных. Тех же результатов можно добиться, присвоив свойству <xref:Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100.ValidateExternalMetadata%2A> отдельного компонента потока данных значение **false**. Однако если значение этого свойства равно **false**, компонент не узнает об изменениях метаданных внешних источников данных.  
  
 Если при проверке объекты базы данных, используемые пакетом, заблокированы, процесс проверки может перестать отвечать. В этом случае конструктор служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] также прекращает отвечать. Возобновить проверку можно с помощью среды [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] , чтобы закрыть соответствующий сеанс в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Эту проблему можно также предотвратить с помощью параметров, описываемых в этом разделе.  
  
## <a name="troubleshooting-control-flow"></a>Устранение неполадок в потоке управления  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат следующие средства и функции, которые можно использовать для устранения неполадок в потоке управления пакетов во время их разработки.  
  
-   **Установка точек останова в задачах, контейнерах и пакетах**. Можно установить точки останова, используя графические средства, предоставляемые конструктором служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] . Точки останова могут быть включены на уровне пакета или на уровне отдельных задач или контейнеров, содержащихся в пакете. Некоторые задачи и контейнеры имеют дополнительные условия останова для установки точек останова. Например, можно активировать условия останова в контейнере «цикл по элементам», который приостанавливает выполнение в начале каждой итерации цикла.  
  
-   **Использование диалоговых окон отладки**. Если запускается пакет, имеющий точки останова, то окно отладки среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] обеспечивает доступ к значениям переменных и сообщениям о состоянии.  
  
-   **Просмотр сведений на вкладке «Ход выполнения»** . [!INCLUDE[ssIS](../../includes/ssis-md.md)] предоставляет дополнительные сведения о потоке управления при запуске пакета в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Вкладка «Ход выполнения» перечисляет задачи и контейнеры в порядке выполнения, в том числе время запуска и окончания работы, предупреждения и сообщения об ошибках каждой задачи или контейнера, включая сам пакет.  
  
 Дополнительные сведения об этих возможностях см. в разделе [Отладка потока управления](../../integration-services/troubleshooting/debugging-control-flow.md).  
  
## <a name="troubleshooting-data-flow"></a>Устранение неполадок в потоке данных  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат следующие средства и функции, которые можно использовать для поиска ошибок в потоке данных пакетов во время их разработки.  
  
-   **Тестирование с помощью лишь подмножества данных**. Если необходимо найти ошибку в работе потока данных пакета, используя только образец набора данных, то можно добавить преобразование «Процентная выборка» или «Выборка строк» для создания встроенного образца данных во время выполнения. Дополнительные сведения см. в разделах [Percentage Sampling Transformation](../../integration-services/data-flow/transformations/percentage-sampling-transformation.md) и [Row Sampling Transformation](../../integration-services/data-flow/transformations/row-sampling-transformation.md).  
  
-   **Использование средств просмотра данных для мониторинга данных по мере выполнения потока данных**. Средства просмотра данных отображают значения данных во время их перемещения между источниками, преобразованиями и назначениями. В средстве просмотра данные могут отображаться в сетке. Можно скопировать данные из средства просмотра данных в буфер обмена, а затем вставить их в файл или рабочий лист Excel. Дополнительные сведения: [Отладка потока данных](../../integration-services/troubleshooting/debugging-data-flow.md).  
  
-   **Настройка вывода ошибок в тех компонентах потока данных, которые поддерживают эту возможность**. Многие источники потока данных, преобразования и назначения поддерживают вывод ошибок. Настроив вывод ошибок компонента потока данных, можно направить данные с ошибками в другое назначение. Например, можно сохранить ошибочные или усеченные данные в отдельный текстовый файл. Можно также присоединить средства просмотра данных к выводу ошибок и анализировать только ошибочные данные. Во время разработки выходы ошибок захватывают ошибочные значения данных, чтобы облегчить разработку пакетов, эффективно обрабатывающих реальные данные. Однако в то время как остальные средства и функции устранения неполадок полезны только во время разработки, вывод ошибок является важной функциональной возможностью в рабочей среде. Дополнительные сведения см. в разделе [Обработка ошибок в данных](../../integration-services/data-flow/error-handling-in-data.md).  
  
-   **Захват общего числа обработанных строк**. Когда пакет запускается в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , то количество переданных через путь строк отображается в конструкторе потока данных. Это количество периодически обновляется по мере перемещения данных по пути. Также для захвата конечного числа строк в переменную можно добавить преобразование «Подсчет строк» в поток данных. Дополнительные сведения см. в разделе [Row Count Transformation](../../integration-services/data-flow/transformations/row-count-transformation.md).  
  
-   **Просмотр сведений на вкладке «Ход выполнения»** . [!INCLUDE[ssIS](../../includes/ssis-md.md)] предоставляет дополнительные сведения о потоках данных при запуске пакета в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Вкладка «Ход выполнения» перечисляет компоненты потока данных в порядке выполнения с указанием хода выполнения каждой фазы пакета, отображенной как процент выполнения, и количество строк, записанных в назначение.  
  
 Дополнительные сведения об этих возможностях см. в разделе [Отладка потока данных](../../integration-services/troubleshooting/debugging-data-flow.md).  
  
## <a name="troubleshooting-scripts"></a>Устранение неполадок скриптов  
 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Средства [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] для приложений (VSTA) — это среда разработки, с помощью которой можно создавать скрипты для задачи "Скрипт" и компонента "Скрипт". Среда VSTA располагает следующими средствами и функциями, которые можно использовать для поиска ошибок в скриптах во время разработки пакета.  
  
-   **Установка точек останова в задачах «Скрипт».** Среда VSTA поддерживает отладку скриптов только в задаче «Скриптй». Точки останова, которые установлены в задачах «Скрипт», объединяются с точками останова, которые установлены в пакетах, задачах и контейнерах пакетов, предоставляя возможность совместной отладки всех элементов пакета.  
  
    > [!NOTE]  
    >  При отладке пакета, содержащего несколько задач «Скрипт», отладчик обрабатывает точки останова только в одной задаче «Скрипт» и не учитывает точки останова в других задачах. Если задача «Скрипт» является частью контейнера «цикл по каждому элементу» или «цикл по элементам», отладчик пропускает точки останова в задаче «Скрипт» после первого прохода цикла.  
  
 Дополнительные сведения см. в статье [Debugging Script](../../integration-services/troubleshooting/debugging-script.md). Предложения по отладке компонента скрипта см. в разделе [Кодирование и отладка компонента скрипта](../../integration-services/extending-packages-scripting/data-flow-script-component/coding-and-debugging-the-script-component.md).  
  
## <a name="troubleshooting-errors-without-a-description"></a>Устранение неполадок при ошибках без описаний  
 Если во время разработки пакета встречается ошибка служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , не имеющая описания, его можно найти в [справочнике по сообщениям об ошибках служб Integration Services](../../integration-services/integration-services-error-and-message-reference.md). Этот список сейчас не включает сведения об устранении неполадок.  
  
## <a name="see-also"></a>См. также  
 [Устранение неполадок инструментов с помощью отчетов](../../integration-services/troubleshooting/troubleshooting-tools-for-package-execution.md)   
 [Возможности для повышения производительности потока данных](../../integration-services/data-flow/data-flow-performance-features.md)  
  
  
