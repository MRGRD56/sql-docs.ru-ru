---
description: Задача «Выполнение пакета»
title: Задача "Выполнение пакета" | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.executepackagetask.f1
- sql13.dts.designer.executepackagetask.package.f1
- sql13.dts.designer.executepackagetask.parameter.F1
- sql13.dts.designer.executepackagetask.general.f1
helpviewer_keywords:
- Execution Package task [Integration Services]
- child packages
- parent packages [Integration Services]
ms.assetid: 042d4ec0-0668-401c-bb3a-a25fe2602eac
author: chugugrace
ms.author: chugu
ms.openlocfilehash: ab1215ca58f64c6e28f78e423bdee5a66b4c46b2
ms.sourcegitcommit: c7f40918dc3ecdb0ed2ef5c237a3996cb4cd268d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2020
ms.locfileid: "91725943"
---
# <a name="execute-package-task"></a>Задача «Выполнение пакета»

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  Задача «Выполнение пакета» расширяет возможности служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] в рамках организации, позволяя одним пакетам выполнять другие пакеты как часть рабочего процесса.  
  
 Задачу выполнения пакета можно использовать в следующих целях.  
  
-   Дробление сложного пакетного рабочего процесса. Эта задача позволяет разбить рабочий процесс на множество пакетов, что удобнее для чтения, проверки и поддержки. Например, при загрузке данных в схеме типа «звезда» в целях заполнения каждого измерения возможно построение раздельных пакетов и таблицы фактов.  
  
-   Повторное использование частей пакетов. Другие пакеты могут использовать части рабочего процесса пакетов. Например, можно создать модуль извлечения данных, который может быть вызван из разных пакетов. Каждый пакет, вызывающий модуль извлечения, в состоянии производить разные операции чистки, фильтрации или статистической обработки.  
  
-   Группирование рабочих единиц. Единицы работы можно инкапсулировать в отдельные пакеты и присоединить как компоненты транзакции к рабочему процессу родительского пакета. Например, родительский пакет запускает вспомогательные пакеты. Основываясь на успешном завершении вспомогательных пакетов или же на их завершении со сбоем, родительский пакет или фиксирует транзакцию, или выполняет ее откат.  
  
-   Управление безопасностью пакетов. Авторам пакетов требуется доступ только к части многопакетного решения. При разделении пакета на множество пакетов возрастает степень безопасности, так как можно предоставить авторский доступ только к нужным пакетам.  
  
 Пакет, выполняющий другие пакеты, обычно называется родительским пакетом, а выполняемые родительским рабочим процессом пакеты называются дочерними пакетами.  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат задачи, выполняющие операции рабочего процесса, такие как выполнение исполняемых файлов и пакетных файлов. Дополнительные сведения см. в разделе [Execute Process Task](../../integration-services/control-flow/execute-process-task.md).  
  
## <a name="running-packages"></a>Запуск пакетов  
 Задача «Выполнение пакета» может запускать дочерние пакеты, которые содержатся в одном проекте с родительским пакетом. Чтобы выбрать дочерний пакет из проекта, необходимо задать свойству **Тип ссылки** значение **Ссылка на проект**, а затем установить свойство **PackageNameFromProjectReference** .  
  
> [!NOTE]  
>  Если проект, в котором содержится пакет, не был преобразован в модель развертывания проекта, то параметр **Тип ссылки** доступен только для чтения и принимает значение **Внешняя ссылка** . [Развертывание проектов и пакетов служб Integration Services (SSIS)](../../integration-services/packages/deploy-integration-services-ssis-projects-and-packages.md).  
  
 Задача "Выполнение пакета" может также запускать пакеты, хранящиеся в базе данных msdb [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , и пакеты, хранящиеся в файловой системе. Эта задача использует диспетчер соединений OLE DB для соединения с [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или диспетчер соединения файлов для доступа к файловой системе. Дополнительные сведения см. в разделах [OLE DB Connection Manager](../../integration-services/connection-manager/ole-db-connection-manager.md) и [Flat File Connection Manager](../../integration-services/connection-manager/flat-file-connection-manager.md).  
  
 Также задача «Выполнение пакета» может выполнять план обслуживания базы данных, что позволяет управлять пакетами служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] и планами обслуживания базы данных в одном решении служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . План обслуживания базы данных аналогичен пакету служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] с той лишь разницей, что план может содержать только задачи обслуживания базы данных и всегда храниться в базе данных msdb.  
  
 При выборе пакета, сохраненного в файловой системе, необходимо предоставить имя и место расположения пакета. Пакет может находиться в любом месте файловой системы; он не обязан находиться в той же папке, что и родительский пакет.  
  
 Дочерний пакет может выполняться в процессе родительского пакета или же в своем собственном процессе. Выполнение дочернего пакета в собственном процессе требует больших затрат памяти, но обеспечивает большую гибкость. Например, если процесс дочернего пакета закончится с ошибкой, родительский процесс продолжит свою работу.  
  
 С другой стороны, в некоторых задачах необходимо, чтобы родительский и дочерний пакеты прекращали свое выполнение одновременно, но иногда не имеет смысла тратить дополнительную память на другой процесс. Например, если дочерний процесс заканчивается с ошибкой, а последующая работа родительского пакета зависит от результата работы дочернего пакета, необходимо, чтобы дочерний пакет выполнялся в процессе родительского пакета.  
  
 По умолчанию свойство ExecuteOutOfProcess в задаче "Выполнение пакета" равно значению **False**, а дочерний пакет выполняется в том же процессе, что и родительский пакет. Если установить свойство в значение **True**, дочерний пакет запускается в отдельном процессе. Это может замедлить запуск дочернего пакета. Кроме того, если задано значение свойства **True**, то выполнять отладку пакета в установке только для инструментов нельзя. Необходимо установить [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]. Дополнительные сведения см. в разделе [Установка служб Integration Services](../../integration-services/install-windows/install-integration-services.md).  
  
## <a name="extending-transactions"></a>Расширение транзакций  
 Транзакции, используемые родительским пакетом, могут быть расширены на дочерний пакет; таким образом, работа, выполняемая обоими пакетами, может фиксироваться и откатываться. Например, вставка в базу данных, производимая родительским пакетом, может фиксироваться или откатываться в зависимости от вставки в базу данных, которую производит дочерний пакет, и наоборот. Дополнительные сведения см. в разделе [Inherited Transactions](../integration-services-transactions.md).  
  
## <a name="propagating-logging-details"></a>Распространение подробностей журналов  
 Дочерний пакет, запущенный задачей «Выполнение пакета», может быть настроен для использования журнала, а может быть и не настроен, однако он всегда отправляет родительскому пакету подробные сведения для журнала. Если задача «Выполнение пакета» настроена для использования журнала, она регистрирует подробности журнала дочернего пакета. Дополнительные сведения см. в разделе [Ведение журналов в службах Integration Services (SSIS)](../../integration-services/performance/integration-services-ssis-logging.md).  
  
## <a name="passing-values-to-child-packages"></a>Передача значений дочерним пакетам  
 Часто дочерний пакет использует значения, переданные ему вызвавшим его пакетом, обычно его родительским пакетом. Значения, переданные родительским пакетом, удобно использовать в следующих случаях:  
  
-   Части большого рабочего процесса присваиваются различным пакетам. Например, один пакет загружает данные, суммирует их и присваивает переменным значения суммарных данных, а затем передает значения другому процессу для дополнительной обработки данных.  
  
-   Родительский пакет динамически координирует задачи в дочернем пакете. Например, родительский пакет определяет число дней в текущем месяце и присваивает это число переменной, а дочерний пакет выполняет задачу равное этой переменной количество раз.  
  
-   Дочернему пакету необходим доступ к данным, динамически поставляемым родительским пакетом. Например, родительский пакет извлекает данные из таблицы и записывает набор строк в переменную, а дочерний пакет производит дополнительные операции над данными.  
  
 Для передачи значений в дочерний пакет вы можете использовать следующие методы:  
  
-   **Конфигурации пакета**  
  
     [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] предоставляют тип конфигурации, конфигурацию переменной родительского пакета для передачи значения из родительского в дочерние пакеты. Конфигурация настраивается в дочернем пакете и использует переменные родительского пакета. Конфигурация сопоставляется c переменной в дочернем пакете или свойством объекта в дочернем пакете. Переменная может также использоваться в скриптах, используемых задачей «Скрипт» или компонентом скрипта.  
  
-   **Параметры**  
  
     Вы можете настроить задачу «Выполнение пакета» для сопоставления переменных или параметров родительского пакета либо параметров проекта с параметрами дочернего пакета. Проект должен использовать модель развертывания проекта, а дочерний пакет должен содержаться в одном проекте с родительским пакетом. Дополнительные сведения см. в разделе [Execute Package Task Editor]().  
  
    > [!NOTE]  
    >  Если параметр дочернего пакета не является конфиденциальным и сопоставляется с конфиденциальным родительским пакетом, запуск дочернего пакета завершится с ошибкой.  
    >   
    >  Поддерживаются следующие условия сопоставления:  
    >   
    >  Конфиденциальный параметр дочернего пакета сопоставляется с конфиденциальным параметром родительского пакета  
    >   
    >  Конфиденциальный параметр дочернего пакета сопоставляется с неконфиденциальным параметром родительского пакета  
    >   
    >  Неконфиденциальный параметр дочернего пакета сопоставляется с неконфиденциальным параметром родительского пакета  
  
 Переменная родительского пакета может быть определена в области задачи «Выполнение пакета» или в самом пакете. Если доступно несколько переменных с одинаковыми именами, то используется та переменная, которая определена в области задачи выполнения пакетов, или ближайшая к задаче переменная из области видимости.  
  
 Дополнительные сведения см. в разделу [Использование значений переменных и параметров в дочернем пакете](../../integration-services/packages/legacy-package-deployment-ssis.md#child).  
  
### <a name="accessing-parent-package-variables"></a>Доступ к переменным родительского пакета  
 Дочерние пакеты могут обращаться к переменным родительского пакета с помощью задачи «Скрипт». При вводе имени переменной родительского пакета на странице **Скрипт** в **редакторе задачи "Скрипт"** не указывайте **User:** в имени переменной. В противном случае дочерний пакет не сможет обнаружить переменную при выполнении родительского пакета.  
  
## <a name="configuring-the-execute-package-task"></a>Настройка задачи «Выполнение пакета»  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующем разделе:  
  
-   [Страница «Выражения»](../../integration-services/expressions/expressions-page.md)  
  
 Дополнительные сведения об установке этих свойств в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] см. в следующем разделе:  
  
-   [Задание свойств задач или контейнеров](./add-or-delete-a-task-or-a-container-in-a-control-flow.md)  
  
## <a name="configuring-the-execute-package-task-programmatically"></a>Программная настройка задачи «Выполнение пакета»  
 Дополнительные сведения об установке этих свойств программными средствами см. в следующем разделе.  
  
-   [N:Microsoft.SqlServer.Dts.Tasks.ExecutePackageTask](https://technet.microsoft.com/library/microsoft.sqlserver.dts.tasks.executepackagetask\(v=sql.110\).aspx)  
  
## <a name="execute-package-task-editor"></a>редактор задачи «Выполнение пакета»
  Для настройки задачи «Выполнение пакета» используйте редактор задачи «Выполнение пакета». Задача «Выполнение пакета» расширяет возможности служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] в рамках организации, позволяя одним пакетам выполнять другие пакеты как часть рабочего процесса.  
  
 **Выбор действия**  
  
-   [Открытие редактора задачи «Выполнение пакета»](#open)  
  
-   [Задание параметров на странице «Общие»](#general)  
  
-   [Задание параметров на странице «Пакет»](#package)  
  
-   [Задание параметров на странице «Привязки параметров»](#parameter)  
  
###  <a name="open-the-execute-package-task-editor"></a><a name="open"></a> Открытие редактора задачи «Выполнение пакета»  
  
1.  Откройте в среде [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] проект служб [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] , содержащий задачу «Выполнение пакета».  
  
2.  Щелкните правой кнопкой задание в конструкторе служб SSIS и выберите пункт **Изменить**.  
  
###  <a name="set-the-options-on-the-general-page"></a><a name="general"></a> Задание параметров на странице «Общие»  
 **имя**;  
 Укажите уникальное имя для задачи «Выполнение пакета». Это имя используется в качестве метки для значка задачи.  
  
> [!NOTE]  
>  Имена задач в пределах пакета должны быть уникальными.  
  
 **Описание**  
 Введите описание для задачи «Выполнение пакета».  
  
###  <a name="set-the-options-on-the-package-page"></a><a name="package"></a> Задание параметров на странице «Пакет»  
 **Тип ссылки**  
 Выберите пункт меню **Ссылка на проект** для дочерних пакетов, содержащихся в проекте. Выберите пункт меню **Внешняя ссылка** для дочерних пакетов, расположенных вне проекта.  
  
> [!NOTE]  
>  Если проект, в котором содержится пакет, не был преобразован в модель развертывания проекта, то параметр **Тип ссылки** доступен только для чтения и принимает значение **Внешняя ссылка** . [Развертывание проектов и пакетов служб Integration Services (SSIS)](../../integration-services/packages/deploy-integration-services-ssis-projects-and-packages.md).  
  
 **Пароль**  
 Если дочерний пакет защищен паролем, введите пароль для него или нажмите кнопку с многоточием (...) и создайте новый пароль для данного дочернего пакета.  
  
 **ExecuteOutOfProcess**  
 Укажите, должен дочерний пакет выполняться в процессе родительского пакета или в отдельном процессе. По умолчанию свойство ExecuteOutOfProcess в задаче "Выполнение пакета" равно значению **False**, а дочерний пакет выполняется в том же процессе, что и родительский пакет. Если установить свойство в значение **true**, дочерний пакет запускается в отдельном процессе. Это может замедлить запуск дочернего пакета. Кроме того, если свойству задано значение **true**, то выполнять отладку пакета только при установке средств нельзя. Для этого необходимо установить продукт службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Дополнительные сведения см. в статье [Установка служб Integration Services](../../integration-services/install-windows/install-integration-services.md).  
  
#### <a name="referencetype-dynamic-options"></a>Динамические параметры ReferenceType  
  
##### <a name="referencetype--external-reference"></a>ReferenceType = внешняя ссылка  
 **Расположение**  
 Выберите местоположение дочернего пакета. Это свойство имеет параметры, указанные в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**SQL Server**|Установите местонахождение экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].|  
|**Файловая система**|Указывает, что местоположение находится в файловой системе.|  
  
 **Соединение**  
 Выберите тип места хранения дочернего пакета.  
  
 **PackageNameReadOnly**  
 Отображает имя пакета.  
  
##### <a name="referencetype--project-reference"></a>ReferenceType = ссылка на проект  
 **PackageNameFromProjectReference**  
 Выберите пакет, содержащийся в проекте, который станет дочерним пакетом.  
  
#### <a name="location-dynamic-options"></a>Динамические параметры местоположения  
  
##### <a name="location--sql-server"></a>Местонахождение = SQL Server  
 **Соединение**  
 Выберите в списке диспетчер подключений OLE DB или щелкните \<**New connection...**>, чтобы создать диспетчер подключений.  
  
 **См. также:** [Диспетчер подключений OLE DB](../../integration-services/connection-manager/ole-db-connection-manager.md)  
  
 **PackageName**  
 Введите имя дочернего пакета или нажмите кнопку с многоточием (...) и определите местоположение пакета.  
  
##### <a name="location--file-system"></a>Местоположение = файловая система  
 **Соединение**  
 Выберите в списке диспетчер подключений файлов или щелкните \<**New connection...**>, чтобы создать диспетчер подключений.  
  
 **См. также:** [Диспетчер соединения файлов](../../integration-services/connection-manager/file-connection-manager.md)  
  
 **PackageNameReadOnly**  
 Отображает имя пакета.  
  
###  <a name="set-the-options-on-the-parameter-bindings-page"></a><a name="parameter"></a> Задание параметров на странице «Привязки параметров»  
 Из родительского пакета или проекта можно передавать значения в дочерний пакет. Проект должен использовать модель развертывания проекта, а дочерний пакет должен содержаться в одном проекте с родительским пакетом.  
  
 Сведения о преобразовании проектов в модель развертывания проектов см. в разделе [Развертывание проектов и пакетов служб Integration Services (SSIS)](../../integration-services/packages/deploy-integration-services-ssis-projects-and-packages.md).  
  
 **Параметр дочернего проекта**  
 Введите или выберите имя параметра дочернего пакета.  
  
 **Параметр привязки или переменная**  
 Выберите параметр или переменную, содержащие значение, которое необходимо передать в дочерний пакет.  
  
 **Добавление**  
 Нажмите, чтобы сопоставить параметр или переменную с параметром дочернего пакета.  
  
 **Удалить**  
 Нажмите, чтобы удалить сопоставление параметра или переменной с параметром дочернего пакета.  
  
