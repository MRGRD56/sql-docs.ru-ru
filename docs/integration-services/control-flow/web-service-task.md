---
description: Задача «Веб-служба»
title: Задача "Веб-служба" | Документы Майкрософт
ms.custom: ''
ms.date: 03/02/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.webservicetask.f1
- sql13.dts.designer.webservicestask.general.f1
- sql13.dts.designer.webservicestask.input.f1
- sql13.dts.designer.webservicestask.output.f1
helpviewer_keywords:
- Web Service task [Integration Services]
ms.assetid: 5c7206f1-7d6a-4923-8dff-3c4912da4157
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 9ff964cda9e4e9687a61d50db7c7d53c6e9e24ab
ms.sourcegitcommit: cfa04a73b26312bf18d8f6296891679166e2754d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2020
ms.locfileid: "92196018"
---
# <a name="web-service-task"></a>Задача «Веб-служба»

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  Задача «Веб-служба» выполняет метод веб-службы. Возможно использование задачи «Веб-служба» в следующих целях:  
  
-   Запись в переменную значений, возвращаемых методом веб-службы. Например, можно получить самую высокую температуру дня из метода веб-службы с последующим использованием ее значения для обновления переменной, которая используется в выражении, задающем значение столбца.  
  
-   Запись в файл значений, возвращаемых методом веб-службы. Например, список потенциальных покупателей может быть записан в файл, который затем используется в качестве источника данных в пакете, очищающем данные перед их занесением в базу данных.  
  
## <a name="wsdl-file"></a>WSDL-файл  
 Для подключения к веб-службе задача «Веб-служба» использует диспетчер HTTP-соединений. Редактор диспетчера HTTP-соединений сконфигурирован отдельно от задачи «Веб-служба», ссылка на него содержится в задаче. Диспетчер HTTP-соединений указывает настройки прокси-сервера, такие как URL-адрес сервера, учетные записи для доступа к веб-службе и длительность времени ожидания. Дополнительные сведения см. в статье [Диспетчер HTTP-соединений](../../integration-services/connection-manager/http-connection-manager.md).  
  
> [!IMPORTANT]  
>  Диспетчер HTTP-соединений поддерживает только анонимную проверку подлинности и обычную проверку подлинности. Проверка подлинности Windows не поддерживается.  
  
 Диспетчер HTTP-соединений может указывать на веб-сайт или на файл языка описания веб-служб (язык WSDL). URL-адрес диспетчера HTTP-подключений, указывающий на WSDL-файл, содержит параметр `?WSDL` , например `https://MyServer/MyWebService/MyPage.asmx?WSDL`.  
  
 Чтобы настроить задачу «Веб-служба», используя диалоговое окно **Редактор задачи «Веб-служба»** , которое предоставляет конструктор [!INCLUDE[ssIS](../../includes/ssis-md.md)] , WSDL-файл должен быть доступен локально.  
  
-   Если диспетчер HTTP-соединений указывает на веб-сайт, то WSDL-файл должен быть скопирован на локальный компьютер вручную.  
  
-   Если диспетчер HTTP-соединений указывает на WSDL-файл, то файл можно сделать локальным, загрузив его с веб-сайта при помощи задачи «Веб-служба».  
  
 WSDL-файл перечисляет методы, предлагаемые веб-службой; входные параметры, запрашиваемые методами; ответы, возвращаемые методами; а также метод обмена данными с веб-службой.  
  
 Если метод использует входные параметры, то задача «Веб-служба» запрашивает значения параметров. Например, метод веб-службы рекомендует длину приобретаемых лыж, основываясь на росте покупателя, поэтому требует, чтобы рост был записан во входном параметре. Значения параметра можно задать строками, определенными в задаче, или переменными, определенными в области видимости задачи или родительского контейнера. Преимущество использования переменных в том, что они позволяют динамически обновлять значения параметров с помощью конфигураций пакетов или скриптов. Дополнительные сведения см. в разделах [Переменные в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-variables.md) и [Конфигурации пакета](../packages/legacy-package-deployment-ssis.md).  
  
 Многие методы веб-службы не используют входные параметры. Например, метод веб-службы, выдающий имена сотрудников, рожденных в текущем месяце, не запрашивает входного параметра, потому что веб-служба может определить текущий месяц локально.  
  
 Результаты метода веб-службы могут быть записаны в переменную или в файл. Используйте диспетчер подключений файла для указания файла или для указания имени переменной, в которую записывается результат. Дополнительные сведения см. в разделах [Диспетчер соединения файлов](../../integration-services/connection-manager/file-connection-manager.md) и [Переменные в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-variables.md).  
  
## <a name="custom-logging-messages-available-on-the-web-service-task"></a>Пользовательские сообщения для ведения журнала, доступные в задаче «Веб-служба»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Веб-служба». Дополнительные сведения см. в разделе [Ведение журналов в службах Integration Services (SSIS)](../../integration-services/performance/integration-services-ssis-logging.md).  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**WSTaskBegin**|Задача получила доступ к веб-службе.|  
|**WSTaskEnd**|Задача завершила метод веб-службы.|  
|**WSTaskInfo**|Описательные сведения об этой задаче.|  
  
## <a name="configuration-of-the-web-service-task"></a>Настройка задачи «Веб-служба»  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующем разделе:  
  
-   [Страница «Выражения»](../../integration-services/expressions/expressions-page.md)  
  
 Дополнительные сведения об установке этих свойств в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] см. в следующем разделе:  
  
-   [Задание свойств задач или контейнеров](./add-or-delete-a-task-or-a-container-in-a-control-flow.md)  
  
## <a name="programmatic-configuration-of-the-web-service-task"></a>Программная настройка задачи «Веб-служба»  
 Дополнительные сведения о программной настройке этих свойств см. в следующих разделах:  
  
-   <xref:Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebServiceTask>  
  
## <a name="web-service-task-editor-general-page"></a>Редактор задачи «Веб-служба» (страница «Общие»)
  Страница **Общие** в диалоговом окне **Редактор задачи "Веб-служба"** применяется для указания диспетчера HTTP-соединений, расположения файла WSDL, используемого задачей веб-службы, описания задачи веб-службы и загрузки файла WSDL.  
  
### <a name="options"></a>Параметры  
 **HTTPConnection**  
 Выберите из списка диспетчер подключений или нажмите кнопку \<**New connection...**> для создания нового диспетчера подключений.  
  
> [!IMPORTANT]  
>  Диспетчер HTTP-соединений поддерживает только анонимную проверку подлинности и обычную проверку подлинности. Проверка подлинности Windows не поддерживается.  
  
 **См. также:**  подробные сведения о [диспетчере HTTP-подключений](../../integration-services/connection-manager/http-connection-manager.md) и о [редакторе диспетчера HTTP-подключений &#40;страница "Сервер"&#41;](../connection-manager/http-connection-manager.md).  
  
 **WSDLFile**  
 Введите полный путь к локальному WSDL-файлу на компьютере или нажмите кнопку обзора **(...)** и выберите файл.  
  
 Если WSDL-файл был загружен на компьютер вручную, выберите этот файл. Однако, если WSDL-файл еще не был загружен, выполните следующие действия.  
  
-   Создайте пустой файл с расширением WSDL.  
  
-   Выберите этот пустой файл для параметра **WSDLFile** .  
  
-   Установите свойство **OverwriteWSDLFile** в значение **True** , чтобы разрешить перезапись пустого файла фактическим WSDL-файлом.  
  
-   Нажмите кнопку **Загрузить язык WSDL** , чтобы загрузить фактический WSDL-файл и перезаписать пустой файл.  
  
    > [!NOTE]  
    >  Кнопка **Загрузить язык WSDL** недоступна, пока не указано имя существующего локального файла в поле **WSDLFile** .  
  
 **OverwriteWSDLFile**  
 Укажите, можно ли перезаписать WSDL-файл для задачи веб-службы.  
  
 Если нужно загрузить WSDL-файл с помощью кнопки **Загрузить язык WSDL** , установите это свойство в значение **True**.  
  
 **имя**;  
 Введите уникальное имя задачи веб-службы. Это имя используется в качестве метки для значка задачи.  
  
> [!NOTE]  
>  Имена задач в пределах пакета должны быть уникальными.  
  
 **Описание**  
 Введите описание задачи веб-службы.  
  
 **Загрузить язык WSDL**  
 Загрузите файл WSDL.  
  
 Эта кнопка недоступна, пока не указано имя существующего локального файла в поле **WSDLFile** .  
  
## <a name="web-service-task-editor-input-page"></a>Редактор задачи «Веб-служба» (страница «Вход»)
  Используйте страницу **Вход** в диалоговом окне **Редактор задачи «Веб-служба»** , чтобы указать веб-службу, веб-метод и значения, предоставляемые в качестве входных данных веб-метода. Значения можно предоставить, либо непосредственно введя строки в столбце «Значение», либо выбрав переменные в столбце «Значение».  
  
### <a name="options"></a>Параметры  
 **Служба**  
 Чтобы выполнить веб-метод, выберите веб-службу из списка.  
  
 **Метод**  
 Чтобы выполнить задачу, выберите веб-метод из списка.  
  
 **WebMethodDocumentation**  
 Введите описание веб-метода или нажмите кнопку обзора **(...)** , а затем введите описание в диалоговом окне **Документация веб-метода**.  
  
 **имя**;  
 Перечисляет имена входных данных веб-метода.  
  
 **Тип**  
 Перечисляет тип входных данных.  
  
> [!NOTE]  
>  Задача «Веб-служба» поддерживает только параметры следующих типов данных: типы-примитивы, такие как integer и string, массивы и последовательности типов-примитивов, а также перечисления.  
  
 **Переменная**  
 Установите флажки, чтобы использовать переменные для входных данных.  
  
 **Значение**  
 Если установлены флажки «Переменная», выберите переменные из списка для входных данных; в противном случае введите значения входных данных вручную.  
  
## <a name="web-service-task-editor-output-page"></a>Редактор задачи «Веб-служба» (страница «Вывод»)
  Используйте страницу **Вывод** диалогового окна **Редактор задачи «Веб-служба»** , чтобы указать, где следует хранить результаты, возвращенные веб-методом.  
  
### <a name="static-options"></a>Статические параметры  
 **OutputType**  
 Выберите тип хранения, используемый для хранения результатов. Это свойство имеет параметры, указанные в следующей таблице.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**Соединение с файлом**|Хранить результаты в файле. При выборе этого значения отображается динамический параметр **Файл**.|  
|**Переменная**|Хранить результаты в переменной. При выборе этого значения отображается динамический параметр **Переменная**.|  
  
### <a name="outputtype-dynamic-options"></a>Динамические параметры OutputType  
  
#### <a name="outputtype--file-connection"></a>OutputType = Соединение с файлом  
 **Файл**  
 Выберите в списке диспетчер подключений файлов или щелкните \<**New Connection...**>, чтобы создать диспетчер подключений.  
  
 **См. также:** подробные сведения о [диспетчере файловых подключений](../../integration-services/connection-manager/file-connection-manager.md) и о [редакторе диспетчера файловых подключений](../connection-manager/file-connection-manager.md).  
  
#### <a name="outputtype--variable"></a>OutputType = Переменная  
 **Переменная**  
 Выберите переменную в списке или щелкните \<**New Variable...**> для создания переменной.  
  
 **См. также:**  подробные сведения о [переменных в службах Integration Services &#40;SSIS&#41;](../../integration-services/integration-services-ssis-variables.md) и о [добавлении переменной](../integration-services-ssis-variables.md).  
  
## <a name="related-content"></a>См. также  
 Видео с руководством по [ вызвать веб-службу с помощью задачи "Веб-служба" (видеоматериал по SQL Server)](/previous-versions/dn912438(v=msdn.10)) на портале technet.microsoft.com.