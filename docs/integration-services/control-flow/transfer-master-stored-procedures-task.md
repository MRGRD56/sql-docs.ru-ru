---
description: Задача «Передача главных хранимых процедур»
title: Задача "Передача главных хранимых процедур" | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.transfermasterspstask.f1
- sql13.dts.designer.transferstoredprocedurestask.general.f1
- sql13.dts.designer.transferstoredprocedurestask.storedprocedures.f1
helpviewer_keywords:
- Transfer Master Stored Procedures task [Integration Services]
ms.assetid: 81702560-48a3-46d1-a469-e41304c7af8e
author: chugugrace
ms.author: chugu
ms.openlocfilehash: a053581c9f6ca8f9592aef42c1649511ecc51a02
ms.sourcegitcommit: cfa04a73b26312bf18d8f6296891679166e2754d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2020
ms.locfileid: "92194226"
---
# <a name="transfer-master-stored-procedures-task"></a>Задача «Передача главных хранимых процедур»

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  Задача "Передача главных хранимых процедур" перемещает одну или несколько пользовательских хранимых процедур между базами данных **master** в экземплярах [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Чтобы переместить хранимую процедуру из базы данных **master** , владелец процедуры должен быть dbo.  
  
 Задачу «Передача главных хранимых процедур» можно настроить на перемещение всех хранимых процедур или только определенных хранимых процедур. Данная задача не копирует системные хранимые процедуры.  
  
 Главные хранимые процедуры, подлежащие перемещению, уже могут существовать по целевому адресу. Задачу «Передача главных хранимых процедур» можно настроить на обработку существующих хранимых процедур следующим образом:  
  
-   Заменить существующие хранимые процедуры.  
  
-   Отменить задачу при наличии дубликатов хранимых процедур.  
  
-   Пропустить дублированные хранимые процедуры.  
  
 Во время выполнения задача «Передача главных хранимых процедур» подключается к исходному и целевому серверам при помощи двух диспетчеров соединений SMO. Диспетчеры соединений SMO настроены отдельно от задачи «Передача главных хранимых процедур», и на них имеется ссылка в задаче «Передача главных хранимых процедур». Диспетчеры соединений SMO определяют сервер и режим проверки подлинности, используемый для доступа к серверу. Дополнительные сведения см. в статье [SMO Connection Manager](../../integration-services/connection-manager/smo-connection-manager.md).  
  
## <a name="transferring-stored-procedures-between-instances-of-sql-server"></a>Передача хранимых процедур между экземплярами SQL Server  
 Задача «Передача главных хранимых процедур» поддерживает источник и назначение [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
## <a name="events"></a>События  
 Задача вызывает уведомляющее событие, сообщающее о количестве выполненных перемещений хранимых процедур, и предупреждение при перезаписи хранимой процедуры.  
  
 Задача «Передача главных хранимых процедур» не сообщает о прогрессе перемещения; она сообщает только о степени выполнения 0% и 100%.  
  
## <a name="execution-value"></a>Значение выполнения  
 Значение выполнения, определенное в свойстве **ExecutionValue** задачи, возвращает количество перемещенных хранимых процедур. После назначения пользовательской переменной свойству **ExecValueVariable** задачи "Передача главных хранимых процедур" сведения о перемещении хранимой процедуры могут стать доступными другим объектам в пакете. Дополнительные сведения см. в разделах [Переменные в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-variables.md) и [Использование переменных в пакетах](../integration-services-ssis-variables.md).  
  
## <a name="log-entries"></a>Записи журнала  
 Задача «Передача главных хранимых процедур» содержит следующие пользовательские записи журнала:  
  
-   TransferStoredProceduresTaskStartTransferringObjects — данная запись в журнале сообщает о начале перемещения. В записях журнала указывается время запуска.  
  
-   TransferSStoredProceduresTaskFinishedTransferringObjects — данная запись в журнале сообщает об окончании перемещения. В записях журнала указывается время завершения.  
  
 Кроме того, запись журнала для события **OnInformation** сообщает о количестве перемещенных хранимых процедур, а запись журнала для события **OnWarning** фиксирует каждую перезаписываемую хранимую процедуру в целевом месте.  
  
## <a name="security-and-permissions"></a>Безопасность и разрешения  
 Пользователь должен иметь разрешение на просмотр списка хранимой процедуры в базе данных **master** на источнике и быть членом роли сервера sysadmin или иметь права на созданные хранимые процедуры в базе данных **master** на целевом сервере.  
  
## <a name="configuration-of-the-transfer-master-stored-procedures-task"></a>Настройка задачи «Передача главных хранимых процедур»  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующих разделах:  
  
-   [Страница «Выражения»](../../integration-services/expressions/expressions-page.md)  
  
 Сведения о задании этих свойств программными средствами см. в следующем разделе:  
  
-   <xref:Microsoft.SqlServer.Dts.Tasks.TransferStoredProceduresTask.TransferStoredProceduresTask>  
  
### <a name="configuring-the-transfer-master-stored-procedures-task-programmatically"></a>Программная настройка задачи «Передача главных хранимых процедур»  
  
## <a name="related-tasks"></a>Связанные задачи  
 Дополнительные сведения об установке этих свойств в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] см. в следующем разделе:  
  
-   [Задание свойств задач или контейнеров](./add-or-delete-a-task-or-a-container-in-a-control-flow.md)  
  
## <a name="transfer-master-stored-procedures-task-editor-general-page"></a>Редактор задачи «Передача главных хранимых процедур» (страница «Общие»)
  Используйте страницу **Общие** в диалоговом окне **Редактор задачи «Передача главных хранимых процедур»** , чтобы назвать и описать задачу переноса главных хранимых процедур.  
  
> [!NOTE]  
>  Эта задача передает только пользовательские хранимые процедуры, принадлежащие **dbo** , из базы данных **master** на исходном сервере в базу данных **master** на целевом сервере. Пользователям должно быть предоставлено разрешение CREATE PROCEDURE в базе данных **master** на целевом сервере, или они должны быть членами предопределенной роли сервера **sysadmin** на целевом сервере, чтобы создавать на нем хранимые процедуры.  
  
### <a name="options"></a>Параметры  
 **Название**  
 Введите уникальное имя для задачи «Передача главных хранимых процедур». Это имя используется в качестве метки для значка задачи.  
  
> [!NOTE]  
>  Имена задач в пределах пакета должны быть уникальными.  
  
 **Описание**  
 Введите описание для задачи «Передача главных хранимых процедур».  
  
## <a name="transfer-master-stored-procedures-task-editor-stored-procedures-page"></a>Редактор задачи «Передача главных хранимых процедур» (страница «Хранимые процедуры»)
  На странице **Хранимые процедуры** диалогового окна **Редактор задачи "Передача главных хранимых процедур"** укажите свойства для копирования одной или нескольких пользовательских хранимых процедур из базы данных **master** одного экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в базу данных **master** другого экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
> [!NOTE]  
>  Эта задача передает только пользовательские хранимые процедуры, принадлежащие **dbo** , из базы данных **master** на исходном сервере в базу данных **master** на целевом сервере. Пользователям должно быть предоставлено разрешение CREATE PROCEDURE в базе данных **master** на целевом сервере, или они должны быть членами предопределенной роли сервера **sysadmin** на целевом сервере, чтобы создавать на нем хранимые процедуры.  
  
### <a name="options"></a>Параметры  
 **SourceConnection**  
 Выберите из списка диспетчер подключений SMO или нажмите кнопку **\<New connection...>** , чтобы создать новое подключение к исходному серверу.  
  
 **DestinationConnection**  
 Выберите из списка диспетчер подключений SMO или нажмите кнопку **\<New connection...>** , чтобы создать новое подключение к целевому серверу.  
  
 **IfObjectExists**  
 Выберите, каким способом задача будет обрабатывать пользовательские хранимые процедуры с именами, уже существующими в базе данных **master** на целевом сервере.  
  
 Параметры этого свойства приведены в следующей таблице.  
  
|Значение|Description|  
|-----------|-----------------|  
|**FailTask**|Если в базе данных **master** на целевом сервере уже существуют хранимые процедуры с теми же именами, задача завершается ошибкой.|  
|**Overwrite**|Задача перезаписывает хранимые процедуры с теми же именами в базе данных **master** на целевом сервере.|  
|**Skip**|Задача пропускает хранимые процедуры с теми же именами в базе данных **master** на целевом сервере.|  
  
 **TransferAllStoredProcedures**  
 Укажите, все ли пользовательские хранимые процедуры в базе данных **master** на исходном сервере следует копировать на целевой сервер.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**True**|Копировать все пользовательские хранимые процедуры базы данных **master** .|  
|**False**|Копировать только указанные хранимые процедуры.|  
  
 **StoredProceduresList**  
 Укажите, какие пользовательские хранимые процедуры в базе данных **master** на исходном сервере следует копировать в целевую базу данных **master** . Этот параметр доступен, только если параметру **TransferAllStoredProcedures** присвоено значение **False**.  
  
## <a name="see-also"></a>См. также:  
 [Задача «Передача объектов SQL Server»](../../integration-services/control-flow/transfer-sql-server-objects-task.md)   
 [Задачи служб Integration Services](../../integration-services/control-flow/integration-services-tasks.md)   
 [Поток управления](../../integration-services/control-flow/control-flow.md)  
  
