---
description: Назначение Teradata
title: Назначение Teradata | Документация Майкрософт
ms.custom: ''
ms.date: 11/22/2019
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 191c89d1fdced6ad1581dadff1e4ed92f397f640
ms.sourcegitcommit: c5078791a07330a87a92abb19b791e950672e198
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "92194726"
---
# <a name="teradata-destination"></a>Назначение Teradata

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]

Назначение Teradata выполняет массовую загрузку данных в базу данных Teradata.

Для подключения к источнику данных это назначение использует диспетчер подключений Teradata. Дополнительные сведения см. в разделе [Диспетчер подключений Teradata](teradata-connection-manager.md).

## <a name="load-options"></a>Параметры загрузки

Назначение Teradata поддерживает два режима загрузки данных:

- **Поток данных TPT**: в этом режиме используется оператор TPT API Stream (протокол Teradata TPump).

- **Загрузка TPT** (быстрая массовая загрузка): в этом режиме используется оператор TPT API Load (протокол Teradata FastLoad) для быстрой массовой загрузки.

Режим быстрой загрузки имеет следующие ограничения.

- Ограничение количества сеансов для базы данных Teradata определяется в зависимости от того, какой фактор будет обнаружен первым:
    - Ограничения сеансов заданы с помощью команды SESSIONS
    - Ограничение базы данных Teradata для одного сеанса на AMP
    - Максимальное число сеансов на приложение в пределах платформы: определяется переменной MaxSess в файле CLISPB.DAT. ПО интерфейса коммуникационного процессора (COP). Для указания ограничения платформы можно использовать команду TDP SET MAXSESSIONS. Ограничение по умолчанию равно значению MAXSESS сервера.

- Совместные индексы не поддерживаются.
- Ссылки на внешние ключи в целевых таблицах не поддерживаются.
- Целевые таблицы, определенные с помощью вторичного индекса, не поддерживаются.

Дополнительные сведения об ограничениях быстрой загрузки Teradata см. в разделе "Справочник по быстрой загрузке Teradata".

Режим можно задать в [Редакторе назначений Teradata (страница "Диспетчер подключений")](#teradata-destination-editor-connection-manager-page).

## <a name="error-handling"></a>Обработка ошибок

Ошибки, возвращенные в процессе загрузки, записываются во временные таблицы ошибок, которые блокируются во время загрузки.
Свойство **Максимальное число ошибок (MaxErrors)** в Расширенном редакторе задает максимальное количество ошибок, которые могут быть записаны в эти таблицы.

Если максимальное число ошибок больше нуля, создаются таблицы ошибок с уникальными именами, а в журнал пакетов заносится информационное сообщение. Ошибки можно получить с помощью стандартного вывода ошибок компонента служб SSIS.

Временные таблицы удаляются после завершения процесса загрузки. Если назначению Teradata не удается прочитать временные таблицы, они не удаляются, если не установлен флажок свойства **Всегда удалять таблицу ошибок**.  Если процесс загрузки остановлен до завершения, при необходимости нужно вручную удалить эти таблицы. Эти таблицы расположены в той же базе данных, что и таблица назначения.

При достижении **максимального количества ошибок** состояние таблицы назначения зависит от используемого режима.

- В режиме быстрой загрузки таблица назначения непригодна для использования. Для повторного выполнения необходимо выполнить усечение или удалить и повторно создать таблицу назначения. Откат не поддерживается.
- В режиме оператора TPT Steam назначение Teradata выполняется с помощью механизма буферизованной строки. Если задание завершается сбоем, все выполненные изменения (буферы были отправлены) во время сбоя являются постоянными в таблицах назначения. Понятие отката отсутствует. Таблицы ошибок будут удалены.

Назначение Teradata содержит вывод с ошибками. Дополнительные сведения см. в разделе [Редактор назначения Teradata (страница "Вывод ошибок")](#teradata-destination-editor-error-output-page).

## <a name="parallelism"></a>Parallelism

В режиме быстрой загрузки параллелизм ограничен: несколько независимых заданий быстрой загрузки не могут одновременно обращаться к одной и той же таблице. Кроме того, количество одновременных заданий быстрой загрузки ограничивается переменной **MaxLoadTasks** базы данных.

Ограничений параллелизма в режиме TPT Stream нет. В одной таблице можно одновременно выполнять несколько назначений Teradata, хотя это может снизить производительность для каждого назначения Teradata. Дополнительные сведения см. в документации по Teradata.

## <a name="troubleshooting-the-teradata-destination"></a>Устранение неполадок назначения Teradata

Вы можете регистрировать вызовы, которые источник Teradata передает в API-интерфейс Teradata Parallel Transporter (TPT API). Вы можете включить ведение журнала пакетов и выбрать **диагностическое событие** на уровне пакета для записи вызовов.

Вы можете вести журнал вызовов ODBC, которые источник Teradata передает драйверу Teradata ODBC, включив трассировку диспетчера драйверов ODBC. Дополнительные сведения см. в документации Майкрософт по теме *Как формировать трассировку ODBC с помощью администратора источника данных ODBC*.

## <a name="teradata-destination-custom-properties"></a>Пользовательские свойства назначения Teradata

В следующей таблице описаны пользовательские свойства назначения Teradata. Все свойства доступны для чтения и записи.

|Имя свойства|Тип данных|Описание|
|:-|:-|:-|
|AlwaysDropErrorTable|Логическое значение|Значение по умолчанию — **False**. Удалите все таблицы ошибок, если значение равно **True**, даже если не удается прочитать назначение Teradata.|
|ArraySupport|Логическое значение|Значение по умолчанию — **True**. Группы DML используют параметр ArraySupport, если значение равно **true**. Применимо только для TPT Stream. Это свойство находится в **Расширенном редакторе**.|
|Буферы|Целое число|Число буферов запросов можно увеличить, задав значение от 2 до 64. Применимо только для TPT Stream. Это свойство находится в **Расширенном редакторе**.|
|BufferMode|Логическое значение|Значение по умолчанию — **True**. Значение должно быть равно **true**, если используется функция PutBuffer. Это свойство находится в **Расширенном редакторе**.|
|BufferSize|Целое число|Размер выходного буфера (в КБ), используемого для отправки пакетов загрузки. Значение по умолчанию — 1024. Применимо только для TPT Load. Это свойство находится в **Расширенном редакторе**.|
|DataEncryption|Логическое значение|Значение по умолчанию — **False**. Полное шифрование для безопасности используется, если значение равно **true**.|
|DefaultCodePage|Целое число|Кодовая страница, которая используется, если для источника данных нет сведений о кодовой странице. <br>**Примечание.** Это свойство находится в **Расширенном редакторе**.|
|DetailedTracingLevel|Integer (перечисление)|Выберите один из следующих параметров для расширенной трассировки: <br> **Off**: без расширенного ведения журнала. <br> **General**: ведение журнала общей трассировки действий, связанных с драйвером. <br> **CLI**: ведение журнала трассировки действий, связанных с CLI 2.0. <br> **Notify Method**: ведение журнала трассировки действий, связанных с функциями. <br> **Common Library**: ведение журнала трассировки действий библиотеки opcommon. <br> **Все**: трассировка всех описанных выше действий регистрируется в журнале. <br> Файл журнала расширенной трассировки определен в свойстве **DetailedTracingFile**. <br> Свойство **DetailedTracingFile** должно быть задано, если этот параметр не выключен. <br> Это свойство находится в **Расширенном редакторе**.|
|DetailedTracingFile|Строка|Путь к файлу журнала, который создается автоматически, когда для параметра **DetailedTracingLevel** не установлено значение **Off**. Это свойство находится в **Расширенном редакторе**.|
|DiscardLargeRow|Логическое значение|Значение по умолчанию — **False**. Отбросить большие строки (больше 64 КБ), если значение равно **true**|
|ErrorTableName|Строка|Имя таблицы ошибок. По умолчанию — это имя таблицы назначения|
|ExtendedStringColumnsAllocation|Логическое значение|**Максимальный коэффициент распределения символов** используется, если значение равно **true**. <br> Это значение должно быть равно **true**, если для свойства базы данных Teradata **Export Width Table ID** задано значение **Maximal Defaults**. <br> Значение по умолчанию — **False**.|
|FastLoad|Логическое значение|Быстрая загрузка используется, если значение равно **true**. Значение по умолчанию — **false**. Это свойство можно также задать в [редакторе назначения Teradata (страница "Диспетчер подключений")](#teradata-destination-editor-connection-manager-page).|
|MaxErrors|Целое число|Максимальное число ошибок, после превышения которого останавливается поток данных. По умолчанию задано значение **0**, что означает отсутствие ограничения на число ошибок.<br> Используется, если на странице **Обработка ошибок** выбрано **Перенаправить поток**. До достижения предельного числа ошибок в вывод ошибок возвращаются все ошибки. Дополнительные сведения см. в разделе [Редактор назначения Teradata (страница "Вывод ошибок")](#teradata-destination-editor-error-output-page).|
|MaxSessions|Целое число|Максимальное количество сеансов, в которых выполнен вход в систему. Это значение должно быть больше единицы. Значение по умолчанию — один сеанс для каждого доступного AMP.|
|MinSessions|Целое число|Минимальное количество сеансов, в которых выполнен вход в систему. Это значение должно быть больше единицы. Значение по умолчанию — один сеанс для каждого доступного AMP.|
|Pack|Целое число|Число инструкций для упаковки в запрос с несколькими инструкциями. Значение по умолчанию — 20, максимально допустимое — 2400. Применимо только для TPT Stream. Это свойство находится в **Расширенном редакторе**.|
|PackMaximum|Логическое значение|Динамически определяет максимальный коэффициент упаковки для текущего задания потока, если значение равно **True**. Применимо только для TPT Stream. Это свойство находится в **Расширенном редакторе**.|
|QueryBandSessInfo|Varchar|Определяемое пользователем выражение диапазона запроса для обратного мониторинга и контроля. Это свойство должно быть в формате строки подключения. Это свойство находится в **Расширенном редакторе**.|
|ReplicationOveride|Integer (перечисление)|Параметры: <br> **По умолчанию**: Инструкция SET SESSION OVERRIDE REPLICATION не отправляется в базу данных. Используются параметры базы данных по умолчанию. <br> **Когда обновлено**: Стандартные элементы управления службы репликации переопределяются. <br> **Off**: Стандартные элементы управления службы репликации используются. <br> Это свойство применимо только для режима TPT Stream. <br> Это свойство находится в **Расширенном редакторе**.|
|Robust|Логическое значение|Для операций восстановления и перезапуска используется устойчивая логика перезапуска, если значение равно **true**. Это свойство применимо только для режима **TPT Stream**. Это свойство находится в **Расширенном редакторе**.|
|TableName|Строка|Имя таблицы с используемыми данными.|
|TenacityHours|Целое число|Количество часов, в течение которых драйвер TPT пытается войти в систему, если уже выполняется максимальное количество операций загрузки и экспорта. По умолчанию — 4 часа. Это свойство находится в **Расширенном редакторе**|
|TenacitySleep|Целое число|Количество минут, на которое драйвер TPT приостанавливается перед попыткой входа в систему при достижении предела. Ограничение определяется свойствами **MaxSessions** и **TenacityHours**. Значение по умолчанию — 6 минут. Это свойство находится в **Расширенном редакторе**|
|UnicodePassThrough|Логическое значение|Off (по умолчанию): отключить пропуск символов Юникода. <br>On: включить пропуск символов Юникода.|

## <a name="configuring-the-teradata-destination"></a>Настройка назначения Teradata

Назначение Teradata можно настраивать программными средствами или с помощью конструктора служб SSIS.

На рисунке ниже показан редактор назначения Teradata. Он содержит такие страницы: "Диспетчер подключений", "Сопоставления" и "Вывод ошибок".

Дополнительные сведения см. в одном из следующих разделов:

- [Редактор назначения Teradata (страница "Диспетчер подключений")](#teradata-destination-editor-connection-manager-page)
- [Редактор назначения Teradata (страница "Сопоставления")](#teradata-destination-editor-mappings-page)
- [Редактор назначения Teradata (страница "Вывод ошибок")](#teradata-destination-editor-error-output-page)

![редактор назначения](media/teradata-destination.png)

Диалоговое окно **Расширенный редактор** содержит свойства, которые могут быть заданы программным путем.
Открытие диалогового окна **Расширенный редактор** .

- На экране **Поток данных** конкретного проекта Integration Services щелкните правой кнопкой мыши назначение Teradata и выберите пункт **Показать расширенный редактор**.

Дополнительные сведения о свойствах, которые вы можете задать в диалоговом окне "Расширенный редактор", см. в разделе [Пользовательские свойства назначения Teradata](#teradata-destination-custom-properties).

## <a name="teradata-destination-editor-connection-manager-page"></a>Редактор назначения Teradata (страница "Диспетчер подключений")

Страница **Диспетчер подключений** диалогового окна **Редактор назначения Teradata** используется для выбора диспетчера подключений Teradata для назначения. На этой странице также можно выбрать таблицу или представление базы данных.

Открытие страницы "Диспетчер подключений" редактора назначения Teradata

- В SQL Server Data Tools откройте пакет SQL Server Integration Services (SSIS) с назначением Teradata.

- На вкладке "Поток данных" дважды щелкните назначение Teradata.

- В окне "Редактор назначения Teradata" щелкните "Диспетчер подключений".

### <a name="options"></a>Параметры

**Connection manager**

Выберите в списке существующий диспетчер подключений или нажмите кнопку **Создать**, чтобы создать диспетчер подключений Teradata.

**Создать**

Нажмите кнопку **Создать**. Откроется диалоговое окно **Редактор диспетчера подключений Teradata**, где можно создать диспетчер подключений.

**Режим доступа к данным**

Выберите метод выбора данных из источника. Доступные параметры показаны в следующей таблице.

|Параметр|Описание|
|:-|:-|
|Table Name — TPT Stream|Добавочный режим с помощью оператора TPT Stream. <br>**Имя таблицы или представления.** Выберите в списке существующую таблицу или представление. В этом списке показаны только первые 1000 таблиц. Можно ввести префикс имени таблицы или использовать любую часть имени с подстановочным знаком (*), чтобы получить список нужных таблиц.|
|Table Name — TPL Load|Режим быстрой (прямой) загрузки с помощью оператора TPT API Load (протокол Teradata FastLoad), в котором таблица назначения должна быть пустой. <br>**Имя таблицы или представления.** Выберите в списке существующую таблицу или представление. В этом списке показаны только первые 1000 таблиц. Можно ввести префикс имени таблицы или использовать любую часть имени с подстановочным знаком (*), чтобы получить список нужных таблиц.|

**Шифрование данных**. Флажок для включения шифрования данных. Значение по умолчанию не выбрано.

**Всегда удалять таблицу ошибок**. Флажок для удаления таблиц ошибок во всех экземплярах.

**Таблица ошибок**. Имя таблицы, в которую записываются ошибки.

**Минимальное число сеансов**. Минимальное число сеансов, в которых выполнен вход в систему. Значение по умолчанию — один сеанс для каждого доступного AMP. Это значение должно быть больше единицы.

**Максимальное число сеансов**. Максимальное число сеансов, в которых выполнен вход в систему. Значение по умолчанию — один сеанс для каждого доступного AMP. Это значение должно быть больше единицы.

**Максимальное количество ошибок**. Максимальное количество ошибок, которое может быть возвращено до остановки или перенаправления потока данных. 

## <a name="teradata-destination-editor-mappings-page"></a>Редактор назначения Teradata (страница "Сопоставления")

Страница **Сопоставления** диалогового окна **Редактор назначения Teradata** используется для сопоставления входных столбцов с целевыми.

Открытие страницы "Сопоставления" редактора назначения Teradata

- В SQL Server Data Tools откройте пакет SQL Server Integration Services (SSIS) с назначением Teradata.

- На вкладке "Поток данных" дважды щелкните назначение Teradata.

- В редакторе назначений Teradata щелкните "Сопоставления".

### <a name="options"></a>Параметры

**Доступные входные столбцы**

Список доступных входных столбцов. Перетащите входной столбец в доступный целевой столбец, чтобы сопоставить эти столбцы.

**Доступные целевые столбцы**

Список доступных целевых столбцов. Перетащите целевой столбец в доступный входной столбец, чтобы сопоставить эти столбцы.

**Входной столбец**

Позволяет просматривать выбранные входные столбцы. Сопоставления можно удалить, выбрав вариант **<игнорировать>**, чтобы исключить столбцы из выходных данных.

**Целевой столбец**

Просмотрите все доступные целевые столбцы, сопоставленные и несопоставленные.

>[!NOTE]
>
>Столбцы неподдерживаемых типов данных будут удалены из сопоставления с предупреждением.

## <a name="teradata-destination-editor-error-output-page"></a>Редактор назначения Teradata (страница "Вывод ошибок")
Страница "Вывод ошибок" диалогового окна "Редактор назначения Teradata" используется для выбора параметров обработки ошибок.

**Открытие страницы "Вывод ошибок" редактора назначения Teradata**

- В SQL Server Data Tools откройте пакет SQL Server Integration Services (SSIS) с назначением Teradata.

- На вкладке "Поток данных" дважды щелкните назначение Teradata.

- В редакторе назначений Teradata щелкните "Вывод ошибок".

### <a name="options"></a>Параметры

**Действия при ошибке**

Выберите порядок обработки ошибок в потоке назначением Teradata: пропустить ошибку, перенаправить строку или вызвать сбой компонента.

**См. также**: [Обработка ошибок в данных](./error-handling-in-data.md?view=sql-server-2017)

**Усечение**

Выберите порядок обработки усечений в потоке назначением Teradata: пропустить ошибку, перенаправить строку или вызвать сбой компонента.

## <a name="next-steps"></a>Дальнейшие действия

- Настройка [диспетчера подключений Teradata](teradata-connection-manager.md)
- Настройка [источника Teradata](teradata-source.md)
- Настройка [назначения Teradata](teradata-destination.md)
- Если у вас возникнут вопросы, посетите страницу [технического сообщества](https://aka.ms/AA6iwdw).