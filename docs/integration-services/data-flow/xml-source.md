---
description: XML-источник
title: XML-источник | Документы Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.xmlsource.f1
- sql13.dts.designer.xmlsourceadapter.connectionmanager.f1
- sql13.dts.designer.xmlsourceadapter.columns.f1
- sql13.dts.designer.xmlsourceadapter.erroroutput.f1
helpviewer_keywords:
- sources [Integration Services], XML
- XML source [Integration Services]
- XML Source Editor
ms.assetid: 68c27ea5-e93d-4e26-bfb2-d967ca0a5282
author: chugugrace
ms.author: chugu
ms.openlocfilehash: c066add73dbc8049f389c828363f1157bb39edae
ms.sourcegitcommit: c5078791a07330a87a92abb19b791e950672e198
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "92194569"
---
# <a name="xml-source"></a>XML-источник

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  XML-источник считывает файл XML-данных и заполняет данными столбцы в выходе источника.  
  
 Данные в XML-файлах часто содержат иерархические связи. Например, XML-файл данных может представлять собой каталоги и элементы этих каталогов. Перед включением данных в поток связь элементов в XML-файле должна быть определена и должен быть создан выход для каждого элемента файла.  
  
## <a name="schemas"></a>Схемы  
 XML-источник использует схему для представления данных в формате XML. XML-источник поддерживает использование файла определения схемы XML (XSD) или встроенных схем для перевода данных из формата XML в табличный формат. XML-источник может быть настроен с помощью диалогового окна **Редактор источника «XML»** , интерфейс пользователя может создавать XSD-файл из указанного файла XML-данных.  
  
> [!NOTE]  
>  Определения DTD не поддерживаются.  
  
 Схемы поддерживают только одно пространство имен, они не поддерживают коллекции схем.  
  
> [!NOTE]  
>  XML-источник не сверяет данные в XML-файле с XSD.  
  
## <a name="xml-source-editor"></a>редактор источника «XML»  
 Данные в XML-файлах часто содержат иерархические отношения. Диалоговое окно **Редактор источника «XML»** использует указанную схему для создания выходов XML-источника. Можно указать XSD-файл, использовать встроенную схему или создать XSD-файл из предоставленного файла XML-данных. Схема должна быть доступна во время редактирования.  
  
 XML-источник создает табличные структуры из XML-данных путем создания выхода для каждого элемента, который содержит вложенные элементы в XML-файлах. Например, если XML-данные представляют собой каталоги и их элементы, XML-источник создает выход для каталогов и выход для каждого типа элемента, содержащегося в этих каталогах. Выход каждого элемента будет содержать выходные столбцы с атрибутами этого элемента.  
  
 Чтобы предоставить сведения об иерархической связи данных в выходах, XML-источник добавляет в выходы столбец, который определяет родительский элемент для каждого дочернего элемента. Используя пример с каталогами с разными типами элементов, каждый элемент будет иметь значение столбца, в котором определен каталог, к которому принадлежит этот элемент.  
  
 XML-источник создает выход для каждого элемента, но не обязательно использовать все выходы. Можно удалить любой выход, который не будет использован, или просто не подключать его к компоненту нисходящего потока данных.  
  
 XML-источник также создает имена выходов, чтобы убедиться в том, что эти имена однозначны. Эти имена могут быть длинными и оказаться неудобными для идентификации выходов. Выходы можно переименовывать с условием уникальности новых имен. Также можно изменить тип данных и длину выходных столбцов.  
  
 Для каждого выхода XML-источник добавляет выход ошибок. По умолчанию столбцы выхода ошибок имеют строковый тип данных в формате Юникод (DT_WSTR) длиной 255 символов, но эти столбцы выхода ошибок можно настраивать, изменяя тип данных и длину.  
  
 Если в XML-файле данных содержатся элементы, которых нет в XSD-файле, то такие элементы игнорируются и никакой выход для них не создается. С другой стороны, если в XML-файле данных нет элементов, которые есть в XSD-файле, выход будет содержать столбцы со значением NULL.  
  
 Когда данные извлекаются из XML-файла данных, они преобразуются в тип данных служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Однако источник XML не может преобразовать XML-данные в типы данных DT_TIME2 или DT_DBTIMESTAMP2, поскольку источник эти типы не поддерживает. Дополнительные сведения см. в разделе [Integration Services Data Types](../../integration-services/data-flow/integration-services-data-types.md).  
  
 XSD-файл или встроенная схема может определять тип данных элементов, но если это не так, то диалоговое окно **Редактор источника "XML"** устанавливает тип данных строки Юникода (DT_WSTR) для столбца выхода, содержащего этот элемент, и устанавливает длину столбца, содержащую 255 символов.  
  
 Если схема данных указывает максимальную длину элемента, длина выходного столбца становится равной этому значению. Если максимальная длина больше длины, поддерживаемой типом данных служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , к которому приведен элемент, то данные усекаются до допустимой для этого типа максимальной длины. Например, если длина строки 5000, она усекается до 4000 символов, так как максимальная длина типа данных DT_WSTR — 4000 символов; таким же образом данные типа byte урезаются до 8000 — до максимальной длины типа данных DT_BYTES. Если в схеме не указана максимальная длина, то по умолчанию длина столбцов с любым типом данных составляет 255. Усечение данных в XML-источнике происходит так же, как и в других компонентах потока данных. Дополнительные сведения см. в разделе [Обработка ошибок в данных](../../integration-services/data-flow/error-handling-in-data.md).  
  
 Тип данных и длина столбца могут быть изменены. Дополнительные сведения см. в разделе [Integration Services Data Types](../../integration-services/data-flow/integration-services-data-types.md).  
  
## <a name="configuration-of-the-xml-source"></a>Конфигурация XML-источника  
 XML-источник поддерживает три разных способа доступа к данным. Можно указать расположение файла XML-данных, переменную, содержащую расположение этого файла, или же переменную с данными в формате XML.  
  
 XML-источник содержит пользовательские свойства **XMLData** и **XMLSchemaDefinition** , которые можно обновлять выражениями свойств во время загрузки пакета. Дополнительные сведения см. в разделах [Выражения служб Integration Services (SSIS)](../../integration-services/expressions/integration-services-ssis-expressions.md), [Использование выражений свойств в пакетах](../../integration-services/expressions/use-property-expressions-in-packages.md) и [Пользовательские свойства источника "XML"](../../integration-services/data-flow/xml-source-custom-properties.md).  
  
 XML-источник поддерживает несколько обычных выходов и несколько выходов ошибок.  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] включает диалоговое окно **Редактор источника XML** для настройки этого источника. Это диалоговое окно доступно из конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Диалоговое окно **Расширенный редактор** содержит свойства, которые можно установить с помощью программных средств. Дополнительные сведения о свойствах, которые вы можете задать в диалоговом окне **Расширенный редактор** или программными средствами, см. в следующих разделах.  
  
-   [Общие свойства](./set-the-properties-of-a-data-flow-component.md)  
  
-   [Пользовательские свойства источника «XML»](../../integration-services/data-flow/xml-source-custom-properties.md)  
  
 Дополнительные сведения об установке значений свойств см. в следующих разделах:  
  
-   [Установление свойств компонента потока данных](../../integration-services/data-flow/set-the-properties-of-a-data-flow-component.md)  
  
## <a name="xml-source-editor-connection-manager-page"></a>Редактор источника «XML» (страница «Диспетчер соединений»)
  Используйте страницу **Диспетчер соединений** компонента **Редактор источника «XML»** для указания XML-файла и XSD-схемы, выполняющей преобразование XML-данных.  
  
### <a name="static-options"></a>Статические параметры  
 **Режим доступа к данным**  
 Укажите метод выбора данных из источника.  
  
|Значение|Описание|  
|-----------|-----------------|  
|Расположение XML-файла|Извлечь данные из XML-файла.|  
|XML-файл из переменной|Указать имя XML-файла в переменной.<br /><br /> **Дополнительные сведения** [Использование переменных в пакетах](../integration-services-ssis-variables.md)|  
|XML-данные из переменной|Извлечь XML-данные из значения переменной.|  
  
 **Использовать встроенную схему**  
 Устанавливает, содержит ли источник XML-данных в себе XSD-схему, определяющую и проверяющую его структуру и данные.  
  
 **Местоположение XSD**  
 Введите путь и имя файла XSD-схемы или найдите этот файл, нажав кнопку **Обзор**.  
  
 **Обзор**  
 Используйте диалоговое окно **Открыть** для выбора нужного файла XSD-схемы.  
  
 **Сформировать XSD**  
 Используйте диалоговое окно **Сохранение** для выбора местоположения автоматически сформированного файла XSD-схемы. Редактор формирует схему на основе структуры XML-данных.  
  
### <a name="data-access-mode-dynamic-options"></a>Динамические параметры режима доступа к данным  
  
#### <a name="data-access-mode--xml-file-location"></a>Режим доступа к данным = местоположение XML  
 **Местоположение XML**  
 Введите путь и имя файла с XML-данными или определите расположение файла, нажав кнопку **Обзор**.  
  
 **Обзор**  
 Используйте диалоговое окно **Открыть** для нахождения нужного файла с XML-данными.  
  
#### <a name="data-access-mode--xml-file-from-variable"></a>Режим доступа к данным = XML-файл из переменной  
 **Имя переменной**  
 Выберите переменную, содержащую путь и имя XML-файла.  
  
#### <a name="data-access-mode--xml-data-from-variable"></a>Режим доступа к данным = XML-данные из переменной  
 **Имя переменной**  
 Выберите переменную, содержащую XML-данные.  
  
## <a name="xml-source-editor-columns-page"></a>Редактор источника «XML» (страница «Столбцы»)
  Узел **Столбцы** диалогового окна **Редактор источника "XML"** используется для настройки соответствия выходного столбца внешнему (исходному) столбцу.  
  
### <a name="options"></a>Параметры  
 **Доступные внешние столбцы**  
 Просмотр списка доступных внешних столбцов источника данных. В этой таблице нельзя добавлять или удалять столбцы.  
  
 **Внешний столбец**  
 Просмотр внешних (исходных) столбцов в том порядке, в котором их будет считывать задача. Этот порядок можно изменить, сначала очистив выделенные столбцы в таблице, отображаемой в редакторе, а затем выбрав внешние столбцы из списка в другом порядке.  
  
 **Выходной столбец**  
 Введите уникальное имя для каждого выходного столбца. По умолчанию используется имя выбранного внешнего (исходного) столбца, однако можно выбрать любое уникальное описательное имя. Выбранное имя будет отображаться в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
## <a name="xml-source-editor-error-output-page"></a>Редактор источника «XML» (страница «Вывод ошибок»)
  Используйте страницу **Вывод ошибок** диалогового окна **Редактор источника «XML»** для выбора параметров обработки ошибок и задания свойств выходных столбцов ошибок.  
  
### <a name="options"></a>Параметры  
 **Ввод-вывод**  
 Просмотр имени источника данных.  
  
 **Столбец**  
 Просмотрите внешние (исходные) столбцы, выбранные на странице **Диспетчер соединений** диалогового окна **Редактор источника "XML"**.  
  
 **Error**  
 Задайте действие, которое необходимо выполнить при возникновении ошибки: пропустить ошибку, перенаправить строку или вызвать сбой компонента.  
  
 **См. также:** [Обработка ошибок в данных](../../integration-services/data-flow/error-handling-in-data.md)  
  
 **Усечение**  
 Укажите, что нужно сделать при усечении: пропустить ошибку, перенаправить строку или вызвать сбой компонента.  
  
 **Описание**  
 Просмотреть описание ошибки.  
  
 **Присвоить указанное значение выбранным ячейкам**  
 Укажите действие, которое необходимо применить ко всем выбранным ячейкам при возникновении ошибки или усечения: пропустить ошибку, перенаправить строку или вызвать сбой компонента.  
  
 **Применить**  
 Применить параметр обработки ошибок к выбранным ячейкам.  
  
## <a name="related-tasks"></a>Связанные задачи  
 [Извлечение данных с помощью XML-источника](../../integration-services/data-flow/extract-data-by-using-the-xml-source.md)