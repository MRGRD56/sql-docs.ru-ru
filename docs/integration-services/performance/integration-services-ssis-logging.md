---
description: Ведение журналов в службах Integration Services (SSIS)
title: Ведение журналов в службах Integration Services (SSIS) | Документы Майкрософт
ms.custom: supportability
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.dts.designer.configuredtslogs.containers.f1
- sql13.dts.designer.configuredtslogs.loggingdetails.f1
- sql13.dts.designer.configuredtslogs.providersandlogs.f1
- SQL13.SSIS.SSMS.ISMANAGECUSTOMIZEDLOGGINGLEVEL.F1
helpviewer_keywords:
- containers [Integration Services], logs
- Windows Event log provider [Integration Services]
- XML File log provider [Integration Services]
- SQL Server Profiler, log provider
- SQL Server Integration Services packages, logs
- SSIS packages, logs
- tasks [Integration Services], logs
- logs [Integration Services], log providers
- Integration Services packages, logs
- log providers [Integration Services]
- packages [Integration Services], logs
- Text File log provider
- SQL Server log provider
ms.assetid: 65e17889-371f-4951-9a7e-9932b2d0dcde
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 8ac0f913188b23b85548f87a4f458d1c2b754d15
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100347448"
---
# <a name="integration-services-ssis-logging"></a>Ведение журналов в службах Integration Services (SSIS)

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  Службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат регистраторы, которые могут использоваться для реализации ведения журналов в пакетах, контейнерах и задачах. При ведении журнала можно записать текущие сведения о пакете, что поможет при каждом выполнении пакета проводить его аудит и устранять неисправности. Например, журнал может записать имя оператора, запускающего пакет, и время, в которое пакет был начат или завершен.  
  
 Вы можете настроить область ведения журнала на время выполнения пакета на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Дополнительные сведения см. в разделе [Включение ведения журналов при выполнении пакета на сервере служб SSIS](#server_logging).  
  
 Можно также включить ведение журнала при выполнении пакета из командной строки с помощью программы **dtexec** . Дополнительные сведения об аргументах командной строки, относящихся к ведению журналов, см. в разделе [служебная программа dtexec](../../integration-services/packages/dtexec-utility.md).  
  
## <a name="configure-logging-in-sql-server-data-tools"></a>Настройка ведения журналов в SQL Server Data Tools  
 Журналы ассоциируются с пакетами и настраиваются на уровне пакета. Каждая задача или контейнер пакета может вести журнал в любом журнале пакета. Можно включить ведение журналов задач и контейнеров пакета, даже если ведение журнала содержащего их пакета не включено. Например, можно включить ведение журнала задачи «Выполнение SQL», не включая ведение журнала ее родительского пакета. Пакет, контейнер и задача могут делать записи в нескольких журналах. Можно включить ведение журнала только для пакета либо для любой индивидуальной задачи или контейнера, содержащегося в пакете.  
  
 При добавлении журнала к пакету выберите регистратор и место расположения журнала. Регистратор указывает формат для журнальных данных: например, база данных служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или текстовый файл.  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] включают следующие регистраторы.  
  
-   Поставщики журналов текстовых файлов, которые ведут журнальные записи в текстовых файлах ASCII в формате значений, разделенных запятыми (CSV). По умолчанию для имени файла для данного регистратора используется расширение LOG.  
  
-   Поставщик журнала [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] , который записывает трассировки, которые могут быть просмотрены с использованием приложения [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler. По умолчанию для имени файла данного регистратора используется расширение TRC.  
  
    > [!NOTE]  
    >  Нельзя использовать регистратор [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] в пакете, работающем в 64-разрядном режиме.  
  
-   Регистратор [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , который записывает элементы журнала в таблицу **sysssislog** базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
-   Поставщик службы Windows «Журнал событий», который ведет журнальные записи в прикладном журнале службы Windows «Журнал событий» на локальном компьютере.  
  
-   Поставщик журнала XML File, который записывает журнальные файлы в XML-файл. По умолчанию для имени файла данного регистратора используется расширение XML.  
  
 При добавлении регистратора к пакету или программной настройке ведения журнала для идентификации регистратора используйте или ProgID, или ClassID. Это делается вместо использования имен, которые конструктор служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] отображает в диалоговом окне **Настройка журналов служб SSIS** .  
  
 В следующей таблице перечислены идентификаторы ProgID и ClassID для регистраторов, содержащихся в службах [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , а также указано расположение журналов, в которые регистраторы записывают данные.  
  
|Регистратор|ProgID:|ClassID:|Location|  
|------------------|------------|-------------|--------------|  
|текстовый файл|DTS.LogProviderTextFile|{0A039101-ACC1-4E06-943F-279948323883}|Используемый регистратором диспетчер подключения файлов определяет путь к текстовому файлу.|  
|Приложение SQL Server Profiler|DTS.LogProviderSQLProfiler|{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}|Используемый регистратором диспетчер подключения файлов определяет путь к текстовому файлу, необходимому для [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].|  
|SQL Server|DTS.LogProviderSQLServer|{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}|Используемый регистратором диспетчер соединений с OLE DB определяет базу данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , содержащую таблицу sysssislog с записями журнала.|  
|Журнал событий Windows|DTS.LogProviderEventLog|{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}|Журнал приложений в средстве просмотра событий Windows содержит сведения о событиях служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .|  
|XML-файл|DTS.LogProviderXMLFile|{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}|Используемый регистратором диспетчер соединения файлов определяет путь к XML-файлу.|  
  
 Возможно также создание пользовательских регистраторов. Дополнительные сведения см. в разделе [Creating a Custom Log Provider](../../integration-services/extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md).  
  
 Регистраторы в пакете являются элементами коллекции регистраторов пакета. При создании пакета и реализации ведения журналов с использованием конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] вы можете видеть список элементов коллекции в папках **Регистратор** на вкладке **Обозреватель пакетов** конструктора служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 Настройте регистратор путем предоставления имени и описания для регистратора и указания диспетчера соединений, который используется данным регистратором. Регистратор [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] использует диспетчер соединений OLE DB. Регистраторы текстового файла, приложения [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]и XML-файла используют диспетчеры подключения файлов. Регистратор журнала событий Windows не использует диспетчер соединений, потому что он напрямую обращается к журналу регистрации событий Windows. Дополнительные сведения см. в разделах [Диспетчер соединений OLE DB](../../integration-services/connection-manager/ole-db-connection-manager.md) и [диспетчер подключения файлов](../../integration-services/connection-manager/file-connection-manager.md).  
  
### <a name="logging-customization"></a>Настройка ведения журналов  
 Чтобы настроить ведение журнала для события или пользовательского сообщения, службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] предоставляют схему общих записываемых данных для включения в записи журнала. Схема журнала служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] определяет данные, которые можно сохранить в журнал. Можно выбрать элементы схемы журнала для каждой записи.  
  
 Пакету и его контейнерам и задачам не требуется производить запись одних и тех же данных, и задачи одного пакета или контейнера могут производить запись различных данных. Например, пакет может производить запись сведений об операторе при запуске, одна задача может производить запись об источнике ошибки, а другая задача может производить запись о времени этой ошибки. Если пакет и его задачи, а также контейнеры используют несколько журналов, то одни и те же данные записываются во все журналы.  
  
 Можно выбрать необходимый уровень ведения журналов, указав события и данные каждого события для записи. Можно обнаружить, что одни события предоставляют более полезные сведения, чем другие. Например, можно записывать в журнал не только имена компьютеров и операторов для события **PreExecute** , но и все доступные данные о событии **Error** .  
  
 Для предотвращения использования журналами больших объемов дискового пространства или во избежание избыточного ведения журналов, которое может уменьшить производительность, можно ограничить ведение журналов, выбрав отдельные события и элементы данных для записи. Например, можно настроить журнал на запись только даты и имени компьютера для каждой ошибки.  
  
 В конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] можно определить параметры ведения журналов с помощью диалогового окна **Настройка журналов служб SSIS** .  
  
#### <a name="log-schema"></a>Схема журнала  
 Следующая таблица описывает элементы схемы журнала.  
  
|Элемент|Описание|  
|-------------|-----------------|  
|Компьютер|Имя компьютера, на котором произошло событие журнала.|  
|Оператор|Удостоверение пользователя, выполнившего запуск пакета.|  
|SourceName|Имя контейнера или задачи, где произошло событие журнала.|  
|SourceID|Уникальный идентификатор пакета контейнеров «цикл по элементам», «цикл по каждому элементу» или контейнера последовательности; или задача, в которой произошло событие журнала.|  
|ExecutionID|Идентификатор GUID экземпляра выполнения пакета.<br /><br /> Примечание. Запуск одного пакета может создать записи в журнале с разными значениями для элемента ExecutionID. Например, при запуске пакета в среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]на этапе проверки могут быть созданы записи в журнале с элементом ExecutionID, который соответствует среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]. Однако на этапе выполнения могут быть созданы записи журнала с элементом ExecutionID, соответствующим файлу dtshost.exe. Другой пример, когда запускается пакет, содержащий задачи «Выполнение пакета», каждая из этих задач запускается в дочернем пакете. Эти дочерние пакеты могут создавать записи в журнале, имеющие отличные элементы ExecutionID от тех, что создаются в родительском пакете.|  
|MessageText|Сообщение, связанное с записью журнала.|  
|DataBytes|Байтовый массив, специфичный для записи журнала. Значение этого поля изменяется в зависимости от записи журнала.|  
  
 В следующей таблице описываются три дополнительных элемента схемы журнала, которые недоступны во вкладке **Подробные сведения** диалогового окна **Настройка журналов служб SSIS** .  
  
|Элемент|Description|  
|-------------|-----------------|  
|StartTime|Время начала работы контейнера или задачи.|  
|EndTime|Время прекращения работы контейнера или задачи.|  
|DataCode|Необязательное целочисленное значение, которое обычно содержит значение из перечисления <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> , показывающее результат выполнения контейнера или задачи:<br /><br /> 0 — успешное завершение;<br /><br /> 1 — неуспешное завершение;<br /><br /> 2 — завершено;<br /><br /> 3 — отменено.|  
  
#### <a name="log-entries"></a>Записи журнала  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] поддерживают записи журнала для стандартных событий и предоставляют пользовательские записи журнала для многих объектов служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . В конструкторе служб **эти события и пользовательские записи журнала перечислены в диалоговом окне** Настройка журналов служб SSIS [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
 В следующей таблице описаны стандартные события, которые могут быть включены для записи при возникновении событий времени выполнения. Эти записи журнала относятся к исполняемым объектам, пакету, задачам и контейнерам, содержащимся в пакете. Имя записи журнала события совпадает с именем произошедшего события выполнения, послужившего причиной записи в журнал.  
  
|События|Description|  
|------------|-----------------|  
|**OnError**|Производит запись в журнал при возникновении ошибки.|  
|**OnExecStatusChanged**|Вносит запись журнала, если задача (не контейнер) приостанавливается или ее выполнение возобновляется во время отладки.|  
|**OnInformation**|Производит запись в журнал во время проверки подлинности и выполнения исполняемого объекта.|  
|**OnPostExecute**|Производит запись немедленно после окончания выполнения исполняемого объекта.|  
|**OnPostValidate**|Производит запись в журнал при завершении проверки подлинности исполняемого объекта.|  
|**OnPreExecute**|Производит запись сразу перед началом выполнения исполняемого объекта.|  
|**OnPreValidate**|Производит запись в журнал при начале проверки подлинности исполняемого объекта.|  
|**OnProgress**|Производит запись в журнал в процессе выполнения исполняемого объекта.|  
|**OnQueryCancel**|Производит запись в журнал при любом присоединении к обработке задачи в тот момент, когда возможна отмена ее выполнения.|  
|**OnTaskFailed**|Производит запись в журнал при возникновении ошибки задачи.|  
|**OnVariableValueChanged**|Производит запись в журнал при изменении значения переменной.|  
|**OnWarning**|Производит запись в журнал при возникновении предупреждения.|  
|**PipelineComponentTime**|Производит запись в журнал по каждой фазе проверки и выполнения каждого компонента потока данных. В записях журнала указывается время обработки каждой фазы.|  
|**Диагностика**<br /><br /> **DiagnosticEx**|Вносит в журнал запись, содержащую диагностические сведения.<br /><br /> Например, возможно вносить запись в журнал до и после каждого вызова к внешнему поставщику данных. Дополнительные сведения см. в разделе [Инструменты устранения неполадок при выполнении пакетов](../../integration-services/troubleshooting/troubleshooting-tools-for-package-execution.md).<br /><br /> Записывайте в журнал событие **DiagnosticEx** , если необходимо найти имена столбцов в потоке данных, которые содержат ошибки. Это событие записывает схему журнала преобразований потока данных в журнал. Потом вы сможете найти имя столбца в этой схеме журнала преобразований с помощью идентификатора столбца, записанного в выводе с ошибками. Дополнительные сведения см. в разделе [Обработка ошибок в данных](../../integration-services/data-flow/error-handling-in-data.md).<br /><br /> Обратите внимание, что событие **DiagnosticEx** не сохраняет пробелы в выводе XML, чтобы уменьшить размер журнала. Для улучшения удобочитаемости скопируйте журнал (например, в решении Visual Studio) в редактор XML, поддерживающий форматирование XML и выделение синтаксиса.<br /><br /> Примечание. При записи события **DiagnosticEx** в журнал с помощью регистратора SQL Server, отображаемый результат может быть усечен. Поле **message** регистратора SQL Server имеет тип nvarchar(2048). Во избежание усечения при записи события **DiagnosticEx** в журнал используйте другой регистратор.|  
  
 В пакете и во многих задачах есть пользовательские записи журнала, которые можно включить для ведения журнала. Например, задача "Отправка почты" предоставляет запись журнала **SendMailTaskBegin** , которая производит запись данных в начале выполнения задачи "Отправка почты", но перед тем, как задача осуществляет отправку почты. Дополнительные сведения см. в разделе [Custom Messages for Logging](#custom_messages).  
  
### <a name="differentiating-package-copies"></a>Различие копий пакета  
 Данные журнала содержат имя и идентификатор GUID пакета, которому принадлежит запись журнала. Для создания копии пакета путем копирования существующего пакета имя и идентификатор GUID существующего пакета тоже копируются. Это приводит к появлению двух элементов с одинаковыми именами и идентификаторами GUID, что приводит к трудностям при выделении пакетов из данных журнала.  
  
 Чтобы устранить неоднозначность, следует обновить имя и идентификатор GUID новых пакетов. В среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]можно заново сформировать идентификатор GUID для свойства **ID** и обновить значение свойства **Name** в окне свойств. Можно также изменить имя и идентификатор GUID программно или с помощью команды **dtutil** . Дополнительные сведения см. в разделах [Установка свойств пакета](../../integration-services/set-package-properties.md) и [Программа dtutil](../../integration-services/dtutil-utility.md).  
  
### <a name="parent-logging-options"></a>Параметры родительского ведения журналов  
 Часто параметры ведения журналов задач и контейнеров «цикл по элементам» и «цикл по каждому элементу», а также контейнеров последовательности соответствуют параметрам пакета или родительского контейнера. В этом случае можно настроить их для наследования настроек ведения журналов от родительского контейнера. Например, в контейнере «цикл по элементам», включающем задачу «Выполнение SQL», эта задача может использовать параметры ведения журналов, установленные для контейнера «цикл по элементам». Для использования родительских параметров ведения журналов установите для свойства контейнера LoggingMode значение **UseParentSetting**. Можно установить это свойство в окне **Свойства** среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] или через диалоговое окно **Настройка журналов служб SSIS** в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .  
  
### <a name="logging-templates"></a>Шаблоны ведения журналов  
 В диалоговом окне **Настройка журналов SSIS** также можно создать и сохранить часто используемые параметры ведения журналов в качестве шаблонов, и затем использовать эти шаблоны во многих пакетах. Это облегчает применение согласованной стратегии ведения журналов многочисленных пакетов и изменения параметров ведения журналов пакетов путем обновления шаблонов с последующим их применением. Шаблоны хранятся в XML-файлах.  
  
 **Настройка ведения журналов с помощью диалогового окна «Конфигурация журналов служб SSIS»**  
  
1.  Включите журналирование пакета и его задач. Журналирование может происходить на уровне пакета, контейнера или задачи. Можно указать различные журналы для пакетов, контейнеров и задач.  
  
2.  Выберите регистратора и добавьте журнал пакета. Журналы могут быть созданы только на уровне пакета, а задача или контейнер должны использовать один из журналов, созданных для пакета. Каждый журнал связан с одним из следующих регистраторов: текстовый файл, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], журнал событий Windows или XML-файл. Дополнительные сведения см. в разделе [Включение средств ведения журналов в SQL Server Data Tools](#ssdt).  
  
3.  Выберите события и схему данных журнала для этих событий, запись о которых должна содержаться в журнале. Дополнительные сведения см. в разделе [Настройка ведения журналов с помощью сохраненного файла конфигурации](#saved_config).  
  
### <a name="configuration-of-log-provider"></a>Настройка регистратора  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Регистратор создается и настраивается как шаг в реализации регистрации в пакете.  
  
 Просмотреть и изменить свойства регистратора после его создания можно в окне «Свойства» среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].  
  
 Дополнительные сведения о программной установке этих свойств см. в документации по классу <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> .  
  
### <a name="logging-for-data-flow-tasks"></a>Ведение журналов для задач потока данных  
 Задача потока данных предоставляет много пользовательских записей журнала, которые можно использовать для мониторинга и настройки производительности. Например, можно отслеживать компоненты, вызывающие утечку памяти, или следить за скоростью запуска отдельного компонента. Список пользовательских записей журнала и образец их вывода см. в разделе [Задача потока данных](../../integration-services/control-flow/data-flow-task.md).  
  
#### <a name="capture-the-names-of-columns-in-which-errors-occur"></a>Запись имен столбцов, в которых возникают ошибки  
 При настройке вывода ошибок в потоке данных по умолчанию вывод ошибок отображает только числовой идентификатор столбца, в котором произошла ошибка. Дополнительные сведения см. в разделе [Обработка ошибок в данных](../../integration-services/data-flow/error-handling-in-data.md).  
  
 Вы можете найти имена столбцов, включив ведение журнала и выбрав событие **DiagnosticEx** . Это событие записывает схему журнала преобразований потока данных в журнал. Затем можно найти имя столбца по его идентификатору в схеме журнала преобразований. Обратите внимание, что событие **DiagnosticEx** не сохраняет пробелы в выводе XML, чтобы уменьшить размер журнала. Для улучшения удобочитаемости скопируйте журнал (например, в решении Visual Studio) в редактор XML, поддерживающий форматирование XML и выделение синтаксиса.  
  
#### <a name="use-the-pipelinecomponenttime-event"></a>Использование события PipelineComponentTime  
 Возможно, самой полезной записью журнала является событие PipelineComponentTime. Эта запись журнала сообщает о времени в миллисекундах, которое каждый компонент потока данных тратит на каждом из пяти основных шагов обработки. В следующей таблице описываются эти шаги обработки. [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] Разработчикам эти шаги будут знакомы как основные методы класса <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>.  
  
|Шаг|Description|  
|----------|-----------------|  
|Проверить|Компонент проверяется на допустимость значений свойств и параметров настройки.|  
|PreExecute|Компонент выполняет однократную обработку перед началом обработки строк данных.|  
|PostExecute|Компонент выполняет однократную обработку после обработки всех строк данных.|  
|ProcessInput|Компонент преобразования или назначения обрабатывает входящие строки данных, которые передает ему вышестоящий источник или преобразование.|  
|PrimeOutput|Компонент источника или преобразования заполняет буферы данных, которые должны передаваться в нижестоящий компонент преобразования или назначения.|  
  
 При включении события PipelineComponentTime службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] записывают в журнал одно сообщение для каждого шага обработки, выполненного каждым компонентом. Следующие записи журнала показывают подмножество сообщений, которое регистрирует образец пакета CalculatedColumns служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .  
  
 `The component "Calculate LineItemTotalCost" (3522) spent 356 milliseconds in ProcessInput.`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 79 milliseconds in ProcessInput.`  
  
 `The component "Calculate Average Cost" (3662) spent 16 milliseconds in ProcessInput.`  
  
 `The component "Sort by ProductID" (3717) spent 125 milliseconds in ProcessInput.`  
  
 `The component "Load Data" (3773) spent 0 milliseconds in ProcessInput.`  
  
 `The component "Extract Data" (3869) spent 688 milliseconds in PrimeOutput filling buffers on output "OLE DB Source Output" (3879).`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 141 milliseconds in PrimeOutput filling buffers on output "Aggregate Output 1" (3621).`  
  
 `The component "Sort by ProductID" (3717) spent 16 milliseconds in PrimeOutput filling buffers on output "Sort Output" (3719).`  
  
 Эти записи показывают, что задача потока данных затратила наибольшее время на следующие шаги, представленные ниже в убывающем порядке.  
  
-   Источник OLE DB с именем «Извлечение данных» затратил 688 мс на загрузку данных.  
  
-   Преобразование «Производный столбец» с именем «Вычисление LineItemTotalCost» затратило 356 мс на выполнение вычислений с входящими строками.  
  
-   Преобразование "Статистическая обработка" с именем "Сложение Quantity и LineItemTotalCost" затратило в общей сложности 220 мс (141 на шаге PrimeOutput и 79 на шаге ProcessInput) на вычисление и передачу данных следующему преобразованию.  

## <a name="enable-package-logging-in-sql-server-data-tools"></a><a name="ssdt"></a> Включение средств ведения журналов в SQL Server Data Tools
  В этой процедуре описывается, как добавлять журналы в пакет, настраивать ведение журналов на уровне пакетов и сохранять настройку ведения журналов в XML-файле. Журнал можно добавить только на уровне пакета, однако пакеты не обязаны осуществлять ведение журналов, чтобы включить ведение журналов в контейнерах, которые содержатся в этих пакетах.  
  
> [!IMPORTANT]  
>  При развертывании проекта [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] уровень ведения журнала, заданный для выполнения пакета, переопределяет уровень, настраиваемый с помощью среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].  
  
 По умолчанию к контейнерам в пакете применяются те же самые настройки ведения журналов, что и к их родительскому контейнеру. Дополнительные сведения об установке параметров ведения журналов для отдельных контейнеров см. в разделе [Настройка ведения журналов с помощью сохраненного файла конфигурации](#saved_config).  
  
### <a name="to-enable-logging-in-a-package"></a>Включение ведения журналов в пакете  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]откройте проект служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , содержащий необходимый пакет.  
  
2.  В меню **Службы SSIS** нажмите **Ведение журнала**.  
  
3.  Выберите регистратор из списка **Тип поставщика** и щелкните **Добавить**.  
  
4.  В столбце **Конфигурация** выберите диспетчер подключений или щелкните **\<New connection>** , чтобы создать диспетчер подключений, соответствующий регистратору. В зависимости от выбранного регистратора может использоваться один из следующих диспетчеров соединений.  
  
    -   Для текстовых файлов используется диспетчер подключения файлов. Дополнительные сведения см. в разделе [диспетчер подключения файлов](../../integration-services/connection-manager/file-connection-manager.md).  
  
    -   Для [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]используется диспетчер подключения файлов.  
  
    -   Для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]используется диспетчер соединений OLE DB. Дополнительные сведения см. в разделе [Диспетчер соединений OLE DB](../../integration-services/connection-manager/ole-db-connection-manager.md).  
  
    -   В журнале событий Windows выполнение действий не требуется. [!INCLUDE[ssIS](../../includes/ssis-md.md)] автоматически создадут журнал.  
  
    -   Для XML-файлов используется диспетчер подключения файлов.  
  
5.  Для каждого журнала, используемого в пакете, повторите шаги 3 и 4.  
  
    > [!NOTE]  
    >  Пакет может задействовать более одного журнала каждого типа.  
  
6.  При необходимости установите флажок уровня пакетов, выберите журналы для ведения на уровне пакетов и перейдите на вкладку **Подробности** .  
  
7.  На вкладке **Подробности** установите флажок **События** для сохранения всех записей журнала или снимите флажок **События** , чтобы выбрать отдельные события.  
  
8.  При необходимости перейдите на вкладку **Дополнительно** , чтобы указать, какие именно данные следует вносить в журнал.  
  
    > [!NOTE]  
    >  По умолчанию в журнал вносятся все данные.  
  
9. На вкладке **Подробности** нажмите кнопку **Сохранить**. Отображается диалоговое окно **Сохранить как** . Выберите папку для хранения настроек ведения журнала, введите имя файла для конфигурации нового журнала и щелкните **Сохранить**.  
  
10. Нажмите кнопку **ОК**.  
  
11. Чтобы сохранить обновленный пакет, выберите пункт **Сохранить выбранные элементы** в меню **Файл** .  

## <a name="configure-ssis-logs-dialog-box"></a><a name="configure_logs"></a> Диалоговое окно «Настройка журналов служб SSIS»
  Используйте диалоговое окно **Настройка журналов служб SSIS** для настройки параметров ведения журнала для пакета.  
  
 **Выбор действия**  
  
1.  [Откройте диалоговое окно «Настройка журналов служб SSIS»](#open_dialog)  
  
2.  [Настройка параметров на панели «Контейнеры»](#container)  
  
3.  [Настройка параметров на вкладке «Поставщики и журналы»](#provider)  
  
4.  [Настройка параметров на вкладке «Подробные сведения»](#detail)  
  
###  <a name="open-the-configure-ssis-logs-dialog-box"></a><a name="open_dialog"></a> Откройте диалоговое окно «Настройка журналов служб SSIS»  
 **Открытие диалогового окна «Настройка журналов служб SSIS»**  
  
-   В конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] выберите пункт **Ведение журнала** в меню **SSIS** .  
  
###  <a name="configure-the-options-in-the-containers-pane"></a><a name="container"></a> Настройка параметров на панели «Контейнеры»  
 Используйте панель **Контейнеры** в диалоговом окне **Настройка журналов служб SSIS** для включения записи в журнал пакета и его контейнеров.  
  
#### <a name="options"></a>Параметры  
 **Контейнеры**  
 Установите флажки в иерархическом представлении, чтобы включить запись в журнал пакета и его контейнеров:  
  
-   Если флажок снят, контейнеры недоступны для записи в журнал. Установите флажок для включения записи в журнал.  
  
-   Если контейнер недоступен для выбора, используются параметры записи в журнал его родителя. Данный параметр недоступен для пакетов.  
  
-   Если флажок установлен, контейнер определяет собственные параметры записи в журнал.  
  
 Если контейнер недоступен для выбора и для него требуется задать параметры записи в журнал, дважды щелкните флажок этого контейнера. Первый щелчок снимает флажок, второй — устанавливает, позволяя выбрать регистраторы и данные, которые будут записываться в журналы.  
  
###  <a name="configure-the-options-on-the-providers-and-logs-tab"></a><a name="provider"></a> Настройка параметров на вкладке «Поставщики и журналы»  
 Используйте вкладку **Поставщики и журналы** диалогового окна **Конфигурация журналов служб SSIS** , чтобы создать и конфигурировать журналы, регистрирующие события выполнения.  
  
#### <a name="options"></a>Параметры  
 **Тип поставщика**  
 Выберите тип регистратора из списка.  
  
 **Добавление**  
 Добавьте журнал заданного типа к коллекции регистраторов пакета.  
  
 **Название**  
 Включите или отключите журналы для контейнеров или задач, выбранных на панели **Контейнеры** диалогового окна **Настройка журналов служб SSIS** с помощью флажков. Поле имени является редактируемым. Используйте для поставщика имя по умолчанию или введите уникальное описательное имя.  
  
 **Описание**  
 Поле описания является редактируемым. Нажмите и отредактируйте описание журнала по умолчанию.  
  
 **Конфигурация**  
 Выберите в списке существующий диспетчер подключений или щелкните \<**New connection...**>, чтобы создать диспетчер подключений. В зависимости от типа регистратора можно настраивать диспетчер соединений OLE DB или диспетчер соединений файлов. Регистратору журнала событий [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows не требуется соединение.  
  
 См. также диспетчер [Диспетчер соединений OLE DB](../../integration-services/connection-manager/ole-db-connection-manager.md) , [диспетчер подключения файлов](../../integration-services/connection-manager/file-connection-manager.md)  
  
 **Удаление**  
 Выберите регистратор и нажмите **Удалить**.  
  
###  <a name="configure-the-options-on-the-details-tab"></a><a name="detail"></a> Настройка параметров на вкладке «Подробные сведения»  
 Вкладка **Подробности** в диалоговом окне **Настройка журналов служб SSIS** позволяет задать события, по которым включается запись в журнал, и определить записываемые в журнал сведения. Выбранные сведения записываются во все регистраторы, находящиеся в пакете. Например, нельзя записать некоторые сведения в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и другие сведения в текстовый файл.  
  
#### <a name="options"></a>Параметры  
 **События**  
 Включить или отключить события для записи в журнал.  
  
 **Описание**  
 Просмотрите описание события.  
  
 **Дополнительно**  
 Выберите или удалите события для записи, выберите или удалите сведения, которые должны записываться в журнал для каждого события. Чтобы скрыть сведения, записываемые в журнал, и оставить только список событий, нажмите кнопку **Основной** . Записывать в журнал можно следующие сведения:  
  
|Значение|Description|  
|-----------|-----------------|  
|**Компьютер**|Имя компьютера, на котором произошло записываемое в журнал событие.|  
|**Оператор**|Имя пользователя, запустившего пакет.|  
|**SourceName**|Имя пакета, контейнера или задачи, в котором произошло записываемое в журнал событие.|  
|**SourceID**|Глобальный уникальный идентификатор (GUID) пакета, контейнера или задачи, в котором произошло записываемое в журнал событие.|  
|**ExecutionID**|Глобальный уникальный идентификатор экземпляра выполнения пакета.|  
|**MessageText**|Сообщение, связанное с записью журнала.|  
|**DataBytes**|Зарезервировано для последующего использования.|  
  
 **Основной**  
 Выберите или удалите события для записи в журнал. Этот параметр позволяет скрыть записываемые в журнал сведения, за исключением списка событий. Если выбрать событие, то все записываемые в журнал сведения для события выбираются автоматически. Чтобы просмотреть все записываемые в журнал сведения, выберите параметр **Дополнительно** .  
  
 **Загрузить**  
 Укажите XML-файл, используемый в качестве шаблона настройки параметров журнала.  
  
 **Сохранить**  
 Сохраните детализацию настройки в виде шаблона в XML-файл.  

## <a name="configure-logging-by-using-a-saved-configuration-file"></a><a name="saved_config"></a> Настройка ведения журналов с помощью сохраненного файла конфигурации
  Эта процедура описывает, как настроить ведение журнала для новых контейнеров в пакете с помощью загрузки предварительно сохраненного файла конфигурации ведения журнала.  
  
 По умолчанию все контейнеры пакета используют такую же конфигурацию ведения журнала, что и родительский контейнер. Например, задачи в контейнере «цикл по каждому элементу» используют такую же конфигурацию ведения журнала, какую использует контейнер «цикл по элементам».  
  
### <a name="to-configure-logging-for-a-container"></a>Настройка ведения журнала для контейнера  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]откройте проект служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , содержащий необходимый пакет.  
  
2.  В меню **Службы SSIS** нажмите **Ведение журнала**.  
  
3.  Разверните представление пакета в виде дерева и выберите контейнер для настройки.  
  
4.  На вкладке **Поставщики и журналы** выберите журналы, которые будут использоваться для контейнера.  
  
    > [!NOTE]  
    >  Создавать журналы можно только на уровне пакета. Дополнительные сведения см. в разделе [Включение средств ведения журналов в SQL Server Data Tools](#ssdt).  
  
5.  Перейдите на вкладку **Подробности** и нажмите кнопку **Загрузить**.  
  
6.  Найдите файл конфигурации ведения журнала, который необходимо использовать, и нажмите кнопку **Открыть**.  
  
7.  Можно выбрать другую запись журнала, установив соответствующий ей флажок в столбце **События** . Нажмите кнопку **Дополнительно** , чтобы выбрать тип сведений для занесения в журнал для этой записи.  
  
    > [!NOTE]  
    >  Новый контейнер может включать дополнительные записи журнала, которые недоступны для контейнера, изначально использованного для создания конфигурации ведения журнала. Эти дополнительные записи журнала должны быть выбраны вручную, если необходимо их ведение.  
  
8.  Чтобы сохранить обновленную версию конфигурации ведения журнала, нажмите кнопку **Сохранить**.  
  
9. Чтобы сохранить обновленный пакет, выберите пункт **Сохранить выбранные элементы** в меню **Файл** .  

## <a name="enable-logging-for-package-execution-on-the-ssis-server"></a><a name="server_logging"></a> Включение ведения журналов при выполнении пакета на сервере служб SSIS
  В этой статье описывается, как задать или изменить уровень ведения журнала для пакета, когда выполняется пакет, развернутый на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Уровень ведения журнала, задаваемый при выполнении пакета, переопределяет уровень, настроенный во время разработки с помощью [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Дополнительные сведения см. в разделе [Включение средств ведения журналов в SQL Server Data Tools](#ssdt) .  
  
 В разделе **Свойства сервера** в SQL Server вы можете выбрать ведение журнала на уровне сервера (вариант по умолчанию) для свойства **Уровень ведения журнала сервера** . Вы можете выбрать один из встроенных уровней ведения журнала, описанных в этой статье, или существующий пользовательский уровень. Выбранный уровень применяется по умолчанию ко всем пакетам, развернутым в каталоге служб SSIS. По умолчанию этот уровень применяется также к заданию агента SQL Server, в рамках которого запущен пакет служб SSIS.  
  
 Кроме того, вы можете указать уровень ведения журнала для отдельного пакета с помощью одного из следующих методов. Этот раздел охватывает первый метод.  
  
-   Настройка экземпляра выполнения пакета с помощью диалогового окна «Выполнение пакета»  
  
-   Установка параметров для экземпляра выполнения с помощью [catalog.set_execution_parameter_value (база данных SSISDB)](../../integration-services/system-stored-procedures/catalog-set-execution-parameter-value-ssisdb-database.md)  
  
-   Настройка задания агента SQL Server для выполнения пакета с помощью диалогового окна «Новый шаг задания».  
  
### <a name="set-the-logging-level-for-a-package-by-using-the-execute-package-dialog-box"></a>Задание уровня ведения журнала для пакета с помощью диалогового окна "Выполнение пакета"  
  
1.  В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]перейдите к пакету в обозревателе объектов.  
  
2.  Щелкните пакет правой кнопкой мыши и выберите команду **Выполнить**.  
  
3.  Выберите в диалоговом окне **Выполнение пакета** вкладку **Дополнительно** .  
  
4.  В разделе **Уровень ведения журнала** выберите уровень ведения журнала. В этом разделе содержится описание доступных значений.  
  
5.  Настройте другие параметры пакета, а затем нажмите кнопку **ОК** , чтобы запустить пакет.  
  
### <a name="select-a-logging-level"></a>Выбор уровня ведения журнала  
 Доступны следующие встроенные уровни ведения журнала. Кроме того, вы можете выбрать существующий пользовательский уровень ведения журнала. В этой статье содержится описание пользовательских уровней ведения журнала.  
  
|Уровень ведения журнала|Description|  
|-------------------|-----------------|  
|None|Ведение журнала выключено. Регистрируется только состояние выполнения пакета.|  
|Basic|Записываются все события, за исключением пользовательских и диагностических событий. Это значение по умолчанию.|  
|RuntimeLineage|Собирает данные, необходимые для отслеживания сведений для журнала преобразований в потоке данных. Вы можете проанализировать эти сведения журнала преобразований, чтобы сопоставить отношение преобразований между задачами. С помощью этой информации независимые поставщики программного обеспечения и разработчики могут создавать пользовательские средства сопоставления для журнала преобразований.|  
|Производительность|Регистрируются только статистика производительности, а также события OnError и OnWarning.<br /><br /> Отчет **Производительность выполнения** показывает активное и общее время компонентов потока данных пакета. Эта информация доступна, если уровень ведения журнала выполнения последнего пакета был задан как **Производительность** или **Подробно**. Дополнительные сведения см. в статье [Reports for the Integration Services Server](../../integration-services/performance/monitor-running-packages-and-other-operations.md#reports).<br /><br /> Представление [catalog.execution_component_phases](../../integration-services/system-views/catalog-execution-component-phases.md) отображает время начала и время окончания для компонентов потока данных для каждого этапа выполнения. Это представление содержит данные для этих компонентов, только если в качестве уровня ведения журнала выполнения пакета установлено значение **Производительность** или **Подробно**.|  
|Подробный|Регистрируются все события, в том числе пользовательские и диагностические события.<br /><br /> К пользовательским относятся события, записываемые задачами служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Дополнительные сведения о пользовательских событиях см. в статье [Custom Messages for Logging](#custom_messages).<br /><br /> Пример диагностического события — событие **DiagnosticEx** . Когда задача "Выполнение пакета" выполняет дочерний пакет, это событие всегда записывает значения параметра, передаваемые в дочерние пакеты.<br /><br /> Событие **DiagnosticEx** , кроме того, помогает получить имена столбцов, в которых на уровне строк происходят ошибки. Это событие записывает схему журнала преобразований потока данных в журнал. Потом вы сможете найти имя столбца в этой схеме журнала преобразований с помощью идентификатора столбца, записанного в выводе с ошибками.  Дополнительные сведения см. в разделе [Обработка ошибок в данных](../../integration-services/data-flow/error-handling-in-data.md).<br /><br /> Значение столбца сообщения для **DiagnosticEx** — это XML-текст. Для просмотра текста сообщения о выполнении пакета выполните запрос к представлению [catalog.operation_messages (база данных SSISDB)](../../integration-services/system-views/catalog-operation-messages-ssisdb-database.md). Обратите внимание, что событие **DiagnosticEx** не сохраняет пробелы в выводе XML, чтобы уменьшить размер журнала. Для улучшения удобочитаемости скопируйте журнал (например, в решении Visual Studio) в редактор XML, поддерживающий форматирование XML и выделение синтаксиса.<br /><br /> Представление [catalog.execution_data_statistics](../../integration-services/system-views/catalog-execution-data-statistics.md) отображает строку каждый раз, когда компонент потока данных передает данные в компонент, находящийся ниже в иерархии, для выполнения пакета. Для сохранения этих данных в представлении уровень ведения журнала должен быть установлен в значение **Подробно** .|  
  
### <a name="create-and-manage-customized-logging-levels-by-using-the-customized-logging-level-management-dialog-box"></a>Создание пользовательских уровней ведения журнала и управление ими с помощью диалогового окна "Управление пользовательскими уровнями ведения журнала"  
 Вы можете создавать пользовательские уровни ведения журнала, в рамках которых собираются только нужные вам события и статистика. При необходимости можно записывать также контекст событий, который включает значения переменных, строки подключений и свойства компонентов. При запуске пакета пользовательский уровень ведения журнала можно выбрать всегда, когда можно выбрать встроенный уровень.  
  
> [!TIP]  
>  Чтобы записать значения переменных пакета, для свойства **IncludeInDebugDump** переменных следует задать значение **True**.  
  
1.  Чтобы создать пользовательские уровни ведения журнала и управлять ими, в [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]щелкните правой кнопкой мыши базу данных SSISDB и выберите **Пользовательский уровень ведения журнала** . Откроется диалоговое окно **Управление пользовательскими уровнями ведения журнала** . Список **Пользовательские уровни ведения журнала** содержит все существующие пользовательские уровни.  
  
2.  Чтобы **создать** пользовательский уровень, щелкните **Создать** и введите имя и описание. На вкладках **Статистика** и **События** выберите статистические данные и события, которые требуется собирать. На вкладке **События** при необходимости выберите **Включить контекст** для определенных событий. Затем нажмите кнопку **Сохранить**.  
  
3.  Чтобы **обновить** существующий пользовательский уровень ведения журнала, выберите его в списке, перенастройте, а затем нажмите кнопку **Сохранить**.  
  
4.  Чтобы **удалить** существующий пользовательский уровень ведения журнала, выберите его в списке и нажмите кнопку **Удалить**.  
  
 **Разрешения для пользовательских уровней ведения журнала.**  
  
-   Когда пользователи базы данных SSISDB запускают пакеты, они видят пользовательские уровни ведения журнала и могут их выбирать.  
  
-   Только пользователи с ролью ssis_admin или sysadmin могут создавать, обновлять и удалять пользовательские уровни ведения журнала.  

## <a name="custom-messages-for-logging"></a><a name="custom_messages"></a> Custom Messages for Logging
Службы SQL Server Integration Services предусматривают большой набор пользовательских событий, предполагающих добавление записей в журнал для пакетов и многих задач. Записывая стандартные события или определенные пользователем сообщения с целью последующего анализа, можно сохранить подробные сведения о процессе выполнения, результатах и проблемах. Например, можно записать, когда начинается и заканчивается массовая вставка, чтобы идентифицировать проблемы с производительностью при выполнении пакета.  
  
 Пользовательские записи в журнале являются другим набором записей, отличным от стандартных событий ведения журнала, которые доступны для пакетов, всех контейнеров и задач. Пользовательские записи в журнале приспособлены для записи полезных сведений о конкретной задаче или пакете. Например, одна из пользовательских записей в журнале для задачи «Выполнение SQL» содержит инструкцию SQL, которая выполняется в задаче.  
  
 Все записи в журнале содержат сведения о дате и времени, в том числе записи, которые автоматически формируются в начале и в конце выполнения пакета. Многие события журнала формируют несколько записей журнала. Это обычно происходит в том случае, когда событие состоит из нескольких стадий. Например, событие журнала **ExecuteSQLExecutingQuery** формирует три записи: одну запись после того, как задача устанавливает соединение с базой данных, вторую после того, как задача приступает к подготовке инструкции SQL, и еще одну после того, как выполнение инструкции SQL завершается.  
  
 Следующие объекты служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] содержат пользовательские записи в журнале.  
  
 [Пакет](#Package)  
  
 [Задача «Массовая вставка»](#BulkInsert)  
  
 [Задача потока данных](#DataFlow)  
  
 [Задача «Выполнение пакета служб DTS 2000»](#ExecuteDTS200)  
  
 [Задача «Выполнение процесса»](#ExecuteProcess)  
  
 [Задача «Выполнение SQL»](#ExecuteSQL)  
  
 [Задача "Файловая система"](#FileSystem)  
  
 [Задача «FTP»](#FTP)  
  
 [Задача «Очередь сообщений»](#MessageQueue)  
  
 [Задача «Скрипт»](#Script)  
  
 [Задача «Отправка почты»](#SendMail)  
  
 [Задача «Передача базы данных»](#TransferDatabase)  
  
 [Задача «Передача сообщений об ошибках»](#TransferErrorMessages)  
  
 [Задача «Передача заданий»](#TransferJobs)  
  
 [Задача «Передача имен входа»](#TransferLogins)  
  
 [Задача «Передача главных хранимых процедур»](#TransferMasterStoredProcedures)  
  
 [Задача «Передача объектов SQL Server»](#TransferSQLServerObjects)  
  
 [Задача «Веб-служба»](#WebServices)  
  
 [Задача «Модуль чтения данных WMI»](#WMIDataReader)  
  
 [Задача «Отслеживание событий WMI»](#WMIEventWatcher)  
  
 [Задача «XML»](#XML)  
  
### <a name="log-entries"></a>Записи журнала  
  
####  <a name="package"></a><a name="Package"></a> Пакет  
 В следующей таблице перечислены пользовательские записи в журнале для пакетов.  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**PackageStart**|Указывает, что выполнение пакета началось. Эта запись журнала формируется автоматически. Ее нельзя исключить.|  
|**PackageEnd**|Указывает, что выполнение пакета завершено. Эта запись журнала формируется автоматически. Ее нельзя исключить.|  
|**Диагностика**|Предоставляет сведения о настройках системы, влияющих на выполнение пакета, таких как количество одновременно исполняемых объектов.<br /><br /> Запись журнала **Diagnostic** также включает записи, сделанные до и после обращения к внешним поставщикам данных.|  
  
####  <a name="bulk-insert-task"></a><a name="BulkInsert"></a> Задача «Массовая вставка»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Массовая вставка».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**DTSBulkInsertTaskBegin**|Указывает, что массовая вставка началась.|  
|**DTSBulkInsertTaskEnd**|Указывает, что массовая вставка завершена.|  
|**DTSBulkInsertTaskInfos**|Выводит описательные сведения об этой задаче.|  
  
####  <a name="data-flow-task"></a><a name="DataFlow"></a> Задача потока данных  
 В следующей таблице перечислены пользовательские записи в журнале для задачи потока данных.  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**BufferSizeTuning**|Указывает, что задача потока данных изменила размер буфера. Эта запись журнала описывает причины изменения размера и фиксирует новый временный размер буфера.|  
|**OnPipelinePostEndOfRowset**|Означает, что компонент получил сигнал конца набора строк, который устанавливается при последнем вызове метода **ProcessInput** . Запись делается для каждого компонента в потоке данных, который обрабатывает ввод. Запись включает имя компонента.|  
|**OnPipelinePostPrimeOutput**|Указывает, что компонент завершил последний вызов метода **PrimeOutput** . В зависимости от потока данных, возможно формирование нескольких записей в журнале. Если компонент является источником, это означает, что компонент завершил обработку строк.|  
|**OnPipelinePreEndOfRowset**|Показывает, что компонент уже готов получить сигнал конца набора строк, который устанавливается при последнем вызове метода **ProcessInput** . Запись делается для каждого компонента в потоке данных, который обрабатывает ввод. Запись включает имя компонента.|  
|**OnPipelinePrePrimeOutput**|Показывает, что компонент готов получить свой вызов из метода **PrimeOutput** . В зависимости от потока данных, возможно формирование нескольких записей в журнале.|  
|**OnPipelineRowsSent**|Сообщает количество строк, предоставленных входу компонента с помощью вызова метода **ProcessInput** . Запись журнала включает имя компонента.|  
|**PipelineBufferLeak**|Предоставляет сведения обо всех компонентах, которые удерживают буферы от уничтожения после того, как диспетчер буферов завершил свое выполнение. Это означает, что ресурсы буферов не были освобождены и могут вызвать утечку памяти. Запись журнала предоставляет имя компонента и идентификатор буфера.|  
|**PipelineExecutionPlan**|Сообщает о плане выполнения потока данных. Предоставляет сведения о том, как буферы будут отсылаться компонентам. Эти сведения в сочетании с записью PipelineExecutionTrees описывают, что происходит в задаче.|  
|**PipelineExecutionTrees**|Сообщает о дереве выполнения макета в потоке данных. Планировщик подсистемы обработки потока данных использует эти деревья для построения плана выполнения потока данных.|  
|**PipelineInitialization**|Предоставляет сведения об инициализации задачи. Эти сведения включают каталоги, используемые для временного хранения данных большого объема типа BLOB, размер буфера по умолчанию и количество строк в буфере. В зависимости от настройки задачи потока данных, возможно формирование нескольких записей в журнале.|  
  
####  <a name="execute-dts-2000-task"></a><a name="ExecuteDTS200"></a> Задача «Выполнение пакета служб DTS 2000»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Выполнение пакета служб DTS 2000».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**ExecuteDTS80PackageTaskBegin**|Указывает, что задача приступила к выполнению пакета служб DTS 2000.|  
|**ExecuteDTS80PackageTaskEnd**|Указывает, что выполнение задачи завершено.<br /><br /> Примечание. Пакет служб DTS 2000 может продолжить свое выполнение после завершения задачи.|  
|**ExecuteDTS80PackageTaskTaskInfo**|Выводит описательные сведения об этой задаче.|  
|**ExecuteDTS80PackageTaskTaskResult**|Сообщает результаты выполнения пакета служб DTS 2000, запущенного задачей.|  
  
####  <a name="execute-process-task"></a><a name="ExecuteProcess"></a> Задача «Выполнение процесса»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Выполнение процесса».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**ExecuteProcessExecutingProcess**|Предоставляет сведения о процессе выполнения исполняемого объекта, на запуск которого настроена задача.<br /><br /> В журнале формируются две записи. Одна из них предоставляет сведения об имени и месте выполнения исполняемого объекта, на запуск которого настроена задача, другая фиксирует выход из исполняемого объекта.|  
|**ExecuteProcessVariableRouting**|Предоставляет сведения о том, какие переменные направляются на вход и выходы исполняемого объекта. Данные журнала записываются для потоков stdin (вход), stdout (выход) и stderr (вывод ошибок на выходе).|  
  
####  <a name="execute-sql-task"></a><a name="ExecuteSQL"></a> Задача «Выполнение SQL»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «Выполнение SQL».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**ExecuteSQLExecutingQuery**|Предоставляет сведения об этапах выполнения инструкции SQL. Записи журнала формируются в тот момент, когда задача устанавливает соединение с базой данных, когда задача приступает к подготовке инструкции SQL, и после того, как завершается выполнение инструкции SQL. Запись журнала для этапа подготовки содержит инструкцию SQL, которая используется задачей.|  
  
####  <a name="file-system-task"></a><a name="FileSystem"></a> Задача "Файловая система"  
 В следующей таблице перечислены пользовательские записи журнала для задачи «Файловая система».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**FileSystemOperation**|Сообщает об операции, выполняемой задачей. Эта запись журнала формируется, когда операция файловой системы начинается и включает сведения об источнике и назначении.|  
  
####  <a name="ftp-task"></a><a name="FTP"></a> Задача «FTP»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «FTP».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**FTPConnectingToServer**|Указывает, что задача инициализировала соединение с FTP-сервером.|  
|**FTPOperation**|Сообщает о начале FTP-операции, выполняемой задачей, и о типе этой операции.|  
  
####  <a name="message-queue-task"></a><a name="MessageQueue"></a> Задача «Очередь сообщений»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Очередь сообщений».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**MSMQAfterOpen**|Указывает, что задача завершила открытие очереди сообщений.|  
|**MSMQBeforeOpen**|Указывает, что задача приступила к открытию очереди сообщений.|  
|**MSMQBeginReceive**|Указывает, что задача приступила к получению сообщения.|  
|**MSMQBeginSend**|Указывает, что задача приступила к отправке сообщения.|  
|**MSMQEndReceive**|Указывает, что задача завершила прием сообщения.|  
|**MSMQEndSend**|Указывает, что задача завершила отправку сообщения.|  
|**MSMQTaskInfo**|Выводит описательные сведения об этой задаче.|  
|**MSMQTaskTimeOut**|Указывает, что время ожидания выполнения задачи истекло.|  
  
####  <a name="script-task"></a><a name="Script"></a> Задача «Скрипт»  
 В следующей таблице перечислены пользовательские записи журнала для задачи «Скрипт».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**ScriptTaskLogEntry**|Сообщает о результатах выполнения операции ведения журнала в скрипте. Запись журнала формируется для каждого вызова метода **Log** объекта **Dts** . Эта запись формируется в момент запуска кода. Дополнительные сведения см. в разделе [ведения журналов в задаче «скрипт»](../../integration-services/extending-packages-scripting/task/logging-in-the-script-task.md).|  
  
####  <a name="send-mail-task"></a><a name="SendMail"></a> Задача «Отправка почты»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Отправка почты».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**SendMailTaskBegin**|Указывает, что задача приступила к отправке сообщения электронной почты.|  
|**SendMailTaskEnd**|Указывает, что задача завершила отправку сообщения электронной почты.|  
|**SendMailTaskInfo**|Выводит описательные сведения об этой задаче.|  
  
####  <a name="transfer-database-task"></a><a name="TransferDatabase"></a> Задача «Передача базы данных»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача базы данных».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**SourceDB**|Указывает базу данных, которая копируется задачей.|  
|**SourceSQLServer**|Указывает компьютер, с которого копируется база данных.|  
  
####  <a name="transfer-error-messages-task"></a><a name="TransferErrorMessages"></a> Задача «Передача сообщений об ошибках»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача сообщений об ошибках».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**TransferErrorMessagesTaskFinishedTransferringObjects**|Указывает, что задача завершила передачу сообщений об ошибках.|  
|**TransferErrorMessagesTaskStartTransferringObjects**|Указывает, что задача приступила к передаче сообщений об ошибках.|  
  
####  <a name="transfer-jobs-task"></a><a name="TransferJobs"></a> Задача «Передача заданий»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача заданий».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**TransferJobsTaskFinishedTransferringObjects**|Указывает, что задача завершила передачу заданий агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .|  
|**TransferJobsTaskStartTransferringObjects**|Указывает, что задача приступила к передаче заданий агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .|  
  
####  <a name="transfer-logins-task"></a><a name="TransferLogins"></a> Задача «Передача имен входа»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача имен входа».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**TransferLoginsTaskFinishedTransferringObjects**|Указывает, что задача завершила передачу имен входа.|  
|**TransferLoginsTaskStartTransferringObjects**|Указывает, что задача приступила к передаче имен входа.|  
  
####  <a name="transfer-master-stored-procedures-task"></a><a name="TransferMasterStoredProcedures"></a> Задача «Передача главных хранимых процедур»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача главных хранимых процедур».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**TransferStoredProceduresTaskFinishedTransferringObjects**|Указывает, что задача завершила передачу пользовательских хранимых процедур, хранящихся в базе данных **master** .|  
|**TransferStoredProceduresTaskStartTransferringObjects**|Указывает, что задача приступила к передаче пользовательских хранимых процедур, хранящихся в базе данных **master** .|  
  
####  <a name="transfer-sql-server-objects-task"></a><a name="TransferSQLServerObjects"></a> Задача «Передача объектов SQL Server»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Передача объектов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ».  
  
|Запись журнала|Description|  
|---------------|-----------------|  
|**TransferSqlServerObjectsTaskFinishedTransferringObjects**|Указывает, что задача завершила передачу объектов базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .|  
|**TransferSqlServerObjectsTaskStartTransferringObjects**|Указывает, что задача приступила к передаче объектов базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .|  
  
####  <a name="web-services-task"></a><a name="WebServices"></a> Задача «Веб-служба»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Веб-служба».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**WSTaskBegin**|Задача получила доступ к веб-службе.|  
|**WSTaskEnd**|Задача завершила метод веб-службы.|  
|**WSTaskInfo**|Описательные сведения об этой задаче.|  
  
####  <a name="wmi-data-reader-task"></a><a name="WMIDataReader"></a> Задача «Модуль чтения данных WMI»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Модуль чтения данных WMI».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**WMIDataReaderGettingWMIData**|Указывает, что задача приступила к чтению данных инструментария WMI.|  
|**WMIDataReaderOperation**|Сообщает о WQL-запросе, выполняемом задачей.|  
  
####  <a name="wmi-event-watcher-task"></a><a name="WMIEventWatcher"></a> Задача «Отслеживание событий WMI»  
 В следующей таблице перечислены пользовательские записи в журнале для задачи «Отслеживание событий WMI».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**WMIEventWatcherEventOccurred**|Сообщает, что произошло событие, отслеживаемое задачей.|  
|**WMIEventWatcherTimedout**|Указывает, что время ожидания выполнения задачи истекло.|  
|**WMIEventWatcherWatchingForWMIEvents**|Указывает, что задача приступила к выполнению WQL-запроса. Эта запись содержит запрос.|  
  
####  <a name="xml-task"></a><a name="XML"></a> Задача «XML»  
 В приведенной ниже таблице перечислены пользовательские записи журнала для задачи «XML».  
  
|Запись журнала|Описание|  
|---------------|-----------------|  
|**XMLOperation**|Предоставляет сведения об операции, выполняемой задачей|  

## <a name="related-tasks"></a>Связанные задачи  
 В следующем списке приведены ссылки на разделы, в которых описывается выполнение задач, связанных с функцией ведения журналов.  
  
-   [Регистрация событий в пакете служб Integration Services](../../integration-services/performance/events-logged-by-an-integration-services-package.md)  
  
## <a name="related-content"></a>См. также  
 [Инструмент DTLoggedExec для полного и подробного ведения журнала (проект CodePlex)](https://go.microsoft.com/fwlink/?LinkId=150579)  
