---
description: Наблюдение за выполнением пакетов и других операций
title: Наблюдение за выполнением пакетов и других операций | Документы Майкрософт
ms.custom: supportability
ms.date: 06/04/2018
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql13.ssis.ssms.isoperations.executions.f1
- sql13.ssis.ssms.isoperations.general.f1
ms.assetid: cbbcd79f-ab9b-46ec-84cb-4821c1d16b99
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 2716b85dde5aaa7a7e2df15e87004c838b8137ee
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100353025"
---
# <a name="monitor-running-packages-and-other-operations"></a>Наблюдение за выполнением пакетов и других операций

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  Вы можете отслеживать выполнения пакета [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , проверки проекта и другие операции с помощью одного или нескольких из следующих средств. Такие средства, как отводы данных, доступны только для проектов, которые развертываются на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .  
  
-   Журналы  
  
     Дополнительные сведения см. в разделе [Ведение журналов в службах Integration Services (SSIS)](../../integration-services/performance/integration-services-ssis-logging.md).  
  
-   Отчеты  
  
     Дополнительные сведения см. в статье [Reports for the Integration Services Server](#reports).  
  
-   Представления  
  
     Дополнительные сведения см. в статье [Представления (каталог служб Integration Services)](../../integration-services/system-views/views-integration-services-catalog.md).  
  
-   Счетчики производительности  
  
     Дополнительные сведения см. в статье [Performance Counters](../../integration-services/performance/performance-counters.md).  
  
-   Отводы данных  

> [!NOTE]
> В этой статье приводятся общие сведения о наблюдении за выполнением пакетов служб SSIS, а также содержится информация об отслеживании выполнении пакетов в локальной среде. Выполнять пакеты служб SSIS и отслеживать их выполнение можно также в базе данных SQL Azure. Дополнительные сведения см. в разделе [Перенос рабочих нагрузок SQL Server Integration Services в облако](../lift-shift/ssis-azure-lift-shift-ssis-packages-overview.md).
>
> Хотя пакеты служб SSIS можно выполнять и в Linux, на этой платформе отсутствуют средства мониторинга. Дополнительные сведения см. в разделе [Извлечение, преобразование и загрузка данных в Linux с помощью служб SSIS](../../linux/sql-server-linux-migrate-ssis.md).

## <a name="operation-types"></a>Типы операций  
 В каталоге **SSISDB** на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] отслеживаются операции нескольких разных типов. Каждая операция может иметь несколько связанных с ней сообщений. Каждое сообщение можно отнести к одному из нескольких разных типов. Например, сообщение может иметь тип «информация», «предупреждение» или «ошибка». Полный список типов сообщений см. в документации по представлению Transact-SQL [catalog.operation_messages (база данных SSISDB)](../../integration-services/system-views/catalog-operation-messages-ssisdb-database.md). Полный список типов операций см. в статье [catalog.operations (база данных SSISDB)](../../integration-services/system-views/catalog-operations-ssisdb-database.md).  
  
 Для указания состояния операции используются девять различных типов состояний. Полный список типов состояний см. в представлении [catalog.operations (база данных SSISDB)](../../integration-services/system-views/catalog-operations-ssisdb-database.md)  

## <a name="active-operations-dialog-box"></a><a name="active_ops"></a> Диалоговое окно "Активные операции"
  Воспользуйтесь диалоговым окном **Активные операции** , чтобы просмотреть состояние выполняемых в настоящий момент операций [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на сервере служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , таких как развертывание, проверка и выполнение пакетов. Эти данные хранятся в каталоге SSISDB.  
  
 Дополнительные сведения о связанных представлениях [!INCLUDE[tsql](../../includes/tsql-md.md)] см. в разделах [catalog.operations (база данных SSISDB)](../../integration-services/system-views/catalog-operations-ssisdb-database.md), [catalog.validations (база данных SSISDB)](../../integration-services/system-views/catalog-validations-ssisdb-database.md) и [catalog.executions (база данных SSISDB)](../../integration-services/system-views/catalog-executions-ssisdb-database.md).  
  
###  <a name="open-the-active-operations-dialog-box"></a><a name="open_dialog"></a> Открытие диалогового окна «Активные операции»  
  
1.  Откройте среду [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].  
  
2.  Подключение компонента Microsoft SQL Server Database Engine  
  
3.  В обозревателе объектов разверните узел **Службы Integration Services** , щелкните правой кнопкой мыши элемент **SSISDB** и выберите пункт **Активные операции**.  
  
### <a name="configure-the-options"></a>Настройка параметров  
  
 **Тип**  
 Задает тип операции. Ниже приведены возможные значения поля **Тип** и соответствующие значения в столбце operations_type представления Transact-SQL **catalog.operations** .  
  
|Описание поля "Тип"|Значение operations_type|  
|-|-|  
|Инициализация служб Integration Services|1|  
|Очистка операций (задание агента SQL Server)|2|  
|Очистка версий проекта (задание агента SQL Server)|3|  
|Развернуть проект|101|  
|Восстановить проект|106|  
|Создать и запустить выполнение пакета|200|  
|Остановить операцию (остановка проверки или выполнения|202|  
|Проверить проект|300|  
|Проверить пакет|301|  
|Настроить каталог|1000|  
  
 **Остановить**  
 Щелкните, чтобы остановить выполняемую в настоящий момент операцию.  

## <a name="viewing-and-stopping-packages-running-on-the-integration-services-server"></a>Просмотр и остановка пакетов, выполняющихся на сервере служб Integration Services
  В базе данных служб **SSISDB** хранится журнал выполнения во внутренних таблицах, невидимых для пользователей. Однако сведения, которые она предоставляет, можно получить с помощью запросов к общим представлениям. Также она предоставляет хранимые процедуры, которые можно вызвать для выполнения стандартных задач, связанных с пакетами.  
  
 Обычно управление объектами служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на сервере выполняется в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Но также можно создать запросы к представлениям базы данных и вызывать хранимые процедуры напрямую, либо написать специальный код, вызывающий управляемый API-интерфейс. [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] и управляемый API-интерфейс для выполнения многих задач отправляют запросы к представлениям и вызывают хранимые процедуры. Например, можно просмотреть список пакетов служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , выполняющихся в данный момент на сервере, и запросить остановку их выполнения при необходимости.  
  
### <a name="viewing-the-list-of-running-packages"></a>Просмотр списка выполняемых пакетов  
 Можно просмотреть список пакетов, которые в данный момент выполняются на сервере, в диалоговом окне **Активные операции** . Дополнительные сведения см. в статье [Active Operations Dialog Box](#active_ops).  
  
 Дополнительные сведения о других методах, которые можно использовать для просмотра списка запущенных пакетов, см. в следующих разделах.  
  
 [!INCLUDE[tsql](../../includes/tsql-md.md)] доступ  
 Чтобы просмотреть список пакетов, запущенных на сервере, создайте запрос к представлению [catalog.executions (база данных SSISDB)](../../integration-services/system-views/catalog-executions-ssisdb-database.md) для пакетов со значением состояния 2.  
  
 Программный доступ с использованием управляемого API-интерфейса  
 См. пространство имен <xref:Microsoft.SqlServer.Management.IntegrationServices> и его классы.  
  
### <a name="stopping-a-running-package"></a>Остановка выполнения пакета  
 Можно запросить остановку выполняющегося пакета в диалоговом окне **Активные операции** . Дополнительные сведения см. в статье [Active Operations Dialog Box](#active_ops).  
  
 Дополнительные сведения о других методах, которые можно использовать для остановки запущенного пакета, см. в следующих разделах.  
  
 [!INCLUDE[tsql](../../includes/tsql-md.md)] доступ  
 Чтобы остановить выполняемый на сервере пакет, следует вызвать хранимую процедуру [catalog.stop_operation (база данных SSISDB)](../../integration-services/system-stored-procedures/catalog-stop-operation-ssisdb-database.md).  
  
 Программный доступ с использованием управляемого API-интерфейса  
 См. пространство имен <xref:Microsoft.SqlServer.Management.IntegrationServices> и его классы.  
  
### <a name="viewing-the-history-of-packages-that-have-run"></a>Просмотр журнала выполненных пакетов  
 Для просмотра журнала пакетов, выполнявшихся в среде [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], используйте отчет **Все выполнения** . Дополнительные сведения об отчете **Все выполнения** и других стандартных отчетах см. в разделе [Отчеты для сервера служб Integration Services](#reports).  
  
 Сведения о других методах, которые можно использовать для просмотра журнала выполняющихся пакетов, см. в следующих разделах.  
  
 [!INCLUDE[tsql](../../includes/tsql-md.md)] доступ  
 Для просмотра сведений о выполнявшихся пакетах запросите представление [catalog.executions (база данных SSISDB)](../../integration-services/system-views/catalog-executions-ssisdb-database.md).  
  
 Программный доступ с использованием управляемого API-интерфейса  
 См. пространство имен <xref:Microsoft.SqlServer.Management.IntegrationServices> и его классы.  

## <a name="reports-for-the-integration-services-server"></a><a name="reports"></a> Reports for the Integration Services Server
  Для текущего выпуска служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] предусмотрены стандартные отчеты, помогающие отслеживать проекты служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , развернутые на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Эти отчеты позволяют просмотреть состояние пакета и журнал, а также, если необходимо, определить причину сбоев при выполнении пакетов.  
  
 На любой странице отчета в верхней части имеется значок возврата на предыдущую страницу, значок обновления сведений, отображаемых на странице, и значок печати, который позволяет распечатать текущую страницу.  
  
 Дополнительные сведения о развертывании пакетов на сервере служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] см. в разделе [Развертывание проектов и пакетов служб Integration Services (SSIS)](../../integration-services/packages/deploy-integration-services-ssis-projects-and-packages.md).  
  
### <a name="integration-services-dashboard"></a>Панель мониторинга служб Integration Services  
 Отчет **Панель мониторинга служб Integration Services** представляет общие сведения обо всех выполнявшихся пакетах на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Для каждого пакета, который был запущен на сервере, панель мониторинга позволяет «укрупнить вид» и просмотреть подробные сведения об ошибках, которые могли возникнуть при выполнении пакета.  
  
 В этом отчете содержатся следующие разделы.  
  
|Section|Описание|  
|-------------|-----------------|  
|**Сведения о выполнении**|Показывает количество выполнений в разных состояниях (сбой, не работает, успех, другие) за последние 24 часа.|  
|**Сведения о пакете**|Показывает общее количество пакетов, которые были выполнены за последние 24 часа.|  
|**Сведения о соединении**|Показывает общее количество соединений, использованных при неудачном выполнении за последние 24 часа.|  
|**Подробные сведения о пакете**|Отображает сведения о выполненных запусках, которые произошли за последние 24 часа. Например, в этом разделе показано количество неудачных выполнений в сравнении с общим количеством выполнений, продолжительность выполнений (в секундах) и средняя продолжительность выполнений за прошлые 3 месяца.<br /><br /> Вы можете просмотреть дополнительные сведения о пакете, нажав **Общие сведения**, **Все сообщения** и **Производительность выполнения**.<br /><br /> В отчете **Производительность выполнения** отображается продолжительность последнего выполнения экземпляра, время его начала и окончания, а также среда, в которой происходило выполнение.<br /><br /> Диаграмма и связанная таблица, включенная в отчет **Производительность выполнения** , показывают длительность 10 предыдущих успешных выполнений пакета. В таблице также показывается средняя продолжительность выполнения за трехмесячный период. Различные среды и различные литеральные значения могли быть применены во время этих 10 успешных выполнений пакета.<br /><br /> Наконец, в отчете **Производительность выполнения** показано активное время и общее время для компонентов потока данных пакета. Активное время относится к общему количеству времени, которое компонент потратил на выполнение на всех этапах, а общее время относится к общему времени, затраченному на компонент. Отчет содержит данные для компонентов пакета, только если уровень ведения журнала выполнения последнего пакета задан как «Производительность» или «Подробно».<br /><br /> В отчете **Общие сведения** показывается состояние задач пакета. В отчете **Сообщения** отображаются сообщения об ошибках и событиях для пакета и задач, например начальное и конечное время, а также число записанных строк.<br /><br /> Чтобы перейти к отчету **Сообщения** вы можете также выбрать пункт **Просмотреть сообщения** в отчете **Общие сведения** . Чтобы перейти к отчету **Общие сведения** вы можете также выбрать пункт **Просмотр сведений** в отчете **Сообщения** .|  
  
 Вы можете отфильтровать таблицу, отображенную на любой странице, нажав кнопку **Фильтр** и выбрав критерии фильтрации в диалоговом окне **Параметры фильтра** . Доступные условия фильтра зависят от отображаемых данных. Чтобы изменить порядок сортировки отчета, вы можете щелкнуть значок сортировки в диалоговом окне **Параметры фильтра** .  
  
### <a name="all-executions-report"></a>Отчет «Активность — все выполнения»  
 Отчет **Все выполнения** отображает сводку по всем выполнениям служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , выполненным на сервере. Может существовать несколько выполнений исследуемого пакета. В отличие от отчета **Панель мониторинга служб Integration Services** отчет **Все выполнения** вы можете настроить для отображения выполнений, запущенных в определенном диапазоне дат. Диапазон может занимать несколько дней, месяцев или лет.  
  
 В этом отчете содержатся следующие разделы.  
  
|Section|Description|  
|-------------|-----------------|  
|Filter|Отображает текущий фильтр, применяемый к отчету, например диапазон времени начала.|  
|Сведения о выполнении|Показывает время начала, время окончания и длительность каждого выполнения пакета. Вы можете просмотреть список значений параметров, которые использовались при выполнении пакета, например значения, переданные в дочерний пакет с помощью задачи «Выполнение пакета». Для просмотра списка параметров нажмите кнопку «Общие сведения».|  
  
 Дополнительные сведения об использовании задачи «Выполнение пакета» для передачи значений в дочерний пакет см. в разделе [Execute Package Task](../../integration-services/control-flow/execute-package-task.md).  
  
 Дополнительные сведения о параметрах см. в разделе [Параметры пакетов и проектов в службах Integration Services (SSIS)](../../integration-services/integration-services-ssis-package-and-project-parameters.md).  
  
### <a name="all-connections"></a>Все соединения  
 Отчет **Все соединения** содержит следующие сведения для соединений, завершившихся неудачно, для выполнения на экземпляре [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
 В этом отчете содержатся следующие разделы.  
  
|Section|Description|  
|-------------|-----------------|  
|Filter|Отображает текущий фильтр, применяемый к отчету, например соединения с указанной строкой подключения и в диапазоне **Время последнего сбоя** .<br /><br /> Диапазон **Время последнего сбоя** задается, чтобы показать только сбои соединения, произошедшие в диапазона дат. Диапазон может занимать несколько дней, месяцев или лет.|  
|Сведения|Показывается строка подключения, число выполнений, в течение которых подключение завершилось с ошибкой, и дату последнего сбоя подключения.|  
  
### <a name="all-operations-report"></a>Отчет «Все операции»  
 Отчет **Все операции** показывает сводку по всем операциям служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , выполненным на сервере, включая развертывание, проверку и выполнение пакетов, а также другие административные операции. Как и в отчете «Панель мониторинга служб Integration Services», здесь вы можете применить фильтр к таблице, чтобы сократить объем информации.  
  
### <a name="all-validations-report"></a>Отчет «Все проверки»  
 Отчет **Все проверки** отображает сводку по всем проверкам служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , выполненным на сервере. В сводке показываются данные о каждой проверке: состояние, время начала и время окончания. Каждая запись сводки содержит ссылку на сообщения, полученные в ходе проверки. Как и в отчете «Панель мониторинга служб Integration Services», здесь вы можете применить фильтр к таблице, чтобы сократить объем информации.  
  
### <a name="custom-reports"></a>Пользовательские отчеты  
 Вы можете добавить пользовательский отчет (файл языка определения отчетов) к узлу каталога **SSISDB** в узле **Каталоги служб Integration Services** в [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Прежде чем добавить отчет, убедитесь, что используется контекст трехкомпонентного именования для полного уточнения ссылок на объекты, таких как исходная таблица. В противном случае функция [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] отобразит ошибку. Соглашение об именовании — \<database>.\<owner>.\<object>. В качестве примера можно указать SSISDB.internal.executions.  
  
> [!NOTE]  
>  При добавлении пользовательских отчетов к узлу **SSISDB** в узле **Базы данных** префикс SSISDB не требуется.  
  
 Инструкции по созданию и добавлению пользовательского отчета см. в разделе [Add a Custom Report to Management Studio](../../ssms/object/add-a-custom-report-to-management-studio.md).  

## <a name="view-reports-for-the-integration-services-server"></a>Просмотр отчетов для сервера служб Integration Services
  Для текущего выпуска служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)][!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] предусмотрены стандартные отчеты, помогающие отслеживать проекты служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , развернутые на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .  Дополнительные сведения об отчетах см. в разделе [Отчеты для сервера служб Integration Services](#reports).  
  
### <a name="to-view-reports-for-the-integration-services-server"></a>Просмотр отчетов для сервера служб Integration Services  
  
1.  В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]в обозревателе объектов разверните узел **Каталоги служб Integration Services** .  
  
2.  Щелкните правой кнопкой мыши **SSISDB**, затем выберите **Отчеты** и **Стандартные отчеты**.  
  
3.  Для просмотра отчета выберите один из следующих вариантов.  
  
    -   **Панель мониторинга служб Integration Services**  
  
    -   **Все выполнения**  
  
    -   **Все проверки**  
  
    -   **Все операции**  
  
    -   **Все соединения**  

## <a name="see-also"></a>См. также:  
 [Запуск проектов и пакетов](../packages/deploy-integration-services-ssis-projects-and-packages.md)   
 [Отчеты по устранению неполадок для выполнения пакетов](../troubleshooting/troubleshooting-reports-for-package-execution.md)  
