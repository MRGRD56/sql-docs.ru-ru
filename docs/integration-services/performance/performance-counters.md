---
description: Счетчики производительности
title: Счетчики производительности | Документы Майкрософт
ms.custom: supportability
ms.date: 08/27/2016
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- logs [Integration Services], performance counters
- performance counters [Integration Services]
- data flow [Integration Services], performance
- counters [Integration Services]
- data flow engine [Integration Services]
ms.assetid: 11e17f4e-72ed-44d7-a71d-a68937a78e4c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 481f534c719d188d108ee1d9edd0776ee8b2bc9d
ms.sourcegitcommit: cfa04a73b26312bf18d8f6296891679166e2754d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2020
ms.locfileid: "92192458"
---
# <a name="performance-counters"></a>Счетчики производительности

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] устанавливают набор счетчиков производительности, предназначенных для наблюдения за производительностью подсистемы обработки потока данных. Например, наблюдая за счетчиком «Выгружено буферов», можно определить, записываются ли временно на диск буфера данных при выполнении пакета. Такая выгрузка снижает производительность и указывает на недостаточный объем памяти компьютера.  
  
> **ПРИМЕЧАНИЕ.** Если установить службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на компьютер, где запущена ОС [!INCLUDE[winxpsvr](../../includes/winxpsvr-md.md)], а затем обновить ОС до [!INCLUDE[firstref_longhorn](../../includes/firstref-longhorn-md.md)], то в процессе обновления из компьютера будут удалены счетчики производительности [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Чтобы восстановить счетчики производительности служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на компьютере, запустите средство установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в режиме исправлений.  
  
 В следующей таблице приводятся описания счетчиков производительности.  
  
|Счетчик производительности|Описание|  
|-------------------------|-----------------|  
|Считано байтов BLOB|Число байт данных BLOB, которое подсистема обработки потока данных считала из всех источников.|  
|Записано байтов BLOB|Число байтов данных BLOB, которые подсистема обработки потока данных записала во все назначения.|  
|Используется файлов BLOB|Количество BLOB-файлов, использованных в текущий момент подсистемой обработки потока данных для буферизации.|  
|Память буферов|Объем используемой памяти. Включает как физическую, так и виртуальную память. Если значение больше, чем объем физической памяти, счетчик **Выгружено буферов** увеличивается как признак увеличения памяти подкачки. Увеличение памяти подкачки замедляет производительность подсистемы обработки потока данных.|  
|Используется буферов|Количество объектов буферов всех типов, используемых в текущий момент подсистемой обработки потока данных и компонентами потока данных.|  
|Выгружено буферов|Количество буферов, записанных на диск в текущий момент. Если подсистеме обработки потока данных не хватает оперативной памяти, буферы, не используемые в данный момент, записываются на диск и повторно загружаются в память при необходимости.|  
|Память плоских буферов|Общий объем памяти в байтах, используемой всеми плоскими буферами. Плоские буфера — это блоки памяти, которые компонент использует для сохранения данных. Плоский буфер — большой блок байтов, к которому обращаются байт за байтом.|  
|Используется плоских буферов|Количество плоских буферов, использованных подсистемой обработки потока данных. Все плоские буферы являются частными буферами.|  
|Память частных буферов|Общий объем памяти, использованной всеми частными буферами. Буфер не является частным, если подсистема обработки потока данных создает его для поддержки потока данных. Частный буфер — это буфер, который используется преобразованием только для временной работы. Например, преобразование «Статистическая обработка» использует частные буферы для выполнения своей работы.|  
|Используется частных буферов|Количество буферов, используемых преобразованиями.|  
|Считано строк|Количество строк, выдаваемых источником. Количество не включает строки, считанные из ссылочных таблиц преобразованием «Уточняющий запрос».|  
|Записано строк|Количество строк, предложенных для назначения. Это число не несет сведений о строках, записанных в целевое хранилище данных.|  
  
 Используйте оснастку консоли управления MMC для быстрого создания журнала, собирающего данные счетчиков производительности.  
  
 Сведения об улучшении производительности см. в разделе [Возможности для повышения производительности потока данных](../../integration-services/data-flow/data-flow-performance-features.md).  
  
## <a name="obtain-performance-counter-statistics"></a>Получение статистики счетчика производительности  
 Для проектов [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], которые развертываются на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], статистику счетчика производительности вы можете получить с помощью функции [dm_execution_performance_counters (база данных SSISDB)](../../integration-services/functions-dm-execution-performance-counters.md).  
  
 В следующем примере функция возвращает статистику для запущенного выполнения с идентификатором 34.  
  
```sql
select * from [catalog].[dm_execution_performance_counters] (34)  
```  
  
 В следующем примере функция возвращает статистику для всех выполнений, запущенных на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .  
  
```sql
select * from [catalog].[dm_execution_performance_counters] (NULL)  
  
```  
  
> **ВАЖНО!** Для члена роли базы данных **ssis_admin** возвращается статистика производительности всех активных выполнений.  Если пользователь не является членом роли базы данных **ssis_admin** , возвращается статистика производительности активных выполнений, для которых имеются разрешения на чтение.  
  
## <a name="related-content"></a>См. также  
  
-   Средство [Визуализация производительности служб SSIS Performance для Business Intelligence Development Studio (проект CodePlex)](https://go.microsoft.com/fwlink/?LinkId=146626)на узле codeplex.com.  
  
-   Видео [Измерение и основные сведения о показателях пакетов служб SSIS на предприятии (видеоматериал SQL Server)](/previous-versions/sql/sql-server-2008/dd795223(v=sql.100))на сайте msdn.microsoft.com.  
  
-   Статья поддержки [Счетчик производительности служб SSIS больше недоступен в системном мониторе после обновления до Windows Server 2008](https://go.microsoft.com/fwlink/?LinkId=235319)на узле support.microsoft.com.  

## <a name="add-a-log-for-data-flow-performance-counters"></a>Добавление журнала для счетчиков производительности потока данных
  В этой процедуре описывается добавление журнала для счетчиков производительности, поставляемых подсистемой обработки потока данных.  
  
> [!NOTE]  
>  Если установить службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на компьютер, где запущена ОС [!INCLUDE[winxpsvr](../../includes/winxpsvr-md.md)], а затем обновить ОС до [!INCLUDE[firstref_longhorn](../../includes/firstref-longhorn-md.md)], то в процессе обновления из компьютера будут удалены счетчики производительности [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Чтобы восстановить счетчики производительности служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] на компьютере, запустите средство установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в режиме исправлений.  
  
### <a name="to-add-logging-of-performance-counters"></a>Добавление ведения журнала счетчиков производительности  
  
1.  Если используется классический вид **панели управления**, выберите **Администрирование**. Если используется вид по категориям, выберите вначале **Производительность и обслуживание** , затем **Администрирование**.  
  
2.  Выберите **Производительность**.  
  
3.  В диалоговом окне **Производительность** разверните **Оповещения и журналы производительности**, щелкните правой кнопкой мыши **Журналы счетчиков**и выберите **Новые параметры журнала**. Введите имя журнала. Например, введите **Мой_журнал**.  
  
4.  Нажмите кнопку **ОК**.  
  
5.  В диалоговом окне **Мой_журнал** нажмите кнопку **Добавить счетчики**.  
  
6.  Щелкните **Использовать локальные счетчики** , чтобы вести журнал счетчиков производительности на локальном компьютере, или **Выбрать счетчики с компьютера** и выберите из списка компьютер, на котором требуется вести журнал счетчиков производительности.  
  
7.  В диалоговом окне **Добавить счетчики** из списка **Объект:** выберите **SQL Server:SSIS Pipeline** .  
  
8.  Чтобы выбрать счетчики производительности, выполните одно из следующих действий:  
  
    -   Выберите **Все счетчики** , чтобы вести журналы всех счетчиков производительности.  
  
    -   Выберите **Выбрать счетчики из списка** , чтобы выбрать нужные счетчики производительности.  
  
9. Нажмите кнопку **Добавить**.  
  
10. Щелкните **Закрыть**.  
  
11. В диалоговом окне **Мой_журнал** проверьте список счетчиков производительности в списке **Счетчики** .  
  
12. Чтобы ввести дополнительные счетчики, повторите шаги с 5 по 10.  
  
13. Нажмите кнопку **ОК**.  
  
    > [!NOTE]  
    >  Необходимо запустить службу «Журналы и оповещения производительности» с помощью локальной учетной записи или учетной записи домена, входящей в группу «Администраторы».  

## <a name="see-also"></a>См. также:  
 [Запуск проектов и пакетов](../packages/run-integration-services-ssis-packages.md) [Регистрация событий в пакете служб Integration Services](../../integration-services/performance/events-logged-by-an-integration-services-package.md)