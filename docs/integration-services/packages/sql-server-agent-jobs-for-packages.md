---
description: Пакеты служб из заданий агента SQL Server
title: Задания агента SQL Server для пакетов | Документы Майкрософт
ms.custom: ''
ms.date: 06/29/2020
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- jobs [Integration Services]
- automatic package execution
- scheduling packages [Integration Services]
- SQL Server Agent [Integration Services]
ms.assetid: ecf7a5f9-b8a7-47f1-9ac0-bac07cb89e31
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 04007ee3165838669fd1b0faefdcb20d09940af7
ms.sourcegitcommit: cfa04a73b26312bf18d8f6296891679166e2754d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2020
ms.locfileid: "92192476"
---
# <a name="sql-server-agent-jobs-for-packages"></a>Пакеты служб из заданий агента SQL Server

[!INCLUDE[sqlserver-ssis](../../includes/applies-to-version/sqlserver-ssis.md)]


  Выполнение пакетов служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] можно автоматизировать и запланировать в расписании при помощи агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Можно задать расписание выполнения пакетов, равернутых на сервере служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , хранимых в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], в хранилище пакетов служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , или в файловой системе.  
 
> [!NOTE]
> В этой статье приводятся общие сведения о планировании выполнения пакетов служб SSIS, а также содержится информация о планировании выполнения пакетов в локальной среде. Выполнять и планировать выполнение пакетов служб SSIS можно на следующих платформах:
> - **облако Microsoft Azure**. Дополнительные сведения см. в статьях [Перенос рабочих нагрузок SQL Server Integration Services в облако](../lift-shift/ssis-azure-lift-shift-ssis-packages-overview.md) и [Планирование выполнения пакета служб SSIS в Azure](../lift-shift/ssis-azure-schedule-packages.md).
> - **Linux**. Дополнительные сведения см. в статьях [Извлечение, преобразование и загрузка данных в Linux с помощью служб SSIS](../../linux/sql-server-linux-migrate-ssis.md) и [Планирование выполнения пакетов служб SSIS в Linux с помощью Cron](../../linux/sql-server-linux-schedule-ssis-packages.md).

## <a name="sections-in-this-topic"></a>Подразделы данного раздела  
 Этот раздел состоит из следующих подразделов.  
  
-   [Планирование заданий в агенте SQL Server](#jobs)  
  
-   [Планирование пакетов служб Integration Services](#packages)  
  
-   [Устранение неполадок при работе с запланированным пакетами](#trouble)  
  
##  <a name="scheduling-jobs-in-sql-server-agent"></a><a name="jobs"></a> Scheduling Jobs in SQL Server Agent  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] — это устанавливаемая [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] служба, которая позволяет автоматизировать задания и планировать их выполнение посредством запуска заданий агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Для автоматического запуска заданий должна быть запущена служба агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Дополнительные сведения см. в статье [Configure SQL Server Agent](../../ssms/agent/configure-sql-server-agent.md).  
  
 Узел **агента SQL Server** отображается в обозревателе объектов среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] при подключении к экземпляру [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].  
  
 Для автоматизации повторяющейся задачи необходимо создать задание в диалоговом окне **Создать задание** . Дополнительные сведения см. в разделе [Реализация заданий](../../ssms/agent/implement-jobs.md).  
  
 После создания задания необходимо добавить как минимум один шаг. Задание может содержать несколько шагов, причем на каждом из шагов могут решаться различные задачи. Дополнительные сведения см. в статье [Manage Job Steps](../../ssms/agent/manage-job-steps.md).  
  
 После создания задания и шагов задания можно создать расписание для его запуска. Однако можно создать и задание без расписания, которое будет запускаться вручную. Дополнительные сведения см. в разделе [Создание и присоединение расписаний к заданиям](../../ssms/agent/create-and-attach-schedules-to-jobs.md).  
  
 Можно добавить заданию некоторые функции уведомления, например, чтобы по окончании задания отправлялось сообщение по электронной почте определенному оператору, или выдавались какие-либо предупреждения. Дополнительные сведения см. в статье [Оповещения](../../ssms/agent/alerts.md).  
  
##  <a name="scheduling-integration-services-packages"></a><a name="packages"></a> Scheduling Integration Services Packages  
 После создания задания служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для планирования пакетов [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] необходимо добавить к нему хотя бы один шаг и задать для этого шага тип **Пакет SQL Server Integration Services**. Задание может содержать несколько шагов, причем на всех шагах могут выполняться различные пакеты.  
  
 Запуск пакета служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] из шага задания аналогичен запуску пакета с помощью программ **dtexec** (dtexec.exe) и **DTExecUI** (dtexecui.exe). Вместо задания для пакета параметров времени выполнения с помощью параметров командной строки или из диалогового окна **Программа выполнения пакетов** они задаются в диалоговом окне **Создание шага задания** . Дополнительные сведения о параметрах запуска пакета см. в разделе [dtexec Utility](../../integration-services/packages/dtexec-utility.md).  
  
 Дополнительные сведения см. в разделе [Планирование пакета с помощью агента SQL Server](#schedule).  
  
 Видео, в котором демонстрируется, как использовать агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для запуска пакета, см. на домашней странице в руководстве по [ автоматизации выполнения пакета с помощью агента SQL Server (видео об SQL Server)](/previous-versions/sql/sql-server-2008/dd440761(v=sql.100)) в библиотеке MSDN.  
  
##  <a name="troubleshooting"></a><a name="trouble"></a> Устранение неполадок  
 Возможна ситуация, когда шаг задания агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не сможет запустить пакет даже в случае успешного выполнения пакета в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] или из командной строки. У этой проблемы есть несколько распространенных причин и несколько рекомендуемых решений. Для получения дополнительных сведений см. следующие ресурсы.  
  
-   [!INCLUDE[msCoName](../../includes/msconame-md.md)] , [Пакет служб SSIS не выполняется при вызове пакета из шага задания агента SQL Server](https://support.microsoft.com/kb/918760)  
  
-   Видео с руководством по [устранению неполадок с выполнением пакета с помощью агента SQL Server (видео об SQL Server)](/previous-versions/sql/sql-server-2008/dd440760(v=sql.100)) в библиотеке MSDN.  
  
 После того как шаг задания агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] успешно запустил пакет, выполнение пакета может завершиться ошибкой или пакет может быть выполнен успешно, но с непредвиденными результатами. Для устранения таких неполадок можно использовать следующие средства.  
  
-   Для пакетов, сохраненных в базе данных MSDB [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , хранилище пакетов служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] или в папке на локальном компьютере, можно использовать **Средство просмотра журнала** , а также любые журналы и отладочные файлы дампа, созданные во время выполнения пакета.  
  
     **Для использования средства просмотра журналов выполните следующие действия.**  
  
    1.  В обозревателе объектов щелкните правой кнопкой мыши задание агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и выберите **Просмотр журнала**.  
  
    2.  Найдите выполнение задания в поле **Сведения о файле журнала** с сообщением **Не удалось выполнить задание** в столбце **Сообщение** .  
  
    3.  Разверните узел задания и щелкните шаг задания для просмотра сведений сообщения в области под полем **Сведения о файле журнала** .  
  
-   Для пакетов, сохраненных в базе данных SSISDB, можно использовать **Средство просмотра журнала** , а также любые журналы и отладочные файлы дампа, созданные во время выполнения пакета. Кроме того, можно использовать отчеты для сервера служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .  
  
     **Для поиска сведений в отчетах по выполнению пакета, связанного с выполнением задания, выполните следующие действия.**  
  
    1.  Выполните описанные выше шаги, чтобы просмотреть сведения из сообщения для шага задания.  
  
    2.  Найдите идентификатор выполнения, указанный в сообщении.  
  
    3.  Разверните узел каталога служб Integration Services в обозревателе объектов.  
  
    4.  Щелкните правой кнопкой мыши «SSISDB», затем выберите «Отчеты», «Стандартные отчеты», «Все выполнения».  
  
    5.  В отчете **Все выполнения** найдите идентификатор выполнения в столбце **Идентификатор** . Щелкните **Общие сведения**, **Все сообщения**или **Производительность выполнения** , чтобы просмотреть сведения об этом выполнении пакета.  
  
    Дополнительные сведения об отчетах «Общие сведения», «Все сообщения» и «Производительность выполнения» см. в разделе [Reports for the Integration Services Server](../../integration-services/performance/monitor-running-packages-and-other-operations.md#reports).  

## <a name="schedule-a-package-by-using-sql-server-agent"></a><a name="schedule"></a> Планирование пакета с помощью агента SQL Server
  Следующая процедура описывает шаги для автоматизации выполнения пакета с помощью шага задания агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для выполнения пакета.  
  
### <a name="to-automate-package-execution-by-using-sql-server-agent"></a>Автоматизация выполнения пакета с помощью агента SQL Server  
  
1.  В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]подключитесь к экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , в котором нужно создать задание, или к экземпляру, содержащему задание, в которое нужно добавить шаг.  
  
2.  Разверните узел агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в обозревателе объектов и выполните одну из следующих задач.  
  
    -   Чтобы создать задание, щелкните правой кнопкой мыши узел **Задания** и выберите пункт **Создать задание**.  
  
    -   Чтобы добавить шаг в существующее задание, разверните узел **Задания**, щелкните правой кнопкой мыши задание и выберите пункт **Параметры**.  
  
3.  На вкладке **Общие** при создании нового задания введите имя, выберите владельца и категорию задания, а при желании и его описание.  
  
4.  Чтобы включить задание в расписание, выберите **Включено**.  
  
5.  Чтобы создать шаг задания для пакета, для которого составляется расписание, выберите узел **Шаги**и щелкните **Создать**.  
  
6.  Выберите **Пакет служб Integration Services** для типа шага задания.  
  
7.  В списке **Запуск от имени** выберите **Учетная запись службы агента SQL Server** или выберите учетную запись-посредник с учетными данными, которые будут использоваться шагом задания. Дополнительные сведения о создании учетной записи-посредника см. в разделе [Create a SQL Server Agent Proxy](../../ssms/agent/create-a-sql-server-agent-proxy.md).  

    Использование учетной записи-посредника вместо **учетной записи службы агента SQL Server** может решить наиболее распространенные проблемы, которые иногда возникают при выполнении пакета с помощью агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Дополнительные сведения о таких проблемах см. в статье базы знаний [!INCLUDE[msCoName](../../includes/msconame-md.md)][Пакет служб SSIS не выполняется при его вызове из шага задания агента SQL Server](https://support.microsoft.com/kb/918760). 
     
    - Для успешного выполнения задания с помощью прокси-сервера требуются следующие элементы системы безопасности.

        Логин, используемый прокси, учетная запись, использующая агент SQL Server, и учетная запись, использующая службу SQL Server, требуют следующих разрешений:

        - Атрибут локальной политики безопасности: Замена токена уровня процесса
        - Полный контроль над %SYSTEMROOT%\Temp 

        Ошибка включения элементов системы безопасности приведет к сбою задания примерно с таким сообщением об ошибке: Не удалось завершить задание. Клиент не располагает требуемыми правами доступа.

        > **ПРИМЕЧАНИЕ.** При изменении пароля для учетных данных, используемых учетной записью-посредником, необходимо обновить пароль учетных данных. В противном случае выполнение шага задания завершится ошибкой.  

        Дополнительные сведения о настройке учетной записи службы агента SQL Server см. в разделе [Назначение стартовой учетной записи службы для агента SQL Server (диспетчер конфигурации SQL Server)](../../ssms/agent/set-service-startup-account-sql-server-agent-sql-server-configuration-manager.md).  

8.  В списке **Источник пакета** щелкните источник пакета и настройте параметры шага задания.  
  
    **В следующей таблице приведены возможные источники пакетов.**  
  
    |Источник пакета|Описание|  
    |--------------------|-----------------|  
    |**Каталог служб SSIS**|Пакеты, хранимые в базе данных SSISDB. Пакеты хранятся в проектах [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , развернутых на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .|  
    |**SQL Server**|Пакеты, хранимые в базе данных MSDB. Для управления этими пакетами используется служба [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .|  
    |**Хранилище пакетов служб SSIS**|Пакеты, хранимые в папке по умолчанию на локальном компьютере. Папка по умолчанию — *\<drive>* :\Program Files\Microsoft SQL Server\110\DTS\Packages. Для управления этими пакетами используется служба [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .<br /><br /> Примечание. Можно указать другую папку или дополнительные папки из файловой системы, которые будут управляться службой [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], изменив файл конфигурации для служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]. Дополнительные сведения см. в разделе [Службы Integration Services (SSIS)](../../integration-services/service/integration-services-service-ssis-service.md).|  
    |**Файловая система**|Пакеты, хранимые в любой папке на локальном компьютере.|  
    |||
  
    **В следующих таблицах описаны параметры конфигурации, доступные для шага задания в зависимости от выбранного источника пакета.**  
  
    > **Важно!** Если пакет защищен паролем, то при переходе на любые вкладки на странице **Общие** диалогового окна **Создание шага задания** , за исключением вкладки **Пакет** , необходимо ввести пароль в появляющемся диалоговом окне **Пароль пакета** . В противном случае задание агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не сможет запустить пакет.  
  
    **Источник пакета**: Каталог служб SSIS  
  
    |Вкладка|Параметры|  
    |---------|-------------|  
    |**Пакет**|**Server**<br /><br /> Введите или выберите имя экземпляра сервера базы данных, на котором размещен каталог служб SSISDB.<br /><br /> Если источник пакета — **каталог служб SSIS** , можно войти на сервер только с использованием учетной записи Microsoft Windows. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] недоступна.|  
    ||**Пакет**<br /><br /> Нажмите кнопку с многоточием и выберите пакет.<br /><br /> Пакет выбирается в папке в узле **Каталоги служб Integration Services** в **обозревателе объектов**.|  
    |**Параметры**<br /><br /> Размещается на вкладке **Конфигурация** .|**Мастер преобразования проектов служб Integration Services** позволяет заменять конфигурации пакета параметрами.<br /><br /> На вкладке **Параметры** отображаются параметры, которые были добавлены при проектировании пакета, например с помощью среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Эта вкладка также содержит параметры, которые были добавлены к пакету при преобразовании проекта служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] из модели развертывания пакета в модель развертывания проекта. Введите новые значения для параметров, которые содержатся в этом пакете. Можно ввести литеральное значение или использовать значение, содержащееся в переменной среды сервера, которая уже связана с параметром.<br /><br /> Чтобы задать литеральное значение, нажмите кнопку с многоточием рядом с параметром. Откроется диалоговое окно **Изменение литерального значения для выполнения** .<br /><br /> Чтобы использовать переменную среды, щелкните **Среда** и выберите среду, содержащую нужную переменную.<br /><br /> **\*\* Важно! \*\*** Если несколько параметров и/или свойств диспетчера подключений сопоставлены с переменными, содержащимися в нескольких средах, агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] отображает сообщение об ошибке. Для данного выполнения пакет может выполняться только со значениями, содержащимися в односерверной среде.<br /><br /> Сведения о создании среды сервера и сопоставлении переменных с параметрами см. в разделе [Развертывание проектов и пакетов служб Integration Services (SSIS)](../../integration-services/packages/deploy-integration-services-ssis-projects-and-packages.md).|  
    |**Диспетчеры соединений**<br /><br /> Размещается на вкладке **Конфигурация** .|Изменение значений свойств диспетчера соединений. Можно изменить, например, имя сервера. Параметры для свойств диспетчера соединений автоматически создаются на сервере служб SSIS. Чтобы изменить значение свойства, можно ввести литеральное значение или значение, содержащееся в переменной среды сервера, которая уже сопоставлена со свойством диспетчера соединений.<br /><br /> Чтобы задать литеральное значение, нажмите кнопку с многоточием рядом с параметром. Откроется диалоговое окно **Изменение литерального значения для выполнения** .<br /><br /> Чтобы использовать переменную среды, щелкните **Среда** и выберите среду, содержащую нужную переменную.<br /><br /> **\*\* Важно! \*\*** Если несколько параметров и/или свойств диспетчера подключений сопоставлены с переменными, содержащимися в нескольких средах, агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] отображает сообщение об ошибке. Для данного выполнения пакет может выполняться только со значениями, содержащимися в односерверной среде.<br /><br /> Дополнительные сведения о создании среды сервера и сопоставлении переменных со свойствами диспетчера подключений см. в разделе [Развертывание проектов и пакетов служб Integration Services (SSIS)](../../integration-services/packages/deploy-integration-services-ssis-projects-and-packages.md).|  
    |**Дополнительно**<br /><br /> Размещается на вкладке **Конфигурация** .|Настройте дополнительные параметры, указанные ниже, для выполнения пакета.|  
    ||**Переопределения свойств**.<br /><br /> Нажмите кнопку **Добавить** , чтобы ввести новое значение для свойства пакета, укажите путь к свойству и укажите, является ли значение свойства конфиденциальным. Сервер [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] шифрует конфиденциальные данные. Для изменения или удаления параметров свойства щелкните строку поля переопределений **Свойство** и выберите **Изменить** или **Удалить**. Путь к свойству можно найти одним из следующих способов:<br /><br /> — Скопируйте путь свойства из XML-файла конфигурации (\*.dtsconfig). Путь отображается в разделе файла «Конфигурация» в качестве значения атрибута Path. Вот пример пути для свойства MaximumErrorCount: \Package.Properties[MaximumErrorCount].<br /><br /> — Запустите **Мастер настройки пакета** и скопируйте пути к свойствам с последней страницы **Завершение работы мастера** . Затем мастер можно отменить.<br /><br /> <br /><br /> Примечание. Параметр **Переопределенные свойства** предназначен для пакетов с конфигурациями, которые были обновлены с предыдущей версии [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]. Пакеты, созданные с помощью служб [!INCLUDE[ssISCurrent](../../includes/ssiscurrent-md.md)] и развернутые на сервере служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] , используют параметры вместо конфигураций.|  
    ||**Уровень ведения журнала**<br /><br /> Выберите один из следующих уровней ведения журнала для выполнения пакета. Обратите внимание, что уровень ведения журнала **Производительность** или **Подробно** может повлиять на производительность выполнения пакета.<br /><br /> **Нет** —<br />                          Ведение журнала выключено. Регистрируется только состояние выполнения пакета.<br /><br /> **Базовый**.<br />                          Записываются все события, за исключением пользовательских и диагностических событий. Это значение по умолчанию для уровня ведения журнала.<br /><br /> **Производительность** —<br />                          Регистрируются только статистика производительности, а также события OnError и OnWarning.<br /><br /> **Подробно**.<br />                          Регистрируются все события, в том числе пользовательские и диагностические события.<br /><br /> Выбранный уровень ведения журнала определяет, какие данные будут отображаться в представлениях SSISDB и в отчетах для сервера служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Дополнительные сведения см. в статье [Ведение журналов в службах Integration Services (SSIS)](../../integration-services/performance/integration-services-ssis-logging.md).|  
    ||**Дамп при ошибках**<br /><br /> Указывает, создаются ли отладочные файлы дампа при возникновении любой ошибки в ходе выполнения пакета. Файлы содержат сведения о выполнении пакета, которые могут быть полезны при диагностике неполадок. Если выбран этот параметр и во время выполнения возникает ошибка, службы [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] создадут MDMP-файл (двоичный) и TMP-файл (текстовый). По умолчанию [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] хранит файлы в папке *\<drive>:* \Program Files\Microsoft SQL Server\110\Shared\ErrorDumps.|  
    ||**32-разрядная среда выполнения**<br /><br /> Указывает, запускать ли пакет с использованием 32-разрядной версии программы dtexec на 64-разрядном компьютере, на котором установлены 64-разрядные версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .<br /><br /> Выполнить пакет с помощью 32-разрядной версии программы dtexec может потребоваться, например, если пакет использует собственный поставщик данных OLE DB, недоступный в 64-разрядной версии. Дополнительные сведения см. в разделе [Особенности работы служб Integration Services в 64-разрядной среде](https://msdn.microsoft.com/library/ms141766\(SQL.105\).aspx).<br /><br /> По умолчанию при выборе типа шага задания **Пакет служб SQL Server Integration Services** агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняет пакет с помощью программы dtexec той версии, которая автоматически вызывается системой. Система вызывает 32-разрядную или 64-разрядную версию программы в зависимости от процессора компьютера и версий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , выполняющихся на компьютере.|  
  
     **Источник пакета**:  SQL Server, хранилище пакетов служб SSIS или файловая система  
  
     Большинство параметров, которые можно задать для пакетов, хранящихся в SQL Server, хранилище пакетов служб SSIS и файловой системе, соответствуют параметрам командной строки для программы командной строки **dtexec** . Дополнительные сведения о программе и параметрах командной строки см. в разделе [Программа dtexec](../../integration-services/packages/dtexec-utility.md).  
  
    |Вкладка|Параметры|  
    |---------|-------------|  
    |**Пакет**<br /><br /> Это параметры вкладки для пакетов, хранящихся в хранилище пакетов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] .|**Server**<br /><br /> Введите или выберите имя экземпляра сервера базы данных для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .|  
    ||**Использовать проверку подлинности Windows**<br /><br /> Выберите этот параметр для входа в систему с учетной записью Microsoft Windows.|  
    ||**Использовать проверку подлинности SQL Server**<br /><br /> При подключении пользователя с указанным именем и паролем из ненадежных соединений [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняет проверку подлинности, сравнивая настройки учетной записи входа [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и указанный пароль с записанным ранее. Если [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может найти такое имя входа, проверка подлинности прекращается, и пользователь получает сообщение об ошибке.|  
    ||**Имя пользователя**|  
    ||**Пароль**|  
    ||**Пакет**<br /><br /> Нажмите кнопку с многоточием и выберите пакет.<br /><br /> Выбирается пакет, расположенный в узле **Сохраненные пакеты** в **обозревателе объектов**.|  
    |**Пакет**<br /><br /> Это параметры вкладки для пакетов, хранящихся в файловой системе.|**Пакет**<br /><br /> Введите полный путь к файлу пакета или нажмите кнопку с многоточием, чтобы выбрать пакет.|  
    |**Конфигурации**|Добавьте XML-файл конфигурации для запуска пакета с указанной конфигурацией. Конфигурации пакета используются для обновления значений свойств пакета во время выполнения.<br /><br /> Этот параметр соответствует параметру **/ConfigFile** для программы **dtexec**.<br /><br /> Сведения о применении параметров конфигурации пакета см. в разделе [Package Configurations](./legacy-package-deployment-ssis.md). Дополнительные сведения о создании конфигурации пакетов см. в разделе [Create Package Configurations](./legacy-package-deployment-ssis.md).|  
    |**Командные файлы**|Укажите дополнительные параметры для программы **dtexec**в отдельном файле.<br /><br /> Например, можно включить файл с параметром /Dump *errorcode* , чтобы создавать отладочные файлы дампа, если при выполнении пакета возникает одно или несколько указанных событий.<br /><br /> Можно выполнять пакет с различными наборами параметров, создав несколько файлов и затем указывая нужный файл с помощью параметра **Командные файлы** .<br /><br /> Параметр **Командные файлы** соответствует параметру **/CommandFile** для программы **dtexec**.|  
    |**Data Sources** (Источники данных)|Просмотрите диспетчеры соединений, которые содержатся в этом пакете. Чтобы изменить строку подключения, щелкните диспетчер соединений и выберите строку подключения.<br /><br /> Этот параметр соответствует параметру **/Connection** для программы **dtexec**.|  
    |**Параметры выполнения**|**Завершать пакет с ошибкой, когда проверка выдает предупреждения**<br /> Указывает, считается ли предупреждение ошибкой. Если выбран этот параметр и в ходе проверки получено предупреждение, выполнение пакета завершится ошибкой при проверке. Этот параметр соответствует параметру **/WarnAsError** для программы **dtexec**.<br /><br /> **Проверить пакет без выполнения**<br /> Указывает, останавливать ли выполнение пакета по завершении стадии проверки без фактического запуска пакета. Этот параметр соответствует параметру **/Validate** для программы **dtexec**.<br /><br /> **Переопределить свойство MacConcurrentExecutables**<br /> Указывает количество исполняемых файлов, которые пакет может запускать одновременно. Значение –1 указывает, что пакет может выполнять максимальное количество исполняемых файлов, равное общему количеству процессоров компьютера, на котором выполняется пакет, плюс два. Этот параметр соответствует параметру **/MaxConcurrent** для программы **dtexec**.<br /><br /> **Включить контрольные точки пакета**<br /> Указывает, будет ли пакет использовать контрольные точки во время выполнения. Дополнительные сведения см. в разделе [Restart Packages by Using Checkpoints](../../integration-services/packages/restart-packages-by-using-checkpoints.md).<br /><br /> Этот параметр соответствует параметру **/CheckPointing** для программы **dtexec**.<br /><br /> **Переопределить режим перезапуска**<br /> Указывает, устанавливается ли новое значение для свойства пакета **CheckpointUsage** . Выберите значение из списка **Режим перезапуска** .<br /><br /> Этот параметр соответствует параметру **/Restart** для программы **dtexec**.<br /><br /> **Использовать 32-разрядную среду выполнения**<br /> Указывает, запускать ли пакет с использованием 32-разрядной версии программы dtexec на 64-разрядном компьютере, на котором установлены 64-разрядные версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .<br /><br /> Выполнить пакет с помощью 32-разрядной версии программы dtexec может потребоваться, например, если пакет использует собственный поставщик данных OLE DB, недоступный в 64-разрядной версии. Дополнительные сведения см. в разделе [Особенности работы служб Integration Services в 64-разрядной среде](https://msdn.microsoft.com/library/ms141766\(SQL.105\).aspx).<br /><br /> По умолчанию при выборе типа шага задания **Пакет служб SQL Server Integration Services** агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняет пакет с помощью программы dtexec той версии, которая автоматически вызывается системой. Система вызывает 32-разрядную или 64-разрядную версию программы в зависимости от процессора компьютера и версий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , выполняющихся на компьютере.|  
    |**Logging**|Связывает регистратор с выполнением пакета.<br /><br /> **Регистратор служб SSIS для текстовых файлов**<br /> Заносит записи журналов в текстовые файлы ASCII<br /><br /> **Регистратор служб SSIS для SQL Server**<br /> Заносит записи журналов в таблицу sysssislog базы данных MSDB.<br /><br /> **Регистратор служб SSIS для приложения SQL Server Profiler**<br /> Записывает трассировки, которые можно просмотреть с помощью приложения SQL Server Profiler.<br /><br /> **Регистратор служб SSIS для журнала событий Windows**<br /> Заносит записи журнала в журнал приложений журнала событий Windows.<br /><br /> **Регистратор служб SSIS для XML-файлов**<br /> Записывает файлы журналов в XML-файл.<br /><br /> Для регистраторов, работающих с текстовыми файлами, XML-файлами и приложением [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler, выбираются диспетчеры соединений файлов, содержащиеся в пакете. Для регистратора [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] необходимо выбрать диспетчер соединений OLE DB, содержащийся в пакете.<br /><br /> Этот параметр соответствует параметру **/Logger** для программы **dtexec**.|  
    |**Установленные значения**|Переопределить параметр свойства пакета. В поле **Свойства** введите значения в столбцах **Путь к свойству** и **Значение** . После ввода значений для одного свойства в поле **Свойства** появляется пустая строка, позволяющая ввести значения для другого свойства.<br /><br /> Чтобы удалить свойство из поля «Свойства», щелкните строку и нажмите кнопку **Удалить**.<br /><br /> Путь к свойству можно найти одним из следующих способов:<br /><br /> — Скопируйте путь свойства из XML-файла конфигурации (\*.dtsconfig). Путь отображается в разделе файла «Конфигурация» в качестве значения атрибута Path. Вот пример пути для свойства MaximumErrorCount: \Package.Properties[MaximumErrorCount].<br /><br /> — Запустите **Мастер настройки пакета** и скопируйте пути к свойствам с последней страницы **Завершение работы мастера** . Затем мастер можно отменить.|  
    |**Проверка**|**Выполнять только подписанные пакеты**<br /> Указывает, проверяется ли цифровая подпись пакета. Если пакет не подписан или подпись недопустима, работа пакета завершается ошибкой. Этот параметр соответствует параметру **/VerifySigned** для программы **dtexec**.<br /><br /> **Проверить номер сборки пакета**<br /> Указывает, сверяется ли номер сборки пакета с номером сборки, введенным в поле **Номер сборки** рядом с этим параметром. В случае несоответствия пакет выполняться не будет. Этот параметр соответствует параметру **/VerifyBuild** для программы **dtexec**.<br /><br /> **Проверить идентификатор пакета**<br /> Указывает, сверяется ли идентификатор GUID пакета с идентификатором пакета, указанным в поле **Идентификатор пакета** рядом с этим параметром. Этот параметр соответствует параметру **/VerifyPackageID** для программы **dtexec**.<br /><br /> **Проверить идентификатор версии**<br /> Указывает, сверяется ли идентификатор GUID версии пакета с идентификатором версии, указанным в поле **Идентификатор версии** рядом с этим параметром. Этот параметр соответствует параметру **/VerifyVersionID** для программы **dtexec**.|  
    |**Командная строка**|Изменить параметры командной строки для программы dtexec. Дополнительные сведения о параметрах см. в разделе [dtexec Utility](../../integration-services/packages/dtexec-utility.md).<br /><br /> **Восстановить первоначальные значения параметров**<br /> Использовать параметры командной строки, установленные на вкладках **Пакет**, **Конфигурации**, **Командные файлы**, **Источники данных**, **Параметры выполнения**, **Ведение журнала**, **Настройка значений**и **Проверка** диалогового окна **Свойства набора заданий** .<br /><br /> **Изменить команду вручную**<br /> Введите дополнительные параметры командной строки в поле **Командная строка** .<br /><br /> До нажатия кнопки **ОК** для сохранения внесенных в шаг задания изменений можно удалить все дополнительные параметры, введенные в поле **Командная строка**, щелкнув **Восстановить первоначальные параметры**.<br /><br /> **\*\* Совет. \*\*** Можно скопировать командную строку в окно командной строки, добавить `dtexec`и запустить пакет из командной строки. Это облегчает создание текста в командной строке.|  
  
9. Нажмите кнопку **ОК** , чтобы сохранить настройки и закрыть диалоговое окно **Создание шага задания** .  
  
    > [!NOTE]
    > Для пакетов, хранящихся в **каталоге служб SSIS**, кнопка **ОК** остается недоступной, если имеется неразрешенный параметр или значение свойства диспетчера соединений. Неразрешенное значение возникает при использовании значения, содержащегося в переменной среды сервера, для задания параметра или свойства и выполнении одного из следующих условий.  
    >   
    >  Не установлен флажок **Среда** на вкладке **Конфигурация** .  
    >   
    >  Серверная среда, содержащая переменную, не выбрана в списке на вкладке **Конфигурация** .  
  
10. Чтобы создать расписание для шага задания, нажмите кнопку **Расписания** на панели **Выбор страницы** . Сведения о настройке расписания см. в разделе [Schedule a Job](../../ssms/agent/schedule-a-job.md).  
  
    > [!TIP]  
    >  При задании имени расписания используйте уникальное и описательное имя, чтобы было легче отличить это расписание от других расписаний агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  

## <a name="see-also"></a>См. также:  
 [Запуск проектов и пакетов](deploy-integration-services-ssis-projects-and-packages.md)  

## <a name="external-resources"></a>Внешние ресурсы  
  
-   Статья базы знаний [Пакет служб SSIS не выполняется при вызове пакета из шага задания агента SQL Server](https://support.microsoft.com/kb/918760)на веб-сайте [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
-   Видео с руководством по [устранению неполадок с выполнением пакета с помощью агента SQL Server (видео об SQL Server)](/previous-versions/sql/sql-server-2008/dd440760(v=sql.100)) в библиотеке MSDN.  
  
-   Видео с руководством по [ автоматизации выполнения пакета с помощью агента SQL Server (видео об SQL Server)](/previous-versions/sql/sql-server-2008/dd440761(v=sql.100)) в библиотеке MSDN.  
  
-   Техническая статья [Checking SQL Server Agent jobs using Windows PowerShell (на английском языке)](https://go.microsoft.com/fwlink/?LinkId=165675)на сайте mssqltips.com  
  
-   Техническая статья [Auto alert for SQL Agent jobs when they are enabled or disabled (на английском языке)](https://go.microsoft.com/fwlink/?LinkId=165676)на сайте mssqltips.com  
  
-   Запись в блоге [Настройка заданий агента SQL Server для записи в журнал событий Windows](https://go.microsoft.com/fwlink/?LinkId=220745)на сайте mssqltips.com.  
  
