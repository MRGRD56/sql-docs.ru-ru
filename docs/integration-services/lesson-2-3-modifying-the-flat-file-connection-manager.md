---
description: Занятие 2-3. Изменение диспетчера подключений с неструктурированными файлами
title: Шаг 3. Изменение диспетчера подключений с неструктурированными файлами | Документация Майкрософт
ms.custom: ''
ms.date: 01/03/2019
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: tutorial
ms.assetid: 459e3995-2116-4f15-aaa2-32f26113869c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: bbe7698c4b97a11fd9b2b4dba581fbad5a8be8df
ms.sourcegitcommit: c5078791a07330a87a92abb19b791e950672e198
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "88484114"
---
# <a name="lesson-2-3-modify-the-flat-file-connection-manager"></a>Занятие 2-3. Изменение диспетчера подключений с неструктурированными файлами

[!INCLUDE[sqlserver-ssis](../includes/applies-to-version/sqlserver-ssis.md)]

В этом задании требуется модифицировать диспетчер подключений из занятия 1. Этот диспетчер подключений с неструктурированными файлами настроен для статической загрузки отдельного файла. Чтобы диспетчер подключений с неструктурированными файлами мог последовательно загружать файлы, нужно изменить свойство ConnectionString диспетчера подключений таким образом, чтобы он использовал пользовательскую переменную `User::varFileName`, содержащую путь к файлу, который должен быть загружен в процессе выполнения.  
  
Изменив диспетчер подключений таким образом, чтобы для изменения свойства ConnectionString использовалось значение пользовательской переменной, можно позволить диспетчеру подключений подключаться к различным неструктурированным файлам. При выполнении каждая итерация контейнера "Цикл по каждому элементу" обновляет переменную `User::varFileName`. Обновление переменной в свою очередь вызовет соединение диспетчера со следующим неструктурированным файлом и обработку следующего набора данных задачей потока данных.  
  
## <a name="configure-the-flat-file-connection-manager-to-use-a-variable"></a>Настройка диспетчера подключений с неструктурированными файлами для использования переменной  
  
1.  На панели **Диспетчеры соединений** щелкните правой кнопкой мыши **Образец источника данных "неструктурированный файл"** и выберите пункт **Свойства**.  

2.  В окне **Свойства****PackagePath** должен начинаться с **\Package.Connections**. Если это не так, на панели **Диспетчеры соединений** щелкните правой кнопкой мыши **Образец источника данных "неструктурированный файл"** и выберите **Преобразовать в подключение пакета**.
  
3.  В окне **Свойства** щелкните пустую ячейку в области **Выражения**, а затем нажмите кнопку с многоточием **(...)**.  
  
4.  В диалоговом окне **Редактор выражений свойств** в столбце **Свойство** выберите **ConnectionString**.  
  
5.  В столбце **Выражение** нажмите кнопку с многоточием **(…)**, чтобы открыть диалоговое окно **Построитель выражений**.  
  
6.  В диалоговом окне **Построитель выражений** разверните узел **Переменные**.  
  
7.  Перетащите переменную **User::varFileName** в поле **Выражение**.  
  
8.  Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Построитель выражений**.  
  
9.  Еще раз нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Редактор выражений свойств**.  
  
## <a name="go-to-next-task"></a>Переход к следующей задаче  
[Шаг 4. Тестирование учебного пакета занятия 2](../integration-services/lesson-2-4-testing-the-lesson-2-tutorial-package.md)  
  
  
  
