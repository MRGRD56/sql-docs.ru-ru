---
description: Занятие 4-4. Добавление назначения "Неструктурированный файл"
title: Шаг 4. Добавление назначения "Неструктурированный файл" | Документация Майкрософт
ms.custom: ''
ms.date: 01/07/2019
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: tutorial
ms.assetid: f4088de3-16d8-419c-96a1-a2cd005d0a5b
author: chugugrace
ms.author: chugu
ms.openlocfilehash: 99266f19a7bb1476f16b5896deb8dfa3602e4032
ms.sourcegitcommit: c5078791a07330a87a92abb19b791e950672e198
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "88449678"
---
# <a name="lesson-4-4-add-a-flat-file-destination"></a>Занятие 4-4. Добавление назначения "Неструктурированный файл"

[!INCLUDE[sqlserver-ssis](../includes/applies-to-version/sqlserver-ssis.md)]



Вывод ошибок преобразования "Уточняющий запрос ключа валюты" перенаправляет в преобразование "Скрипт" все строки данных, поиск которых завершился ошибкой. Для предоставления дополнительных сведений о возникших ошибках преобразование "Скрипт" выполняет скрипт, получающий описание каждой ошибки.  
  
В этой задаче все сведения об ошибках строк сохраняются для последующей обработки в текстовом файле с разделителями. Чтобы сохранить ошибочные строки, необходимо добавить и настроить диспетчер подключений к неструктурированным файлам для текстового файла, содержащего данные ошибок, и назначение "Неструктурированный файл". Путем установки свойств в диспетчере соединений с неструктурированными файлами, который использует назначение «Неструктурированный файл», можно определить способ, которым назначение «Неструктурированный файл» форматирует и записывает текстовый файл. Дополнительные сведения см. в разделах [Диспетчер соединений с неструктурированными файлами](../integration-services/connection-manager/flat-file-connection-manager.md) и [Назначение "Неструктурированный файл"](../integration-services/data-flow/flat-file-destination.md).  
  
## <a name="add-and-configure-a-flat-file-destination"></a>Добавление и настройка назначения "Неструктурированный файл"  
  
1.  Перейдите на вкладку **Поток данных**.  
  
2.  В окне **Панель элементов служб SSIS** разверните раздел **Другие назначения** и перетащите элемент **Назначение "Неструктурированный файл"** в область конструктора потока данных. Поместите **Назначение «Неструктурированный файл»** прямо под преобразованием **Получить описание ошибки** .  
  
3.  Выберите преобразование **Получить описание ошибки** и перетащите синюю стрелку на новый элемент **Назначение "Неструктурированный файл"**.  
  
4.  В области конструктора **Поток данных** выберите имя **Назначение "Неструктурированный файл"** в новом преобразовании **Назначение "Неструктурированный файл"** и измените его на **Строки с ошибками**.  
  
5.  Щелкните правой кнопкой мыши преобразование **Строки с ошибками**, выберите пункт **Изменить**, а затем в **редакторе назначения "Неструктурированный файл"** нажмите кнопку **Создать**.  
  
6.  Убедитесь в том, что в диалоговом окне **Формат неструктурированного файла** выбран параметр **С разделителями**, и нажмите кнопку **ОК**.  
  
7.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** в поле **Имя диспетчера соединений** введите *Ошибочные данные*.  
  
8.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** нажмите кнопку **Обзор** и перейдите в папку, в которой будет храниться файл.  
  
9. В диалоговом окне **Открыть** в поле **Имя файла** введите *ErrorOutput.txt*, а затем нажмите кнопку **Открыть**.  
  
10. В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** убедитесь в том, что в поле **Локаль** выбрано значение **Английский (США)**, а в поле **Кодовая страница** — значение **1252 (ANSI-Latin I)**.  
  
11. В области параметров выберите **Столбцы**.  
  
    Помимо столбцов из исходного файла данных, имеются три новых столбца: ErrorCode, ErrorColumn и ErrorDescription. Эти столбцы созданы в результате вывода ошибок преобразованием "Уточняющий запрос ключа валюты" и скриптом в преобразовании "Получить описание ошибки". Их можно использовать для устранения причин появления ошибочных строк.  
  
12. Щелкните **ОК**.  
  
13. В диалоговом окне **Редактор назначения «Неструктурированный файл»** снимите флажок **Перезаписать данные в файле** .  
  
    Когда этот флажок снят, сохраняются ошибки выполнения нескольких пакетов путем добавления выходных данных ошибок, полученных в результате каждого выполнения.
  
14. В разделе **Редактор назначения "Неструктурированный файл"** выберите **Сопоставления**, чтобы убедиться в том, что все столбцы созданы правильно. При желании можно переименовать все столбцы назначения.  
  
15. Щелкните **ОК**.  
  
## <a name="go-to-next-task"></a>Переход к следующей задаче
[Шаг 5. Тестирование учебного пакета занятия 4](../integration-services/lesson-4-5-testing-the-lesson-4-tutorial-package.md)  
  
  
  
