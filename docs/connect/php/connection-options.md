---
title: Параметры соединения
description: Эта статья содержит перечень параметров, которые допускаются в ассоциативном массиве sqlsrv_connect в драйвере SQLSRV, и ключевые слова, которые допускаются в имени источника данных в драйвере PDO_SQLSRV.
ms.custom: ''
ms.date: 03/05/2021
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.technology: connectivity
ms.topic: conceptual
ms.assetid: 6d1ea295-8e34-438e-8468-4bbc0f76192c
author: David-Engel
ms.author: v-daenge
ms.openlocfilehash: f9677beb347978ed4016c94cd19612e8ec82c1ed
ms.sourcegitcommit: 0bcda4ce24de716f158a3b652c9c84c8f801677a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2021
ms.locfileid: "102247326"
---
# <a name="connection-options"></a>Параметры соединения

[!INCLUDE[Driver_PHP_Download](../../includes/driver_php_download.md)]

Этот раздел содержит перечень параметров, которые допускаются в ассоциативном массиве (при использовании [sqlsrv_connect](sqlsrv-connect.md) в драйвере SQLSRV), и ключевых слов, которые допускаются в имени источника данных (dsn, при использовании [PDO::__construct](pdo-construct.md) в драйвере PDO_SQLSRV).  

## <a name="table-of-connection-options"></a>Таблица параметров подключения

|Клавиши|Значение|Описание:|По умолчанию|  
|-------|---------|---------------|-----------|  
|AccessToken|Строка|Байтовая строка маркера доступа Azure AD, извлеченная из ответа OAuth JSON.<br /><br />Строка подключения не должна содержать идентификатор пользователя, пароль или ключевое слово `Authentication`. Дополнительные сведения см. в статье [Подключение с использованием проверки подлинности Azure Active Directory](azure-active-directory.md).|Не задано.|
|APP|Строка|Указывает имя приложения, используемое для трассировки.|Не задано.|  
|ApplicationIntent|Строка|Объявляет тип рабочей нагрузки приложения при соединении с сервером. Возможные значения — **ReadOnly** и **ReadWrite**.<br /><br />Дополнительные сведения о поддержке [!INCLUDE[ssDriverPHP](../../includes/ssdriverphp_md.md)] для [!INCLUDE[ssHADR](../../includes/sshadr_md.md)] см. в статье [Support for High Availability, Disaster Recover](php-driver-for-sql-server-support-for-high-availability-disaster-recovery.md) (Поддержка высокого уровня доступности и аварийного восстановления).|ReadWrite|
|AttachDBFileName|Строка|Указывает, какой файл базы данных сервер должен присоединить.|Не задано.|
|Аутентификация|Одна из следующих строк:<br /><br />**SqlPassword**<br /><br />**ActiveDirectoryPassword**<br /><br />**ActiveDirectoryMsi**<br /><br />**ActiveDirectoryServicePrincipal**|Указывает режим проверки подлинности.<br /><br />Дополнительные сведения см. в статье [Подключение с использованием проверки подлинности Azure Active Directory](azure-active-directory.md).|Не задано.|
|CharacterSet<br /><br />(не поддерживается в драйвере PDO_SQLSRV)|Строка|Задает кодировку, используемую для отправки данных на сервер.<br /><br />Возможными значениями являются SQLSRV_ENC_CHAR и UTF-8. Дополнительные сведения см. в разделе [Как Отправка и извлечение данных UTF-8 с помощью встроенной поддержки UTF-8](how-to-send-and-retrieve-utf-8-data-using-built-in-utf-8-support.md).|SQLSRV_ENC_CHAR|  
|ColumnEncryption|Одна из следующих строк:<br /><br />**Enabled**<br /><br />**Отключено**<br /><br />Строка, идентифицирующая протокол аттестации и URL-адрес для аттестации анклава.|Указывает, включена ли функция Always Encrypted. Если указаны протокол аттестации и URL-адрес, то функция Always Encrypted с безопасными анклавами будет включена при условии, что соблюдены [приведенные здесь требования](always-encrypted-secure-enclaves.md).|Выключено|  
|ConnectionPooling|1 или **true** для включения организации пулов соединений.<br /><br />0 или **false** для отключения организации пулов соединений.|Указывает, назначено ли соединение из пула соединений (1 или **true**) или нет (0 или **false**) <sup>1</sup>.|**true** (1)|  
|ConnectRetryCount|Целое число от 0 до 255 (включительно).|Максимальное число попыток повторного установления разорванного подключения, при достижении которого их следует прекратить. По умолчанию выполняется одна попытка восстановить разорванное подключение. Значение 0 означает, что повторное подключение не будет устанавливаться.|1|  
|ConnectRetryInterval|Целое число от 1 до 60 (включительно).|Время в секундах между попытками восстановить подключение. Приложение попытается повторно подключиться сразу после обнаружения разорванного подключения, а затем будет ждать `ConnectRetryInterval` секунд, прежде чем повторить попытку. Это ключевое слово игнорируется, если параметр `ConnectRetryCount` равен 0.|10|  
|База данных|Строка|Указывает имя базы данных, используемой для устанавливаемого соединения <sup>2</sup>.|База данных по умолчанию для используемого имени входа.|  
|DecimalPlaces<br /><br />(не поддерживается в драйвере PDO_SQLSRV)|Целое число от 0 до 4 (включительно).|Указывает число десятичных знаков при форматировании полученных денежных значений.<br /><br />Этот параметр работает только в том случае, если `FormatDecimals` имеет значение true. Любое отрицательное целое число или значение больше 4 будет игнорироваться.|Точность и масштаб по умолчанию|
|Драйвер|Строка|Указывает драйвер Microsoft ODBC, используемый для связи с SQL Server.<br /><br />Возможны следующие значения:<br />ODBC Driver for SQL Server версии 17<br />ODBC Driver for SQL Server версии 13<br />Драйвер ODBC 11 для SQL Server (только для Windows).|Если ключевое слово Driver не указано, драйверы Майкрософт для PHP в SQL Server попытаются найти поддерживаемые в системе драйверы Microsoft ODBC, начиная с последней версии ODBC и т. д.|
|Шифрование|1 или **true** для включения шифрования.<br /><br />0 или **false** для отключения шифрования.|Указывает, выполняется ли шифрование обмена данными с SQL Server (1 или **true**) или нет (0 или **false**) <sup>3</sup>.|**false** (0)|  
|Failover_Partner|Строка|Указывает сервер и экземпляр зеркала базы данных (если они включены и настроены), используемые при недоступности сервера-источника.<br /><br />При использовании `Failover_Partner` с `MultiSubnetFailover` применяются определенные ограничения. См.подробнее о [поддержке высокой доступности и аварийного восстановления](php-driver-for-sql-server-support-for-high-availability-disaster-recovery.md).<br /><br />Этот параметр не поддерживается в Linux или macOS, так как зеркальное отображение базы данных не поддерживается драйвером ODBC в Linux или macOS. Вместо этого следует использовать группы доступности Always On и задать параметры `MultiSubnetFailover` и `TransparentNetworkIPResolution`.|Не задано.|
|FormatDecimals<br /><br />(не поддерживается в драйвере PDO_SQLSRV)|Укажите значение 1 или **true**, чтобы форматировать полученные десятичные строки.<br /><br />Укажите значение 0 или **false** для форматирования по умолчанию в десятичном формате.|Указывает, следует ли добавлять начальные нули к десятичным строкам, когда это применимо, и включает параметр `DecimalPlaces` для форматирования денежных типов. Если задано значение false, по умолчанию будут возвращаться точные числа с пропуском начальных нулей для значений меньше 1.<br /><br />См. подробнее о [форматировании десятичных строк и денежных значений](formatting-decimals-sqlsrv-driver.md).|**false** (0)|
|KeyStoreAuthentication|**KeyVaultPassword**<br /><br />**KeyVaultClientSecret**|Метод проверки подлинности для доступа к Azure Key Vault. Определяет тип учетных данных, используемых с `KeyStorePrincipalId` и `KeyStoreSecret`. Дополнительные сведения см. в разделе об [использовании Azure Key Vault](using-always-encrypted-php-drivers.md#using-azure-key-vault).|Не задано.|
|KeyStorePrincipalId|Строка|Идентификатор учетной записи для доступа к Azure Key Vault. <br /><br />Если для параметра `KeyStoreAuthentication` указано **KeyVaultPassword**, то это значение должно быть именем пользователя Azure Active Directory. <br /><br />Если для параметра `KeyStoreAuthentication` указано **KeyVaultClientSecret**, то это значение должно быть идентификатором клиента приложения.|Не задано.|
|KeyStoreSecret|Строка|Секрет учетных данных для учетной записи, которая получает доступ к Azure Key Vault. <br /><br />Если для параметра `KeyStoreAuthentication` указано **KeyVaultPassword**, то это значение должно быть паролем Azure Active Directory. <br /><br />Если для параметра `KeyStoreAuthentication` указано **KeyVaultClientSecret**, то это значение должно быть секретом клиента приложения.|Не задано.|
|Язык|Строка|Указывает язык сообщений, возвращаемых сервером. Доступные языки перечислены в таблице `sys.syslanguages`. <br /><br />Этот параметр не влияет на язык, используемый самими драйверами, так как в настоящее время он доступен только на английском языке и не влияет на язык базового драйвера ODBC, который определяется локализованной версией, установленной в клиентской системе. Поэтому изменение этого параметра может привести к возврату сообщений на разных языках в зависимости от того, откуда они поступают: из драйвера PHP, драйвера ODBC или SQL Server.|По умолчанию используется язык, указанный в SQL Server.|
|LoginTimeout|Целое число (драйвер SQLSRV)<br /><br />Строка (драйвер PDO_SQLSRV)|Указывает количество секунд ожидания перед неудачным завершением соединения.|Время ожидания отсутствует.|  
|MultipleActiveResultSets|1 или **true** для использования множественных активных результирующих наборов.<br /><br />0 или **false** для отключения множественных активных результирующих наборов.|Отключает или явным образом включает поддержку множественных активных результирующих наборов (MARS).<br /><br />Дополнительные сведения см. в статье [Практическое руководство. Отключение множественных активных результирующих наборов &#40;функция MARS&#41;](how-to-disable-multiple-active-resultsets-mars.md).|true (1)|  
|MultiSubnetFailover|Строка|Всегда указывайте параметр `multiSubnetFailover=yes` при соединении с прослушивателем группы доступности [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или экземпляром отказоустойчивого кластера [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]. Параметр `multiSubnetFailover=yes` настраивает [!INCLUDE[ssDriverPHP](../../includes/ssdriverphp_md.md)] для ускоренного обнаружения активного (в данный момент) сервера и подключения к нему. Возможными значениями являются Yes и No.<br /><br />Дополнительные сведения о поддержке [!INCLUDE[ssDriverPHP](../../includes/ssdriverphp_md.md)] для [!INCLUDE[ssHADR](../../includes/sshadr_md.md)] см. в статье [Support for High Availability, Disaster Recover](php-driver-for-sql-server-support-for-high-availability-disaster-recovery.md) (Поддержка высокого уровня доступности и аварийного восстановления).|нет|  
|PWD<br /><br />(не поддерживается в драйвере PDO_SQLSRV)|Строка|Указывает пароль, связанный с идентификатором пользователя, применяемый при подключении с использованием проверки подлинности SQL Server <sup>4</sup>.|Не задано.|  
|QuotedId|1 или **true** для использования правил SQL-92.<br /><br />0 или **false** для использования устаревших правил.|Указывает, следует ли использовать правила SQL-92 для нестандартных идентификаторов (1 или **true**) или устаревшие правила Transact-SQL (0 или **false**).|**true** (1)|  
|ReturnDatesAsStrings<br /><br />(не поддерживается в драйвере PDO_SQLSRV)|1 или **true** для возврата типов даты и времени в виде строк.<br /><br />0 или **false** для возврата типов даты и времени в виде типов **DateTime** PHP.|Позволяет извлечь типы даты и времени (datetime, smalldatetime, date, time, datetime2 и datetimeoffset) в виде строк или типов PHP. Дополнительные сведения см. в разделе [Как Retrieve Date and Time Types as Strings Using the SQLSRV Driver](how-to-retrieve-date-and-time-type-as-strings-using-the-sqlsrv-driver.md) (Получение типов даты и времени в виде строк с помощью драйвера SQLSRV). <br /><br />При использовании драйвера PDO_SQLSRV даты возвращаются в виде строк, если не указано иное. Дополнительные сведения см. в разделе [Как извлечь типы даты и времени в виде объектов даты и времени PHP с помощью драйвера PDO_SQLSRV](how-to-retrieve-datetime-objects-using-pdo-sqlsrv-driver.md).|**false**|
|Прокручиваемые курсоры|Строка|"Буферизовано" означает, что требуется клиентский (буферизированный) курсор, который позволяет кэшировать весь результирующий набор в памяти. Дополнительные сведения см. в статье [Типы курсоров &#40;драйвер SQLSRV&#41;](cursor-types-sqlsrv-driver.md).|Курсор последовательного доступа|  
|Сервер<br /><br />(не поддерживается в драйвере SQLSRV)|Строка|Экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для соединения.<br /><br />Вы также можете указать имя виртуальной сети для подключения к группе доступности AlwaysOn. Дополнительные сведения о поддержке [!INCLUDE[ssDriverPHP](../../includes/ssdriverphp_md.md)] для [!INCLUDE[ssHADR](../../includes/sshadr_md.md)] см. в статье [Support for High Availability, Disaster Recover](php-driver-for-sql-server-support-for-high-availability-disaster-recovery.md) (Поддержка высокого уровня доступности и аварийного восстановления).|Server является обязательным ключевым словом (хотя оно не обязательно должно стоять на первом месте в строке подключения). Если имя сервера не передается в ключевое слово, предпринимается попытка подключиться к локальному экземпляру.<br /><br />Значением, передаваемым в Server, может быть имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или IP-адрес экземпляра. Вы можете дополнительно указать номер порта (например, `sqlsrv:server=(local),1033`).<br /><br />Начиная с версии 3.0 [!INCLUDE[ssDriverPHP](../../includes/ssdriverphp_md.md)] , можно также указать экземпляр LocalDB с `server=(localdb)\instancename`. Дополнительные сведения о поддержке LocalDB см. в [этой статье](php-driver-for-sql-server-support-for-localdb.md).|  
|TraceFile|Строка|Указывает путь для файла, используемый для трассировки данных.|Не задано.|  
|TraceOn|1 или **true** для включения трассировки.<br /><br />0 или **false** для отключения трассировки.|Указывает, включена (1 или **true**) или отключена (0 или **false**) трассировка ODBC для устанавливаемого соединения.|**false** (0)|  
|TransactionIsolation|Драйвер SQLSRV использует следующие значения:<br /><br />SQLSRV_TXN_READ_UNCOMMITTED<br /><br />SQLSRV_TXN_READ_COMMITTED<br /><br />SQLSRV_TXN_REPEATABLE_READ<br /><br />SQLSRV_TXN_SNAPSHOT<br /><br />SQLSRV_TXN_SERIALIZABLE<br /><br />Драйвер PDO_SQLSRV использует следующие значения:<br /><br />PDO::SQLSRV_TXN_READ_UNCOMMITTED<br /><br />PDO::SQLSRV_TXN_READ_COMMITTED<br /><br />PDO::SQLSRV_TXN_REPEATABLE_READ<br /><br />PDO::SQLSRV_TXN_SNAPSHOT<br /><br />PDO::SQLSRV_TXN_SERIALIZABLE|Указывает уровень изоляции транзакции.<br /><br />Дополнительные сведения об изоляции транзакций см. в статье [SET TRANSACTION ISOLATION LEVEL](../../t-sql/statements/set-transaction-isolation-level-transact-sql.md) в документации по SQL Server.|SQLSRV_TXN_READ_COMMITTED<br /><br />или диспетчер конфигурации служб<br /><br />PDO::SQLSRV_TXN_READ_COMMITTED|  
|TransparentNetworkIPResolution|**Enabled** (Включено) или **Disabled** (Отключено)|Влияет на последовательность подключений, когда первый разрешенный IP-адрес имени узла не отвечает и имеется несколько IP-адресов, связанных с именем этого узла.<br /><br />Этот ключ взаимодействует с `MultiSubnetFailover` для предоставления различных последовательностей подключения. Дополнительные сведения см. в статьях [Support for High Availability, Disaster Recovery](php-driver-for-sql-server-support-for-high-availability-disaster-recovery.md) (Поддержка высокого уровня доступности и аварийного восстановления) и [Using Transparent Network IP Resolution](../odbc/using-transparent-network-ip-resolution.md) (Использование разрешения IP-адресов прозрачной сети).|Активировано|
|TrustServerCertificate|1 или **true** , чтобы доверять сертификату.<br /><br />0 или **false** , чтобы не доверять сертификату.|Указывает, должен ли клиент доверять самозаверяющему сертификату сервера (1 или **true**) или отклонить его (0 или **false**).|**false** (0)|  
|ИД пользователя<br /><br />(не поддерживается в драйвере PDO_SQLSRV)|Строка|Указывает идентификатор пользователя, применяемый при подключении с использованием проверки подлинности SQL Server <sup>4</sup>.|Не задано.|  
|WSID|Строка|Задает имя компьютера для выполнения трассировки.|Не задано.|  
| &nbsp; | &nbsp; | &nbsp; | &nbsp; |

1. Атрибут `ConnectionPooling` нельзя использовать для включения или отключения пулов подключений в Linux и macOS. См. [Организация пулов соединений (драйверы Майкрософт для PHP для SQL Server)](connection-pooling-microsoft-drivers-for-php-for-sql-server.md).

2. Все запросы, выполняемые в рамках установленного подключения, направляются базе данных, заданной атрибутом `Database`. Однако если у пользователя есть соответствующие разрешения, возможен доступ к данным в других базах с помощью полного доменного имени. Например, если база данных *master* задана атрибутом подключения `Database`, полное доменное имя позволяет выполнить запрос Transact-SQL к таблице *AdventureWorks.HumanResources.Employee*.  

3. Включение `Encryption` может негативно повлиять на производительность некоторых приложений из-за необходимости выполнять дополнительные вычисления для шифрования данных.  

4. Атрибуты `UID` и `PWD` должны быть заданы при соединении с использованием проверки подлинности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  

Многие поддерживаемые ключи являются атрибутами строк подключения ODBC. Дополнительные сведения о строках подключения ODBC см. в статье [Использование ключевых слов строки подключения с SQL Native Client](../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).

## <a name="see-also"></a>См. также:  

[Подключение к серверу](connecting-to-the-server.md)  
