---
description: Раздел данных
title: Раздел данных | Документация Майкрософт
ms.prod: sql
ms.prod_service: connectivity
ms.technology: ado
ms.custom: ''
ms.date: 01/19/2017
ms.reviewer: ''
ms.topic: conceptual
helpviewer_keywords:
- data section [ADO]
ms.assetid: 43dc42a8-7057-48e6-93d6-880d5c5c51a4
author: rothja
ms.author: jroth
ms.openlocfilehash: 09b79b0001ff448ecd333a4ec601c4ff42febf6d
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100037664"
---
# <a name="data-section"></a>Раздел данных
Раздел данных определяет данные набора строк вместе с любыми ожидающими обновлениями, вставками или удалением. Раздел данных может содержать ноль или более строк. Он может содержать только данные из одного набора строк, где строка определяется схемой. Кроме того, как отмечалось ранее, столбцы без данных можно опустить. Если атрибут или подэлемент используется в разделе данных, а эта конструкция не определена в разделе схемы, она не учитывается автоматически.  
  
## <a name="string"></a>Строка  
 Зарезервированные XML-символы в текстовых данных должны быть заменены соответствующими сущностями символов. Например, в названии компании Joe «нечего», одинарная кавычка должна быть заменена сущностью. Фактическая строка будет выглядеть следующим образом:  
  
```  
<z:row CompanyName="Joe's Garage"/>  
```  
  
 Следующие символы зарезервированы в XML и должны быть заменены сущностями символов: {",", &, \<,> }.  
  
## <a name="binary"></a>Двоичные данные  
 Двоичные данные кодируются как bin. hex (т. е. один байт сопоставляется с двумя символами, по одному символу на одну штуку).  
  
## <a name="datetime"></a>Дата и время  
 Формат Variant VT_DATE не поддерживается напрямую типами данных XML-Data. Правильный формат дат с компонентом данных и временем — гггг-мм-ddThh: mm: SS.  
  
 Дополнительные сведения о форматах дат, заданных в формате XML, см. в [спецификации W3C XML-Data](https://go.microsoft.com/fwlink/?LinkId=5692).  
  
 Если спецификация XML-Data определяет два эквивалентных типа данных (например, I4 = = int), то ADO записывает понятное имя, но считывается в обоих.  
  
## <a name="managing-pending-changes"></a>Управление ожидающими изменениями  
 Набор записей можно открыть в режиме немедленного или пакетного обновления. При открытии в режиме пакетного обновления с курсорами на стороне клиента все изменения, внесенные в набор записей, находятся в состоянии ожидания до тех пор, пока не будет вызван метод UpdateBatch. Ожидающие изменения также сохраняются при сохранении набора записей. В XML они представлены с помощью элементов Update, определенных в urn: schemas-microsoft-com: Rowset. Кроме того, если набор строк можно обновить, то для свойства, обновляемого в определении строки, должно быть задано значение true. Например, чтобы определить, что таблица грузоотправителей содержит ожидающие изменения, определение строки будет выглядеть примерно так:  
  
```  
<s:ElementType name="row" content="eltOnly" updatable="true">  
  <s:attribute type="ShipperID"/>  
  <s:attribute type="CompanyName"/>  
  <s:attribute type="Phone"/>  
  <s:extends type="rs:rowbase"/>  
</s:ElementType>  
```  
  
 Это указывает поставщику сохраняемости отображать данные, чтобы ADO могла создать обновляемый объект набора записей.  
  
 В следующих примерах данных показано, как вставки, изменения и удаления отображаются в материализованном файле.  
  
```  
<rs:data>  
  <z:row ShipperID="2" CompanyName="United Package"   
    Phone="(503) 555-3199"/>  
<rs:update>  
  <rs:original>  
    <z:row ShipperID="3" CompanyName="Federal Shipping"   
      Phone="(503) 555-9931"/>  
  </rs:original>  
  <z:row Phone="(503) 552-7134"/>  
</rs:update>  
<rs:insert>  
  <z:row ShipperID="12" CompanyName="Lightning Shipping"   
    Phone="(505) 111-2222"/>  
  <z:row ShipperID="13" CompanyName="Thunder Overnight"   
    Phone="(505) 111-2222"/>  
  <z:row ShipperID="14" CompanyName="Blue Angel Air Delivery"   
    Phone="(505) 111-2222"/>  
</rs:insert>  
<rs:delete>  
  <z:row ShipperID="1" CompanyName="Speedy Express" Phone="(503) 555-9831"/>  
</rs:delete>  
</rs:data>  
```  
  
 Обновление всегда содержит все исходные данные строки, за которыми следует измененные данные строки. Измененная строка может содержать все столбцы или только те столбцы, которые действительно изменились. В предыдущем примере строка для грузоотправителя 2 не изменялась, и только в столбце Phone были изменены значения для грузоотправителя 3, поэтому в измененной строке содержится только сам столбец. Вставленные строки для грузоотправителей 12, 13 и 14 группируются в одну метку RS: INSERT. Обратите внимание, что удаленные строки также можно сгруппировать, хотя это и не показано в предыдущем примере.  
  
## <a name="see-also"></a>См. также:  
 [Сохранение записей в формате XML](./persisting-records-in-xml-format.md)