---
title: Устранение неполадок с подключением к серверу и базе данных
description: Эта статья описывает диагностику и устранение проблем, возникающих при подключении к серверу отчетов. Кроме того, здесь описаны сообщения о непредвиденных ошибках.
ms.date: 12/16/2019
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: troubleshooting
ms.topic: conceptual
ms.assetid: 8bbb88df-72fd-4c27-91b7-b255afedd345
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 74bf6f0da0daa0df248243ffbce505c75c55db5e
ms.sourcegitcommit: f30b5f61c514437ea58acc5769359c33255b85b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2021
ms.locfileid: "99076326"
---
# <a name="troubleshoot-server--database-connection-problems-with-reporting-services"></a>Устранение неполадок с подключением к серверу и базе данных в Reporting Services
Используйте этот раздел, чтобы решать проблемы, возникающие при подключении к серверу отчетов. Также в этом разделе описываются сообщения о непредвиденных ошибках. Дополнительные сведения о настройке источников данных и настройке данных о подключении сервера отчетов см. в разделах [Задание учетных данных и сведений о соединении для источников данных отчета](../../reporting-services/report-data/specify-credential-and-connection-information-for-report-data-sources.md) и [Настройка соединения с базой данных сервера отчетов (диспетчер конфигурации сервера отчетов)](../../reporting-services/install-windows/configure-a-report-server-database-connection-ssrs-configuration-manager.md).  
  
## <a name="cannot-create-a-connection-to-data-source-datasourcename-rserroropeningconnection"></a>Невозможно создать соединение с источником данных «имя_источника_данных». (rsErrorOpeningConnection)  
Это общая ошибка, которая происходит, если сервер отчетов не может открыть соединение с внешним источником данных, содержащим данные отчета. Эта ошибка появляется вместе со вторым сообщением об ошибке, указывающим причину. Следующие дополнительные ошибки могут появиться вместе с **rsErrorOpeningConnection**.  
  
### <a name="login-failed-for-user-username"></a>Ошибка входа пользователя «ИмяПользователя»  
У пользователя отсутствует разрешение на доступ к источнику данных. При использовании базы данных SQL Server убедитесь, что пользователь имеет допустимое имя для входа в базу данных. Дополнительные сведения о создании пользователя базы данных или имени входа SQL Server см. в разделах [Как создать пользователя базы данных](../../relational-databases/security/authentication-access/create-a-database-user.md) и [Как создать имя входа SQL Server](../../relational-databases/security/authentication-access/create-a-login.md).  
  
### <a name="login-failed-for-user-nt-authorityanonymous-logon"></a>Неудачная попытка входа пользователя «NT AUTHORITY\ANONYMOUS LOGON»  
Эта ошибка появляется, когда учетные данные проходят через несколько подключений компьютеров. Если используется проверка подлинности Windows, а протокол Kerberos версии 5 не разрешен, то эта ошибка появляется, когда учетные данные проходят более чем через одно компьютерное соединение. Чтобы избежать этой ошибки, рассмотрите использование сохраненных или запрашиваемых учетных данных. Дополнительные сведения о решении этой проблемы см. в разделе [Задание учетных данных и сведений о подключении для источников данных отчета](../../reporting-services/report-data/specify-credential-and-connection-information-for-report-data-sources.md).  
  
### <a name="an-error-has-occurred-while-establishing-a-connection-to-the-server"></a>При соединении с сервером произошла ошибка.  
Эта ошибка при соединении с SQL Server может быть вызвана тем, что в параметрах SQL Server по умолчанию запрещены удаленные соединения. (поставщик: поставщик именованных каналов, ошибка: 40 — Невозможно открыть соединение с SQL Server). Эта ошибка возвращается экземпляром компонента Database Engine, где находится база данных сервера отчетов. В большинстве случаев она возникает из-за остановки службы SQL Server. Кроме того, если используется выпуск SQL Server Express с Advanced Services или именованный экземпляр, эта ошибка возникает, если неправильно указан URL-адрес сервера отчетов или строка соединения с базой данных сервера отчетов. Чтобы решить эти проблемы, нужно сделать следующее.  
  
* Убедитесь, что служба SQL Server (**MSSQLSERVER**) запущена. На компьютере экземпляра компонента Database Engine нажмите кнопку "Пуск", выберите "Администрирование", "Службы" и перейдите к службе SQL Server (**MSSQLSERVER**). Если эта служба не запущена, щелкните ее правой кнопкой мыши, выберите пункт "Свойства", для параметра "Тип запуска" выберите значение "Автоматически", затем последовательно нажмите кнопки "Применить", "Пуск" и "ОК".   
* Проверьте правильность URL-адреса сервера отчетов и строки подключения к базе данных сервера отчетов. Если службы Reporting Services или компонент Database Engine были установлены как именованный экземпляр, строка соединения по умолчанию, которая создается во время установки, будет содержать имя экземпляра. Например, если экземпляр по умолчанию выпуска SQL Server Express с дополнительными службами устанавливался на сервер с именем DEVSRV01, URL-адресом веб-портала будет DEVSRV01\Reports$SQLEXPRESS. Имя базы данных сервера отчетов в строке соединения будет похоже на DEVSRV01\SQLEXPRESS. Дополнительные сведения о URL-адресах и строках соединения с источниками данных для SQL Server Express см. в разделе [Службы Reporting Services в выпуске SQL Server Express with Advanced Services](/previous-versions/sql/sql-server-2008-r2/ms365166(v=sql.105)). Чтобы проверить строку соединения с базой данных сервера отчетов, запустите программу настройки служб Reporting Services и просмотрите страницу "Установка базы данных".  
  
### <a name="a-connection-cannot-be-made-ensure-that-the-server-is-running"></a>Невозможно установить соединение. Убедитесь, что запущен сервер.  
Эта ошибка возвращается поставщиком ADOMD.NET. Существует несколько возможных причин этой ошибки. Если сервер указан как «localhost», попробуйте вместо этого указать имя сервера. Эта ошибка может также произойти в случае, если невозможно выделить память для нового соединения. Дополнительные сведения см. в [статье 912017 базы знаний. Сообщение об ошибке при подключении к экземпляру служб Analysis Services SQL Server 2005:](https://www.betaarchive.com/wiki/index.php?title=Microsoft_KB_Archive/912017)(Error message when you connect to an instance of SQL Server 2005 Analysis Services:).  
  
Если эта ошибка также содержит "Неизвестный узел", она указывает на недоступность сервера служб Analysis Services или на отказ в соединении. Если сервер служб Analysis Services установлен в качестве именованного экземпляра на удаленном компьютере, возможно, потребуется запустить службу браузера SQL Server, чтобы получить имя порта, используемого экземпляром.  
  
### <a name="report-services-soap-proxy-source"></a>(Источник прокси-сервера SOAP служб Reporting Services)  
Если это сообщение об ошибке получено при создании модели отчета, а в разделе дополнительных сведений содержится сообщение «SQL Server не существует, или доступ запрещен», это может быть связано со следующими причинами.  
* Строка соединения для источника данных включает слово localhost.  
* Для службы SQL Server отключен протокол TCP/IP.  
  
Для устранения этой ошибки можно изменить строку соединения, указав в ней имя сервера, либо включить для службы поддержку протокола TCP/IP. Для включения протокола TCP/IP выполните следующие шаги.  
  
1. Запустите диспетчер конфигурации SQL Server.  
2. Разверните узел **Сетевая конфигурация SQL Server 2005**.  
3. Выберите **Протоколы для MSSQLSERVER**.  
4. Щелкните правой кнопкой мыши пункт **TCP/IP** и выберите **Включить**.  
5. Выберите **Службы SQL Server**.  
6. Щелкните правой кнопкой мыши **SQL Server (MSSQLSERVER)** и выберите команду **Перезапустить**.  
  
## <a name="wmi-error-when-connecting-to-a-report-server-in-management-studio"></a>Ошибка инструментария WMI при соединении с сервером отчетов в среде Management Studio  
По умолчанию среда Management Studio использует инструментарий управления Windows (WMI) служб Reporting Services, чтобы установить соединение с сервером отчетов. Если поставщик WMI установлен неправильно, при попытке установить соединение с сервером отчетов возникнет следующая ошибка.  
  
Не удается подключиться к \<your server name>. Поставщик WMI служб Reporting Services не установлен или не настроен (Microsoft.SqlServer.Management.UI.RSClient)».  
  
Чтобы устранить эту ошибку, необходимо переустановить программное обеспечение. В других случаях в качестве временного решения можно соединиться с сервером отчетов через конечную точку SOAP.  
  
* В диалоговом окне **Соединение с сервером** в среде Management Studio в поле **Имя сервера** введите URL-адрес сервера отчетов. По умолчанию это `https://<your server name>/reportserver`. Или, если используется SQL Server 2008 Express with Advanced Services, это `https://<your server name>/reportserver$sqlexpress`.  
  
Чтобы устранить эту ошибку (для последующей установки соединения через поставщика WMI), запустите программу установки, чтобы исправить службы Reporting Services, либо переустановите службы Reporting Services.  
  
## <a name="connection-error-where-login-failed-due-to-unknown-user-name-or-bad-password"></a>Ошибка при подключении во время входа в систему из-за неизвестного имени пользователя или неправильного пароля  
Ошибка **rsReportServerDatabaseLogonFailed** может появиться, если используется учетная запись домена для подключения сервера отчетов к базе данных сервера отчетов, а пароль учетной записи домена был изменен.   
  
Полный текст ошибки: "Серверу отчетов не удается установить соединение с базой данных сервера отчетов. Вход не выполнен (**rsReportServerDatabaseLogonFailed**). Ошибка входа в систему: неизвестное имя пользователя или неправильный пароль».  
  
Если изменен пароль, то необходимо обновить соединение. Дополнительные сведения см. в разделе [Настройка соединения с базой данных сервера отчетов (диспетчер конфигурации сервера отчетов)](../../reporting-services/install-windows/configure-a-report-server-database-connection-ssrs-configuration-manager.md).  
  
## <a name="the-report-server-cannot-open-a-connection-to-the-report-server-database-rsreportserverdatabaseunavailable"></a>Серверу отчетов не удается установить соединение с базой данных сервера отчетов. (rsReportServerDatabaseUnavailable).  
Полное сообщение: Серверу отчетов не удается установить соединение с базой данных сервера отчетов. Для выполнения запросов и обработки данных требуется соединение с базой данных». (rsReportServerDatabaseUnavailable)  
Эта ошибка появляется, если сервер отчетов не может соединиться с реляционной базой данных SQL Server, которая обеспечивает внутреннее хранилище для сервера. Соединение с базой данных сервера отчетов управляется с помощью программы настройки служб Reporting Services. Можно запустить эту программу, перейти к странице «Настройка базы данных» и исправить сведения о соединении. Для обновления сведений о соединении рекомендуется использование этой программы; она гарантирует, что зависимые настройки будут обновлены, а службы запущены заново. Дополнительные сведения см. в разделах [Настройка соединения с базой данных сервера отчетов](../../reporting-services/install-windows/configure-a-report-server-database-connection-ssrs-configuration-manager.md) и [Настройка учетной записи службы сервера отчетов](../../reporting-services/install-windows/configure-the-report-server-service-account-ssrs-configuration-manager.md).  
  
Кроме того, эта ошибка может появиться в случае, если экземпляр компонента Database Engine, хранящего базу данных сервера отчетов, не настроен для удаленных соединений. Удаленное соединение включено по умолчанию в некоторых выпусках SQL Server. Чтобы проверить, включено ли оно на экземпляре SQL Server Database Engine, запустите диспетчер конфигурации SQL Server. Необходимо включить как протокол TCP/IP, так и именованные каналы. Сервер отчетов использует оба эти протокола. Инструкции по включению удаленных соединений см. в подразделе "Настройка удаленных соединений с базой данных сервера отчетов" раздела [Как настроить сервер отчетов для удаленного администрирования](../../reporting-services/report-server/configure-a-report-server-for-remote-administration.md).  
  
Если эта ошибка дополнительно содержит следующий текст, значит у учетной записи, используемой для запуска экземпляра ядра СУБД, истекло время действия пароля: "При соединении с сервером произошла ошибка. При подключении к SQL Server эта ошибка может быть вызвана тем, что в конфигурации по умолчанию SQL Server не разрешает удаленные соединения". (**поставщик: сетевые интерфейсы SQL Server, ошибка: 26 — ошибка при поиске указанного сервера/экземпляра)** ." Чтобы устранить эту ошибку, установите пароль заново.   
  
## <a name="rpc-server-is-not-listening"></a>«Сервер RPC не прослушивается»  
Служба сервера отчетов для некоторых операций использует сервер удаленного вызова процедур (RPC). Если появляется ошибка «Сервер RPC не прослушивается», проверьте, работает ли служба сервера отчетов.  
  
## <a name="unexpected-error-general-network-error"></a>Непредвиденная ошибка (общая сетевая ошибка)  
Это сообщение об ошибке указывает на ошибку соединения с источником данных. В этом случае необходимо проверить строку соединения и убедиться в наличии разрешения на доступ к источнику данных. Если для доступа к источнику данных используется проверка подлинности Windows, то требуется разрешение на доступ к компьютеру, на котором расположен этот источник данных.  
  
## <a name="unable-to-grant-database-access-in-sharepoint-central-administration"></a>Невозможность предоставления доступа к базе данных в центре администрирования SharePoint  
Если вы настроили в Reporting Services интеграцию с продуктом или технологией SharePoint на Windows Vista или Windows Server 2008, то при попытке предоставить доступ на странице **Предоставление доступа к базе данных** в центре администрирования SharePoint может появиться следующее сообщение об ошибке: "Не удается установить соединение с компьютером".  
  
Это происходит, потому что функция "Контроль учетных записей пользователей" (UAC) в Windows Vista и Windows Server 2008 требует того, чтобы администратор явным образом позволил повысить права доступа и использовать токен администратора при выполнении задач, требующих разрешения администратора. Однако в этом случае служба администрирования Windows SharePoint Services не может повысить права доступа для учетных записей службы Reporting Services таким образом, чтобы предоставить им доступ к конфигурации и базам данных содержимого SharePoint.  
  
В службах SQL Server 2008 Reporting Services доступ к базе данных необходим только учетной записи службы сервера отчетов. В службах SQL Server 2005 Reporting Services с пакетом обновлений 2 (SP2) доступ к базе данных необходим учетным записям службы Windows сервера отчетов и веб-службы сервера отчетов. Дополнительные сведения об учетной записи службы сервера отчетов в SQL Server 2008 см. в разделе "Учетная запись службы (настройка служб Reporting Services)".  
  
Есть два возможных варианта решения этой проблемы.   
1.  В первом случает можно временно отключить контроль учетных записей и использовать центр администрирования SharePoint для предоставления доступа.  
> [!IMPORTANT]  
> Соблюдайте осторожность при отключении контроля учетных записей для решения этой проблемы. Включите контроль учетных записей сразу после предоставления доступа к базе данных в центре администрирования SharePoint. Если вы не желаете отключать контроль учетных записей, используйте второй способ, указанный в этом разделе. Дополнительные сведения о контроле учетных записей см. в документации по Windows.  
2. Во втором случае можно вручную предоставить доступ к базе данных для учетных записей службы Reporting Services. Выполните следующие процедуры, чтобы предоставить доступ, добавив учетные записи служб Reporting Services в правильные роли группы и базы данных Windows. Эта процедура применима к учетной записи службы сервера отчетов в SQL Server 2008 Reporting Services. Если запущены службы SQL Server 2005 Reporting Services, выполните эту процедуру для учетной записи службы Windows сервера отчетов и учетной записи веб-службы сервера отчетов.   
  
### <a name="to-manually-grant-database-access"></a>Предоставление доступа к базе данных вручную  
  
1. Добавьте учетную запись службы сервера отчетов в группу WSS_WPG Windows на компьютере Reporting Services.  
2. Выполните соединение с экземпляром базы данных, в котором расположены базы данных конфигурации и содержимого SharePoint, и создайте имя входа базы данных SQL для учетной записи службы сервера отчетов.  
3. Добавьте имя входа базы данных SQL для следующих ролей баз данных.  
  
* роль db_owner role в базе данных WSS Content  
* роль WSS_Content_Application_Pools в базе данных SharePoint_Config  
  
## <a name="unable-to-connect-to-the-reports-and-reportserver-directories-when-the-report-server-databases-are-created-on-a-virtual-sql-server-that-runs-in-a-microsoft-cluster-services-mscs-cluster"></a>Невозможность соединения с каталогами /reports и /reportserver при создании баз данных сервера отчетов на виртуальном сервере SQL Server, запущенном в кластере службы кластеров (Майкрософт)  
При создании баз данных сервера отчетов ( **ReportServer** и **ReportServerTempDB**) на виртуальном сервере SQL Server, запущенном в кластере MSCS, удаленное имя в формате `<domain>\<computer_name>$` может быть не зарегистрировано в качестве имени входа для SQL Server. Если настроить учетную запись службы сервера отчетов как учетную запись, требующую это удаленное имя для подключений, то пользователи не смогут подключиться к каталогам /reports и /reportserver в службах Reporting Services. Например, встроенная в Windows учетная запись NetworkService требует удаленное имя. Чтобы избежать этой проблемы, используйте для соединения с базами данных сервера отчетов явную учетную запись домена или имя входа для SQL Server.  
    
  ## <a name="see-also"></a>См. также:  
[Поддержка браузера для служб Reporting Services и Power View](../../reporting-services/browser-support-for-reporting-services-and-power-view.md)  
[Справочник по ошибкам и событиям (службы Reporting Services)](../../reporting-services/troubleshooting/errors-and-events-reference-reporting-services.md)  
[Устранение неполадок с извлечением данных с помощью отчетов служб Reporting Services](../../reporting-services/troubleshooting/troubleshoot-data-retrieval-issues-with-reporting-services-reports.md)  
[Устранение неполадок с подписками и доставкой служб Reporting Services](../../reporting-services/troubleshooting/troubleshoot-reporting-services-subscriptions-and-delivery.md)  
  
  
  

[!INCLUDE[feedback_stackoverflow_msdn_connect](../../includes/feedback-stackoverflow-msdn-connect-md.md)]
