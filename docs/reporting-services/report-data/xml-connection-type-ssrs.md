---
title: Тип соединения XML | Документация Майкрософт
description: Узнайте о типе соединения XML для подключения и получения данных из внедренных в запрос XML-документов, веб-служб и данных XML.
ms.date: 03/17/2017
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: report-data
ms.topic: conceptual
ms.assetid: 5b55fff2-1b15-4156-83ef-15ad9cf9f509
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: c4bbc8f1c5b96f659936cb955c1f6f31bd0ef0da
ms.sourcegitcommit: fe59f8dc27fd633f5dfce54519d6f5dcea577f56
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91933446"
---
# <a name="xml-connection-type-ssrs"></a>Тип соединения XML (службы SSRS)
  Чтобы включить данные из источника XML-данных в отчет, необходим набор данных, основанный на источнике данных отчета типа XML. Этот встроенный тип источника данных основан на модуле обработки данных XML. Используйте этот тип источника данных для подключения и получения данных из внедренных в запрос XML-документов, веб-служб и данных XML.  
  
 Этот модуль обработки данных поддерживает параметры и учетные данные, управляемые отдельно с помощью строки подключения.  
  
 Используйте сведения в этом разделе для создания источника данных. Пошаговые инструкции см. в разделе [Добавление и проверка подключения к данным (построитель отчетов и службы SSRS)](../../reporting-services/report-data/add-and-verify-a-data-connection-report-builder-and-ssrs.md).  
  
##  <a name="connection-string"></a><a name="Connection"></a> Строка подключения  
 Строка соединения должна представлять собой URL-адрес, указывающий на веб-службу, веб-приложение или XML-документ, доступный по протоколу HTTP. XML-документы должны иметь расширение XML. Для XML-данных, внедренных в запрос набора данных, можно также задать пустую строку соединения.  
  
 Следующие примеры иллюстрируют синтаксис строки соединения для веб-службы и XML-документа соответственно. Протокол `file://` не поддерживается.  
  
|Типы XML-документов|Пример строки соединения|  
|-----------------------|-------------------------------|  
|Веб-служба|`https://adventure-works.com/results.aspx`|  
|XML-документ|`https://localhost/XML/Customers.xml`|  
|Внедренный XML-документ|*Пустой*|  
  
 Дополнительные примеры строк соединения см. в разделе [Подключения к данным, источники данных и строки подключения в построителе отчетов](../../reporting-services/report-data/data-connections-data-sources-and-connection-strings-report-builder-and-ssrs.md).  
  
##  <a name="credentials"></a><a name="Credentials"></a> Учетные данные  
 Учетные данные необходимы для запуска запросов, локального предварительного просмотра отчетов, а также для предварительного просмотра отчетов на сервере отчетов.  
  
 После публикации отчета может понадобиться изменить учетные данные источника данных, чтобы разрешения, необходимые для получения данных при запуске отчета на сервере отчетов, были допустимыми.  
  
 Клиент, используемый для создания отчетов, имеет следующие параметры для указания учетных данных.  
  
-   Текущий пользователь Windows (встроенная безопасность).  
  
-   Учетные данные не требуются. Если учетные данные не заданы, будет применяться анонимный доступ. Убедитесь, что для соединения сервера отчетов с внешним источником данных определена учетная запись автоматического выполнения. Модуль обработки XML-данных не передает учетные данные целевому URL-адресу или веб-службе. Если не определена учетная запись автоматического выполнения, соединение закончится ошибкой. Дополнительные сведения см. в статье [Настройка учетной записи автоматического выполнения (диспетчер конфигурации сервера отчетов)](../../reporting-services/install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md).  
  
 Сохраненные и запрашиваемые учетные данные не поддерживаются. Помните, что если отключить встроенную безопасность Windows, получить данные будет невозможно. Если заданы хранимые учетные данные, или их предлагается ввести, во время выполнения возникнет ошибка.  
  
 См. сведения о [создании строк подключения к данным (построитель отчетов и SSRS)](../../reporting-services/report-data/data-connections-data-sources-and-connection-strings-report-builder-and-ssrs.md) и [определении учетных данных и сведений о подключении для источников данных отчета](specify-credential-and-connection-information-for-report-data-sources.md).  
  
##  <a name="queries"></a><a name="Query"></a> Запросы  
 Запрос указывает, какие данные для набора данных отчета необходимо получить. Столбцы результирующего набора запроса заполняют коллекцию полей набора данных. Отчет обрабатывает только первый результирующий набор, полученный по запросу.  
  
 Для создания запроса используйте текстовый конструктор запросов. Запрос должен возвращать XML-данные.  
  
 Дополнительные сведения о текстовом конструкторе запросов см. в разделе [Пользовательский интерфейс текстового конструктора запросов (построитель отчетов)](../../reporting-services/report-data/text-based-query-designer-user-interface-report-builder.md).  
  
 Возможные значения запроса набора данных к источнику данных с типом XML представлены ниже.  
  
-   *Пустой*  
  
     Пустой запрос используется для создания результирующего набора по умолчанию. Запрос по умолчанию создается путем считывания источника данных и поиска в иерархии узлов XML первой коллекции концевых узлов. Результирующий набор включает все узлы с текстовыми значениями и все атрибуты узлов по этому пути. Столбцы в результирующем наборе соответствуют полям набора данных.  
  
-   *Путь к элементу*  
  
     Задает последовательность узлов источника данных, используемых для получения XML-данных.  
  
-   *Элемент XML-запроса*  
  
     Спецификация XML-запроса со следующим необязательными элементами:  
  
    -   **Источник XML-данных — веб-служба**  
  
         Обязательные XML-элементы:  
  
         `<Method Namespace=` *"пространство имен"*  `Name="MethodName" />`  
  
         `-- or --`  
  
         `<SoapAction>` *действие SOAP* `</SoapAction>`  
  
         Необязательные XML-элементы:  
  
         `<ElementPath>`  *путь к элементу*  `</ElementPath>`  
  
         `<Method Namespace=` *"пространство имен"*  `Name="MethodName" />`  
  
         `-- or --`  
  
         `<SoapAction>` *действие SOAP* `</SoapAction>`  
  
    -   **Источник XML-данных — XML-документ**  
  
         Обязательные XML-элементы: None  
  
         Необязательные XML-элементы:  
  
         `<ElementPath>`  *путь к элементу*  `</ElementPath>`  
  
    -   **Источник XML-данных — внедренный XML-документ**  
  
         Обязательные XML-элементы:  
  
         `<XmlData>` внутренний XML `</XmlData>`  
  
         Необязательные XML-элементы:  
  
         `<ElementPath>`  *путь к элементу*  `</ElementPath>`  
  
         `-- or --`  
  
         `<ElementPath IgnoreNamespaces="true">`  *путь к элементу*  `</ElementPath>`  
  
 Дополнительные сведения см. в статье [Синтаксис запроса XML для XML-данных отчета (SSRS)](../../reporting-services/report-data/xml-query-syntax-for-xml-report-data-ssrs.md).  
  
 Примеры можно найти в разделах [Службы Reporting Services: использование источников XML-данных и источников данных веб-служб](https://go.microsoft.com/fwlink/?LinkId=81654).  
  
### <a name="requirements-for-retrieving-xml-web-service-data"></a>Требования для получения XML-данных веб-службы  
 Модуль обработки XML-данных не обнаруживает схему самостоятельно. Поэтому необходимо определить, какой метод SOAP будет получать нужные данные. Необходимо также представлять себе схему адресации или пространство имен, которые веб-служба использует для своих данных.  
  
 Для веб-службы можно задать элемент \<**Query**>, указывающий вызываемый метод или действие SOAP. Можно оставить запрос пустым и использовать запрос по умолчанию, если источник данных XML имеет иерархическую структуру, предоставляющую нужные для отчета данные. Значения и атрибуты узлов XML-элементов, полученные при выполнении запроса, привязываются к полям набора данных в отчете.  
  
### <a name="requirements-for-retrieving-xml-document-data"></a>Требования для получения данных XML-документа  
 Используя протокол HTTP, сервер должен возвратить XML-данные, либо XML-данные должны быть внедрены в элемент XML **Query** . При прямой ссылке на XML-документ по протоколу HTTP этот документ должен иметь расширение XML.  
  
 Необходимо знать, как создавать XML-запрос, который будет получать нужные данные. Если путь к элементу не задан, по умолчанию при анализе XML-документа выбирается первый доступный путь к коллекции концевых узлов XML-документа. Если XML-документ включает дополнительные пути к другим коллекциям одноуровневых узлов, эти узлы будут пропускаться, если в запросе не задан путь.  
  
 Путь к элементу можно указать с помощью синтаксиса XML, схожего с XQuery.  
  
 Дополнительные сведения см. в статье [Синтаксис пути к элементу для XML-данных отчета &#40;SSRS&#41;](../../reporting-services/report-data/element-path-syntax-for-xml-report-data-ssrs.md).  
  
##  <a name="parameters"></a><a name="Parameters"></a> Параметры  
 Запрос не анализируется для определения параметров.  
  
 Чтобы добавить параметры необходимо создать их вручную на странице **Параметр** диалогового окна [Свойства набора данных](https://msdn.microsoft.com/library/3a0672ad-c969-455b-b952-585164ce1dda) .  
  
##  <a name="remarks"></a><a name="Remarks"></a> Замечания  
 Модуль обработки XML-данных поддерживает создание отчетов для XML-данных, имеющих табличную, а не иерархическую структуру. Дополнительные сведения см. в разделе [Добавление данных из внешних источников данных (службы SSRS)](../../reporting-services/report-data/add-data-from-external-data-sources-ssrs.md).  
  
 Встроенная поддержка для получения XML-документов из базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] отсутствует.  
  
##  <a name="how-to-topics"></a><a name="HowTo"></a> Инструкции  
 В этом разделе содержатся пошаговые инструкции по работе с подключениями к данным, источниками данных и наборами данных.  
  
 [Добавление и проверка подключения к данным (построитель отчетов и службы SSRS)](../../reporting-services/report-data/add-and-verify-a-data-connection-report-builder-and-ssrs.md)  
  
 [Создание общего или внедренного набора данных (построитель отчетов и службы SSRS)](../../reporting-services/report-data/create-a-shared-dataset-or-embedded-dataset-report-builder-and-ssrs.md)  
  
 [Добавление фильтра к набору данных (построитель отчетов и службы SSRS)](../../reporting-services/report-data/add-a-filter-to-a-dataset-report-builder-and-ssrs.md)  
  
##  <a name="related-sections"></a><a name="Related"></a> См. также  
 В этих разделах документации содержатся подробные сведения о данных отчетов, а также методические сведения об определении, настройке и использовании элементов отчетов, связанных с данными.  
  
 [Наборы данных отчетов (службы SSRS)](../../reporting-services/report-data/report-datasets-ssrs.md)  
 Предоставляет общие сведения о доступе к данным отчета.  
  
 [Создание строк подключения к данным (построитель отчетов и SSRS)](../../reporting-services/report-data/data-connections-data-sources-and-connection-strings-report-builder-and-ssrs.md)  
 Предоставляет сведения о подключениях к данным и источникам данных.  
  
 [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](../../reporting-services/report-data/report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md)  
 Предоставляет сведения об общих и внедренных наборах данных.  
  
 [Коллекция полей набора данных (построитель отчетов и службы SSRS)](../../reporting-services/report-data/dataset-fields-collection-report-builder-and-ssrs.md)  
 Предоставляет сведения о коллекции полей набора данных, создаваемой запросом.  
  
 [Источники данных, поддерживаемые службами Reporting Services &#40;SSRS&#41;](../../reporting-services/report-data/data-sources-supported-by-reporting-services-ssrs.md).  
 Предоставляет подробные сведения о поддержке платформ и версий для каждого модуля обработки данных.  
  
## <a name="see-also"></a>См. также:  
 [Параметры отчета (построитель отчетов и конструктор отчетов)](../../reporting-services/report-design/report-parameters-report-builder-and-report-designer.md)   
 [Фильтрация, группирование и сортировка данных (построитель отчетов и службы SSRS)](../../reporting-services/report-design/filter-group-and-sort-data-report-builder-and-ssrs.md)   
 [Выражения (построитель отчетов и службы SSRS)](../../reporting-services/report-design/expressions-report-builder-and-ssrs.md)  
  
  
