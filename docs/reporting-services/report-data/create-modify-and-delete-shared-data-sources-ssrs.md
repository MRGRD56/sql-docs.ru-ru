---
title: Создание, изменение и удаление общих источников данных | Документация Майкрософт
description: Узнайте, как управлять источниками данных, на который могут ссылаться несколько отчетов, моделей и управляемых данными подписок, работающих на сервере отчетов служб Reporting Services.
ms.date: 05/24/2018
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: report-data
ms.topic: conceptual
helpviewer_keywords:
- modifying data source properties
- shared data sources [Reporting Services]
- removing shared data sources
- roles [Reporting Services], shared data sources
- data sources [Reporting Services], shared
- data sources [Reporting Services], modifying properties
- deleting shared data sources
ms.assetid: 1e58c1c2-5ecf-4ce6-9d04-0a8acfba17be
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 287347c10600b0038cf3489a0c8df8fae8a00661
ms.sourcegitcommit: fe59f8dc27fd633f5dfce54519d6f5dcea577f56
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/09/2020
ms.locfileid: "91934692"
---
# <a name="create-modify-and-delete-shared-data-sources-ssrs"></a>Создание, изменение и удаление общих источников данных (SSRS)
  Общий источник данных — это набор свойств соединения с источником данных, на который могут ссылаться несколько отчетов, моделей и управляемых данными подписок, работающих на сервере отчетов служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .  Общие источники данных предоставляют удобный способ управления часто изменяющимися свойствами источника данных. Если изменились свойства учетной записи пользователя или пароль или база данных перенесена на другой сервер, все сведения о соединении можно изменить в одном месте.  
  
 Применение общих источников данных обязательно для моделей отчетов, но необязательно для отчетов и управляемых данными подписок. Если модель отчета предназначается для составления автоматизированных отчетов, чтобы предоставить модели сведения о соединении, необходимо создать и поддерживать совместно используемый элемент источника данных.  
  
 Общий источник данных состоит из следующих частей:  
  
|Часть|Описание|  
|----------|-----------------|  
|Имя|Имя, которое идентифицирует элемент в иерархии папок сервера отчетов.|  
|Описание|Описание, которое отображается с элементом на веб-портале при просмотре содержимого папки.|  
|Тип соединений|Модуль обработки данных, используемый с источником данных. Можно использовать только модули обработки данных, развернутые на сервере отчетов. Дополнительные сведения о модулях обработки данных, включенных в службы [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], см. в разделе [Источники данных, поддерживаемые службами Reporting Services (службы SSRS)](../../reporting-services/report-data/data-sources-supported-by-reporting-services-ssrs.md).|  
|Строка подключения|Строка соединения для базы данных. Дополнительные сведения о строках соединения и примеры их использования с часто используемыми источниками данных см. в статье [Создание строк подключения к данным (построитель отчетов и службы SSRS)](../../reporting-services/report-data/data-connections-data-sources-and-connection-strings-report-builder-and-ssrs.md).|  
|Тип учетных данных|Указывает, каким образом соединение получает учетные данные и используются ли они после того, как соединение установлено. Дополнительные сведения см. в статье [Задание учетных данных и сведениях о соединении для источников данных отчета](../../reporting-services/report-data/specify-credential-and-connection-information-for-report-data-sources.md).|  
  
 Общий источник данных не содержит сведений о запросе для получения данных. Запрос всегда сохраняется в определении отчета.  
  
## <a name="creating-and-modifying-shared-data-sources"></a>Создание и изменение общих источников данных  
 Чтобы создать общий источник данных или изменить его свойства, нужно иметь разрешения **Управление источниками данных** на сервере отчетов. Если сервер отчетов работает в собственном режиме, создать и настроить общий источник данных можно на веб-портале. Если сервер отчетов работает в режиме интеграции с SharePoint, создать и настроить общий источник данных можно с помощью страниц приложений на сайте SharePoint. Для любого сервера отчетов, независимо от режима его работы, можно сначала создать общий источник данных в конструкторе отчетов, а затем опубликовать его на целевом сервере.  
  
 После создания общего источника данных на сервере отчетов можно создать назначения ролей, чтобы управлять доступом к источнику данных, перемещать или переименовывать его, а также переводить источник в режим вне сети, чтобы предотвратить обработку отчета во время выполнения операций обслуживания на внешнем источнике данных. Если переименовывается или перемещается в другое место элемент общего источника данных, в иерархии папок сервера отчетов сведения о пути во всех отчетах или подписках, которые ссылаются на этот общий источник данных, будут соответственно обновлены. После перевода общего источника данных в режим вне сети все отчеты, модели и подписки не будут работать, пока источник данных не будет включен повторно.  
  
 Дополнительные сведения об управлении доступом к общим источникам данных в иерархии папок сервера отчетов см. в разделе [Защита совместно используемых элементов источника данных](../../reporting-services/security/secure-shared-data-source-items.md).  
  
 **Создание общего источника данных в конструкторе отчетов**  
  
1.  На панели инструментов в области данных отчета нажмите кнопку **Создать** и выберите **Источник данных**. Откроется диалоговое окно **Свойства источника данных** .  
  
    > [!NOTE]  
    >  Если область данных отчета не отображается, в меню **Вид** выберите пункт **Данные отчета** .  
  
2.  В текстовом поле **Имя** введите имя источника данных или примите имя по умолчанию. Имя источника данных используется лишь внутри отчета. Для ясности рекомендуется включать в имя источника данных имя базы данных, которое указано в строке соединения.  
  
3.  Убедитесь, что установлен флажок **Использовать ссылку на общий источник данных** , а затем выполните следующие действия.  
  
    1.  Нажмите кнопку **Создать**. В свойствах диалогового окна **Общий источник данных** выполните шаги 2 и 3, чтобы создать новый источник данных.  
  
    2.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
         Новый общий источник данных появится в обозревателе решений в папке «Общие источники данных».  
  
4.  Нажмите кнопку **Учетные данные**.  
  
     Задайте учетные данные, которые будут использоваться с этим источником данных. Владелец источника данных выбирает тип поддерживаемых учетных данных.  
  
 **Создание общего источника данных на веб-портале**  
  
1.  На веб-портале выберите команды **Создать** > **Источник данных**. 
  
4.  Введите имя элемента. Имя должно содержать по крайней мере один символ и начинаться с буквы. Оно также может включать в себя определенные символы, за исключением пробелов и символов ; ? : \@ & = + , $ / * < > | " /.  
  
5.  Можно также ввести описание, чтобы предоставить пользователям сведения об этом подключении.  
  
6.  В списке **Тип источника данных** задайте модуль обработки данных, который будет использоваться для обработки данных, получаемых из источника данных.  
  
7.  В поле **Строка подключения**укажите строку соединения, которую сервер отчетов будет использовать для подключения к источнику данных. Не рекомендуется указывать учетные данные в строке подключения.  
  
     В следующем примере показана строка подключения для подключения к локальной базе данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] AdventureWorks2016.  
  
    ```  
    data source=<localservername>; initial catalog=AdventureWorks2016 
    ```  
  
8.  В качестве параметра **Соединиться при помощи**укажите, как будут указываться учетные данные при выполнении отчета:  
  
    -   Если имя входа и пароль необходимо спросить у пользователя, выберите **Учетные данные, предоставленные пользователем, запустившим отчет**. Чтобы применить учетные данные, которые пользователь вводит как учетные данные Windows, щелкните **Использовать учетные данные Windows при соединении с источником данных**. Если имя пользователя и пароль не являются учетными данными базы данных, не выбирайте этот параметр.  
  
    -   Если необходимо использовать источник данных в качестве общего с сохраненными учетными данными, которые управляются владельцем источника данных, или с отчетами, которые поддерживают подписки или другие операции по расписанию (например, автоматическое создание журнала отчетов), выберите **Учетные данные, которые безопасно хранятся на сервере отчетов**. Если сервер базы данных поддерживает олицетворение или делегирование, можно выбрать параметр **Олицетворение авторизованного пользователя после установки соединения с источником данных**.  
  
    -   Если необходимо, чтобы сервер отчетов передавал учетные данные пользователя, обращающегося к отчету, на сервер, содержащий внешний источник данных, щелкните **Встроенная безопасность Windows**. В этом случае у пользователя не будут запрашиваться имя и пароль.  
  
    -   Если для доступа к источнику данных учетные данные не используются (например, если это XML-файл, находящийся в файловой системе), выберите **Учетные данные не требуются**. Этот тип учетных данных следует указывать только в том случае, если он допустим для источника данных. Если выбрать этот параметр для источника данных, требующего проверки подлинности, соединение завершится ошибкой. При выборе этого параметра убедитесь, что настроена учетная запись автоматического выполнения, позволяющая серверу отчетов соединяться с другими компьютерами для получения данных или файлов, если пользовательские учетные данные недоступны.  
  
         Дополнительные сведения о настройке учетных данных см. в разделе [Указание учетных данных и сведений о соединении для источников данных отчета](../../reporting-services/report-data/specify-credential-and-connection-information-for-report-data-sources.md). Дополнительные сведения об учетной записи автоматического выполнения см. в разделе [Настройка учетной записи автоматического выполнения (диспетчер конфигурации сервера отчетов)](../../reporting-services/install-windows/configure-the-unattended-execution-account-ssrs-configuration-manager.md).  
  
9. Нажмите кнопку **Проверить соединение** , чтобы проверить настройку источника данных.  
  
    > [!NOTE]  
    >  Кнопка проверки соединения не поддерживается для источника типа XML-данных.  
  
10. Нажмите кнопку **ОК**.  
  
 **Изменение общего источника данных на веб-портале**  
  
1.  На веб-портале перейдите к общему источнику данных.  
  
2.  В правом верхнем углу общего источника данных нажмите кнопку с многоточием (...), а затем выберите **Управление**.   

    Откроется страница **Свойства** .
  
3.  Измените источник данных, а затем нажмите кнопку **Применить**.  
  
## <a name="deleting-shared-data-sources"></a>удаление общих источников данных  
 Удалить общий источник данных с сервера отчетов можно так же, как и любой другой элемент.  
  
 **Удаление общего источника данных**  
  
1. На веб-портале перейдите к общему источнику данных.  
  
2.  В правом верхнем углу общего источника данных нажмите кнопку с многоточием (...), а затем выберите **Управление**.    
    Откроется страница **Свойства** .
  
3. Нажмите кнопку **Удалить**, а затем кнопку **ОК**.  
  
При удалении общего источника данных отключаются все отчеты, модели и управляемые данными подписки, которые его используют. Без информации о соединении с источником данных элементы работать не будут. Чтобы активировать эти элементы, необходимо открыть каждый из них по очереди и выполнить следующие действия.  
  
-   Для отчетов и управляемых данными подписок, ссылающихся на общий источник данных, можно указать информацию о соединении с источником данных в свойствах отчета или подписки или выбрать новый общий источник данных, содержащий необходимые значения.  
  
-   Для моделей и отчетов построителя отчетов, использующих эту модель, нужно указать новый общий источник данных. Модели получают информацию для соединения с источниками данных только через общие источники данных.  
  
 Отменить операцию удаления общего источника данных невозможно. Однако если общий источник данных был случайно удален, можно создать новый с теми же значениями свойств, что у старого. Нужно по очереди открыть все отчеты, модели и управляемые данными подписки и повторно привязать общий источник данных к использующим его элементам. Но так как все свойства источника данных останутся прежними, отчеты, модели и подписки будут работать по-прежнему.  
  
## <a name="importing-shared-data-sources"></a>Импорт общих источников данных  

**Импорт существующего источника данных в конструктор отчетов**  
  
1.  В обозревателе решений щелкните правой кнопкой мыши в проекте сервера отчетов папку **Общие источники данных** и выберите команду **Добавить существующий элемент**. Откроется диалоговое окно **Добавление существующего элемента** .  
  
2.  Перейдите к существующему RDS-файлу определения отчета общего источника данных и нажмите кнопку **Открыть**.  
  
3.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
## <a name="shared-data-sources-in-sharepoint"></a>Общие источники данных в SharePoint  
 При запуске отчета из библиотеки SharePoint сведения о соединении могут определяться внутри отчета или во внешнем файле, связанном с отчетом. Если сведения о соединении внедряются в отчет, то источник данных называется пользовательским. Если сведения о соединении определены во внешнем файле, то источник данных называется общим. Внешний файл может являться RSDS-файлом источника данных сервера отчетов или ODC-файлом подключения к данным Office.  
  
 RSDS-файл подобен RDS-файлу, но имеет другую схему. Чтобы создать RSDS-файл, можно опубликовать RDS-файл из конструктора отчетов или конструктора моделей в библиотеке SharePoint (новый RSDS-файл будет создан из исходного RDS-файла). В качестве альтернативы можно создать новый файл в библиотеке на веб-сайте SharePoint.  
  
 Если создать или опубликовать общий источник данных, можно изменить свойства соединения или удалить файл, если он больше не используется. Прежде чем удалить общий источник данных, следует определить, не используется ли он какими-либо отчетами или моделями отчетов. Это можно сделать, просмотрев зависимые элементы, на которые ссылается общий источник данных.  
  
 Хотя список зависимых элементов говорит, имеется ли ссылка на общий источник данных, список не показывает, используется ли элемент активно. Чтобы определить, используется ли активно общий источник данных или модель, можно просмотреть файлы журналов на компьютере сервера отчетов. Если доступ к файлам журналов отсутствует или файлы не содержат необходимых сведений, рассмотрите перемещение отчета в недоступную папку на время выяснения его состояния активности.  
  
 **Создание RSDS-файла общего источника данных (SharePoint 2010)**  
  
1.  На ленте библиотек выберите вкладку **Документы** .  
  
2.  В меню **Создать документ** выберите пункт **Источник данных отчета**.  
  
    > [!NOTE]  
    >  Если элемент **Источник данных отчета** не отображается в меню, значит, тип содержимого источника данных отчета не был включен. Дополнительные сведения см. в разделе [Добавление типов содержимого служб Reporting Services в библиотеку SharePoint](../../reporting-services/report-server-sharepoint/add-reporting-services-content-types-to-a-sharepoint-library.md).  
  
3.  В поле **Имя**укажите описательное имя RSDS-файла.  
  
4.  В списке **Тип источника данных**выберите тип источника данных. Дополнительные сведения см. в разделе [Источники данных, поддерживаемые службами Reporting Services (SSRS)](../../reporting-services/report-data/data-sources-supported-by-reporting-services-ssrs.md).  
  
5.  В поле **Строка соединения**задайте ссылку на источник данных и все остальные настройки, необходимые для установления соединения с внешним источником данных. Тип используемого источника данных определяет синтаксис строки соединения. Дополнительные сведения см. в статье [Создание строк подключения к данным (построитель отчетов и службы SSRS)](../../reporting-services/report-data/data-connections-data-sources-and-connection-strings-report-builder-and-ssrs.md).  
  
6.  В разделе **Учетные данные**задайте, каким образом сервер отчетов получает учетные данные для доступа к внешнему источнику данных. Учетные данные могут быть сохраненными, запрашиваемыми, встроенными или настроенными для автоматической обработки отчета.  
  
    -   Чтобы получить доступ к данным по учетным данным пользователя, открывшего отчет, выберите **Проверка подлинности Windows (встроенная)** . Не выбирайте этот параметр, если веб-сайт или ферма SharePoint использует проверку подлинности с помощью форм или подключается к серверу отчетов через доверенную учетную запись. Не следует выбирать этот параметр, если для отчета необходимо по расписанию обрабатывать данные или подписку. Этот параметр действует максимально эффективно, когда для домена включена проверка подлинности Kerberos или когда источник данных находится на том же компьютере, что и сервер отчетов. Если проверка подлинности Kerberos не активирована, то учетные данные Windows могут передаваться только на другой компьютер. Это означает, что если внешний источник данных находится на другом компьютере и требуется дополнительное соединение, то вместо ожидаемых данных возникнет ошибка.  
  
    -   Чтобы пользователь вводил учетные данные каждый раз при выполнении отчета, выберите **Запрос учетных данных** . Не следует выбирать этот параметр, если для отчета необходимо по расписанию обрабатывать данные или подписку.  
  
    -   Выберите параметр **Сохраненные учетные данные** , чтобы пользователь получал доступ с помощью единственного набора учетных данных. Эти учетные данные шифруются перед сохранением. Можно выбрать параметры, которые определяют, как проверяются сохраненные учетные данные. Выберите «Использовать учетные данные Windows», если сохраненные учетные данные принадлежат пользовательской учетной записи Windows. Выберите **Выполнять в контексте этой учетной записи** , чтобы настроить контекст выполнения на сервере базы данных. Для баз данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] этот параметр задает функцию SETUSER. Дополнительные сведения см. в разделе [SETUSER (Transact-SQL)](../../t-sql/statements/setuser-transact-sql.md).  
  
    -   Выберите **Учетные данные не требуются** , чтобы задать учетные данные в строке подключения или выполнить отчет под учетной записью с минимальными правами доступа, настроенной на сервере отчетов. Если эта учетная запись не настроена на сервере отчетов, у пользователей будут запрашиваться учетные данные и все запланированные операции, определенные для сервера отчетов, выполняться не будут.  
  
7.  Выберите **Включить этот источник данных** , если он должен быть активным. Если источник данных настроен, но не активен, пользователям будет выдаваться сообщение об ошибке при попытке использовать отчет на основе источника данных.  
  
8.  Нажмите кнопку **Проверить соединение** , чтобы проверить настройку источника данных.  
  
    > [!NOTE]  
    >  Кнопка проверки соединения не поддерживается для источника типа XML-данных.  
  
9. Нажмите кнопку **ОК** , чтобы сохранить общий источник данных.  
  
 **Удаление RSDS-файла общего источника данных**  
  
1.  Откройте библиотеку, которая содержит RSDS-файл.  
  
2.  Укажите общий источник данных.  
  
3.  Щелкните стрелку вниз и выберите **Удалить**.  
  
 Если по ошибке будет удален общий источник данных, который нужно было оставить, можно создать новый источник данных с теми же самыми сведениями о соединении. После повторного создания общего источника данных необходимо открыть каждый отчет или модель, в которой он используется, и выбрать этот общий источник данных. У нового общего источника данных могут быть имя, учетные данные и синтаксис строки соединения, отличные от источника, который был удален. Если соединение определяет тот же самый источник данных, свойства этого источника данных могут отличаться от исходных значений.  
  
 Будьте осторожны при удалении модели отчета. При удалении модели невозможно открыть или изменить любые отчеты, основанные на этой модели в построителе отчетов. При непреднамеренном удалении модели, используемой в существующих отчетах, необходимо повторно создать модель, повторно создать и сохранить использующие эту модель отчеты и повторно указать необходимую безопасность элемента модели. Невозможно просто сформировать заново модель и присоединить ее к существующему отчету.  
  
## <a name="dependent-items"></a>Зависимые элементы  
 Страница «Зависимые элементы» общего источника данных позволяет просмотреть список отчетов и моделей, использующих этот общий источник данных. Получить доступ к этой странице можно, открыв источник данных на веб-портале или на странице приложения SharePoint. Следует помнить, что на странице «Зависимые элементы» не отображаются управляемые данными подписки. Подписка, использующая общий источник данных, не отображается в списке зависимых элементов.  
  
 **Просмотр зависимых элементов в SharePoint**  
  
1.  Откройте библиотеку, которая содержит RSDS-файл.  
  
2.  Укажите общий источник данных.  
  
3.  Щелкните стрелку вниз и выберите **Просмотр зависимых элементов**.  
  
     Для моделей отчетов список зависимых элементов содержит отчеты, созданные в построителе отчетов. Для общих источников данных список зависимых элементов может включать как отчеты, так и модели отчетов.  
  
## <a name="see-also"></a>См. также:  
 [Create data connection strings — Report Builder & SSRS](../../reporting-services/report-data/data-connections-data-sources-and-connection-strings-report-builder-and-ssrs.md)  (Создание строк подключения к данным (построитель отчетов и службы SSRS))  
 [Управление источниками данных отчета](../../reporting-services/report-data/manage-report-data-sources.md)   
 [Настройка свойств источника данных для отчета с разбивкой на страницы](../../reporting-services/report-data/configure-data-source-properties-for-a-report-report-manager.md)  
  
  
