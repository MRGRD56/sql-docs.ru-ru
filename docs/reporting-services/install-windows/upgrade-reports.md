---
description: Обновление отчетов (службы SSRS)
title: Обновление отчетов | Документы Майкрософт
ms.date: 06/04/2018
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- reports [Reporting Services], upgrading
- published reports [Reporting Services], upgrades
- custom report items, upgrading
- Reporting Services, upgrades
- upgrading Reporting Services
- snapshots [Reporting Services], upgrading
- report definition files [Reporting Services]
- .rdl files
ms.assetid: a1a10c67-7462-4562-9b07-a8822188a161
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 1454c579739c892cc3d0c03211283589ba3e6b82
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "88446032"
---
# <a name="upgrade-reports-ssrs"></a>Обновление отчетов (службы SSRS)

[!INCLUDE[ssrs-appliesto-sql2016-preview](../../includes/ssrs-appliesto-sql2016-preview.md)]

RDL-файлы определения отчетов автоматически обновляются следующими способами.  
  
-   При открытии отчета с разбивкой на страницы в конструкторе отчетов среды [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] определение отчета обновляется до поддерживаемой в настоящее время RDL-схемы. Когда вы указываете сервер отчетов [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] в свойствах проекта, определение отчета сохраняется в схеме, совместимой с целевым сервером.  
  
-   При обновлении установки служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] до служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] существующие отчеты и моментальные снимки, опубликованные на сервере отчетов, компилируются и автоматически обновляются до новой схемы при первой обработке. Если отчет автоматически обновить не удается, он обрабатывается в режиме обратной совместимости. Определение отчета остается в исходной схеме.  
  
 После локального обновления отчета или обновления на сервере отчетов могут появиться дополнительные ошибки, предупреждения и сообщения. Это результат изменений внутренней объектной модели отчетов и компонентов обработчиков, которые приводят к появлению сообщений при обнаружении проблем в отчете. Дополнительные сведения см. в статье [Reporting Services Backward Compatibility](../../reporting-services/reporting-services-backward-compatibility.md).  
  
 Дополнительные сведения о новых функциях служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] см. в статье [Новые возможности служб SQL Server Reporting Services (SSRS)](../what-s-new-in-sql-server-reporting-services-ssrs.md).  

##  <a name="versions-supported-by-upgrade"></a><a name="bkmk_versionsupported"></a> Версии отчетов, которые могут быть обновлены  
 Можно обновить отчеты, созданные в любой из предыдущих версий служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] . Эти версии включают следующие.  
  
-   [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]  
  
-   [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)]  
  
-   [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]  
  
-   [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]  
  
##  <a name="report-definition-rdl-files-and-report-designer"></a><a name="bkmk_rdlfiles"></a> Файлы определения отчетов (RDL) и конструктор отчетов  
 Файл определения отчета содержит ссылку на пространство имен языка определения отчетов, которое указывает версию схемы определения отчета, используемую для проверки RDL-файла.  
  
 Если RDL-файл открывается в конструкторе отчетов в среде [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]и отчет был создан в предыдущем пространстве имен, конструктор отчетов автоматически создает файл резервной копии и обновляет отчет до текущего пространства имен. Это единственный способ обновления файла определения отчетов.  
  
 Устанавливаемые свойства развертывания могут влиять на то, в какой схеме сохраняется файл определения отчета. Дополнительные сведения см. в разделе [Развертывание и поддержка версий в SQL Server Data Tools (службы SSRS)](../../reporting-services/tools/deployment-and-version-support-in-sql-server-data-tools-ssrs.md).  
  
 Можно передать RDL-файл, созданный в более ранней версии служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], в новую версию, где он будет автоматически обновлен при первом использовании. На сервере отчетов файлы определения отчетов хранятся в собственном формате. Отчет обновляется автоматически при первом просмотре, однако сохраненный файл определения отчетов остается без изменений.  
  
 Сведения о том, как определить текущую схему языка определения отчетов для отчетов, сервера отчетов или конструктора отчетов, см. в разделе [Определение версии схемы определения отчета (SSRS)](../../reporting-services/reports/find-the-report-definition-schema-version-ssrs.md).  
  
##  <a name="published-reports-and-report-snapshots"></a><a name="bkmk_publishedreports_and_snapshots"></a> Опубликованные отчеты и моментальные снимки отчетов  
 При первом использовании сервер отчетов пытается обновить существующие опубликованные отчеты и моментальные снимки отчетов до новой схемы определения отчетов, что не требует каких-либо действий со стороны пользователя. Попытка обновления происходит, когда пользователь просматривает отчет или моментальный снимок отчета либо когда сервер отчетов обрабатывает подписку. Определение отчета не заменяется, а по-прежнему хранится на сервере отчетов в своей первоначальной схеме. Если отчет невозможно обновить, он работает в режиме обратной совместимости.  
  
##  <a name="backward-compatibility-mode"></a><a name="bkmk_backcompat"></a> Режим обратной совместимости  
 Успешно обновленный отчет обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] . Отчет, обновление которого невозможно, обрабатывается обработчиком отчетов [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] в режиме обратной совместимости. Нельзя обработать отчет обоими обработчиками. При первом использовании отчет будет либо успешно обновлен, либо помечен для обработки в режиме обратной совместимости.  
  
 Только обработчик отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] поддерживает новые функции. Если обновить отчет не удается, отчет, готовый для просмотра, можно просмотреть, однако новые функции будут недоступны. Чтобы использовать эти новые функции, необходимо успешно обновить отчет.  
  
##  <a name="upgrading-a-report-with-subreports"></a><a name="bkmk_subreports"></a> Обновление отчета с вложенными отчетами  
 Если отчет содержит вложенные отчеты, то при обновлении возникает одна из приведенных ниже четырех ситуаций.  
  
-   Главный отчет и все вложенные отчеты успешно обновляются. Они обрабатываются обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] .  
  
-   Главный отчет и все вложенные отчеты обновить не удается. Они обрабатываются обработчиком отчетов [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)].  
  
-   Возможно обновление главного отчета, однако один или несколько вложенных отчетов обновить не удается. Главный отчет обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] , однако в готовом для просмотра отчете отображается сообщение «Ошибка: не удалось обработать вложенный отчет» в том месте, где должен отображаться вложенный отчет, который не удалось обновить.  
  
-   Главный отчет обновить нельзя, однако можно обновить один или несколько вложенных отчетов. Главный отчет обрабатывается обработчиком отчетов служб [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] , однако в готовом для просмотра отчете отображается сообщение «Ошибка: не удалось обработать вложенный отчет» в том месте, где должен отображаться вложенный отчет.  
  
 Если отображается сообщение «Ошибка: не удалось обработать вложенный отчет», необходимо изменить определение главного отчета или вложенного отчета таким образом, чтобы отчеты могла обработать одна версия обработчика отчетов.  
  
 Это ограничение не касается детализированных отчетов, поскольку они обрабатываются как независимые отчеты.  
  
##  <a name="upgrading-a-report-with-custom-report-items"></a><a name="bkmk_CRIs"></a> Обновление пользовательских элементов отчета в отчете  
 Отчеты [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] могут содержать пользовательские элементы отчета, предоставленные сторонними поставщиками ПО и установленные системным администратором на компьютере разработчика отчетов и на сервере отчетов. Обновлять отчеты с пользовательскими элементами отчета можно следующим образом.  
  
-   Сервер отчетов [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] обновляется до сервера отчетов [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)]. Отчеты, опубликованные на сервере отчетов, автоматически обновляются при первом использовании.  
  
-   Отчет [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] передается на сервер отчетов [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)]. Отчет автоматически обновляется при первом использовании.  
  
-   Отчет [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] открывается в конструкторе отчетов в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Создается резервная копия отчета. Возможен один из двух вариантов.  
  
    1.  Ни один пользовательский элемент отчета не содержит неподдерживаемых функций. Пользовательские элементы отчета преобразуются в элементы отчета в новой схеме определения отчета; таким образом, обновляется весь отчет. При сохранении файл сохраняется в текущем пространстве имен языка определения отчетов.  
  
    2.  В одном или нескольких пользовательских элементах отчета есть неподдерживаемые функции. Открывается диалоговое окно, в котором пользователю предлагается выбрать действие: преобразовать пользовательские элементы отчета или оставить их без изменений.  
  
     Дополнительные сведения см. в подразделе [Открытие отчета в конструкторе отчетов](#OpeningaReport) далее в этом разделе.  
  
 Сведения об определении текущего пространства имен языка определения отчетов для сервера отчетов, среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] или отчета см. в разделе [Определение версии схемы определения отчета (SSRS)](../../reporting-services/reports/find-the-report-definition-schema-version-ssrs.md).  
  
### <a name="upgrading-reports-on-a-report-server"></a>Обновление отчетов на сервере отчетов  
 При первом запуске отчета [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] на сервере отчетов, обновленном до версии [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)], такой отчет автоматически обновляется до текущего пространства имен определения отчета, поддерживаемого сервером отчетов. Отчет мог существовать на сервере отчетов до обновления, либо его могли передать туда с помощью веб-портала или опубликовать на сервере отчетов из конструктора отчетов в [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] версий [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)].  
  
 В следующей таблице перечислены действия по обновлению, выполняемые сервером отчетов для каждого конкретного типа пользовательских элементов отчета.  
  
|Тип пользовательского элемента отчета|Действие сервера отчетов по обновлению|  
|--------------|----------------------------------|  
|Сторонние пользовательские элементы отчета|Обновление не выполняется.<br /><br /> Обрабатывается обработчиком отчетов [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)][!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] .|  
  
###  <a name="opening-a-report-with-cris-in-report-designer"></a><a name="OpeningaReport"></a> Открытие отчета с пользовательскими элементами отчета в конструкторе отчетов  
 При открытии отчета [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)], [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]или [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)][!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] с пользовательскими элементами отчетов в конструкторе отчетов в [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]этот отчет обновится до новой схемы определения отчета. В зависимости от того, какие пользовательские элементы отчета содержит отчет, выполняется одно из следующих действий.  
  
-   Обнаружены сторонние пользовательские элементы отчета. Если версия пользовательского элемента отчета, установленного на компьютере разработчика отчетов, несовместима с новой RDL-схемой, то в области конструктора отображается текстовое поле с красной буковой «X». Чтобы установить новые версии пользовательских элементов отчета сторонних поставщиков, совместимых с новой RDL-схемой, необходимо обратиться к системному администратору.  
  
 Сохранение отчета после обновления в среде, где он был создан, — единственный способ обновить существующий отчет до новой схемы определения отчета.  
  
###  <a name="convert-cri-dialog-box"></a><a name="bkmk_convertCRIdialog"></a> Диалоговое окно «Преобразование пользовательского элемента отчета»  
 Этот отчет содержит пользовательские элементы отчетов с неподдерживаемыми функциями. Пользовательские элементы отчетов представляют собой расширения языка определения отчетов, которые поддерживают пользовательские объекты, отображающие данные в отчете. Пользовательские элементы отчета включают компоненты времени разработки и времени выполнения, поставляемые сторонними поставщиками программного обеспечения.  
  
> [!NOTE]  
>  Решение о поддержке пользовательских элементов отчетов на сервере отчетов принимает системный администратор. Чтобы можно было просматривать пользовательские элементы в отчете, компоненты CRI должны быть установлены на системе клиента, создающего отчеты, для предварительного просмотра отчета и на сервере отчетов для просмотра опубликованного или переданного отчета. Дополнительные сведения см. в разделе [Пользовательские элементы отчета](../../reporting-services/custom-report-items/custom-report-items.md) и в документации стороннего поставщика программного обеспечения.  
  
 Некоторые пользовательские элементы в отчете могут быть преобразованы в элементы отчета в новом формате определения отчета. Используйте следующий список, чтобы решить, следует ли преобразовать пользовательские элементы в этом отчете.  
  
-   **Да** Выберите **Да** , чтобы преобразовать все пользовательские элементы в отчете, где возможно. Неподдерживаемые функции в пользовательских элементах отчета нельзя обновить и удалить из файла определения отчета. При просмотре отчета можно увидеть различия в способах отображения пользовательских элементов в отчете.  
  
-   **Нет** Выберите **Нет** , если не нужно преобразовать пользовательские элементы в отчете. Эти пользовательские элементы отчета в их текущей версии невозможно отобразить с помощью обработчика отчета. Если системный администратор планирует установить новую версию пользовательского элемента отчета от стороннего поставщика программного обеспечения, которая совместима с новым форматом определения отчета, то следует выбрать **Нет**. До тех пор, пока не появятся новые версии, пользовательские элементы отчета отображаются в отчете как пустые текстовые поля с красным символом «X».  
  
 В обоих случаях отчет обновляется до нового формата определения отчета и резервная копия исходного отчета сохраняется как *\<Report Name>* `-` Backup.rdl. При сохранении отчета в средстве создания отчетов выполняется сохранение обновленного отчета в новом формате определения отчета. Если отчет публикуется, то отчет сначала сохраняется в компьютере пользователя, а затем публикуется на сервере отчетов. Обновленная версия отчета публикуется на сервере отчетов.  
  
 Если отчет не сохраняется, то исходный отчет остается неизмененным. Однако нельзя изменить этот отчет в версии SQL Server 2016 среды [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] или в среде разработки отчетов, использующей более новый формат определения отчета. Вы можете продолжить выполнять исходную версию отчета, передав ее на сервер отчетов [!INCLUDE[ssRSCurrent](../../includes/ssrscurrent-md.md)] с помощью веб-портала. Дополнительные сведения см. в разделе [Веб-портал](../../reporting-services/web-portal-ssrs-native-mode.md).  
  
 Для отчетов, которые передаются вместо публикации на сервере отчетов, обработчик отчета отчета определяет, можно ли обновить отчет при первом использовании. Отчеты, которые нельзя обновить, обрабатываются в режиме обратной совместимости и продолжают отображаться, как в предыдущей версии служб [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].  

## <a name="next-steps"></a>Дальнейшие шаги

[Обновление и перенос служб Reporting Services](../../reporting-services/install-windows/upgrade-and-migrate-reporting-services.md)   
[Критические изменения в службах SQL Server Reporting Services в выпуске SQL Server 2016](../breaking-changes-in-sql-server-reporting-services-in-sql-server-2016.md)   
[Изменения в работе служб SQL Server Reporting Services в выпуске SQL Server 2016](../behavior-changes-to-sql-server-reporting-services-in-sql-server-2016.md)   
[Неподдерживаемые возможности в службах SQL Server Reporting Services в версии SQL Server 2016](../../reporting-services/behavior-changes-to-sql-server-reporting-services-in-sql-server-2016.md)   
[Пользовательские элементы отчета](../../reporting-services/custom-report-items/custom-report-items.md)   
[Обновление базы данных сервера отчетов](../../reporting-services/install-windows/upgrade-a-report-server-database.md)  

Остались вопросы? [Посетите форум служб Reporting Services](https://go.microsoft.com/fwlink/?LinkId=620231).
