---
title: Учебник. Добавление гистограммы к отчету (построитель отчетов) | Документы Майкрософт
description: Узнайте, как создать отчет Reporting Services с разбивкой на страницы, содержащий гистограмму с рядом в виде набора вертикальных столбцов, сгруппированных по категории.
ms.date: 09/02/2016
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: reporting-services
ms.topic: conceptual
ms.assetid: 63480059-b7b9-44b5-9d7f-91780db708b6
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 23796da12c2b987dfad6f023d40e9975cb301e28
ms.sourcegitcommit: 9e2c682929ee64c051dc62f8917d147861f7c635
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2020
ms.locfileid: "93043770"
---
# <a name="tutorial-add-a-column-chart-to-your-report-report-builder"></a>Руководство по Добавление гистограммы в отчет (построитель отчетов)
В этом учебнике вы создадите отчет [!INCLUDE[ssRSnoversion_md](../includes/ssrsnoversion-md.md)] с разбивкой на страницы, содержащий гистограмму с рядом в виде набора вертикальных столбцов, сгруппированных по категории. 

Гистограммы удобно использовать в следующих целях:  
  
-   отображение изменений данных в течение периода времени;  
-   сравнение относительных значений нескольких рядов.  
-   отображение скользящего среднего для показа трендов.  
  
На следующем рисунке показывается создаваемая столбцовая диаграмма со скользящим средним.  
  
![Снимок экрана, показывающий гистограмму построителя отчетов.](../reporting-services/media/report-builder-column-chart-tutorial.png)    
> [!NOTE]  
> В этом учебнике шаги работы с мастером объединены в одну процедуру. Пошаговые инструкции по переходу к серверу отчетов, выбору источника данных и созданию набора данных см. в первом учебнике этой серии: [Учебник. Создание простого табличного отчета &#40;построитель отчетов&#41;](../reporting-services/tutorial-creating-a-basic-table-report-report-builder.md).  
  
На изучение этого руководства потребуется примерно 15 минут.  
  
## <a name="requirements"></a>Требования  
Дополнительные сведения о требованиях см. в разделе [Предварительные условия для использования учебников (построитель отчетов)](../reporting-services/prerequisites-for-tutorials-report-builder.md).  
  
## <a name="1-create-a-chart-report-from-the-chart-wizard"></a><a name="Chart"></a>1. Создание отчета с диаграммой с помощью мастера диаграмм  
В этом разделе вы создадите внедренный набор данных с помощью мастера диаграмм, выберите общий источник данных и создадите гистограмму.  
  
> [!NOTE]  
> В этом учебнике запрос уже содержит значения данных, поэтому внешний источник данных не требуется. В связи с этим запрос получается весьма длинным. В рабочей среде запрос не будет содержать данные. Этот запрос содержит данные только в учебных целях.  
  
### <a name="to-create-a-chart-report"></a>Создание отчета с диаграммой  
  
1.  [Запустите построитель отчетов](../reporting-services/report-builder/start-report-builder.md) с компьютера, веб-портала [!INCLUDE[ssRSnoversion_md](../includes/ssrsnoversion-md.md)] или сервера в режиме интеграции с SharePoint.  
  
    Откроется диалоговое окно **Создать отчет или набор данных** .  
  
    Если диалоговое окно **Новый отчет или набор данных** не появилось, в меню **Файл** выберите команду **Создать**.  
  
2.  Убедитесь, что на левой панели выбран **Новый отчет** .  
  
3.  На правой панели выберите **Мастер диаграмм**.  
  
4.  На странице **Выбор набора данных** нажмите кнопку **Создать набор данных** , а затем кнопку **Далее**.  
  
5.  На странице **Выбор соединения с источником данных** выберите существующий источник данных или перейдите к серверу отчетов и выберите источник данных, а затем нажмите кнопку **Далее**. Может потребоваться указать имя пользователя и пароль.  
  
    > [!NOTE]  
    > При наличии необходимых разрешений выбор источника данных не имеет существенного значения. Этот источник данных не будет использоваться для получения данных. Дополнительные сведения см. в разделе [Альтернативные способы создания подключения к данным &#40;построитель отчетов&#41;](../reporting-services/alternative-ways-to-get-a-data-connection-report-builder.md).  
  
6.  На странице **Проектирование запроса** нажмите кнопку **Изменить как текст**.  
  
7.  На панель запроса вставьте следующий запрос:  
  
    ```  
    SELECT CAST('2015-01-01' AS date) AS SalesDate, CAST(54995.21 AS money) AS Sales  
    UNION SELECT CAST('2015-01-05' AS date) AS SalesDate, CAST(64499.04 AS money) AS Sales  
    UNION SELECT CAST('2015-02-11' AS date) AS SalesDate, CAST(37821.79 AS money) AS Sales  
    UNION SELECT CAST('2015-03-18' AS date) AS SalesDate, CAST(53633.08 AS money) AS Sales  
    UNION SELECT CAST('2015-04-23' AS date) AS SalesDate, CAST(24019.3 AS money) AS Sales  
    UNION SELECT CAST('2015-05-01' AS date) AS SalesDate, CAST(93245.5 AS money) AS Sales  
    UNION SELECT CAST('2015-06-06' AS date) AS SalesDate, CAST(55288.0 AS money) AS Sales  
    UNION SELECT CAST('2015-06-16' AS date) AS SalesDate, CAST(68733.5 AS money) AS Sales  
    UNION SELECT CAST('2015-07-16' AS date) AS SalesDate, CAST(24750.85 AS money) AS Sales  
    UNION SELECT CAST('2015-08-23' AS date) AS SalesDate, CAST(43452.3 AS money) AS Sales  
    UNION SELECT CAST('2015-09-24' AS date) AS SalesDate, CAST(58656. AS money) AS Sales  
    UNION SELECT CAST('2015-10-15' AS date) AS SalesDate, CAST(44583. AS money) AS Sales  
    UNION SELECT CAST('2015-11-21' AS date) AS SalesDate, CAST(81568. AS money) AS Sales  
    UNION SELECT CAST('2015-12-15' AS date) AS SalesDate, CAST(45973. AS money) AS Sales  
    UNION SELECT CAST('2015-12-26' AS date) AS SalesDate, CAST(96357. AS money) AS Sales  
    UNION SELECT CAST('2015-12-31' AS date) AS SalesDate, CAST(81946. AS money) AS Sales  
    ```  
  
8.  Нажмите кнопку "Выполнить" ( **!** ), чтобы просмотреть данные, на основе которых будет создана диаграмма (необязательно).  
  
9. Щелкните **Далее**.  
  
## <a name="2-choose-the-chart-type"></a><a name="ChartType"></a>2. Выбор типа диаграммы  
Вы можете выбрать один из нескольких стандартных типов диаграмм, а затем изменить диаграмму после завершения работы мастера.  
  
### <a name="to-add-a-column-chart"></a>Добавление гистограммы  
  
1.  На странице **Выбор типа диаграммы** в качестве типа диаграммы по умолчанию задана гистограмма. Щелкните **Далее**.  
  
2.  На странице **Расположение полей диаграммы** перетащите поле "ДатаПродаж" в **Категории**. Категории отображаются по горизонтальной оси.  
  
3.  Перетащите поле "Продажи" в область **Значения**. В поле **Значения** отображается выражение Sum(Продажи), так как общее значение строки суммируется для каждой даты заказа на продажу. Значения отображаются по вертикальной оси.  
  
4.  Щелкните **Далее**.  
 
6.  Нажмите кнопку **Готово**.  
  
    Диаграмма добавляется в область конструктора. Обратите внимание на то, что в новой гистограмме приводится образец данных. В условных обозначениях указано "Дата продажи А", "Дата продажи Б" и т. д. для того, чтобы дать общее представление, как будет выглядеть отчет. 
    
    ![Снимок экрана столбца построителя отчетов в режиме конструктора.](../reporting-services/media/report-builder-column-chart-1-design-view.png)
  
7.  Щелкните диаграмму, чтобы отобразить ее маркеры. Перетащите правый нижний угол диаграммы вниз, чтобы увеличить ее размер. Обратите внимание, что область конструктора отчета увеличивается для соответствия размеру диаграммы.  
  
8.  Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  

    ![Снимок экрана, показывающий предварительный просмотр гистограммы построителя отчетов.](../reporting-services/media/report-builder-column-chart-1-preview.png)

Обратите внимание, что на горизонтальной оси диаграммы имеются метки не для всех категорий. По умолчанию включаются только метки, расположенные рядом с осью. 
  
## <a name="3-format-a-date-on-the-horizontal-axis"></a><a name="Horizontal"></a>3. Форматирование даты по горизонтальной оси  
По умолчанию по горизонтальной оси отображаются значения в общем формате, который автоматически масштабируется в соответствии с размером диаграммы.  
  
1.  Переключитесь в режим конструктора отчета.  
  
2.  Щелкните правой кнопкой мыши горизонтальную ось и выберите пункт **Свойства горизонтальной оси**.  
  
3.  На вкладке **Число** в поле **Категория** выберите **Дата**.  
  
5.  В поле **Тип** выберите **31 января 2000 года**.  
  
6.  [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
7.  На вкладке "Главная" нажмите кнопку **Выполнить** для предварительного просмотра отчета.  
  
Дата отображается в выбранном формате дат. На горизонтальной оси диаграммы по-прежнему имеются метки не для всех категорий. 

![Снимок экрана с гистограммой построителя отчетов, отображающий формат даты.](../reporting-services/media/report-builder-column-chart-2-preview.png)
  
Можно настроить отображение меток, повернув их и указав интервал.  
  
## <a name="4-rotate-the-axis-labels-on-the-horizontal-axis"></a>4. Поворот меток на горизонтальной оси  
  
1.  Переключитесь в режим конструктора отчета.  
  
2.  Щелкните правой кнопкой мыши заголовок горизонтальной оси и выберите команду **Отобразить заголовок оси** , чтобы удалить заголовок. Так как на горизонтальной оси отображаются даты, заголовок не нужен.  
  
3.  Щелкните правой кнопкой мыши горизонтальную ось и выберите пункт **Свойства горизонтальной оси**.  
  
5.  На вкладке **Метки** В разделе **Изменить параметры автоподбора размера метки оси** выберите параметр **Отключить автоподбор размера**.  
  
7.  В поле **Угол поворота метки** выберите значение **-90**.  
  
8.  [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
    Образец текста для горизонтальной оси поворачивается на 90 градусов.  
    
    ![Снимок экрана гистограммы построителя отчетов с перевернутым текстом оси Х в представлении конструктора.](../reporting-services/media/report-builder-column-chart-rotate-x-axis.png)
  
9. Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  
  
Метки на диаграмме будут повернуты.  

![Снимок экрана, показывающий предварительный просмотр гистограммы построителя отчетов с перевернутым текстом оси Х.](../reporting-services/media/report-builder-column-chart-rotate-x-axis-preview.png)
  
## <a name="5-move-the-legend"></a><a name="Legend"></a>5. Перемещение условных обозначений  
Условные обозначения автоматически создаются на основе данных категорий и рядов. Условные обозначения можно переместить под область гистограммы.  
  
1.  Переключитесь в режим конструктора отчета.  
  
2.  Щелкните правой кнопкой мыши условные обозначения диаграммы и выберите пункт **Свойства условных обозначений**.  
  
3.  Выберите другое значение для параметра **Макет и положение**. Например, выберите положение внизу по центру.  
  
    Если условные обозначения перемесить в верхнюю или нижнюю часть диаграммы, их макет изменится с вертикального на горизонтальный. Можно выбрать другой макет в поле **Макет** .  
  
4.  [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
5.  Так как в этом учебнике имеется только одна категория, условные обозначения не требуются (необязательно). Чтобы удалить условные обозначения, щелкните их правой кнопкой мыши и выберите команду **Удалить условные обозначения**.  
  
6.  Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  
  
## <a name="6-title-the-chart"></a><a name="ChartTitle"></a>6. Задание заголовка для диаграммы  
    
1.  Переключитесь в режим конструктора отчета.  
  
2.  В верхней области диаграммы выберите слова **Заголовок диаграммы** и введите **Всего заказов на продажу по магазинам**.  
  
3.  Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  
  
## <a name="7-format-and-label-the-vertical-axis"></a><a name="Vertical"></a>7. Форматирование и задание меток для вертикальной оси  
По умолчанию по вертикальной оси отображаются значения в общем формате, который автоматически масштабируется в соответствии с размером диаграммы.   
  
1.  Переключитесь в режим конструктора отчета.  
  
2. Чтобы выбрать метки, щелкните их на вертикальной оси в левой части диаграммы.  
  
3.  На вкладке **Главная** в группе **Число** нажмите кнопку **Валюта**. Метки оси изменятся, отображая формат валюты.  
  
4.  Дважды нажмите кнопку **Уменьшить число десятичных разрядов** , чтобы число отображалось с округлением до ближайшего целого значения доллара.  
  
5.  Щелкните правой кнопкой мыши вертикальную ось и выберите пункт **Свойства вертикальной оси**.  
  
6.  Обратите внимание на то, что на вкладке **Число** значение **Валюта** уже выбрано в поле **Категория** , а для параметра **Число десятичных разрядов** уже задано значение **0** (ноль).  
  
7.  Установите флажок **Показывать значения в**. Уже выбрано значение **Тысячи** .  
  
8.  [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
9. Щелкните правой кнопкой мыши вертикальную ось и выберите пункт **Отобразить заголовок оси**. 

10. Щелкните правой кнопкой мыши заголовок вертикальной оси и выберите пункт **Свойства заголовка оси**.  
  
10. Замените текст в поле **Текст заголовка** текстом **Общий объем продаж (в тысячах)** . Можно также указать несколько параметров, связанных с форматом заголовка.  
  
11. [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
12. Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  

    ![Снимок экрана с предварительным просмотром гистограммы построителя отчетов с осью Y, обозначенной правильно.](../reporting-services/media/report-builder-column-chart-format-y-axis.png)
    
## <a name="8-show-all-the-labels-on-the-horizontal-x-axis"></a>8. Отображение всех меток на горизонтальной оси (x)

Можно заметить, что на оси x отображаются только некоторые метки. В этом разделе вы зададите свойство на панели "Свойства", чтобы отображались все метки.

1.  Переключитесь в режим конструктора отчета.  
  
2.  Щелкните диаграмму, а затем выберите метки на горизонтальной оси.

3. На панели "Свойства" присвойте свойству LabelInterval значение 1.

    ![Снимок экрана: настройка интервала между метками на гистограмме построителя отчетов.](../reporting-services/media/report-builder-column-chart-set-label-interval.png)

    В режиме конструктора диаграмма выглядит так же. 
    
5.  Нажмите кнопку **Выполнить** для предварительного просмотра отчета.

    ![Снимок экрана, показывающий предварительный просмотр гистограммы построителя отчетов с интервалом между метками, установленным на один.](../reporting-services/media/report-builder-column-chart-label-interval-one-preview.png)
    
    Теперь на диаграмме отображаются все метки.
  
## <a name="9-add-a-moving-average-with-a-calculated-series"></a><a name="Average"></a>9. Добавление скользящего среднего с помощью вычисляемого ряда  

Скользящее среднее — это среднее по данным в ряде, вычисленное за некоторый период времени. С помощью скользящего среднего можно выявлять тенденции.
  
1.  Переключитесь в режим конструктора отчета.  
  
2.  Дважды щелкните диаграмму, чтобы отобразить панель **Данные диаграммы** .  
  
3.  Щелкните правой кнопкой мыши поле **[Sum(Продажи)]** в области **Значения** и выберите команду **Добавить вычисляемый ряд**.  

     ![Снимок экрана, показывающий, как добавлять вычисляемые ряды к гистограмме построителя отчетов.](../reporting-services/media/report-builder-column-chart-add-calculated-series.png)
  
4.  Убедитесь в том, что в поле **Формула** выбрано **Скользящее среднее** .  
  
5.  В разделе **Задание параметров формулы** для параметра **Период** задайте значение **4**.  
  
6.  На вкладке **Граница** в поле **Ширина линии** выберите значение **3 пт**.  
  
8.  [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
9. Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  
  
На диаграмме отображается линия, показывающая скользящее среднее для общих продаж по дате, усредненное по каждым четырем дням. Узнайте больше о [добавлении скользящего среднего в диаграмму](../reporting-services/report-design/add-a-moving-average-to-a-chart-report-builder-and-ssrs.md). 

![Снимок экрана гистограммы построителя отчетов, описывающей скользящее среднее.](../reporting-services/media/report-builder-column-chart-moving-average.png)
  
## <a name="10-add-a-report-title"></a><a name="Title"></a>10. Добавление заголовка отчета  
  
1.  Переключитесь в режим конструктора отчета.  
  
2.  В области конструктора щелкните ссылку **Щелкните, чтобы добавить заголовок**.  
  
3.  Введите **Диаграмма продаж** , нажмите клавишу ВВОД и введите **Январь — декабрь 2015 г.** , после чего он будет выглядеть следующим образом:  
  
    **Диаграмма продаж**  
  
    **Январь — декабрь 2015 г.**  
  
4.  Выберите **Диаграмма продаж** , а затем на вкладке **Главная** в разделе **Шрифт** нажмите кнопку **Полужирный**.  
  
5.  Выберите **Январь — декабрь 2015 г.** и на вкладке **Главная** в разделе **Шрифт** выберите размер шрифта **10**.  
  
6.  Может потребоваться увеличить высоту текстового поля **Заголовок** для соответствия размерам двух строк текста (необязательно). Щелкнув в центре нижнего края, перетащите двунаправленную стрелку вниз. Вам может потребоваться перетащить верхний край диаграммы, чтобы заголовок не накладывался на нее.  
  
    Этот заголовок отображается в верхней части отчета. При отсутствии верхнего колонтитула страницы элементы в верхней части текста отчета выполняют роль заголовка отчета.  
  
7.  Нажмите кнопку **Выполнить** для предварительного просмотра отчета.  
  
## <a name="11-save-the-report"></a><a name="Save"></a>11. Сохранение отчета  
  
### <a name="to-save-the-report"></a>Сохранение отчета  
  
1.  Переключитесь в режим конструктора отчета.  
  
2.  Нажмите кнопку «Построитель отчетов» и выберите **Сохранить как**.  

    Отчет можно сохранить на своем компьютере или на сервере отчетов.
  
3.  В поле **Имя** введите **Гистограмма заказов на продажу**.  
  
4.  Выберите команду **Сохранить**.  
  
## <a name="next-steps"></a>Next Steps  
Учебник «Добавление гистограммы к отчету» завершен. Дополнительные сведения о диаграммах см. в разделах [Диаграммы (построитель отчетов и службы SSRS)](../reporting-services/report-design/charts-report-builder-and-ssrs.md) и [Спарклайны и гистограммы (построитель отчетов и службы SSRS)](../reporting-services/report-design/sparklines-and-data-bars-report-builder-and-ssrs.md).  
  
## <a name="see-also"></a>См. также:  
-    [Учебники по построителю отчетов](../reporting-services/report-builder-tutorials.md) 
-    [Построитель отчетов в SQL Server](../reporting-services/report-builder/report-builder-in-sql-server-2016.md)  
  

