---
title: Обновление. Мастер установки (настройка)
description: Мастер установки SQL Server обеспечивает обновление на месте всех компонентов SQL Server до последней версии SQL Server с помощью единого дерева компонентов.
ms.custom: seo-lt-2019
ms.date: 12/13/2019
ms.prod: sql
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- upgrading Database Engine
- Database Engine [SQL Server], upgrading
ms.assetid: cef118a5-a7ce-4bfa-8b9d-c81996284cfc
author: cawrites
ms.author: chadam
monikerRange: '>=sql-server-2016'
ms.openlocfilehash: a5621b9444d56307d21855c9b07aefe736d382d0
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100353849"
---
# <a name="upgrade-sql-server-using-the-installation-wizard-setup"></a>Обновление SQL Server с помощью мастера установки (программа установки)

[!INCLUDE [SQL Server -Windows Only](../../includes/applies-to-version/sql-windows-only.md)]

Мастер установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обеспечивает обновление на месте всех компонентов [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] до последней версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]с помощью единого дерева компонентов.  
  
>[!WARNING]  
>При обновлении [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предыдущая версия [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] будет перезаписана и перестанет существовать на компьютере. 
>
>Перед обновлением создайте резервную копию баз данных SQL Server и других объектов, связанных с экземпляром предыдущей версии SQL Server.  
  
> [!CAUTION]  
> Для многих рабочих сред и некоторых сред разработки предпочтительнее обновление новой установки или последовательное обновление, чем обновление на месте.  Дополнительные сведения о методах обновления см. в следующих разделах:
> * [Выбор метода обновления ядра СУБД](../../database-engine/install-windows/choose-a-database-engine-upgrade-method.md)
> * [Обновление служб Data Quality Services](../../database-engine/install-windows/upgrade-data-quality-services.md)
> * [Обновление служб Integration Services](../../integration-services/install-windows/upgrade-integration-services.md)
> * [Обновление служб Master Data Services](../../database-engine/install-windows/upgrade-master-data-services.md)
> * [Обновление и перенос служб Reporting Services](../../reporting-services/install-windows/upgrade-and-migrate-reporting-services.md)
> * [Обновление служб Analysis Services](../../database-engine/install-windows/upgrade-analysis-services.md)
> * [Обновление Power Pivot для SharePoint](../../database-engine/install-windows/upgrade-power-pivot-for-sharepoint.md).  
  
## <a name="prerequisites"></a>Предварительные требования  
Необходимо запустить программу установки с правами администратора. При установке [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] из удаленной общей папки необходимо пользоваться учетной записью домена, имеющей разрешения на чтение и выполнение в удаленной общей папке и являющейся локальным администратором.  
  
> [!WARNING]  
>  Не забудьте, что во время обновления невозможно ни изменять обновляемые компоненты, ни добавлять их. Дополнительные сведения о добавлении компонентов к обновляемому экземпляру [!INCLUDE[ssnoversion](../../includes/ssnoversion-md.md)] после завершения обновления см. в статье [Добавление компонентов в экземпляр SQL Server (программа установки)](./add-features-to-an-instance-of-sql-server-setup.md).  
  
 Если вы обновляете [!INCLUDE[ssDE](../../includes/ssde-md.md)], ознакомьтесь со статьей [Составление и тестирование плана обновления Database Engine](../../database-engine/install-windows/plan-and-test-the-database-engine-upgrade-plan.md) и выполните следующие задачи, подходящие для вашей среды.  
  
-   Создайте резервные копии всех файлов баз данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обновляемых экземпляров, чтобы при необходимости можно было восстановить их.  
  
-   Выполните в обновляемых базах данных соответствующие команды DBCC, чтобы убедиться в том, что они находятся в согласованном состоянии.  
  
-   Оцените, сколько места на диске, помимо занимаемого пользовательскими базами данных, понадобится для обновления компонентов SQL Server. Дополнительные сведения о том, сколько места на диске занимают компоненты SQL Server, см. в разделе [Требования к оборудованию и программному обеспечению для установки SQL Server](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).  
  
-   Убедитесь в том, что существующие системные базы данных SQL Server (master, model, msdb и tempdb) настроены для автоматического увеличения и что для них имеется достаточно места на диске.  
  
-   Убедитесь в том, что все серверы баз данных имеют регистрационные данные для входа в базу данных master. Это важно для восстановления базы данных, поскольку системные регистрационные данные для входа хранятся в базе данных master.  
  
-   Отключите все хранимые процедуры, запускаемые при старте системы. Это необходимо, так как процесс обновления будет останавливать и запускать службы в обновляемом экземпляре SQL Server. Хранимые процедуры, запускаемые при старте системы, могут блокировать процесс обновления.  
  
-   При обновлении экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , для которых агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обнаружил связи MSX/TSX, обновите целевые серверы перед обновлением главных серверов. Если обновить главные серверы раньше целевых серверов, агент [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не сможет подключиться к главным экземплярам [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
-   Закройте все приложения, а также службы, имеющие зависимости от SQL Server. При наличии локальных приложений, подключенных к обновляемому экземпляру, процесс обновления может завершиться ошибкой.  
  
-   Убедитесь, что репликация обновлена и остановите репликацию.   
    Подробное описание процедуры последовательного обновления в реплицируемой среде см. в разделе [Обновление реплицируемых баз данных](../../database-engine/install-windows/upgrade-replicated-databases.md).
  
## <a name="procedure"></a>Процедура  
  
### <a name="to-upgrade-ssnoversion"></a>Обновление [!INCLUDE[ssNoversion](../../includes/ssnoversion-md.md)]  
  
1.  Вставьте установочный носитель [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , перейдите в корневую папку и дважды щелкните файл Setup.exe. Чтобы выполнить установку из общего сетевого ресурса, перейдите в его корневой каталог и дважды щелкните файл Setup.exe.  
  
2.  Мастер установки запускает центр установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Чтобы обновить существующий экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], щелкните **Установка** в области навигации слева, затем выберите **Обновление с**  предыдущие версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
3.  На странице «Ключ продукта» выберите вариант, чтобы указать, производится ли обновление до бесплатного выпуска [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], или имеется ключ PID для рабочей версии этого продукта. Дополнительные сведения см. в статьях [Выпуски и компоненты SQL Server 2016](../../sql-server/editions-and-components-of-sql-server-2016.md) и [Поддерживаемые обновления версий и выпусков](../../database-engine/install-windows/supported-version-and-edition-upgrades.md).  
  
4.  На странице «Условия лицензии» просмотрите лицензионное соглашение. Если вы с ним согласны, установите флажок **Я принимаю условия лицензионного соглашения** и нажмите кнопку **Далее**. Чтобы помочь в улучшении [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно также включить параметр наблюдения за использованием компонентов и отправлять отчеты в [!INCLUDE[msCoName](../../includes/msconame-md.md)].  
  
5.  В окне «Глобальные правила» процедура установки автоматически перейдет к окну «Обновления продукта», если ошибок правил нет.  
  
6.  Затем появится страница обновления [!INCLUDE[msCoName](../../includes/msconame-md.md)] , если не установлен флажок обновления [!INCLUDE[msCoName](../../includes/msconame-md.md)] в параметрах «Панели управления\Все элементы панели управления\Обновление Windows\Изменения». Установка флажка на странице обновления [!INCLUDE[msCoName](../../includes/msconame-md.md)] изменит параметры компьютера так, чтобы применялись последние обновления при просмотре в центре обновления Windows.  
  
7.  На странице «Обновление продукта» приведены последние обновления продукта [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Если устанавливать обновления не требуется, снимите флажок **Включить обновления продукта [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** . Если обновлений продукта не обнаружено, программа установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не выводит на экран эту страницу и сразу переходит на страницу **Установка файлов** .  
  
8.  На странице «Установка установочных файлов» программа установки отображает индикаторы хода загрузки, извлечения и установки установочных файлов. При обнаружении обновления программы установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] оно также будет установлено, если указано, что его следует использовать.  
  
9. В окне «Обновление правил» процедура установки автоматически перейдет к окну «Выбор экземпляра», если ошибок правил нет.  
  
10. На странице «Выбор экземпляра» укажите экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , который необходимо обновить. Чтобы обновить общие компоненты и средства управления, выберите **Обновить только общие компоненты**.  
  
11. На странице «Выбор компонентов» автоматически выделяются обновляемые компоненты. После выбора компонента описание его группы отображается в правой панели окна.  
  
     Требования для выбранных компонентов показаны на правой панели. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установит обязательный компонент, который еще не был установлен, в шаге установки, описанном ниже в данной процедуре.  
  
    > [!NOTE]  
    >  Если было решено обновить общие компоненты путем выбора **\<Upgrade shared features only>** на странице **Выбор экземпляра**, все общие компоненты будут выбраны заранее на странице выбора компонентов. Все общие компоненты обновляются одновременно.  
  
12. На странице «Конфигурация экземпляра» укажите идентификатор экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
     **Идентификатор экземпляра** — по умолчанию в качестве идентификатора экземпляра используется его имя. Предназначен для идентификации каталогов установки и разделов реестра для данного экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Действует как для экземпляров по умолчанию, так и для именованных экземпляров. Для экземпляра по умолчанию именем и идентификатором экземпляра является «MSSQLSERVER». Чтобы задать идентификатор экземпляра, отличный от заданного по умолчанию, введите значение в поле **Идентификатор экземпляра** .  
  
     Все обновления [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (в том числе и пакеты обновления) применяются к каждому из компонентов экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
     **Установленные экземпляры** — в этой сетке перечислены все экземпляры [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], установленные на компьютере, на котором запущена программа установки. Поскольку экземпляр по умолчанию на компьютере уже имеется, необходимо установить именованный экземпляр [!INCLUDE[ssnoversion](../../includes/ssnoversion-md.md)].  
  
13. Набор операций, оставшихся в этой статье, зависит от того, какие компоненты были выбраны для установки. В зависимости от сделанного выбора могут отображаться не все страницы.  
  
14. На странице "Конфигурация сервера: учетные записи служб" для служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] отображаются учетные записи по умолчанию. Набор служб, которые можно настроить на этой странице, зависит от компонентов, выбранных для обновления.  
  
     Сведения для проверки подлинности и имена входа будут перенесены из предыдущего экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Можно назначить одну учетную запись входа всем службам [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или настроить учетные записи служб индивидуально. Можно также указать, будут службы запускаться автоматически или вручную либо будут отключены. [!INCLUDE[msCoName](../../includes/msconame-md.md)] рекомендует настраивать учетные записи служб индивидуально, предоставляя каждой из служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] минимальные разрешения, необходимые для выполнения ее задач. Дополнительные сведения см. в статье [Настройка учетных записей службы Windows и разрешений](../../database-engine/configure-windows/configure-windows-service-accounts-and-permissions.md).  
  
     Чтобы задать одну учетную запись входа для всех учетных записей служб этого экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], укажите учетные данные в полях, которые находятся в нижней части страницы.  
  
     **Примечание по безопасности** [!INCLUDE[ssNoteStrongPass](../../includes/ssnotestrongpass-md.md)]  
  
     После ввода данных входа для служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] нажмите кнопку **Далее**.  
  
15. На странице «Параметры обновления полнотекстового поиска» укажите параметры обновления для обновляемых баз данных. Дополнительные сведения см. в разделе [Параметры обновления полнотекстового поиска](./install-sql-server.md).  
  
16. Если все правила удовлетворены, окно «Правила компонентов» автоматически сменится следующим.  
  
17. На странице готовности к обновлению отображается представление параметров установки в виде дерева, заданных в программе установки. Чтобы продолжить, нажмите кнопку **Установить**. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Программа установки вначале устанавливает требуемые компоненты для выбранных средств, затем устанавливает сами средства.  
  
18. Во время установки на странице выполнения установки отображается состояние установки, позволяющее наблюдать за ее ходом.  
  
19. После установки на странице Завершение будет приведена ссылка на файл сводного журнала установки и даны другие важные примечания. Чтобы завершить процесс установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , нажмите кнопку **Готово**.  
  
20. Если будет предложено перезагрузить компьютер, выполните перезагрузку. После завершения установки важно прочитать сообщение мастера установки. Дополнительные сведения о файлах журналов установки см. в разделе [Просмотр и чтение файлов журналов программы установки SQL Server](../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md).  
  
## <a name="next-steps"></a>Next Steps  
 После обновления до [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]выполните следующие задачи.  
  
-   **Регистрация серверов:** в процессе обновления удаляются настройки реестра для предыдущего экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. После обновления необходимо заново зарегистрировать серверы.  
  
-   **Обновление статистики** — чтобы оптимизировать производительность запросов, рекомендуется обновить статистику для всех обновленных баз данных. Вызовите хранимую процедуру **sp_updatestats**, чтобы обновить статистику в пользовательских таблицах баз данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
-   **Настройка новой установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]**  — чтобы уменьшить уязвимую контактную зону системы, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] по выбору устанавливает и активирует ключевые службы и функции. Дополнительные сведения о настройке контактной зоны см. в файле Readme для данной версии.  
  
## <a name="see-also"></a>См. также:  
 [Обновление SQL Server](../../database-engine/install-windows/upgrade-sql-server.md)   
 [Обратная совместимость_удалено](/previous-versions/sql/sql-server-2016/cc280407(v=sql.130))  
  
