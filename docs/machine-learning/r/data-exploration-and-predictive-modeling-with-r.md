---
title: Прогнозирующее моделирование с помощью R
description: В этой статье описываются улучшения процесса обработки и анализа данных, которые становятся возможными благодаря интеграции с SQL Server.
ms.prod: sql
ms.technology: machine-learning-services
ms.date: 04/15/2018
ms.topic: how-to
author: dphansen
ms.author: davidph
ms.custom: seo-lt-2019
monikerRange: '>=sql-server-2016||>=sql-server-linux-ver15'
ms.openlocfilehash: 283eaa89b214e9324e6b63bffe34735f6067bd39
ms.sourcegitcommit: 1a544cf4dd2720b124c3697d1e62ae7741db757c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97470885"
---
# <a name="data-exploration-and-predictive-modeling-with-r-in-sql-server"></a>Изучение данных и прогнозное моделирование с помощью R в SQL Server
[!INCLUDE [SQL Server 2016 and later](../../includes/applies-to-version/sqlserver2016.md)]

В этой статье описываются улучшения процесса обработки и анализа данных, которые становятся возможными благодаря интеграции с SQL Server.

## <a name="the-data-science-process"></a>Процесс обработки и анализа данных

Специалисты по анализу данных часто используют R для изучения данных и построения прогнозных моделей. Обычно это итеративный процесс проб и ошибок, повторяющихся до получения хорошей прогнозной модели. Как опытный специалист, вы можете подключиться к базе данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , передать данные на локальную рабочую станцию с помощью пакета RODBC, изучить их и создать прогнозную модель с использованием стандартных пакетов R.

Однако этот подход имеет множество недостатков, которые затрудняют более широкое внедрение R на предприятии. 

+ Перемещение данных может быть медленным, неэффективным или небезопасным.
+ Сам язык R имеет ограничения по производительности и масштабируемости.

Эти недостатки становятся более очевидными, когда требуется переместить и проанализировать большие объемы данных или использовать наборы данных, которые не помещаются в доступную на компьютере память.

Эти трудности можно преодолеть с помощью новых масштабируемых пакетов и функций R, включенных в состав [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]. 

## <a name="whats-different-about-revoscaler"></a>Отличия RevoScaleR

Пакет **RevoScaleR** содержит реализации для некоторых наиболее популярных функций R, переработанных для обеспечения параллелизма и масштабирования. Дополнительные сведения см. в статье [Распределенные вычисления с помощью RevoScaleR](/machine-learning-server/r/how-to-revoscaler-distributed-computing).

Кроме того, пакет RevoScaleR обеспечивает поддержку для изменения *контекста выполнения*. Это означает, что как для всего решения, так и для отдельной функции можно указать, что вычисления должны выполняться с использованием ресурсов того компьютера, где размещен экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , а не локальной рабочей станции. У такого подхода есть несколько преимуществ: предотвращение ненужного перемещения данных и больший объем вычислительных ресурсов на сервере.

## <a name="r-environment-and-packages"></a>Пакеты и среда R

Поддерживаемая в [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] среда R состоит из среды выполнения, языка с открытым исходным кодом и графического модуля, который поддерживают и расширяют несколько пакетов. Язык позволяет использовать множество расширений, реализуемых с помощью пакетов.  

### <a name="using-other-r-packages"></a>Использование других пакетов R

Кроме защищаемых библиотек R, входящих в состав Машинного обучения Майкрософт, в решении можно использовать почти любые пакеты R, в том числе:

+ Пакеты R общего назначения из открытых репозиториев. Можно получить популярные пакеты R с открытым исходным кодом из открытых репозиториев, таких как CRAN, где хранится более 6000 пакетов.
  
  Для платформы Windows пакеты R предоставляются в виде ZIP-файлов, которые можно скачать и установить по лицензии GPL.  
  
  Дополнительные сведения об установке пакетов сторонних разработчиков для использования с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]см. в статье [Install Additional R Packages on SQL Server](../../machine-learning/package-management/install-additional-r-packages-on-sql-server.md)  
  
+ Дополнительные пакеты и библиотеки, предоставляемые [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)].
  
     Пакет **RevoScaleR** включает в себя средства для высокопроизводительного анализа больших данных, улучшенные версии функций, поддерживающие распространенные задачи обработки и анализа данных, оптимизированные ученики для упрощенного алгоритма Байеса, линейной регрессии, моделей временных рядов и нейронных сетей, а также расширенные математические библиотеки.  
  
     Пакет **RevoPemaR** позволяет разрабатывать в R собственные параллельные алгоритмы внешней памяти.  
  
     Дополнительные сведения об этих пакетах и их применении см. в статьях [Что такое RevoScaleR](/machine-learning-server/r/concept-what-is-revoscaler) и [Начало работы с RevoPemaR](/machine-learning-server/r/how-to-developer-pemar). 

+ **MicrosoftML** содержит коллекцию отлично оптимизированных алгоритмов машинного обучения и преобразований данных от команды специалистов Майкрософт по обработке и анализу данных. Многие эти алгоритмы также применяются в Машинном обучении Azure. Дополнительные сведения см. в статье [MicrosoftML в SQL Server](ref-r-microsoftml.md).

### <a name="r-development-tools"></a>Средства разработки R

При разработке решения R обязательно скачайте Microsoft R Client. Этот бесплатный скачиваемый пакет содержит библиотеки, необходимые для поддержки удаленных контекстов вычислений и масштабируемых алгоритмов:

+ **[!INCLUDE[rsql_rro-noversion](../../includes/rsql-rro-noversion-md.md)].** Распространение среды выполнения R и набор пакетов, таких как библиотека математического ядра Intel, для повышения производительности стандартных операций R.  
  
+ **RevoScaleR.** Пакет R, позволяющий принудительно отправлять вычисления в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. [!INCLUDE[rsql_rre-noversion](../../includes/rsql-rre-noversion-md.md)]. содержит набор общих функций R, переработанных в целях повышения производительности и масштабируемости. Такие усовершенствованные функции имеют префикс **rx** . Он также включает поставщиков расширенных данных для различных источников. Эти функции начинаются с префикса **Rx**.

Вы можете использовать любой редактор кода на основе Windows, поддерживающий язык R, например [!INCLUDE[rsql_rtvs](../../includes/rsql-rtvs-md.md)] или RStudio. Кроме того, скачиваемые файлы [!INCLUDE[rsql_rro-noversion](../../includes/rsql-rro-noversion-md.md)] включают общие программы командной строки для R, например RGui.exe.

## <a name="use-new-data-sources-and-compute-contexts"></a>Использование новых источников данных и контекстов вычислений

При использовании пакета RevoScaleR для подключения к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] в коде R можно применить следующие функции:

+ **RxSqlServerData** из пакета RevoScaleR обеспечивает улучшенное подключение к данным для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
  
     Используйте ее в коде R для определения *источника данных*. Объект источника данных указывает сервер и таблицы, где находятся данные, и управляет чтением и записью данных в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
  
-   Пакет **RxInSqlServer** можно использовать для указания *контекста вычислений*.  Другими словами, можно указать, где именно следует выполнять код R — на локальной рабочей станции или на компьютере с экземпляром [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  Дополнительные сведения см. в разделе [Функции RevoScaleR](/machine-learning-server/r-reference/revoscaler/revoscaler).
  
     При задании контекста вычислений он затрагивает только вычисления, поддерживающие удаленный контекст выполнения. Это включает в себя операции R, предоставляемые пакетом RevoScaleR и связанными функциями. Как правило, решения R, основанные на стандартных пакетах CRAN, невозможно выполнять в удаленном контексте вычислений. Однако их можно выполнять на компьютере [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)], если они запущены с помощью T-SQL. Тем не менее с помощью функции `rxExec` можно вызывать отдельные функции R и выполнять их удаленно в [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)].

Примеры создания и использования источников данных и контекстов выполнения см. в следующих статьях:

+ [Глубокое погружение в обработку и анализ данных](../../machine-learning/tutorials/deepdive-data-science-deep-dive-using-the-revoscaler-packages.md)  
+  [Анализ данных с помощью Microsoft R](/machine-learning-server/r/how-to-introduction)

## <a name="deploy-r-code-to-production"></a>Развертывание кода R в рабочей среде

Важной частью процесса обработки и анализа данных является обмен результатами с другими специалистами или использование прогнозных моделей для улучшения бизнес-показателей или процессов. В [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]можно легко переместить в рабочую среду готовую модель или скрипт R.

Дополнительные сведения о перемещении кода для выполнения в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]см. в статье [Operationalizing Your R Code](../../machine-learning/r/operationalizing-your-r-code.md).

Обычно процесс развертывания начинается с очистки скрипта от ненужного в рабочей среде кода. При перемещении вычислений ближе к данным вы можете найти способы для более эффективного перемещения, обобщения и представления данных, вместо того чтобы выполнять все действия в R. Специалисту по анализу и обработке данных следует обратиться к разработчику базы данных с вопросами о повышении производительности, особенно в том случае, если решение выполняет задачи очистки данных или формирования признаков, которые могли бы быть более эффективными в SQL. Возможно, потребуется изменить процессы извлечения, преобразования и загрузки, чтобы рабочие процессы для создания или оценки модели выполнялись без сбоев, а входные данные имели нужный формат.

## <a name="see-also"></a>См. также:

[Сравнение базовых функций R с функциями RevoScaleR](/machine-learning-server/r-reference/revoscaler/revoscaler-compared-to-base-r)

[Библиотека RevoScaleR в SQL Server](ref-r-revoscaler.md)