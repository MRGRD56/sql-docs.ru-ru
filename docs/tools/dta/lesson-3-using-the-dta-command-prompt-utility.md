---
title: Использование программы командной строки dta
description: Сведения о том, как программа командной строки dta расширяет функциональные возможности помощника по настройке ядра СУБД SQL Server.
ms.custom: seo-lt-2019
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: sql-tools
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Database Engine [SQL Server], tutorials
ms.assetid: 30f27f4d-8852-4b12-ba62-57f63e496f1d
author: markingmyname
ms.author: maghan
ms.reviewer: ''
ms.openlocfilehash: 064d7fc2d47cbd4f688d113f60be6080ca90fee1
ms.sourcegitcommit: 370cab80fba17c15fb0bceed9f80cb099017e000
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "97642617"
---
# <a name="lesson-3-using-the-dta-command-prompt-utility"></a>Урок 3. Использование программы командной строки dta
 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]
Программа командной строки **dta** расширяет функциональные возможности помощника по настройке ядра СУБД.  
  
Применяя XML-схему помощника по настройке ядра СУБД, пользователь может создавать входные файлы данной программы с помощью удобных для себя средств XML. Эта схема устанавливается вместе со службами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и находится по следующему адресу: C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\schemas\sqlserver\2004\07\dta\dtaschema.xsd.  
  
XML-схема помощника по настройке ядра СУБД также доступна на [веб-сайте корпорации Майкрософт](https://go.microsoft.com/fwlink/?linkid=43100&clcid=0x409).  
  
XML-схема помощника по настройке ядра СУБД расширяет спектр параметров настройки. Например, с ее помощью можно проводить анализ гипотетических вариантов. При этом виде анализа задается набор существующих и допустимых структур физического проектирования для базы данных, которую необходимо настроить, а затем с использованием помощника по настройке ядра СУБД выполняется анализ данного набора, цель которого — выявить, повысит ли такая допустимая структура физического проектирования скорость обработки запросов. Этот тип анализа позволяет проводить оценку новой конфигурации без затрат, связанных с ее фактическим внедрением. Если предложенная допустимая физическая структура не дает требуемого улучшения производительности, ее можно легко изменить и снова выполнить анализ, повторяя эту процедуру до тех пор, пока не будет найдена конфигурация, обеспечивающая необходимые результаты.  
  
Кроме того, использование схемы XML помощника по настройке ядра СУБД и программы командной строки **dta** позволяет внедрить функциональность помощника по настройке ядра СУБД в скрипты и использовать его в сочетании с другими средствами проектирования баз данных.  
  
Тематика применения функциональности ввода данных на языке XML с использованием помощника по настройке ядра СУБД выходит за рамки данного занятия.  
  
 Эта задача помогает запустить программу **dta**, просмотреть ее справку, а затем использовать эту программу для настройки рабочей нагрузки из командной строки. Программа использует рабочую нагрузку MyScript.sql, созданную для использовании графического пользовательского интерфейса помощника по настройке ядра СУБД (см. руководство по [настройке рабочей нагрузки](lesson-2-using-database-engine-tuning-advisor.md#tuning-a-workload)).  
  
В этом руководстве используется пример базы данных AdventureWorks2017. В целях повышения безопасности образцы баз данных не установлены. Дополнительные сведения об установке образцов баз данных см. в статье [Установка образцов SQL Server и образцов баз данных](../../samples/adventureworks-install-configure.md).  
  
В следующих задачах рассматривается открытие командной строки, запуск программы командной строки **dta** , просмотр справки по ее синтаксису, а также настройка простой рабочей нагрузки MyScript.sql, которая была создана в примере [Настройка рабочей нагрузки](./lesson-2-using-database-engine-tuning-advisor.md).  

## <a name="prerequisites"></a>Предварительные требования 

Для работы с этим учебником требуется среда SQL Server Management Studio, доступ к серверу SQL Server и база данных AdventureWorks.

- Установите выпуск [SQL Server 2017 Developer Edition](https://www.microsoft.com/sql-server/sql-server-downloads).
- Скачайте [пример базы данных AdventureWorks2017](../../samples/adventureworks-install-configure.md).


См. инструкции по восстановлению резервной копии базы данных с помощью SSMS см. в статье: [Восстановление базы данных](../../relational-databases/backup-restore/restore-a-database-backup-using-ssms.md).

  >[!NOTE]
  > Этот учебник предназначен для пользователей, которые знакомы с SQL Server Management Studio и основными задачами по администрированию базы данных. 

## <a name="access-dta-command-prompt-utility-help-menu"></a>Использование меню справки для командной строки DTA
  
  
1.  В меню **Пуск** наведите указатель на пункт **Все программы**, затем на пункт **Стандартные** и выберите пункт **Командная строка**.  
  
2.  В командной строке введите следующую команду и нажмите клавишу ВВОД:  
  
    ```  
    dta -? | more  
    ```  
  
    Часть `| more` этой команды является необязательной. Однако ее использование позволит пролистывать справку по синтаксису этой программы. Нажимайте клавишу ВВОД, чтобы просматривать текст справки построчно, или клавишу ПРОБЕЛ, чтобы перелистывать текст справки по страницам.  

  ![Использование справки в служебной программе DTA](media/dta-tutorials/dta-cmd-help.png)

## <a name="tune-simple-workload-using-the-dta-command-prompt-utility"></a>Настройка простой рабочей нагрузки с помощью программы командной строки DTA  


  
1.  В командной строке перейдите в каталог, где был сохранен файл MyScript.sql.  
  
2.  В командной строке введите следующую команду и нажмите клавишу ВВОД, чтобы запустить команду и начать сеанс настройки (обратите внимание, что программа учитывает регистр в ходе синтаксического анализа команд):  
  
    ```  
    dta -S YourServerName\YourSQLServerInstanceName -E -D AdventureWorks2012 -if MyScript.sql -s MySession2 -of MySession2OutputScript.sql -ox MySession2Output.xml -fa IDX_IV -fp NONE -fk NONE  
    ```  
  
    где `-S` указывает имя сервера и экземпляр служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , на котором установлена база данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] . Параметр `-E` указывает, что требуется использовать доверительное соединение с экземпляром. Это целесообразно, если соединение устанавливается с учетной записью домена Windows. Параметр `-D` указывает базу данных, которую нужно настроить, параметр `-if` указывает файл рабочей нагрузки, параметр `-s` указывает имя сеанса, параметр `-of` указывает файл, в который средство должно записать скрипт рекомендаций [!INCLUDE[tsql](../../includes/tsql-md.md)] , а параметр `-ox` указывает файл, в который средство должно записать рекомендации в формате XML. Последние три параметра управляют настройкой следующим образом: параметр `-fa IDX_IV` указывает, что помощник по настройке ядра СУБД должен добавлять только индексы (как кластеризованные, так и некластеризованные) и индексированные представления; параметр `-fp NONE` указывает, что в ходе анализа не должна учитываться стратегия секционирования; параметр `-fk NONE` указывает, что существующие в базе данных структуры физического проектирования не должны сохраняться при формировании рекомендаций помощником по настройке ядра СУБД.  

  ![Использование CMD с DTA](media/dta-tutorials/dta-cmd.png)
  
3.  Закончив настройку рабочей нагрузки, помощник по настройке ядра СУБД выведет сообщение, свидетельствующее об успешном завершении сеанса настройки. Можно просмотреть результаты настройки, используя среду [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] , чтобы открыть файлы MySession2OutputScript.sql и MySession2Output.xml. Кроме того, сеанс настройки MySession2 можно открыть в графическом интерфейсе помощника по настройке ядра СУБД и просмотреть его рекомендации и отчеты, что рассматривалось в разделах [Просмотр рекомендаций по настройке](./lesson-2-using-database-engine-tuning-advisor.md) и [Просмотр отчетов настройки](./lesson-2-using-database-engine-tuning-advisor.md).  
  
 
## <a name="after-you-finish-this-tutorial"></a>После завершения работы с этим учебником  
Выполнив задания этого учебника, изучите следующие разделы, чтобы получить дополнительные сведения о помощнике по настройке ядра СУБД:  
  
-   В статье[Database Engine Tuning Advisor](../../relational-databases/performance/database-engine-tuning-advisor.md) описывается выполнение задач с использованием этого средства. 
-   [dta Utility](../../tools/dta/dta-utility.md) — справочный материал по программе командной строки и дополнительному XML-файлу, который вы можете использовать для управления ее работой.  
  
Чтобы вернуться к началу учебника, воспользуйтесь статьей [Учебник. Помощник по настройке ядра СУБД](../../tools/dta/tutorial-database-engine-tuning-advisor.md).  
  
## <a name="see-also"></a>См. также:  
[Учебники по компоненту ядра СУБД](../../relational-databases/database-engine-tutorials.md)  
