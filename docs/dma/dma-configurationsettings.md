---
title: Настройка параметров для Помощник по миграции данных
description: Узнайте, как настроить параметры Помощник по миграции данных путем обновления значений в файле конфигурации.
ms.custom: seo-lt-2019
ms.date: 03/12/2019
ms.prod: sql
ms.prod_service: dma
ms.reviewer: ''
ms.technology: dma
ms.topic: conceptual
keywords: ''
helpviewer_keywords:
- Data Migration Assistant, Assess
ms.assetid: ''
author: rajeshsetlem
ms.author: rajpo
ms.openlocfilehash: 64c18c32cde0c29c120c8cb1b2d976bd983c774a
ms.sourcegitcommit: c7f40918dc3ecdb0ed2ef5c237a3996cb4cd268d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2020
ms.locfileid: "91727795"
---
# <a name="configure-settings-for-data-migration-assistant"></a>Настройка параметров для Помощник по миграции данных

Вы можете точно настроить определенное поведение Помощник по миграции данных, задав значения конфигурации в файле dma.exe.config. В этой статье описываются ключевые значения конфигурации.

Файл dma.exe.config для приложения Помощник по миграции данных Desktop и программы командной строки можно найти в следующих папках на компьютере.

- Классическое приложение

  % ProgramFiles% \\ Помощник по миграции данных (Майкрософт) \\dma.exe.config

- Служебная программа командной строки

  % ProgramFiles% \\ Помощник по миграции данных (Майкрософт) \\dmacmd.exe.config 

Обязательно сохраните копию исходного файла конфигурации перед внесением каких-либо изменений. После внесения изменений перезапустите Помощник по миграции данных, чтобы новые значения конфигурации вступили в силу.

## <a name="number-of-databases-to-assess-in-parallel"></a>Число баз данных для параллельной оценки

Помощник по миграции данных параллельно оценивает несколько баз данных. Во время оценки Помощник по миграции данных извлекает приложение уровня данных (DACPAC) для понимания схемы базы данных.Эта операция может истекает, если несколько баз данных на одном сервере оцениваются параллельно. 

Начиная с Помощник по миграции данных версии 2.0 вы можете контролировать это, задав значение конфигурации Параллелдатабасес. Значение по умолчанию — 8.

```
<advisorGroup>

<workflowSettings>

<assessment parallelDatabases="8" />

</workflowSettings>

</advisorGroup>
```




## <a name="number-of-databases-to-migrate-in-parallel"></a>Число баз данных для параллельной миграции

Помощник по миграции данных переносит несколько баз данных параллельно, перед миграцией имен входа. Во время миграции Помощник по миграции данных будет выполнять резервное копирование базы данных-источника, при необходимости скопировать резервную копию, а затем восстановить ее на целевом сервере. При выборе нескольких баз данных для миграции могут возникать сбои времени ожидания. 

Начиная с Помощник по миграции данных версии 2.0, при возникновении этой проблемы можно уменьшить значение конфигурации Параллелдатабасес. Можно увеличить значение, чтобы сократить общее время миграции.

```
<advisorGroup>

<workflowSettings>

<migration parallelDatabases="8″ />

</workflowSettings>

</advisorGroup>
```


## <a name="dacfx-settings"></a>Параметры DacFX

Во время оценки Помощник по миграции данных извлекает приложение уровня данных (DACPAC) для понимания схемы базы данных. Эта операция может завершиться ошибкой с превышением времени ожидания для очень больших баз данных или в случае, если сервер находится под нагрузкой. Начиная с переноса данных версии 1.0, можно изменить следующие значения конфигурации, чтобы избежать ошибок. 

> [!NOTE]
> По &lt; &gt; умолчанию комментарием является вся запись DACFx. Удалите комментарии и при необходимости измените значение.

- commandTimeout

   Этот параметр задает свойство IDbCommand. CommandTimeout в *секундах*.(По умолчанию = 60)

- датабаселокктимеаут

   Этот параметр эквивалентен [ \_ \_ периоду времени ожидания установки блокировки](../t-sql/statements/set-lock-timeout-transact-sql.md) в *миллисекундах*.(По умолчанию = 5000)

- максдатареадердегриофпараллелисм

  Этот параметр задает число используемых соединений пула соединений SQL.(По умолчанию = 8)

```
<advisorGroup>

<advisorSettings>

<dacFx  commandTimeout="60" databaseLockTimeout="5000"
maxDataReaderDegreeOfParallelism="8"/>

</advisorSettings>

</advisorGroup>
```

## <a name="stretch-database-recommendation-threshold"></a>Stretch Database: порог рекомендации

С помощью [SQL Server Stretch Database](../sql-server/stretch-database/stretch-database.md)можно динамически растянуть горячий и холодный транзакционные данные из Microsoft SQL Server 2016 в Azure. Stretch Database предназначен для транзакционных баз данных с большими объемами холодного объема данных. В рекомендации по Stretch Database в разделе рекомендации по функциям хранилища сначала определяются таблицы, которые он считает полезными, а затем выводятся изменения, которые необходимо внести, чтобы включить таблицу для этой функции.

Начиная с Помощник по миграции данных версии 2.0, вы можете контролировать это пороговое значение для таблицы, чтобы подсчитаться Stretch Databaseной функции с помощью значения конфигурации Рекоммендеднумберофровс. Значение по умолчанию — 100 000 строк. Если вы хотите проанализировать возможности растяжения даже для небольших таблиц, уменьшите значение соответствующим образом.

```
<advisorGroup>

<advisorSettings>

<stretchDBAdvisor  recommendedNumberOfRows="100000" />

</advisorSettings>

</advisorGroup>
```


## <a name="sql-connection-timeout"></a>Время ожидания подключения SQL

Вы можете управлять [временем ожидания подключения SQL](/dotnet/api/system.data.sqlclient.sqlconnection.connectiontimeout) для исходных и целевых экземпляров во время выполнения оценки или миграции, установив значение времени ожидания соединения равным указанному числу секунд. Значение по умолчанию - 15 секунды.

```
<appSettings>

<add key="ConnectionTimeout" value="15" />

</appSettings>
```

## <a name="ignore-error-codes"></a>Пропускать коды ошибок

В заголовке каждого правила содержится код ошибки. Если правила не нужны и их нужно игнорировать, используйте свойство Игнорирроркодес. Можно указать, чтобы игнорировать одну ошибку или несколько ошибок. Чтобы пропустить несколько ошибок, используйте точку с запятой, например Игнорирроркодес = "46010; 71501". Значение по умолчанию — 71501, связанное с неразрешенными ссылками, идентифицированными, когда объект ссылается на системные объекты, такие как процедуры, представления и т. д.

```
<workflowSettings>

<assessment parallelDatabases="8" ignoreErrorCodes="71501" />

</workflowSettings>
```

## <a name="see-also"></a>См. также

[Загрузка Помощник по миграции данных](https://www.microsoft.com/download/details.aspx?id=53595)