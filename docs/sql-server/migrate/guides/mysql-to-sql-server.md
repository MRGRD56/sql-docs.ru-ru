---
title: Руководство по миграции из MySQL в SQL Server
description: Из этого руководства вы узнаете, как перенести базы данных MySQL в Microsoft SQL Server с использованием Помощника по миграции SQL Server для MySQL (SSMA для MySQL).
ms.prod: sql
ms.reviewer: ''
ms.technology: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: how-to
author: MashaMSFT
ms.author: mathoma
ms.date: 03/19/2021
ms.openlocfilehash: ab682d07c27417b61b608090ad80c4f0eca5ebc0
ms.sourcegitcommit: 8050df4db7a3a76e4fa03e5c79dcb49031defed7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/08/2021
ms.locfileid: "107210963"
---
# <a name="migration-guide-mysql-to-sql-server"></a>Руководство по миграции. Перенос баз данных MySQL в SQL Server

[!INCLUDE[sqlserver](../../../includes/applies-to-version/sqlserver.md)]

Из этого руководства вы узнаете, как перенести базы данных MySQL в SQL Server.

Другие рекомендации по миграции см. в [руководствах по переносу баз данных в Azure](https://docs.microsoft.com/data-migration). 

## <a name="prerequisites"></a>Предварительные требования

Прежде чем приступить к переносу базы данных MySQL в SQL Server, сделайте следующее:

- Убедитесь, что ваша исходная среда поддерживается. В настоящее время поддерживаются MySQL 5.6 и 5.7.
- Получите [Помощник по миграции SQL Server для MySQL (SSMA для MySQL)](https://www.microsoft.com/download/details.aspx?id=54257).
- Получите возможность подключения и требуемые разрешения для доступа к исходному и целевому объектам.

## <a name="pre-migration"></a>Подготовка к миграции

После выполнения необходимых условий можно приступать к анализу исходной среды MySQL и оценке возможности миграции.

### <a name="assess"></a>Оценка

С помощью SSMA для MySQL проверьте все объекты и данные в базе данных, чтобы убедиться в готовности баз данных к миграции.

Чтобы создать оценку, выполните следующие действия.

1. Откройте SSMA для MySQL.
1. В меню **Файл** выберите пункт **Создать проект**.
1. Укажите имя проекта, расположение для сохранения проекта и целевой объект миграции. Для параметра **Перенести в** выберите значение **SQL Server**.

   ![Снимок экрана: страница создания проекта.](./media/mysql-to-sql-server/new-project.png)

1. Укажите сведения о подключении в диалоговом окне **Подключение к MySQL** и подключитесь к серверу MySQL.

   ![Снимок экрана: подключение к MySQL.](./media/mysql-to-sql-server/connect-to-mysql.png)

1. Выберите базы данных MySQL, которые требуется перенести.

   ![Снимок экрана: выбор базы данных MySQL, которую требуется перенести.](./media/mysql-to-sql-server/select-database.png)

1. Щелкните правой кнопкой мыши базу данных MySQL в области **Обозреватель метаданных MySQL** и выберите команду **Создать отчет**. Можно также выбрать вкладку **Создание отчета** в правом верхнем углу.

   ![Снимок экрана: создание отчета.](./media/mysql-to-sql-server/create-report.png)

1. Ознакомьтесь с HTML-отчетом, чтобы получить сведения о статистике преобразований и любых ошибках или предупреждениях. Также можно открыть отчет в Excel, чтобы получить список объектов MySQL и действий, необходимых для выполнения преобразований схемы. По умолчанию отчет находится в папке report в каталоге SSMAProjects, как показано ниже.

    `drive:\Users\<username>\Documents\SSMAProjects\MySQLMigration\report\report_2016_11_12T02_47_55\`.
   
   ![Снимок экрана: отчет о преобразовании.](./media/mysql-to-sql-server/conversion-report.png)

### <a name="validate-the-type-mappings"></a>Проверка сопоставлений типов

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого:

1. В меню **Сервис** выберите **Параметры проекта**.
1. Перейдите на вкладку **Type mapping** (Сопоставление типов).

   ![Снимок экрана: сопоставление типов.](./media/mysql-to-sql-server/type-mappings.png)

1. Сопоставление типов для каждой таблицы можно изменить, выбрав таблицу в **Обозревателе метаданных MySQL**.

Дополнительные сведения о параметрах преобразования в SSMA для MySQL см. в статье [Параметры проекта (преобразование) (MySQLToSQL)](../../../ssma/mysql/project-settings-conversion-mysqltosql.md).

### <a name="convert-the-schema"></a>Преобразование схемы

Преобразование объектов баз данных происходит следующим образом: определения объектов берутся из MySQL, преобразуются в аналогичные объекты SQL Server, а затем эти сведения загружаются в метаданные SSMA для MySQL. Сведения не загружаются в экземпляр SQL Server. Затем можно просмотреть объекты и их свойства в Обозревателе метаданных SQL Server.

Во время преобразования SSMA для MySQL выводит сообщения о результатах в области "Вывод" и сообщения об ошибках в области **Список ошибок**. На основе выходных данных и сведений об ошибках можно определить, нужно ли изменить базы данных MySQL или процесс преобразования, чтобы получить нужные результаты.

Чтобы преобразовать схему, выполните следующие действия.

1. (Необязательно) Чтобы преобразовать динамические или специальные запросы, щелкните узел правой кнопкой мыши и выберите команду **Добавить инструкцию**.
1. Откройте вкладку **Подключение к SQL Server**.
     1. Введите сведения о подключении для экземпляра SQL Server.
     1. Выберите целевую базу данных в раскрывающемся списке или укажите новое имя. В этом случае база данных будет создана на целевом сервере.
     1. Введите сведения о проверке подлинности и нажмите кнопку **Подключить**.

   ![Снимок экрана: подключение к SQL Server.](./media/mysql-to-sql-server/connect-to-sql-server.png)

1. Щелкните правой кнопкой мыши базу данных MySQL в области **Обозреватель метаданных MySQL** и выберите пункт **Преобразовать схему**. Кроме того, можно выбрать вкладку **Преобразование схемы** в правом верхнем углу.

   ![Снимок экрана: преобразование схемы.](./media/mysql-to-sql-server/convert-schema.png)

1. После завершения преобразования сравните преобразованные объекты с исходными, чтобы определить возможные проблемы и устранить их в соответствии с рекомендациями.

   ![Снимок экрана: сравнение и просмотр объектов.](./media/mysql-to-sql-server/table-comparison.png)

1. Сравните преобразованный текст Transact-SQL с исходным кодом и просмотрите рекомендации.

   ![Снимок экрана: сравнение и просмотр преобразованного кода.](./media/mysql-to-sql-server/procedure-comparison.png)
   
1. В области вывода выберите элемент **Просмотр результатов** и проверьте ошибки в области **Список ошибок**.
1. Сохраните проект локально для исправления схемы в автономном режиме. В меню **Файл** выберите команду **Сохранить проект**. Так можно оценить исходную и целевую схемы в автономном режиме и исправить проблемы перед публикацией схемы в SQL Server.

Дополнительные сведения см. на [снимке экрана, на котором показано преобразование баз данных MySQL.](../../../ssma/mysql/converting-mysql-databases-mysqltosql.md)

## <a name="migration"></a>Миграция

Выполнив необходимые условия и задачи, связанные с этапом *подготовки к миграции*, можно приступить к переносу схемы и данных.

Доступны два варианта переноса.

- **Перенос данных на стороне клиента**
     -   Для переноса данных на стороне клиента в диалоговом окне **Параметры проекта** выберите вариант **Подсистема переноса данных на стороне клиента**.

    > [!NOTE]
    > Если целевой базой данных является выпуск SQL Express Edition, то разрешен только перенос данных на стороне клиента. Перенос данных на стороне сервера не поддерживается.

- **Перенос данных на стороне сервера**
    -   Прежде чем выполнять перенос данных на стороне сервера, необходимо выполнить следующие требования:
        - пакет расширений SSMA для MySQL должен быть установлен в экземпляре SQL Server;
        - служба агента SQL Server должна быть запущена в экземпляре SQL Server.
    -   Для переноса данных на стороне сервера в диалоговом окне **Параметры проекта** выберите вариант **Подсистема переноса данных на стороне сервера**.

> [!IMPORTANT]  
> Если вы планируете использовать подсистему переноса данных на стороне сервера, то перед переносом необходимо установить пакет расширения SSMA для MySQL и поставщики MySQL на компьютере, на котором выполняется SSMA для MySQL. Кроме того, должна быть запущена служба агента SQL Server. Дополнительные сведения об установке пакета расширения см. в разделе [Установка компонентов SSMA в SQL Server (миграция из MySQL в SQL)](../../../ssma/mysql/installing-ssma-components-on-sql-server-mysqltosql.md).

Чтобы опубликовать схему и перенести данные, выполните следующие действия.

1. Опубликуйте схему. Для этого щелкните правой кнопкой мыши базу данных в области **Обозреватель метаданных SQL Server** и выберите пункт **Синхронизировать с базой данных**. В результате база данных MySQL будет опубликована в экземпляре SQL Server.

   ![Снимок экрана: синхронизация с базой данных.](./media/mysql-to-sql-server/synchronize-database.png)

1. Проверьте результаты сопоставления исходного и целевого проектов.

   ![Снимок экрана: проверка синхронизации с базой данных.](./media/mysql-to-sql-server/synchronize-database-review.png)

1. Перенесите данные. Для этого щелкните правой кнопкой мыши базу данных или объект, которые требуется перенести, в разделе **Обозреватель метаданных MySQL** и выберите пункт **Перенести данные**. Кроме того, можно выбрать вкладку **Перенос данных**. Чтобы перенести данные для всей базы данных, установите флажок рядом с именем базы данных. Чтобы перенести данные из отдельных таблиц, разверните базу данных, разверните узел **Таблицы** и установите флажок рядом с нужной таблицей. Чтобы не переносить данные из определенной таблицы, снимите флажок.

   ![Снимок экрана: перенос данных.](./media/mysql-to-sql-server/migrate-data.png)

1. После завершения миграции изучите **отчет о переносе данных**.

   ![Снимок экрана: отчет о переносе данных.](./media/mysql-to-sql-server/migration-report.png)

1. Подключитесь к экземпляру SQL Server с помощью [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) и проверьте результаты миграции, просмотрев данные и схему.

   ![Снимок экрана: проверка в SQL Server Management Studio.](./media/mysql-to-sql-server/validate-in-ssms.png)

## <a name="post-migration"></a>После миграции

После успешного завершения этапа *миграции* необходимо выполнить ряд дополнительных задач, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны переключиться на использование целевого объекта миграции. Для этого в некоторых случаях потребуется внести изменения в приложения.

### <a name="perform-tests"></a>Выполнение тестов

Тестирование переноса базы данных включает следующие действия.

1. **Разработка проверочных тестов**. Чтобы протестировать перенос базы данных, необходимо использовать SQL-запросы. Необходимо создать запросы проверки, которые будут выполняться как в исходной, так и в целевой базах данных. Проверочные запросы должны охватывать всю определенную ранее область.
1. **Настройка тестовой среды.** Тестовая среда должна содержать копию исходной и целевой баз данных. Не забудьте изолировать тестовую среду.
1. **Выполнение проверочных тестов.** Выполните проверочные тесты в исходной и целевой базах данных, а затем проанализируйте результаты.
1. **Выполнение тестов производительности.** Запустите тесты производительности для исходной и целевой баз данных, а затем проанализируйте и сравните результаты.

### <a name="optimize"></a>Оптимизация

Проверка после миграции — очень важный шаг, позволяющий добиться точности и полноты данных и устранить проблемы с производительностью рабочей нагрузки.

> [!Note]
> Дополнительную информацию об этих проблемах и мерах по их устранению см. в [руководстве по проверке и оптимизации после миграции](../../../relational-databases/post-migration-validation-and-optimization-guide.md).

## <a name="migration-assets"></a>Ресурсы, посвященные миграции

Дополнительную помощь по этому сценарию миграции можно получить в приведенных ниже ресурсах. Они были разработаны как вспомогательные материалы по реализации реальных проектов миграции.

| Заголовок                    | Описание            |
| ----------------------------- | ---------------------- |
| [Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool) | Это средство предоставляет предлагаемые "оптимальные" целевые платформы, готовность к переходу в облако и уровень исправления приложения или базы данных для конкретной рабочей нагрузки. Оно обеспечивает простое и быстрое вычисление и создание отчетов, которое помогает ускорить оценку больших объемов, предоставляя, автоматизируя и унифицируя процесс принятия решения относительно целевой платформы.                |

Эти ресурсы разработали специалисты по разработке данных SQL. Основная задача этой команды — включить и ускорить комплексную модернизацию проектов миграции платформы данных на платформу данных Microsoft Azure.


## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о переносе баз данных MySQL в SQL Server см. в [документации по SSMA для MySQL](../../../ssma/mysql/sql-server-migration-assistant-for-mysql-mysqltosql.md).
- Матрицу служб и средств, предоставляемых корпорацией Майкрософт и сторонними разработчиками для оказания помощи с разными сценариями переноса баз данных и данных, а также для специализированных задач, см. в статье [Службы и инструменты для переноса данных](https://docs.microsoft.com/azure/dms/dms-tools-matrix).
- Другие рекомендации по миграции см. в [руководствах по переносу баз данных в Azure](https://datamigration.microsoft.com/).

