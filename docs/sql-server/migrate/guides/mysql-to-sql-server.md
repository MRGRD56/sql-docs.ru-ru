---
title: Руководство по миграции из MySQL в SQL Server
description: 'Из этого руководства вы узнаете, как перенести базы данных MySQL в Microsoft SQL Server с использованием Помощника по миграции SQL Server для MySQL (SSMA для MySQL). '
ms.prod: sql
ms.reviewer: ''
ms.technology: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: how-to
author: MashaMSFT
ms.author: mathoma
ms.date: 03/19/2021
ms.openlocfilehash: 2befdaec3602634faaa2017ae2ca225a938cfab3
ms.sourcegitcommit: 2f971c85d87623c0aed1612406130d840e7bdb2e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "105744511"
---
# <a name="migration-guide-mysql-to-sql-server"></a>Руководство по миграции. Перенос баз данных MySQL в SQL Server
[!INCLUDE[sqlserver](../../../includes/applies-to-version/sqlserver.md)]

Это руководств поможет вам перенести базы данных MySQL в SQL Server. 

Другие руководства по миграции см. в разделе [Перенос базы данных](https://docs.microsoft.com/data-migration). 

## <a name="prerequisites"></a>Предварительные требования 

Чтобы перенести базу данных MySQL в SQL Server, необходимо:

- проверить, поддерживается ли исходная среда; (в настоящее время поддерживаются MySQL 5.6 и 5.7); 
- [Помощник по миграции SQL Server для MySQL](https://www.microsoft.com/download/details.aspx?id=54257).
- иметь возможность подключения и требуемые разрешения для доступа к исходному и целевому объектам. 

## <a name="pre-migration"></a>Подготовка к миграции 

После выполнения необходимых условий можно приступать к анализу исходной среды MySQL и оценке возможности миграции.

### <a name="assess"></a>Оценка 

Используйте Помощник по миграции SQL Server для MySQL, чтобы просмотреть объекты и данные баз данных, а также оценить возможности переноса баз данных.

Чтобы создать оценку, выполните следующие действия. 

1. Откройте Помощник по миграции SQL Server для MySQL. 
1. В меню **Файл** выберите пункт **Новый проект**. 
1. Укажите имя проекта, расположение для сохранения проекта и целевой объект миграции. Для параметра **Migrate to** (Перенести в) выберите значение **SQL Server**.

   ![Создать проект](./media/mysql-to-sql-server/new-project.png)

1. Укажите сведения о подключении в диалоговом окне **Connect to MySQL** (Подключение к MySQL) и подключитесь к серверу MySQL.

   ![Подключение к MySQL](./media/mysql-to-sql-server/connect-to-mysql.png)

1. Выберите базы данных MySQL, которые требуется перенести:

   ![Выбор базы данных MySQL, которую требуется перенести](./media/mysql-to-sql-server/select-database.png)

1. Щелкните правой кнопкой мыши базу данных MySQL в области **MySQL Metadata Explorer** (Обозреватель метаданных MySQL) и выберите команду **Create Report** (Создать отчет). Либо выберите команду **Create Report** (Создать отчет) на верхней панели навигации.

   ![Создавать отчет](./media/mysql-to-sql-server/create-report.png)

1. Ознакомьтесь с HTML-отчетом, чтобы получить сведения о статистике преобразований и любых ошибках или предупреждениях. Также можно открыть отчет в Excel, чтобы получить список объектов MySQL и действий, необходимых для выполнения преобразований схемы. Расположение отчета по умолчанию находится в папке "report" в каталоге SSMAProjects. 

   Например: `drive:\Users\<username>\Documents\SSMAProjects\MySQLMigration\report\report_2016_11_12T02_47_55\` 
   
   ![Отчет о преобразовании](./media/mysql-to-sql-server/conversion-report.png)

### <a name="validate-type-mappings"></a>Проверка сопоставлений типов

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого выполните следующие действия. 

1. В главном меню выберите **Сервис**. 
1. Выберите **Параметры проекта**. 
1. Перейдите на вкладку **Type mappings** (Сопоставления типов).

   ![Сопоставление типов](./media/mysql-to-sql-server/type-mappings.png)

1. Сопоставление типов для каждой таблицы можно изменить, выбрав таблицу в **обозревателе метаданных MySQL**. 


Дополнительные сведения о параметрах преобразования в SSMA см. в статье [Параметры проекта (преобразование) (MySQLToSQL)](../../../ssma/mysql/project-settings-conversion-mysqltosql.md).

### <a name="convert-schema"></a>Преобразовать схему

Преобразование объектов баз данных происходит следующим образом: определения объектов берутся из MySQL, преобразуются в аналогичные объекты SQL Server, а затем эти сведения загружаются в метаданные SSMA. Сведения не загружаются в экземпляр SQL Server. Затем можно просмотреть объекты и их свойства в обозревателе метаданных SQL Server.

Во время преобразования SSMA выводит сообщения о результатах в области "Вывод" и сообщения об ошибках в области "Список ошибок". На основе выходных данных и сведений об ошибках можно определить, нужно ли изменить базы данных MySQL или процесс преобразования, чтобы получить нужные результаты.

Чтобы преобразовать схему, выполните следующие действия.

1. (Необязательно) Чтобы преобразовать динамические или нерегламентированные запросы, щелкните узел правой кнопкой мыши и выберите команду **Добавить инструкцию**. 
1. На верхней панели навигации выберите **Connect to SQL Server** (Подключиться к SQL Server). 
     1. Введите сведения о подключении для экземпляра SQL Server. 
     1. Выберите целевую базу данных в раскрывающемся списке или укажите новое имя. В этом случае база данных будет создана на целевом сервере. 
     1. Предоставьте сведения о проверке подлинности. 
     1. Щелкните **Connect** (Подключиться).

   ![Подключение к SQL](./media/mysql-to-sql-server/connect-to-sql-server.png)

1. Щелкните правой кнопкой мыши базу данных MySQL в области **MySQL Metadata Explorer** (Обозреватель метаданных MySQL) и выберите пункт **Convert schema** (Преобразовать схему). Команду **Convert schema** (Преобразовать схему) можно также выбрать на верхней панели навигации.

   ![Преобразовать схему](./media/mysql-to-sql-server/convert-schema.png)

1. После завершения преобразования сравните преобразованные объекты с исходными, чтобы определить возможные проблемы и устранить их в соответствии с рекомендациями.

   ![Сравнение и проверка объекта](./media/mysql-to-sql-server/table-comparison.png)

   Сравните преобразованный текст Transact-SQL с исходным кодом и просмотрите рекомендации:

   ![Сравнение и проверка преобразованного кода](./media/mysql-to-sql-server/procedure-comparison.png)
   
1. В области вывода выберите элемент **Просмотр результатов** и проверьте ошибки в области **Список ошибок**. 
1. Сохраните проект локально для исправления схемы в автономном режиме. В меню **Файл** выберите команду **Сохранить проект**. Таким образом можно оценить исходную и целевую схемы в автономном режиме и исправить проблемы перед публикацией схемы в SQL Server.

Дополнительные сведения см. в статье [Преобразование баз данных MySQL (MySQLToSQL)](../../../ssma/mysql/converting-mysql-databases-mysqltosql.md).

## <a name="migration"></a>Миграция 

Выполнив необходимые условия и задачи, связанные с этапом **подготовки к миграции**, можно приступить к переносу схемы и данных.

Есть два варианта переноса данных.

- **Перенос данных на стороне клиента**.
     -   Для **переноса данных на стороне клиента** в диалоговом окне **Параметры проекта** выберите вариант **Подсистема переноса данных на стороне клиента**.

    > [!NOTE]
    > Если целевой базой данных является выпуск SQL Express Edition, то разрешен только перенос данных на стороне клиента. Перенос данных на стороне сервера не поддерживается.

- **Перенос данных на стороне сервера**.
    -   Прежде чем выполнять перенос данных на стороне сервера, необходимо выполнить следующие требования:
        - пакет расширений SSMA для MySQL должен быть установлен в экземпляре SQL Server;
        - служба агента SQL Server должна быть запущена в экземпляре SQL Server. 
    -   Для **переноса данных на стороне сервера** в диалоговом окне **Параметры проекта** выберите вариант **Подсистема переноса данных на стороне сервера**.

> [!IMPORTANT]  
> Если используется подсистема переноса данных на стороне сервера, то перед переносом необходимо установить пакет расширения SSMA для MySQL и поставщики MySQL на компьютере, на котором выполняется SSMA. Кроме того, должна быть запущена служба агента SQL Server. Дополнительные сведения об установке пакета расширения см. в разделе [Установка компонентов SSMA в SQL Server (миграция из MySQL в SQL)](../../../ssma/mysql/installing-ssma-components-on-sql-server-mysqltosql.md).  

Чтобы опубликовать схему и перенести данные, выполните следующие действия: 

1. Опубликуйте схему. Для этого щелкните правой кнопкой мыши базу данных в области **SQL Server Metadata Explorer** (Обозреватель метаданных SQL Server) и выберите пункт **Synchronize with Database** (Синхронизировать с базой данных).  В результате база данных MySQL будет опубликована в экземпляре SQL Server.

   ![Синхронизация с базой данных](./media/mysql-to-sql-server/synchronize-database.png)

   Проверьте результаты сопоставления исходного и целевого проектов.

   ![Синхронизация с базой данных — проверка](./media/mysql-to-sql-server/synchronize-database-review.png)

1. Перенесите данные. Для этого щелкните правой кнопкой мыши базу данных или объект, которые требуется перенести, в разделе **MySQL Metadata Explorer** (Обозреватель метаданных MySQL) и выберите пункт **Migrate data** (Перенести данные). Кроме того, команду **Перенос данных** можно выбрать на верхней панели навигации. Чтобы перенести данные всей базы данных, установите флажок рядом с ее именем. Чтобы перенести данные из отдельной таблицы, разверните базу данных, разверните узел "Таблицы" и установите флажок рядом с таблицей. Чтобы не переносить данные из определенной таблицы, снимите флажок.

   ![Перенос данных](./media/mysql-to-sql-server/migrate-data.png)

1. После завершения миграции просмотрите **отчет о переносе данных**: 

   ![Отчет о миграции данных](./media/mysql-to-sql-server/migration-report.png)

1. Подключитесь к экземпляру SQL Server с помощью [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) и проверьте результаты миграции, просмотрев данные и схему. 

   ![Проверка в SSMA](./media/mysql-to-sql-server/validate-in-ssms.png)



## <a name="post-migration"></a>После миграции 

После успешного завершения этапа **миграции** необходимо выполнить ряд задач, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны приступить к приему целевого объекта. Для этого в некоторых случаях потребуется внести изменения в приложения.

### <a name="perform-tests"></a>Выполнение тестов

Тестирование переноса базы данных включает указанные ниже действия.

1. **Разработка проверочных тестов**. Чтобы протестировать перенос базы данных, необходимо использовать SQL-запросы. Необходимо создать запросы проверки, которые будут выполняться как в исходной, так и в целевой базах данных. Запросы на проверку должны охватывать определенную область.

2. **Настройка тестовой среды**. Тестовая среда должна содержать копию исходной и целевой баз данных. Не забудьте изолировать тестовую среду.

3. **Выполнение проверочных тестов**. Выполните проверочные тесты для источника и целевого объекта, а затем проанализируйте результаты.

4. **Выполнение тестов производительности**. Запустите тест производительности для источника и целевого объекта, а затем проанализируйте и сравните результаты.


### <a name="optimize"></a>Оптимизация

Проверка после миграции — очень важный шаг, позволяющий добиться точности и полноты данных, а также выявить проблемы с производительностью рабочей нагрузки.

> [!Note]
> Дополнительные сведения об этих проблемах и мерах по их устранению см. в [руководстве по проверке и оптимизации после миграции](../../../relational-databases/post-migration-validation-and-optimization-guide.md).

## <a name="migration-assets"></a>Ресурсы, посвященные миграции 

Дополнительные сведения о выполнении сценария миграции см. на следующих ресурсах, которые были разработаны с учетом поддержки реального проекта миграции.

| Название со ссылкой                    | Описание            |
| ----------------------------- | ---------------------- |
| [Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool) | Это средство предоставляет предлагаемые "оптимальные" целевые платформы, готовность к переходу в облако и уровень исправления приложения/базы данных для конкретной рабочей нагрузки. Оно обеспечивает простое и быстрое вычисление и создание отчетов, которое помогает ускорить оценку больших объемов, предоставляя, автоматизируя и унифицируя процесс принятия решения относительно целевой платформы.                |

Эти ресурсы разработали специалисты по разработке данных SQL. Основная задача этой команды — включить и ускорить комплексную модернизацию проектов миграции платформы данных на платформу данных Microsoft Azure.

## <a name="next-steps"></a>Следующие шаги

- Дополнительные сведения о переносе баз данных MySQL в SQL Server см. в [документации по SSMA для MySQL](../../../ssma/mysql/sql-server-migration-assistant-for-mysql-mysqltosql.md).

- Матрицу служб и средств Майкрософт и сторонних производителей, доступных для помощи в различных сценариях переноса баз данных и данных, а также специальных задачах, см. в статье [Службы и средства для переноса данных](https://docs.microsoft.com/azure/dms/dms-tools-matrix).

- Другие руководства по миграции см. в разделе [Перенос базы данных](https://datamigration.microsoft.com/). 

