---
title: Перенос баз данных Oracle в SQL Server
description: 'Из этого руководства вы узнаете, как перенести схемы Oracle в Microsoft SQL Server с использованием Помощника по миграции SQL Server для Oracle (SSMA для Oracle). '
ms.prod: sql
ms.reviewer: ''
ms.technology: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: MashaMSFT
ms.author: mathoma
ms.date: 03/19/2021
ms.openlocfilehash: 7ab329891001a8ce71d77a97ced85f2ef63ad002
ms.sourcegitcommit: ecf074e374426c708073c7da88313d4915279fb9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2021
ms.locfileid: "103603358"
---
# <a name="migration-guide-migrate-oracle-to-sql-server"></a>Руководство по миграции. Перенос баз данных Oracle в SQL Server

Из этого руководства вы узнаете, как перенести базы данных Oracle в SQL Server с использованием Помощника по миграции SQL Server для Oracle. 

Другие сценарии см. в [руководстве по переносу баз данных](https://datamigration.microsoft.com/).

## <a name="prerequisites"></a>Предварительные требования 

Чтобы перенести базу данных Oracle в SQL Server, необходимо:

- проверить, поддерживается ли исходная среда;
- установить [SQL Server](https://www.microsoft.com/evalcenter/evaluate-sql-server-2019?filetype=EXE);
- скачать [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/download/details.aspx?id=54258);
- получить [необходимые разрешения для SSMA для Oracle](/sql/ssma/oracle/connecting-to-oracle-database-oracletosql) и [поставщика](/sql/ssma/oracle/connect-to-oracle-oracletosql).


## <a name="pre-migration"></a>Подготовка к миграции

При подготовке к миграции в облако убедитесь в том, что исходная среда поддерживается и что выполнены все предварительные требования. Это поможет успешно и эффективно выполнить миграцию.

Данный этап процесса включает в себя проведение инвентаризации баз данных, которые необходимо перенести, проверку этих баз данных на наличие потенциальных проблем или препятствий для миграции и устранение этих проблем. 

> [!Important]
> Помощник по миграции SQL Server для Oracle поддерживает перенос не всех компонентов Oracle. Соответствующие обходные решения см. в записи блога [Подход к переносу некоторых компонентов Oracle](https://blogs.msdn.microsoft.com/datamigration/2017/05/10/migration-approach-for-oracle-features/).


### <a name="discover"></a>Обнаружить

С помощью [набора средств MAP](https://go.microsoft.com/fwlink/?LinkID=316883) определите имеющиеся источники данных и функции, которые используются в вашей организации, чтобы лучше спланировать миграцию. Этот процесс включает в себя сканирование сети для обнаружения всех экземпляров Oracle в организации, а также их версий и используемых функций.

Для проведения инвентаризации с помощью набора средств MAP, выполните указанные ниже действия. 

1. Откройте [набор средств MAP](https://go.microsoft.com/fwlink/?LinkID=316883).
1. Выберите элемент **Create/Select database** (Создать или выбрать базу данных).
1. Установите переключатель в положение **Create an inventory database** (Создать базу данных инвентаризации), введите имя создаваемой базы данных инвентаризации, укажите краткое описание и нажмите кнопку **ОК**. 
1. Щелкните **Collect inventory data** (Сбор данных инвентаризации), чтобы открыть **мастер инвентаризации и оценки**. 
1. В **мастере инвентаризации и оценки** выберите **Oracle** и нажмите кнопку **Next** (Далее). 
1. Выберите способ поиска компьютеров, который лучше всего подходит для ваших потребностей и среды, а затем нажмите кнопку **Next**. 
1. Введите учетные данные или создайте их для систем, которые необходимо проанализировать, а затем нажмите кнопку **Next**.
1. Укажите очередность учетных данных и нажмите кнопку **Next**. 
1. Укажите учетные данные для каждого компьютера, который требуется обнаружить. Можно использовать уникальные учетные данные для каждого компьютера или список **учетных данных для всех компьютеров**.  
1. Проверьте выбранные настройки и нажмите кнопку **Finish** (Готово).
1. После завершения сканирования просмотрите сводный отчет **Data Collection** (Сбор данных). Сканирование занимает несколько минут, причем длительность зависит от количества баз данных. По завершении нажмите кнопку **Close** (Закрыть). 
1. Выберите **Options** (Параметры), чтобы создать отчет об оценке баз данных Oracle. Для создания отчета выберите по очереди оба параметра.




### <a name="assess"></a>Оценка

Определив источники данных, используйте [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/download/details.aspx?id=54258), чтобы оценить возможности для миграции экземпляров Oracle в виртуальную машину SQL Server. Используя помощник по миграции, можно просмотреть объекты и данные баз данных, оценить возможности переноса баз данных, перенести объекты баз данных в SQL Server, а затем перенести в SQL Server данные.

Чтобы создать оценку, выполните следующие действия. 

1. Откройте [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/download/details.aspx?id=54258). 
1. Выберите **Файл**, а затем пункт **Новый проект**. 
1. Укажите имя проекта, расположение для сохранения проекта, а затем выберите из раскрывающегося списка целевой объект миграции SQL Server. Щелкните **ОК**. 
1. Введите сведения о подключении к Oracle в диалоговом окне **Подключение к базе данных Oracle**.
1. В **обозревателе метаданных Oracle** выберите схему Oracle, а затем нажмите **Создать отчет**, чтобы создать отчет в формате HTML со статистикой преобразований и ошибками и предупреждениями при их наличии.

1. Ознакомьтесь с отчетом в формате HTML, чтобы получить сведения о статистике преобразований, а также ошибках и предупреждениях. Проанализируйте эти сведения, чтобы понять, какие проблемы с преобразованиями имеются и как их устранить.

   Этот отчет можно также открыть из папки проектов SSMA, как показано на первом экране. В приведенном выше примере найдите файл report.xml в следующей папке: 

   `drive:\<username>\Documents\SSMAProjects\MyOracleMigration\report\report_2016_11_12T02_47_55\`

    и откройте его в Excel, чтобы получить список объектов Oracle и действий, необходимых для преобразования схемы.


### <a name="validate-data-types"></a>Обновление типов данных

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого выполните следующие действия. 

1. В главном меню выберите **Сервис**. 
1. Выберите **Параметры проекта**. 
1. Перейдите на вкладку **Сопоставления типов**. 
1. Сопоставление типов для каждой таблицы можно изменить, выбрав таблицу в **обозревателе метаданных Oracle**. 



### <a name="convert-schema"></a>Преобразовать схему

Чтобы преобразовать схему, выполните следующие действия. 

1. (Необязательно) Чтобы преобразовать динамические или нерегламентированные запросы, щелкните узел правой кнопкой мыши и выберите команду **Добавить инструкцию**.
1. На верхней панели навигации выберите **Подключение к SQL Server** и укажите сведения о подключении для SQL Server. Можно выбрать подключение к существующей базе данных или указать новое имя. В этом случае база данных будет создана на целевом сервере.
1. Щелкните схему правой кнопкой мыши и выберите команду **Преобразовать схему**.
1. Когда преобразование схемы завершится, сравните и изучите структуру схемы, чтобы выявить потенциальные проблемы.

   Проект можно сохранить локально для исправления схемы в автономном режиме. Для этого в меню **Файл** выберите пункт **Сохранить проект**. Таким образом можно оценить исходную и целевую схемы в автономном режиме и исправить проблемы перед публикацией схемы в SQL Server.


## <a name="migrate"></a>Миграция

Выполнив необходимые условия и задачи, связанные с этапом **подготовки к миграции**, можно приступить к переносу схемы и данных. Перенос состоит из двух этапов: публикация схемы и перенос данных. 


Чтобы опубликовать схему и перенести данные, выполните указанные ниже действия. 

1. Щелкните правой кнопкой мыши базу данных в **обозревателе метаданных SQL Server** и выберите пункт **Синхронизировать с базой данных**. Это действие опубликует схему Oracle в SQL Server. 
1. Щелкните правой кнопкой мыши схему Oracle в **обозревателе метаданных Oracle** и выберите пункт **Перенос данных**. Кроме того, команду "Перенос данных" можно выбрать на верхней панели навигации.
1. В диалоговом окне укажите сведения о подключении для Oracle и SQL Server.
1. После завершения миграции просмотрите отчет о переносе данных:
1. Подключитесь к SQL Server с помощью [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms), чтобы проверить данные и схему в экземпляре SQL Server. 

Помимо SSMA, для переноса данных можно также использовать службы SQL Server Integration Services (SSIS). Дополнительные сведения см. на следующих ресурсах: 
- запись в блоге [Помощник по миграции SQL Server: оценка и перенос данных со сторонних платформ в SQL Server](https://blogs.msdn.microsoft.com/datamigration/2016/11/16/sql-server-migration-assistant-how-to-assess-and-migrate-databases-from-non-microsoft-data-platforms-to-sql-server/);
- статья [Начало работы со службами SQL Server Integration Services](https://docs.microsoft.com//sql/integration-services/sql-server-integration-services);
- технический документ [SQL Server Integration Services: службы SSIS для Azure и гибридного перемещения данных](https://download.microsoft.com/download/D/2/0/D20E1C5F-72EA-4505-9F26-FEF9550EFD44/SSIS%20Hybrid%20and%20Azure.docx).



## <a name="post-migration"></a>После миграции 

После успешного завершения этапа **миграции** необходимо выполнить ряд задач, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны приступить к приему целевого объекта. Для этого в некоторых случаях потребуется внести изменения в приложения.

[Data Access Migration Toolkit](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit) — это расширение для Visual Studio Code, которое позволяет анализировать исходный код Java и обнаруживать вызовы API-интерфейсов и запросы на доступ к данным. Это единое представление для оценки усилий, необходимых для поддержки нового сервера базы данных. Дополнительные сведения см. в записи блога [Перенос приложения Java из Oracle](https://techcommunity.microsoft.com/t5/microsoft-data-migration/migrate-your-java-applications-from-oracle-to-sql-server-with/ba-p/368727). 

### <a name="perform-tests"></a>Выполнение тестов

Тестирование переноса базы данных включает указанные ниже действия.

1. **Разработка проверочных тестов**. Чтобы протестировать перенос базы данных, необходимо использовать SQL-запросы. Необходимо создать запросы проверки, которые будут выполняться как в исходной, так и в целевой базах данных. Запросы на проверку должны охватывать определенную область.

2. **Настройка тестовой среды**. Тестовая среда должна содержать копию исходной и целевой баз данных. Не забудьте изолировать тестовую среду.

3. **Выполнение проверочных тестов**. Выполните проверочные тесты для источника и целевого объекта, а затем проанализируйте результаты.

4. **Выполнение тестов производительности**. Запустите тест производительности для источника и целевого объекта, а затем проанализируйте и сравните результаты.


### <a name="optimize"></a>Оптимизация

Проверка после миграции — очень важный шаг, позволяющий добиться точности и полноты данных, а также выявить проблемы с производительностью рабочей нагрузки.

> [!Note]
> Дополнительные сведения об этих проблемах и мерах по их устранению см. в [руководстве по проверке и оптимизации после миграции](https://docs.microsoft.com//sql/relational-databases/post-migration-validation-and-optimization-guide).


## <a name="migration-assets"></a>Ресурсы, посвященные миграции 

Дополнительные сведения о выполнении сценария миграции см. на следующих ресурсах, которые были разработаны с учетом поддержки реального проекта миграции.


| **Название со ссылкой**                                                                                                                                          | **Описание**                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool) | Это средство предоставляет предлагаемые "оптимальные" целевые платформы, готовность к переходу в облако и уровень исправления приложения/базы данных для конкретной рабочей нагрузки. Оно обеспечивает простое и быстрое вычисление и создание отчетов, которое помогает ускорить оценку больших объемов, предоставляя, автоматизируя и унифицируя процесс принятия решения относительно целевой платформы.                                                          |
| [Артефакты скрипта инвентаризации Oracle](https://github.com/Microsoft/DataMigrationTeam/tree/master/Oracle%20Inventory%20Script%20Artifacts)                 | Этот ресурс включает в себя запрос PL/SQL, который обращается к системным таблицам Oracle и возвращает количество объектов по типам схем, типам объектов и состоянию. Он также дает приблизительную оценку объема "необработанных данных" и размера таблиц в каждой схеме. Результаты сохраняются в формате CSV.                                                                                                               |
| [Автоматизация сбора и объединения данных для оценки баз данных Oracle в SSMA](https://github.com/microsoft/DataMigrationTeam/tree/master/IP%20and%20Scripts/Automate%20SSMA%20Oracle%20Assessment%20Collection%20%26%20Consolidation)                                             | Этот набор ресурсов использует CSV-файл (sources.csv в папках проектов) в качестве основы для создания XML-файлов, необходимых для проведения оценки SSMA в режиме консоли. Файл source.csv предоставляется клиентом на основе инвентаризации существующих экземпляров Oracle. Выходные файлы: AssessmentReportGeneration_source_1.xml, ServersConnectionFile.xml и VariableValueFile.xml.|
| [Распространенные ошибки SSMA для Oracle и способы их устранения](https://aka.ms/dmj-wp-ssma-oracle-errors)                                                           | Oracle позволяет задавать нескалярное условие в предложении WHERE. В SQL Server, однако, такой тип условия не поддерживается. В результате Помощник по миграции SQL Server (SSMA) для Oracle не преобразует запросы с нескалярным условием в предложении WHERE, выдавая вместо этого ошибку O2SS0001. В этом техническом документе содержатся дополнительные сведения о данной проблеме и способах ее устранения.          |
| [Руководство по переносу баз данных Oracle в SQL Server](https://github.com/microsoft/DataMigrationTeam/blob/master/Whitepapers/Oracle%20to%20SQL%20Server%20Migration%20Handbook.pdf)                | В этом документе рассматриваются задачи, связанные с переносом схемы Oracle в последнюю версию SQL Server. Если миграция требует внесения изменений в компоненты и функции, необходимо тщательно учесть возможное влияние каждого изменения на приложения, использующие базу данных.                                                     |

Эти ресурсы были разработаны в рамках программы Data SQL Ninja, которая спонсируется группой разработчиков Azure Data Group. Основная часть программы Data SQL Ninja заключается в разрешении и ускорении сложной модернизации и реализация перехода на платформу данных Microsoft Azure. Если вы считаете, что ваша организация заинтересована в участии в программе Data SQL Ninja, обратитесь в службу поддержки своей учетной записи и попросите отправить заявку.

## <a name="next-steps"></a>Дальнейшие действия

После миграции ознакомьтесь с [руководством по проверке и оптимизации после миграции](../../../relational-databases/post-migration-validation-and-optimization-guide.md). 

Матрица Майкрософт, а также сторонние службы и средства, доступные для помощи в различных сценариях перемещения баз данных и данных, а также специальных задачах см. в разделе [Службы и инструменты для переноса данных](/azure/dms/dms-tools-matrix).

Другие руководства по миграции см. в разделе [Перенос базы данных](https://datamigration.microsoft.com/). 

Видеоматериалы см. в следующих статьях:
- [Обзор процесса миграции](https://azure.microsoft.com/resources/videos/overview-of-migration-and-recommended-tools-services/)
