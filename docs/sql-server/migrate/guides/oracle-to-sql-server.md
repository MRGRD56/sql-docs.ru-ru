---
title: Руководство по миграции из Oracle в SQL Server
description: Из этого руководства вы узнаете, как перенести схемы Oracle в Microsoft SQL Server с использованием Помощника по миграции SQL Server (SSMA) для Oracle.
ms.prod: sql
ms.reviewer: ''
ms.technology: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: how-to
author: MashaMSFT
ms.author: mathoma
ms.date: 03/19/2021
ms.openlocfilehash: 1d84ff8831d04b84075e73c44a3ab9bdcd694b70
ms.sourcegitcommit: 0b37eb7aef2f358f80867cd13830dd6683da8d85
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "105981023"
---
# <a name="migration-guide-oracle-to-sql-server"></a>Руководство по миграции из Oracle в SQL Server
[!INCLUDE[sqlserver](../../../includes/applies-to-version/sqlserver.md)]

Из этого руководства вы узнаете, как перенести базы данных Oracle в SQL Server с использованием Помощника по миграции SQL Server для Oracle (SSMA для Oracle). 

Другие рекомендации по миграции см. в [руководствах по переносу баз данных в Azure](https://docs.microsoft.com/data-migration). 

## <a name="prerequisites"></a>Предварительные требования 

Прежде чем приступить к переносу базы данных Oracle в SQL Server, сделайте следующее:

- Убедитесь, что ваша исходная среда поддерживается.
- Скачайте и установите [SQL Server](https://www.microsoft.com/evalcenter/evaluate-sql-server-2019?filetype=EXE).
- Скачайте и установите [SSMA для Oracle](https://www.microsoft.com/download/details.aspx?id=54258).
- Получите [необходимые разрешения для SSMA для Oracle](/sql/ssma/oracle/connecting-to-oracle-database-oracletosql) и [поставщик](/sql/ssma/oracle/connect-to-oracle-oracletosql).
- Получите возможность подключения и требуемые разрешения для доступа к исходному и целевому объектам. 


## <a name="pre-migration"></a>Подготовка к миграции

При подготовке к миграции в облако убедитесь в том, что исходная среда поддерживается и все остальные предварительные требования выполнены. Так вам будет проще успешно и эффективно выполнить миграцию.

Этот этап процесса включает в себя инвентаризацию баз данных для переноса, проверку этих баз данных на отсутствие проблем или препятствий для миграции и устранение возможных проблем. 


### <a name="discover"></a>Обнаружить

Чтобы лучше понять процесс миграции и подготовиться к нему, используйте набор средств [Microsoft Assessment and Planning Toolkit (MAP)](https://go.microsoft.com/fwlink/?LinkID=316883), который поможет выявить существующие источники данных и получить сведения о функциях, используемых вашей организацией. Этот процесс включает в себя сканирование сети для обнаружения всех экземпляров, версий и компонентов Oracle в организации.

Для проведения инвентаризации с помощью набора средств MAP сделайте следующее: 

1. Откройте [набор средств MAP](https://go.microsoft.com/fwlink/?LinkID=316883).

1. На панели **Overview** (Обзор) выберите **Create/Select database** (Создание или выбор базы данных). 

   ![Снимок экрана: ссылка Create/Select database (Создание или выбор базы данных) на панели Overview (Обзор) в наборе средств MAP.](./media/oracle-to-sql-server/select-database.png)

1. В разделе **Create or select a database** (Создание или выбор базы данных) щелкните **Create an inventory database** (Создать базу данных инвентаризации), введите имя и краткое описание для новой базы данных инвентаризации, а затем нажмите кнопку **ОК**.

   :::image type="content" source="media/oracle-to-sql-server/create-inventory-database.png" alt-text="Снимок экрана: действие Create an inventory database (Создать базу данных инвентаризации) в наборе средств MAP.":::

1. Щелкните **Collect inventory data** (Сбор данных инвентаризации), чтобы открыть **мастер инвентаризации и оценки**. 

   :::image type="content" source="media/oracle-to-sql-server/collect-inventory-data.png" alt-text="Снимок экрана: ссылка Collect inventory data (Сбор данных инвентаризации) в мастере инвентаризации и оценки.":::

1. В этом мастере выберите **Oracle**, а затем щелкните **Next** (Далее). 

   ![Снимок экрана: выбор Oracle и нажатие кнопки Next (Далее) в мастере инвентаризации и оценки.](./media/oracle-to-sql-server/choose-oracle.png)

1. Выберите оптимальный вариант для поиска компьютеров с учетом среды и потребностей вашей организации, а затем щелкните **Next** (Далее). 

   ![Снимок экрана: список методов обнаружения компьютеров, в котором можно выбрать наиболее подходящий вариант для вашей организации.](./media/oracle-to-sql-server/choose-search-option.png)

1. Введите существующие учетные данные или создайте их для нужных систем, а затем щелкните **Next** (Далее).

    ![Снимок экрана: панель мастера для ввода учетных данных компьютера.](./media/oracle-to-sql-server/choose-credentials.png)

1. Укажите очередность учетных данных и нажмите кнопку **Next**.

   ![Снимок экрана: панель мастера для настройки порядка учетных данных.](./media/oracle-to-sql-server/set-credential-order.png)  

1. Укажите учетные данные для каждого компьютера, который требуется обнаружить. Вы можете указать уникальные учетные данные для каждого компьютера или выбрать их из списка **Computers** (Компьютеры).

   ![Снимок экрана: элемент Use all computers credential list (Использовать список учетных данных всех компьютеров), позволяющий указать учетные данные для каждого компьютера, который вы хотите обнаружить.](./media/oracle-to-sql-server/specify-credentials-for-each-computer.png)

1. Проверьте выбранные настройки и нажмите кнопку **Finish** (Готово).

   ![Снимок экрана: страница мастера со сводной информацией для проверки.](./media/oracle-to-sql-server/review-summary.png)

1. После завершения сканирования просмотрите сводный отчет **Data Collection** (Сбор данных). Это сканирование может занять несколько минут в зависимости от количества баз данных. По завершении нажмите кнопку **Close** (Закрыть).

   ![Снимок экрана: страница сводного отчета по сбору данных.](./media/oracle-to-sql-server/collection-summary-report.png)

1. Выберите **Options** (Параметры), чтобы создать отчет об оценке баз данных Oracle. Для создания отчета поочередно выберите оба параметра.


### <a name="assess"></a>Оценка

Завершив выбор источников данных, с помощью [SSMA для Oracle](https://www.microsoft.com/download/details.aspx?id=54258) оцените тот экземпляр Oracle, который вы переносите на виртуальную машину SQL Server, чтобы увидеть различия между ними. Используя помощник по миграции, можно изучить объекты баз данных и данные в них, оценить возможности переноса баз данных, перенести объекты баз данных в SQL Server, а затем перенести данные в SQL Server.

Чтобы создать оценку, сделайте следующее: 

1. Откройте [SSMA для Oracle](https://www.microsoft.com/download/details.aspx?id=54258). 
1. Выберите **File** (Файл) и **New Project** (Создать проект). 
1. Укажите имя и расположение проекта, а затем в раскрывающемся списке выберите целевой объект для миграции в SQL Server. Щелкните **ОК**. 

   ![Снимок экрана: панель New Project (Новый проект) в SSMA для Oracle.](./media/oracle-to-sql-server/new-project.png)

1. Щелкните **Connect to Oracle** (Подключиться к Oracle), введите сведения о подключении к Oracle и нажмите кнопку **Connect** (Подключиться).

   ![Снимок экрана: панель Connect to Oracle (Подключение к Oracle).](./media/oracle-to-sql-server/connect-to-oracle.png)

1. На панели **Filter objects** (Фильтрация объектов) выберите схемы Oracle, которые вы намерены перенести, и щелкните **OK** (ОК).

   ![Снимок экрана: панель Filter objects (Фильтрация объектов) для выбора загружаемых схем.](./media/oracle-to-sql-server/select-schema.png)

1. На панели **Oracle Metadata Explorer** (Обозреватель метаданных Oracle) выберите нужную схему Oracle и щелкните **Create Report** (Создать отчет), чтобы создать отчет в формате HTML со статистикой преобразований и списком ошибок и предупреждений (при их наличии). Можно также выбрать вкладку **Create Report** (Создать отчет) в правом верхнем углу.

   ![Снимок экрана: ссылки "Create Report" (Создать отчет) в обозревателе метаданных Oracle.](./media/oracle-to-sql-server/create-report.png)

1. Ознакомьтесь с отчетом в формате HTML, чтобы получить сведения о статистике преобразований, а также об ошибках или предупреждениях. Также можно открыть отчет в Excel, чтобы получить список объектов Oracle и действий, необходимых для выполнения преобразований схемы. По умолчанию этот отчет находится в папке report в каталоге SSMAProjects. Пример: 

   `drive:\<username>\Documents\SSMAProjects\MyOracleMigration\report\report_2016_11_12T02_47_55\`

   ![Снимок экрана: отчет о преобразовании в SSMA.](./media/oracle-to-sql-server/conversion-report.png)


### <a name="validate-data-types"></a>Обновление типов данных

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого сделайте следующее: 

1. Щелкните **Tools** (Средства) и выберите **Project Settings** (Параметры проекта).  
1. Перейдите на вкладку **Type mapping** (Сопоставление типов).

   ![Снимок экрана: панель Type mapping (Сопоставление типов) в SSMA для Oracle.](./media/oracle-to-sql-server/type-mappings.png)

1. Сопоставление типов для каждой таблицы можно изменить, выбрав имя нужной таблицы в области **Oracle Metadata explorer** (Обозреватель метаданных Oracle). 

### <a name="convert-schema"></a>Преобразовать схему

Чтобы преобразовать схему, сделайте следующее: 

1. (Необязательно.) Чтобы преобразовать динамические или специализированные запросы, щелкните нужный узел правой кнопкой мыши и выберите пункт **Add statement** (Добавить инструкцию). 

1. Перейдите на вкладку **Connect to SQL Server** (Подключение к SQL Server), а затем введите сведения о подключении к экземпляру SQL Server.  

    а. В раскрывающемся списке **Database** (База данных) выберите целевую базу данных или введите неиспользуемое имя, чтобы создать базу данных на целевом сервере.   
    b. Предоставьте сведения о проверке подлинности.   
    c. Выберите **Подключиться**.

   ![Снимок экрана: область Connect to SQL Server (Подключение к SQL Server) в SSMA для Oracle.](./media/oracle-to-sql-server/connect-to-sql.png)

1. На панели **Oracle Metadata Explorer** (Обозреватель метаданных Oracle) щелкните правой кнопкой мыши схему, с которой вы работаете, и выберите действие **Convert Schema** (Преобразовать схему). Также можно выбрать вкладку **Convert Schema** (Преобразовать схему) в правом верхнем углу.

   ![Снимок экрана: пункт Convert Schema (Преобразовать схему) в области Oracle Metadata Explorer (Обозреватель метаданных Oracle).](./media/oracle-to-sql-server/convert-schema.png)

1. Когда преобразование завершится, сравните преобразованные объекты с исходными, чтобы выявить возможные проблемы, и устраните их в соответствии с рекомендациями.

   ![Снимок экрана: сравнение преобразованных объектов с исходными.](./media/oracle-to-sql-server/table-mapping.png)

   Сравните преобразованный текст Transact-SQL с исходным кодом и просмотрите рекомендации.

   ![Снимок экрана: сравнение преобразованного текста с исходным кодом.](./media/oracle-to-sql-server/procedure-comparison.png)

1. На панели выходных данных щелкните значок **Review results** (Проверка результатов), а затем просмотрите ошибки в области **Error list** (Список ошибок). 
1. В качестве упражнения по исправлению схемы в автономном режиме сохраните проект на локальном устройстве, выбрав **File** > **Save Project** (Файл > Сохранить проект). Это позволит вам оценить исходную и целевую схемы в автономном режиме и устранить проблемы перед публикацией схемы в экземпляре SQL Server.


## <a name="migrate-database"></a>Перенос базы данных

Когда будут выполнены все предварительные условия и завершены задачи, связанные с *подготовкой к миграции*, вы можете переходить к переносу схемы и базы данных. Перенос состоит из двух этапов: публикация схемы и перенос базы данных. 

Чтобы опубликовать схему и перенести базу данных, сделайте следующее: 

1. Опубликуйте схему. В области **SQL Server Metadata Explorer** (Обозреватель метаданных SQL Server) щелкните базу данных правой кнопкой мыши и выберите **Synchronize with Database** (Синхронизировать с базой данных). Схема Oracle будет опубликована в экземпляре SQL Server.

   ![Снимок экрана: команда Synchronize with Database (Синхронизировать с базой данных) в области SQL Server Metadata Explorer (Обозреватель метаданных SQL Server).](./media/oracle-to-sql-server/synchronize-database.png)

1. Проверьте результаты сопоставления исходного и целевого проектов, как показано ниже:

   ![Снимок экрана: область Synchronize with Database (Синхронизация с базой данных) для просмотра сопоставлений базы данных.](./media/oracle-to-sql-server/synchronize-database-review.png)

1. Перенесите данные. В области **Oracle Metadata Explorer** (Обозреватель метаданных Oracle) щелкните правой кнопкой мыши схему или объект, которые вы хотите перенести, и выберите **Migrate Data** (Перенос данных). Также можно выбрать вкладку **Migrate Data** (Миграция данных) в правом верхнем углу. 

   Чтобы перенести данные всей базы данных, установите флажок рядом с ее именем. Чтобы перенести данные из отдельных таблиц, разверните базу данных, разверните узел **Tables** (Таблицы) и установите флажок рядом с нужной таблицей. Чтобы не переносить данные из определенной таблицы, снимите флажок.

   ![Снимок экрана: ссылки для переноса данных.](./media/oracle-to-sql-server/migrate-data.png)

1. На панели **Migrate Data** (Перенос данных) введите сведения о подключении к Oracle и SQL Server.

1. После завершения миграции изучите **отчет о переносе данных**.

    ![Снимок экрана: отчет о переносе данных.](./media/oracle-to-sql-server/data-migration-report.png)

1. Подключитесь к экземпляру SQL Server с помощью [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) и проверьте результаты миграции, просмотрев данные и схему.

   ![Снимок экрана: сервер управления SQL Server.](./media/oracle-to-sql-server/validate-in-ssms.png)


Помимо SSMA, для переноса данных можно использовать службы SQL Server Integration Services (SSIS). Дополнительные сведения см. на следующих ресурсах: 
- статья [Начало работы со службами SQL Server Integration Services](https://docs.microsoft.com//sql/integration-services/sql-server-integration-services);
- технический документ [SQL Server Integration Services: службы SSIS для Azure и гибридного перемещения данных](https://download.microsoft.com/download/D/2/0/D20E1C5F-72EA-4505-9F26-FEF9550EFD44/SSIS%20Hybrid%20and%20Azure.docx).

## <a name="post-migration"></a>После миграции 

После успешного завершения этапа *миграции* необходимо выполнить ряд дополнительных задач, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны переключиться на использование целевого объекта миграции. Для этого в некоторых случаях потребуется внести изменения в приложения.

[Data Access Migration Toolkit](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit) — это расширение для Visual Studio Code, с помощью которого можно анализировать исходный код Java и отслеживать вызовы и запросы к API доступа к данным. Этот набор средств содержит представление с одной областью для задач, которые нужно решить для поддержки новой серверной части базы данных. Дополнительные сведения см. в записи блога [Перенос приложения Java из Oracle](https://techcommunity.microsoft.com/t5/microsoft-data-migration/migrate-your-java-applications-from-oracle-to-sql-server-with/ba-p/368727). 

### <a name="perform-tests"></a>Выполнение тестов

Тестирование переноса базы данных включает следующие действия:

1. **Разработка проверочных тестов.** Чтобы протестировать перенос базы данных, необходимо использовать SQL-запросы. Следует создать проверочные запросы, которые будут выполняться в исходной и в целевой базах данных. Проверочные запросы должны охватывать всю определенную ранее область.

1. **Настройка тестовой среды.** Тестовая среда должна содержать копию исходной и целевой баз данных. Не забудьте изолировать тестовую среду.

1. **Выполнение проверочных тестов.** Выполните проверочные тесты в исходной и целевой базах данных, а затем проанализируйте результаты.

1. **Выполнение тестов производительности.** Запустите тесты производительности для исходной и целевой баз данных, а затем проанализируйте и сравните результаты.


### <a name="optimize"></a>Оптимизация

Проверка после миграции — очень важный шаг, позволяющий добиться точности и полноты данных и устранить проблемы с производительностью рабочей нагрузки.

Дополнительную информацию об этих проблемах и мерах по их устранению см. в [руководстве по проверке и оптимизации после миграции](../../../relational-databases/post-migration-validation-and-optimization-guide.md).


## <a name="migration-assets"></a>Ресурсы, посвященные миграции 

Дополнительную помощь по этому сценарию миграции можно получить в приведенных ниже ресурсах. Они разработаны как вспомогательные материалы по реализации реальных проектов миграции.


| Заголовок | Описание |
| --- | --- |
| [Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool) | Предоставляет рекомендации по оптимальным целевым платформам, готовности к переходу в облако и уровням исправления для приложений или баз данных с учетом определенных рабочих нагрузок. Обеспечивает простое и быстрое вычисление и создание отчетов, ускоряя оценку больших объемов ресурсов, предоставляя автоматизированный и унифицированный процесс принятия решений относительно целевой платформы. |
| [Артефакты скрипта инвентаризации Oracle](https://github.com/Microsoft/DataMigrationTeam/tree/master/Oracle%20Inventory%20Script%20Artifacts) | Включает в себя запрос PL/SQL, который обращается к системным таблицам Oracle и возвращает количество объектов по типам схем, типам объектов и состоянию. Он также дает приблизительную оценку объема "необработанных данных" и размера таблиц в каждой схеме. Результаты сохраняются в формате CSV. |
| [Автоматизация сбора и объединения данных для оценки баз данных Oracle в SSMA](https://github.com/microsoft/DataMigrationTeam/tree/master/IP%20and%20Scripts/Automate%20SSMA%20Oracle%20Assessment%20Collection%20%26%20Consolidation) | Это набор ресурсов, который использует CSV-файл (sources.csv в папках проектов) в качестве основы для создания XML-файлов, необходимых для проведения оценки SSMA в режиме консоли. Файл source.csv предоставляется клиентом на основе инвентаризации существующих экземпляров Oracle. Выходные файлы: AssessmentReportGeneration_source_1.xml, ServersConnectionFile.xml и VariableValueFile.xml. |
| [Проблемы в SSMA и возможные решения при миграции баз данных Oracle](https://aka.ms/dmj-wp-ssma-oracle-errors) | Обсуждение возможностей, которые Oracle предоставляет для назначение нескалярного условия в предложении WHERE. В SQL Server, однако, такой тип условия не поддерживается. В результате SSMA для Oracle не преобразует запросы с нескалярным условием в предложении WHERE, выдавая вместо этого ошибку O2SS0001. В этом техническом документе содержатся дополнительные сведения о данной проблеме и способах ее устранения. |
| [Руководство по переносу баз данных Oracle в SQL Server](https://github.com/microsoft/DataMigrationTeam/blob/master/Whitepapers/Oracle%20to%20SQL%20Server%20Migration%20Handbook.pdf) | Описывает задачи, связанные с переносом схемы Oracle в SQL Server последней версии. Если миграция требует внесения изменений в компоненты и функции, то следует тщательно учесть возможное влияние каждого изменения на приложения, использующие базу данных. |

Эти ресурсы разработали специалисты по разработке данных SQL. Основная задача этой команды — включить и ускорить комплексную модернизацию проектов миграции платформы данных на платформу данных Microsoft Azure.

## <a name="next-steps"></a>Дальнейшие действия

После переноса ознакомьтесь с [руководством по проверке и оптимизации после миграции](../../../relational-databases/post-migration-validation-and-optimization-guide.md). 

Матрицу служб и средств, предоставляемых корпорацией Майкрософт и сторонними разработчиками для оказания помощи с разными сценариями переноса баз данных и данных, а также для специализированных задач, см. в статье [Службы и инструменты для переноса данных](/azure/dms/dms-tools-matrix).

Другие рекомендации по миграции см. в [руководствах по переносу баз данных в Azure](https://datamigration.microsoft.com/). 

Видео по миграции см. в разделе [Обзор процесса миграции](https://azure.microsoft.com/resources/videos/overview-of-migration-and-recommended-tools-services/).
