---
description: sys.syslockinfo (Transact-SQL)
title: sys.sysлоккинфо (Transact-SQL) | Документация Майкрософт
ms.custom: ''
ms.date: 03/15/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: system-objects
ms.topic: language-reference
f1_keywords:
- syslockinfo_TSQL
- sys.syslockinfo_TSQL
- sys.syslockinfo
- syslockinfo
dev_langs:
- TSQL
helpviewer_keywords:
- syslockinfo system table
- sys.syslockinfo compatibility view
ms.assetid: d8cae434-807a-473e-b94f-f7a0e1b2daf0
author: WilliamDAssafMSFT
ms.author: wiassaf
ms.openlocfilehash: d552fdbb75c4aa1cb786025a8d1c866b89135e12
ms.sourcegitcommit: a9e982e30e458866fcd64374e3458516182d604c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/11/2021
ms.locfileid: "98099093"
---
# <a name="syssyslockinfo-transact-sql"></a>sys.syslockinfo (Transact-SQL)
[!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]

  Содержит сведения обо всех удовлетворенных, преобразованных и ожидающих запросах на блокировку.  
  
> [!IMPORTANT]  
>  [!INCLUDE[ssnoteCompView](../../includes/ssnotecompview-md.md)]  
  
> [!IMPORTANT]  
>  Данная функция изменилась по сравнению с более ранними версиями [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Дополнительные сведения см. [в разделе критические изменения функций ядро СУБД в SQL Server 2016](../../database-engine/breaking-changes-to-database-engine-features-in-sql-server-2016.md).  
  
|Имя столбца|Тип данных|Описание|  
|-----------------|---------------|-----------------|  
|**rsc_text**|**nchar (32)**|Текстовое описание ресурса блокировки. Содержит часть имени ресурса.|  
|**rsc_bin**|**двоичный (16)**|Ресурс двоичной блокировки. Содержит реальный ресурс блокировки, который хранится в диспетчере блокировок. Этот столбец включен для средств, которые имеют представление о формате ресурсов блокировки для создания собственного отформатированного ресурса блокировки и для выполнения самосоединений в **syslockinfo**.|  
|**rsc_valblk**|**двоичный (16)**|Массив значений блокировки. Некоторые типы ресурсов могут включать дополнительные данные в ресурсе блокировки, которые не хэшируются диспетчером блокировок для определения владельца конкретного ресурса блокировки. Например, блокировки страниц не принадлежат конкретному идентификатору объекта. Для укрупнения блокировки и в других целях. Однако идентификатор объекта блокировки страницы может быть включен в массив значений блокировки.|  
|**rsc_dbid**|**smallint**|Идентификатор базы данных, ассоциированный с ресурсом.|  
|**rsc_indid**|**smallint**|Идентификатор индекса, ассоциированный с ресурсом, если соответствует.|  
|**rsc_objid**|**int**|Идентификатор объекта, ассоциированный с ресурсом, если соответствует.|  
|**rsc_type**|**tinyint**|Тип ресурса:<br /><br /> 1 = Ресурс NULL (не используется);<br /><br /> 2 = база данных<br /><br /> 3 = Файл;<br /><br /> 4 = индекс;<br /><br /> 5 = Таблица;<br /><br /> 6 = Страница;<br /><br /> 7 = Ключ;<br /><br /> 8 = Экстент;<br /><br /> 9 = RID (Идентификатор строки);<br /><br /> 10 = Приложение.|  
|**rsc_flag**|**tinyint**|Внутренние флаги ресурса.|  
|**req_mode**|**tinyint**|Режим запроса блокировки. Этот столбец является режимом блокировки запрашивающего и представляет собой режим предоставления или режим преобразования или ожидания.<br /><br /> 0 = NULL. Нет доступа к ресурсу. Играет роль заполнителя.<br /><br /> 1 = Sch-S (стабильности схемы). Заверяет, что элемент схемы, такой как таблица или индекс, не будет удален до тех пор, пока сеанс связи удерживает блокировку стабильности схемы на данный элемент схемы.<br /><br /> 2 = Sch-S (изменения схемы). Должен поддерживаться любым сеансом связи, во время которого предполагается изменить схему данного ресурса. Заверяет, что другие сеансы не имеют ссылок на обозначенный объект.<br /><br /> 3 = S (коллективная). Удерживающему сеансу предоставлен коллективный доступ к ресурсу.<br /><br /> 4 = U (обновления). Указывает блокировку обновления, полученную на ресурсы, которые со временем могут быть обновлены. Используется для предотвращения распространенной формы взаимоблокировки, которая происходит, если несколько сеансов блокируют ресурсы для возможного обновления в будущем.<br /><br /> 5 = X (монопольная). Удерживающему сеансу предоставлен исключительный доступ к ресурсу.<br /><br /> 6 = IS (с намерением коллективного доступа). Указывает намерение поместить блокировки типа S на некоторые подчиненные ресурсы в иерархии блокировок.<br /><br /> 7 = IU (с намерением обновления). Указывает намерение поместить блокировки типа U на некоторые подчиненные ресурсы в иерархии блокировок.<br /><br /> 8 = IX (с намерением монопольного доступа). Указывает намерение поместить блокировки типа X на некоторые подчиненные ресурсы в иерархии блокировок.<br /><br /> 9 = SIU (коллективная, с намерением обновления). Указывает коллективный доступ к ресурсу с намерением получения блокировок обновления на подчиненные ресурсы в иерархии блокировок.<br /><br /> 10 = SIX (коллективная, с намерением монопольного доступа). Указывает коллективный доступ к ресурсу с намерением получения монопольных блокировок на подчиненные ресурсы в иерархии блокировок.<br /><br /> 11 = UIX (обновления, с намерением монопольного доступа). Указывает блокировку обновления ресурса с намерением получения монопольных блокировок на подчиненные ресурсы в иерархии блокировок.<br /><br /> 12 = BU. Используется для массовых операций.<br /><br /> 13 = RangeS_S (общий ключевой диапазон и общая блокировка ресурса). Указывает на последовательный просмотр диапазона.<br /><br /> 14 = RangeS_S (общий ключевой диапазон и блокировка ресурса для обновления). Указывает на последовательное сканирование обновления.<br /><br /> 15 = RangeS_S (вставка ключевого диапазона и блокировка Null для ресурса). Используется для проверки диапазонов, перед тем как вставить новый ключ в индекс.<br /><br /> 16 = RangeI_S. Блокировка преобразования ключевого диапазона, созданная перекрытием блокировок RangeI_N и S.<br /><br /> 17 = RangeI_U. Блокировка преобразования ключевого диапазона, созданная перекрытием блокировок RangeI_N и U.<br /><br /> 18 = RangeI_X. Блокировка преобразования ключевого диапазона, созданная перекрытием блокировок RangeI_N и X.<br /><br /> 19 = RangeX_S. Блокировка преобразования ключевого диапазона, созданная перекрытием блокировок RangeI_N и RangeS_S.<br /><br /> 20 = RangeX_U. Блокировка преобразования ключевого диапазона, созданная перекрытием блокировок RangeI_N и RangeS_U.<br /><br /> 21 = RangeX_X (исключающий ключевой диапазон и исключающая блокировка ресурса). Блокировка диалога, используемая во время обновления ключа в диапазоне.|  
|**req_status**|**tinyint**|Состояние запроса на блокировку:<br /><br /> 1 = Принято;<br /><br /> 2 = Преобразуется;<br /><br /> 3 = Ожидание.|  
|**req_refcnt**|**smallint**|Счетчик обращений к блокировке. Каждый раз, когда транзакция запрашивает блокировку определенного ресурса, счетчик обращений увеличивается. Блокировка не может быть снята до тех пор, пока счетчик обращений не будет равен 0.|  
|**req_cryrefcnt**|**smallint**|Зарезервировано для использования в будущем. Всегда равен 0.|  
|**req_lifetime**|**int**|Битовая карта времени действия блокировки. Во время определенных стратегий обработки запросов блокировка должна сохраняться на ресурсах до тех пор, пока обработчик запросов не завершит определенную фазу запроса. Битовая карта времени действия блокировки используется обработчиком запросов и диспетчером транзакций для указания групп блокировок, которые могут быть сняты по завершении выполнения определенной фазы запроса. Определенные биты в битовой карте используются для указания блокировок, которые будут поддерживаться до конца транзакции, даже если их счетчик обращений равен 0.|  
|**req_spid**|**int**|[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] Идентификатор внутреннего процесса сеанса, запрашивающего блокировку.|  
|**req_ecid**|**int**|Идентификатор контекста выполнения (ECID). Используется для указания того, какой поток в параллельной операции владеет конкретной блокировкой.|  
|**req_ownertype**|**smallint**|Тип объекта, ассоциированного с блокировкой:<br /><br /> 1 = Транзакция;<br /><br /> 2 = Курсор;<br /><br /> 3 = Сеанс;<br /><br /> 4 = Экс-сеанс.<br /><br /> Обратите внимание, что 3 и 4 представляют собой особые варианты блокировки сеанса, соответственно блокировки трассировки базы данных и файловых групп.|  
|**req_transactionID**|**bigint**|Уникальный идентификатор транзакции, используемый в **syslockinfo** и в событии профилировщика|  
|**req_transactionUOW**|**uniqueidentifier**|Определяет идентификатор единицы работы (UOW) транзакции DTC. Для транзакций, отличных от MS DTC, UOW равен 0.|  
  
## <a name="permissions"></a>Разрешения  
 необходимо разрешение VIEW SERVER STATE на сервере.  
  
## <a name="see-also"></a>См. также:  
 [Сопоставление системных таблиц с системными представлениями &#40;&#41;Transact-SQL ](../../relational-databases/system-tables/mapping-system-tables-to-system-views-transact-sql.md)   
 [Представления совместимости (Transact-SQL)](~/relational-databases/system-compatibility-views/system-compatibility-views-transact-sql.md)  
  
  
