---
description: sys.dm_resource_governor_workload_groups_history_ex (база данных SQL Azure)
title: sys.dm_resource_governor_workload_groups_history_ex (база данных SQL Azure) | Документация Майкрософт
ms.custom: ''
ms.date: 01/05/2021
ms.prod: sql
ms.reviewer: ''
ms.technology: system-objects
ms.topic: reference
f1_keywords:
- sys.dm_resource_governor_workload_groups_history_ex_TSQL
- sys.dm_resource_governor_workload_groups_history_ex
- dm_resource_governor_workload_groups_history_ex
- dm_resource_governor_workload_groups_history_ex_TSQL
dev_langs:
- TSQL
helpviewer_keywords:
- Availability Groups [SQL Server], monitoring
- sys.dm_resource_governor_workload_groups_history_ex dynamic management view
author: joesackmsft
ms.author: josack
ms.openlocfilehash: 75235f489b396c2269ae0d1dcf22ed24297ec4e9
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100342742"
---
# <a name="sysdm_resource_governor_workload_groups_history_ex-azure-sql-database"></a>sys.dm_resource_governor_workload_groups_history_ex (база данных SQL Azure)
[!INCLUDE[Azure SQL Database Azure SQL Managed Instance](../../includes/applies-to-version/asdb-asdbmi.md)]

Каждая строка представляет периодический моментальный снимок статистики группы рабочей нагрузки в базе данных SQL Azure. Моментальный снимок создается, когда ядро СУБД запускается и каждые несколько секунд после этого. Интервал между текущим и предыдущим снимками может быть разным и указан в `duration_ms` столбце. Возвращаются последние доступные моментальные снимки, до 128 моментальных снимков для каждой группы рабочей нагрузки.
  
|Имя столбца|Тип данных|Описание|  
|-----------------|---------------|-----------------|  
|**pool_id**| INT |Идентификатор пула ресурсов. Не допускает значение NULL.|
|**group_id**| INT |Идентификатор группы рабочей нагрузки. Не допускает значение NULL.|
|**name**| nvarchar(256) |Имя группы рабочей нагрузки. Не допускает значение NULL.|
|**snapshot_time**| DATETIME |Дата и время создания моментального снимка статистики группы ресурсов.|
|**duration_ms**| INT |Длительность между текущим и предыдущим снимками.|
|**active_worker_count**| INT |Всего рабочих ролей в текущем моментальном снимке.|
|**active_request_count**| INT |Текущее количество запросов. Не допускает значение NULL.|
|**active_session_count**| INT |Общее число активных сеансов в текущем моментальном снимке.|
|**total_request_count**| BIGINT |Совокупное количество выполненных запросов в группе рабочей нагрузки. Не допускает значение NULL.|
|**delta_request_count**| INT |Число завершенных запросов в группе рабочей нагрузки с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**total_cpu_usage_ms**| BIGINT |Совокупное использование ЦП, в миллисекундах, для группы рабочей нагрузки. Не допускает значение NULL.|
|**delta_cpu_usage_ms**| INT |Загрузка ЦП в миллисекундах с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**delta_cpu_usage_preemptive_ms**| INT |Вызовы Win32 с вытеснением, не управляемые RG ЦП SQL, с момента создания последнего моментального снимка.|
|**delta_reads_reduced_memgrant_count**| INT |Число операций предоставления памяти, для которых достигнут максимальный размер запроса с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**reads_throttled**| INT |Общее число регулируемых операций чтения.|
|**delta_reads_queued**| INT |Общее количество операций чтения, поставленных в очередь с момента последнего моментального снимка. Допускает значение NULL. Значение null, если группа ресурсов не управляется операциями ввода-вывода.|
|**delta_reads_issued**| INT |Общее количество операций чтения с момента последнего моментального снимка. Допускает значение NULL. Значение null, если группа ресурсов не управляется операциями ввода-вывода.|
|**delta_reads_completed**| INT |Общее чтение с IOs завершено с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**delta_read_bytes**| BIGINT |Общее число байтов, считанных с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**delta_read_stall_ms**| INT |Общее время (в миллисекундах) между получением ввода-вывода при чтении и завершением с момента последнего моментального снимка. Не допускает значение NULL.|
|**delta_read_stall_queued_ms**| INT |Общее время (в миллисекундах) между получением ввода-вывода при чтении и проблемой с момента последнего моментального снимка. Допускает значение NULL. Значение null, если группа ресурсов не управляется операциями ввода-вывода. Ненулевое delta_read_stall_queued_ms означает, что RG влияет на операции ввода-вывода.|
|**delta_writes_queued**| INT |Общее число операций записи IOs, поставленных в очередь с момента последнего моментального снимка. Допускает значение NULL. Значение null, если группа ресурсов не управляется операциями ввода-вывода.|
|**delta_writes_issued**| INT |Общее число операций записи для IOs с момента последнего моментального снимка. Допускает значение NULL. Значение null, если группа ресурсов не управляется операциями ввода-вывода.|
|**delta_writes_completed**| INT |Общая операция записи на IOs завершена с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**delta_writes_bytes**| BIGINT |Общее число байтов, записанных с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**delta_write_stall_ms**| INT |Общее время (в миллисекундах) между получением и завершением операций ввода-вывода с момента последнего моментального снимка. Не допускает значение NULL.|
|**delta_background_writes**| INT |Общее число операций записи, выполненных фоновыми задачами с момента создания последнего моментального снимка.|
|**delta_background_write_bytes**| BIGINT |Общий размер записи, выполняемый фоновыми задачами с момента создания последнего моментального снимка в байтах.|
|**delta_log_bytes_used**| BIGINT |Журнал, использованный с момента создания последнего моментального снимка в байтах.|
|**delta_log_temp_db_bytes_used**| BIGINT |Журнал tempdb, использованный с момента создания последнего моментального снимка в байтах.|
|**delta_query_optimizations**| BIGINT |Число оптимизаций запросов в этой группе рабочей нагрузки с момента создания последнего моментального снимка. Не допускает значение NULL.|
|**delta_suboptimal_plan_generations**| BIGINT |Число неоптимальных поколений планов, произошедших в этой группе рабочей нагрузки из-за нехватки памяти с момента создания последнего моментального снимка. Не допускает значение NULL.
|**max_memory_grant_kb**| BIGINT |Максимальный объем памяти, предоставляемый группе в КБ.|
|**max_request_cpu_msec**| BIGINT |Максимальное использование ЦП, в миллисекундах, для отдельного запроса. Не допускает значение NULL.|
|**max_concurrent_request**| INT |Текущее значение параметра максимального числа параллельных запросов. Не допускает значение NULL.|
|**max_io**| INT |Максимальный предел ввода-вывода для группы.|
|**max_global_io**| INT |Указано только в ознакомительных целях. Не поддерживается. Совместимость с будущими версиями не гарантируется.
|**max_queued_io**| INT |Указано только в ознакомительных целях. Не поддерживается. Совместимость с будущими версиями не гарантируется.|
|**max_log_rate_kb**| BIGINT |Максимальная скорость журнала (килобайтах-байт/с) на уровне группы ресурсов.|
|**max_session**| INT |Ограничение сеанса для группы.|
|**max_worker**| INT |Ограничение рабочей роли для группы.|
|||

## <a name="permissions"></a>Разрешения

Для этого представления требуется разрешение VIEW SERVER STATE.

## <a name="remarks"></a>Remarks

Пользователи могут получить доступ к этому динамическому административному представлению, чтобы отслеживать потребление ресурсов практически в реальном времени для пула рабочей нагрузки пользователей, а также системных внутренних пулов экземпляра базы данных SQL Azure.

> [!IMPORTANT]
> Большая часть данных, предоставляемых этим динамическим административным представлением, предназначена для внутреннего использования и может изменяться.

## <a name="examples"></a>Примеры

В следующем примере возвращаются данные о максимальной скорости ведения журнала и потреблении для каждого моментального снимка по пулу пользователей:

```sql
SELECT snapshot_time,
       name,
       max_log_rate_kb,
       delta_log_bytes_used
FROM sys.dm_resource_governor_workload_groups_history_ex
WHERE name LIKE 'User%'
ORDER BY snapshot_time DESC;
```

## <a name="see-also"></a>См. также:

- [Управление частотой ведения журнала перевода](/azure/sql-database/sql-database-resource-limits-database-server#transaction-log-rate-governance)
- [Ограничения ресурсов на основе DTU для эластичного пула](/azure/sql-database/sql-database-dtu-resource-limits-elastic-pools)
- [Ограничения ресурсов виртуального ядра для эластичного пула](/azure/sql-database/sql-database-vcore-resource-limits-elastic-pools)