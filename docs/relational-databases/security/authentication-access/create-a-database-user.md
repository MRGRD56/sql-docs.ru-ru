---
title: Создание пользователя базы данных | Microsoft Docs
description: Узнайте, как создавать распространенные типы пользователей базы данных с помощью SQL Server Management Studio или Transact-SQL.
ms.custom: ''
ms.date: 04/24/2017
ms.prod: sql
ms.prod_service: database-engine, sql-database, sql-data-warehouse, pdw
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
f1_keywords:
- sql13.swb.user.securables.f1
- SQL13.SWB.DATABASEUSER.GENERAL.F1
helpviewer_keywords:
- database users, creating
- creating users with Management Studio
- mapping users
- users [SQL Server], creating
- database user additions [SQL Server]
- database users, mapping
- CREATE USER [Management Studio]
- users [SQL Server], adding
- mapping database users
ms.assetid: 782798d3-9552-4514-9f58-e87be4b264e4
author: VanMSFT
ms.author: vanto
monikerRange: '>=aps-pdw-2016||=azuresqldb-current||=azure-sqldw-latest||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current'
ms.openlocfilehash: c18c98192c2806f0b946e5025127151c68009682
ms.sourcegitcommit: 36fe62a3ccf34979bfde3e192cfa778505add465
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/11/2020
ms.locfileid: "94521181"
---
# <a name="create-a-database-user"></a>Создание пользователя базы данных
[!INCLUDE [SQL Server](../../../includes/applies-to-version/sql-asdb-asdbmi-asa-pdw.md)]

  В этой статье описывается создание наиболее распространенных типов пользователей базы данных. Существует одиннадцать типов пользователей. Полный список приведен в статье [CREATE USER (Transact-SQL)](../../../t-sql/statements/create-user-transact-sql.md). Все варианты [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] поддерживают пользователей базы данных, но не всегда все типы пользователей.  
  
 Чтобы создать пользователя базы данных, воспользуйтесь [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../../includes/tsql-md.md)].  
  
##  <a name="understanding-the-types-of-users"></a><a name="Understanding"></a> Основные сведения о типах пользователей  
 [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] имеется шесть вариантов создания пользователя базы данных. На схеме ниже в зеленой рамке приведены 6 вариантов и их краткое описание.  
  
 ![Схема со сведениями о различных типах пользователей.](../../../relational-databases/security/authentication-access/media/typesofusers.png "TypesOfUsers")  
  
### <a name="selecting-the-type-of-user"></a>Выбор типа пользователя  
 **Имя для входа или пользователь, который не сопоставлен с именем для входа**  
  
 Если вы не знакомы с [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], то при выборе типа создаваемого пользователя могут возникнуть трудности. Сначала спросите себя, имеется ли имя для входа у пользователя или группы, которым нужен доступ к базе данных? Имена для входа в базе данных master обычно нужны людям, которые управляют [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , а также пользователям, которым требуется доступ к нескольким или всем базам данных в экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. В этом случае создается **пользователь SQL с именем для входа**. Пользователь базы данных — это идентификатор имени входа при подключении к базе данных. Имя пользователя базы данных может совпадать с именем входа, но это не является обязательным требованием. Этот раздел предполагает наличие имени входа в [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. Дополнительные сведения о создании имени для входа см. в статье [Создание логина](../../../relational-databases/security/authentication-access/create-a-login.md).  
  
 Если у пользователя или группы, которым нужен доступ к базе данных, нет имени для входа либо если им требуется доступ к одной или нескольким базам данных, то лучше создать **пользователя Windows** или **пользователя SQL с паролем**. Этот тип называется также пользователем автономной базы данных и он не связан с каким-либо именем для входа в базе данных master. Это лучший выбор, если вы хотите иметь возможность легко перемещать базы данных между экземплярами [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. Чтобы использовать этот вариант в [!INCLUDE[ssSQL15](../../../includes/sssql15-md.md)], администратор сначала должен включить автономные базы данных для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], а база данных должна поддерживать автономность. Дополнительные сведения см. в разделе [Пользователи автономной базы данных — создание переносимой базы данных](../../../relational-databases/security/contained-database-users-making-your-database-portable.md).  
  
> **ВАЖНО!** При подключении пользователя автономной базы данных в строке подключения потребуется указать имя базы данных. Чтобы указать имя базы данных в [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], в диалоговом окне **Соединение с** нажмите кнопку **Параметры** и перейдите на вкладку **Свойства соединения** .  
  
 Выберите **Пользователь SQL с паролем** или **Пользователь SQL с именем входа** , выбрав **имя входа для проверки подлинности SQL Server**, если проверка подключающегося пользователя невозможна с помощью Windows. Эта ситуация часто возникает у пользователей за пределами вашей организации (например, у клиентов), которые подключаются к [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].  
  
> **СОВЕТ.** Для сотрудников внутри организации лучше выбрать проверку подлинности Windows. Это избавит их от необходимости запоминать еще один пароль. Кроме того, проверка подлинности Windows представляет дополнительные возможности безопасности, такие как Kerberos.  
  
##  <a name="background"></a><a name="Restrictions"></a> Историческая справка  
 Пользователь является субъектом безопасности уровня базы данных. Для соединения с базой данных имя входа должно быть сопоставлено с пользователем базы данных. Имя входа может быть сопоставлено с различными базами данных в качестве разных пользователей, но в каждой базе данных ему может быть сопоставлен только один пользователь. В частично автономной базе данных можно создать пользователя, не имеющего имени входа. Дополнительные сведения о пользователях автономной базы данных см. в статье [CREATE USER (Transact-SQL)](../../../t-sql/statements/create-user-transact-sql.md). Если в базе данных включена учетная запись гостя, то под именем входа, не сопоставленным с пользователем базы данных, можно войти от пользователя guest.  
  
> **ВАЖНО!** Как правило, пользователь guest отключен. Не используйте пользователя guest без крайней необходимости.  
  
 Как субъектам безопасности, пользователям могут предоставляться разрешения. Областью действия пользователя является база данных. Для подключения к определенной базе данных на экземпляре [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] имя входа должно быть сопоставлено с пользователем базы данных. Разрешения внутри базы данных предоставляются и запрещаются для пользователя базы данных, а не имени входа.  
  
##  <a name="permissions"></a><a name="Permissions"></a> Permissions  
 Необходимо разрешение **ALTER ANY USER** на базу данных.  
  
##  <a name="create-a-user-with-ssms"></a><a name="SSMSProcedure"></a> Создание пользователя с использованием SSMS  
  
 
1.  В обозревателе объектов раскройте папку **Базы данных** .  
  
2.  Разверните базу данных, в которой создается новый пользователь базы данных.  
  
3.  Щелкните правой кнопкой мыши папку **Безопасность**, выберите пункт **Создать**, а затем **Пользователь...** .  
  
4.  В диалоговом окне **Пользователь базы данных — создание** на странице **Общие** выберите один из следующих типов пользователей в списке **Тип пользователя**:  
  
    -   **пользователь SQL с именем для входа**  
  
    -   **пользователя SQL с паролем**  
  
    -   **Пользователь SQL без имени для входа**  
  
    -   **Пользователь, сопоставленный с сертификатом**  
  
    -   **Пользователь, сопоставленный с асимметричным ключом**  
  
    -   **пользователя Windows**  
  
5.  Когда вы выбираете вариант, остальные параметры в диалоговом окне могут поменяться. Некоторые варианты применимы только к определенным типам пользователей базы данных. Некоторые параметры можно не заполнять. В результате будут использоваться значения по умолчанию.  
  
     **User name**  
     Введите имя нового пользователя. Если выбрать элемент **Пользователь Windows** в списке **Тип пользователя**, вы можете также щелкнуть многоточие **(...)** и открыть диалоговое окно **Выбор пользователя или группы**.  
  
     **Имя входа**  
     Введите имя входа для пользователя. Также можно щелкнуть многоточие **(...)** , чтобы открыть диалоговое окно **Выбор имени входа**. **Имя входа** доступно, если выбрать элемент **SQL-пользователь с именем входа** или **Пользователь Windows** в списке **Тип пользователя** .  
  
     **Пароль** и **Подтверждение пароля**  
     Введите пароль для пользователей, которым требуется доступ к базе данных.  
  
     **Язык по умолчанию**  
     Укажите язык по умолчанию для пользователя.  
  
     **Схема по умолчанию**  
     Укажите схему, которая будет владеть объектами, созданными пользователем. Также можно щелкнуть многоточие **(...)** , чтобы открыть диалоговое окно **Выбор схемы**. **Схема по умолчанию** доступна, если выбрать элемент **SQL-пользователь с именем входа**, **SQL-пользователь без имени входа** или **Пользователь Windows** в списке **Тип пользователя** .  
  
     **Имя сертификата**  
     Укажите сертификат для пользователя базы данных. Также можно щелкнуть многоточие **(...)** , чтобы открыть диалоговое окно **Выбор сертификата**. **Имя сертификата** доступно, если выбрать элемент **Пользователь, сопоставленный с сертификатом** в списке **Тип пользователя** .  
  
     **Имя асимметричного ключа**  
     Введите ключ для пользователя базы данных. Также можно щелкнуть многоточие **(...)** , чтобы открыть диалоговое окно **Выбор асимметричного ключа**. **Имя асимметричного ключа** доступно, если выбрать элемент **Пользователь, сопоставленный с асимметричным ключом** в списке **Тип пользователя** .  
  
6.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
### <a name="additional-options"></a>Дополнительные параметры  
 Диалоговое окно **Пользователь базы данных — создание** также содержит параметры на четырех дополнительных страницах: **Собственные схемы**, **Членство**, **Защищаемые объекты** и **Расширенные свойства**.  
  
-   На странице **Собственные схемы** перечислены все возможные схемы, которые принадлежат новому пользователю базы данных. Чтобы добавить схему для пользователя базы данных или удалить ее, на вкладке **Схемы, принадлежащие этому пользователю** установите или снимите флажки для соответствующей схемы.  
  
-   На странице **Членство** приведен список всех ролей, к которым может принадлежать новый пользователь базы данных. Чтобы добавить роль для пользователя базы данных или удалить ее, на вкладке **Членство ролей базы данных** установите или снимите флажки для соответствующей роли.  
  
-   На странице **Защищаемые объекты** перечислены все возможные защищаемые объекты и разрешения на эти объекты, которые могут быть предоставлены для имени входа.  
  
-   Страница **Расширенные свойства** позволяет добавлять пользовательские свойства пользователям базы данных. На этой странице доступны следующие параметры.  
  
     **База данных**  
     Отображает имя выбранной базы данных. Это поле доступно только для чтения.  
  
     **Параметры сортировки**  
     Отображает параметры сортировки, используемые для выбранной базы данных. Это поле доступно только для чтения.  
  
     **Свойства**  
     Просмотрите или укажите расширенные свойства объекта. Каждое расширенное свойство состоит из пары имя/значение метаданных, связанных с объектом.  
  
     **Кнопка с многоточием (...)**  
     Нажмите многоточие **(...)** рядом с полем **Значение**, чтобы открыть диалоговое окно **Значение для расширенного свойства**. Введите или просмотрите значение расширенного свойства в этом более просторном окне. Дополнительные сведения см. в разделе [Диалоговое окно «Значение для расширенного свойства»](../../databases/value-for-extended-property-dialog-box.md).  
  
     **Удаление**  
     Удаляет выбранное расширенное свойство.  
  
##  <a name="create-a-user-using-t-sql"></a><a name="TsqlProcedure"></a> Создание пользователя с использованием T-SQL  
    
1.  В **обозревателе объектов** подключитесь к экземпляру компонента [!INCLUDE[ssDE](../../../includes/ssde-md.md)].  
  
2.  На **стандартной** панели выберите **Создать запрос**.  
  
3.  Скопируйте следующий пример в окно запроса и нажмите кнопку **Выполнить**.  
  
    ```  
    -- Creates the login AbolrousHazem with password '340$Uuxwp7Mcxo7Khy'.  
    CREATE LOGIN AbolrousHazem   
        WITH PASSWORD = '340$Uuxwp7Mcxo7Khy';  
    GO  
  
    -- Creates a database user for the login created above.  
    CREATE USER AbolrousHazem FOR LOGIN AbolrousHazem;  
    GO  
    ```  
  
 Дополнительные сведения см. в статье [CREATE USER (Transact-SQL)](../../../t-sql/statements/create-user-transact-sql.md) (в ней приведены дополнительные примеры [!INCLUDE[tsql](../../../includes/tsql-md.md)]).  
  
## <a name="see-also"></a>См. также:  
 [Участники (ядро СУБД)](../../../relational-databases/security/authentication-access/principals-database-engine.md)   
 [Создание имени для входа](../../../relational-databases/security/authentication-access/create-a-login.md)   
 [CREATE LOGIN &#40;Transact-SQL&#41;](../../../t-sql/statements/create-login-transact-sql.md)  
  
  
