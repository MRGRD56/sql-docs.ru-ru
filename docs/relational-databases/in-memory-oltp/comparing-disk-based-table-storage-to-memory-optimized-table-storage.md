---
title: Сравнение хранилища таблиц на диске с хранилищем таблиц, оптимизированных для памяти
description: Узнайте, как сравнивать хранилища таблиц на диске и хранилища таблиц, оптимизированных для памяти, по категориям DDL, Structure, индексов, операций DML и фрагментации данных.
ms.custom: seo-dt-2019
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: database-engine, sql-database
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: eacf443c-001a-445f-ad1c-5f5a45eca6f4
author: markingmyname
ms.author: maghan
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: c747328877911d8f470b93f9937c1bc49466ddb3
ms.sourcegitcommit: d56a834269132a83e5fe0a05b033936776cda8bb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/29/2020
ms.locfileid: "91529472"
---
# <a name="comparing-disk-based-table-storage-to-memory-optimized-table-storage"></a>Сравнение хранилища таблиц на диске с хранилищем таблиц оптимизированным для памяти
[!INCLUDE [SQL Server Azure SQL Database](../../includes/applies-to-version/sql-asdb.md)]
  
  
|Категории|Дисковая таблица|Долговечная, оптимизированная для памяти таблица|  
|----------------|-----------------------|-------------------------------------|  
|DDL|Сведения о метаданных хранятся в системных таблицах в первичной файловой группе базы данных и доступны через представления каталога.|Сведения о метаданных хранятся в системных таблицах в первичной файловой группе базы данных и доступны через представления каталога.|  
|Структура|Строки хранятся в страницах размером 8 КБ. Страница содержит только строки из одной таблицы.|Строки хранятся в виде отдельных строк. Структура страницы не существует. Две последовательные строки в файле данных могут принадлежать к различным, оптимизированным для памяти таблицам.|  
|Индексы|Индексы хранятся в структуре страницы наподобие строк данных.|Сохраняется только определение индекса (не строки индекса). Индексы сохраняются в памяти и создаются повторно, когда оптимизированная для памяти таблица загружается в память при перезапуске базы данных. Так как строки индекса не сохраняются, то для изменений индекса журнал не ведется.|  
|Операция DML|Сначала нужно найти страницу и загрузить ее буферный пул.<br /><br /> Вставить<br /> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] вставляет строки на страницу с учетом порядка строк для кластеризованного индекса.<br /><br /> DELETE<br /> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] определяет строки, которые нужно удалить, на странице и отмечает их как удаленные.<br /><br /> Update<br /> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] находит строки на странице. Обновление для неключевых столбцов выполняется на месте. Обновление ключевого столбца выполняется с помощью операции удаления и вставки.<br /><br /> После завершения операции DML измененные страницы записываются на диск при фиксации политики буферного пула, контрольной точки или транзакции для операций с минимальным уровнем ведения журнала. И операции чтения, и операции записи на страницах приводят к ненужному вводу-выводу.|Поскольку данные оптимизированных для памяти таблиц находятся в памяти, операции DML осуществляются непосредственно в памяти. Существует фоновый поток, который считывает записи журнала для оптимизированных для памяти таблиц и сохраняет их в файлы данных и разностные файлы. При обновлении создается новая версия строки. Но обновление записывается в журнал как операция удаления с последующей вставкой.|  
|Фрагментация данных|Фрагменты обработки данных, из-за которых появляются частично заполненные страницы и логически последовательные страницы, которые располагаются на диске непоследовательно. Это уменьшает скорость доступа к данным и может потребовать дефрагментации данных.|Оптимизированные для памяти данные не хранятся в страницах, поэтому фрагментации данных нет. Но при обновлении и удалении строк файлы данных и разностные файлы требуется сжимать. Этим занимается потоковый поток MERGE в соответствии с политикой слияния.|  
  
## <a name="see-also"></a>См. также:  
 [Создание и управление хранилищем для оптимизированных для памяти объектов](../../relational-databases/in-memory-oltp/creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
