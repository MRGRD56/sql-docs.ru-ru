---
title: Определение устойчивости для оптимизированных для памяти объектов | Документация Майкрософт
description: 'Узнайте о параметрах устойчивости для таблиц, оптимизированных для памяти, в SQL Server: параметрах по умолчанию SCHEMA_AND_DATA и SCHEMA_ONLY.'
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: database-engine, sql-database
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: 0fe85fbf-8e8d-4983-96fd-d04b3c7d6d65
author: markingmyname
ms.author: maghan
monikerRange: =azuresqldb-current||>=sql-server-2016||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: 299695e0602b41623550a90e84aca9d6e6f633a2
ms.sourcegitcommit: 1a544cf4dd2720b124c3697d1e62ae7741db757c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97481235"
---
# <a name="defining-durability-for-memory-optimized-objects"></a>Определение устойчивости для оптимизированных для памяти объектов
[!INCLUDE [SQL Server Azure SQL Database](../../includes/applies-to-version/sql-asdb.md)]

  Существует два параметра устойчивости для оптимизированных для памяти таблиц:  
  
 SCHEMA_AND_DATA (по умолчанию)  
 Этот параметр обеспечивает устойчивость как схем, так и данных. Уровень устойчивости данных зависит от того, выбрана ли фиксация транзакции как полностью устойчивая или отложенно устойчивая. Полностью устойчивые транзакции дают гарантию устойчивости данных и схемы аналогично таблице на диске. Отложенная устойчивость улучшает производительность, но может привести к потере данных в случае сбоя или отработки отказа сервера. (Дополнительные сведения об отложенной устойчивости см. в разделе [Управление устойчивостью транзакций](../../relational-databases/logs/control-transaction-durability.md).)  
  
 SCHEMA_ONLY  
 Этот параметр обеспечивает устойчивость схемы таблицы. При перезапуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или в случае перенастройки в базе данных SQL схема таблицы сохраняется, но данные в таблице теряются. (В отличие от таблицы в базе данных tempdb, где и таблица, и ее данные теряются после перезапуска.) Типичный сценарий для создания недолговечной таблицы — хранение временных данных, например промежуточной таблицы для процесса ETL. Устойчивость SCHEMA_ONLY предотвращает ведение журнала транзакций и создание контрольной точки, что может существенно уменьшить объем операций ввода-вывода.  
  
 При использовании таблиц SCHEMA_AND_DATA по умолчанию [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] обеспечивает уровень надежности, аналогичный уровню для дисковых таблиц:  
  
 Надежность транзакций  
 После фиксации полностью устойчивой транзакции, которая внесла изменения (DDL или DML) в оптимизированную для памяти таблицу, изменения в устойчивой таблице, оптимизированной для памяти, становятся постоянными.  
  
 При фиксации отложенной устойчивой транзакции в оптимизированной для памяти таблице в памяти транзакция становится устойчивой только после того, как журнал транзакций в памяти записывается на диск. (Дополнительные сведения об отложенной устойчивости см. в разделе [Управление устойчивостью транзакций](../../relational-databases/logs/control-transaction-durability.md).)  
  
 Устойчивость при перезапуске  
 При перезапуске [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] после сбоя или запланированного завершения работы для устойчивых, оптимизированных для памяти таблиц повторно создаются экземпляры, чтобы вернуть их в состояние перед завершением работы или сбоем.  
  
 Устойчивость при сбое носителя  
 Если поврежденный или недоступный диск содержит одну или несколько копий устойчивых, оптимизированных для памяти объектов, то компонент резервного копирования и восстановления [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] восстанавливает оптимизированные для памяти таблицы на новом носителе.  
  
## <a name="see-also"></a>См. также:  
 [Создание и управление хранилищем для оптимизированных для памяти объектов](../../relational-databases/in-memory-oltp/creating-and-managing-storage-for-memory-optimized-objects.md)  
  
  
