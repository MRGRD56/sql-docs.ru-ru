---
title: Задание параметров сортировки пользовательских баз данных в соответствии с параметрами баз данных master и шаблоном базы данных
description: Узнайте, как включить политику для проверки того, совпадают ли параметры сортировки определяемых пользователем баз данных и системных баз данных.
ms.custom: seo-lt-2019
ms.date: 08/31/2020
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- Best Practices [Database Engine]
author: dzsquared
ms.author: drskwier
ms.openlocfilehash: 905accc62afdc12152110d44a18e61d4c8a9bcef
ms.sourcegitcommit: 5da46e16b2c9710414fe36af9670461fb07555dc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2020
ms.locfileid: "89285130"
---
# <a name="set-the-collation-of-user-defined-databases-to-match-master-and-model-databases"></a>Задание параметров сортировки пользовательских баз данных в соответствии с параметрами баз данных master и шаблоном базы данных
 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]
  Это правило проверяет, определены ли в пользовательской базе данных те же параметры сортировки, что и в базах данных master и model.
  
## <a name="best-practices-recommendations"></a>Рекомендации  
 Рекомендуется, чтобы параметры сортировки пользовательских баз данных соответствовали параметрам сортировки баз данных master и model. Иначе может произойти конфликт параметров сортировки, мешающий выполнению кода. Например, если хранимая процедура производит соединение таблицы с временной таблицей, SQL Server может завершить работу пакета и вернуть ошибку конфликта параметров сортировки, если параметры сортировки шаблона базы данных отличаются от параметров сортировки пользовательской базы данных. Это происходит потому, что в базе данных tempdb создаются временные таблицы, параметры сортировки которых основаны на параметрах сортировки базы данных model.

  При возникновении ошибок из-за конфликтующих параметров сортировки рекомендуется одно из следующих решений.

  - Экспортируйте данные из пользовательской базы данных и импортируйте их в новые таблицы, параметры сортировки которых совпадают с параметрами сортировки баз данных master и model.

  - Перестройте системные базы данных таким образом, чтобы их параметры сортировки совпадали с параметрами сортировки пользовательской базы данных. Дополнительные сведения о перестройке системных баз данных см. в разделе [Перестройка системных баз данных](../databases/rebuild-system-databases.md).

  - Внесите изменения во все хранимые процедуры, производящие соединение пользовательских таблиц с таблицами в базе данных tempdb, чтобы таблицы в tempdb создавались с параметрами сортировки пользовательской базы данных. Для этого в определения столбцов временной таблицы добавьте предложение COLLATE database_default, как показано в следующем примере:
  
    ```
    CREATE TABLE #temp1 ( c1 int, c2 varchar(30) COLLATE database_default )
    ```

## <a name="see-also"></a>См. также раздел
  
 [Задание или изменение параметров сортировки сервера](../collations/set-or-change-the-server-collation.md)  

 [Установка и изменение параметров сортировки базы данных](../collations/set-or-change-the-database-collation.md)

 [Задание или изменение параметров сортировки столбца](../collations/set-or-change-the-column-collation.md)
 
 [Просмотр сведений о параметрах сортировки](../collations/view-collation-information.md)    
  
  
