---
title: Администрирование серверов с помощью управления на основе политик
description: Узнайте, как использовать управление на основе политик для управления одним или несколькими экземплярами SQL Server.
ms.custom: seo-lt-2019
ms.date: 08/12/2016
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- facet See facets
- Declarative Management Framework See Policy-Based Management
- surface area configuration [SQL Server], Policy-Based Management
- Policy-Based Management
- facets [Policy-Based Management]
- Policy-Based Management, administering
- conditions [Policy-Based Management]
- facets [Policy-Based Management], about facets
- PolicyAdministratorRole role
ms.assetid: ef2a7b3b-614b-405d-a04a-2464a019df40
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: e60a5d8bdb987e3be2016b8b0395f05e83f9f7a9
ms.sourcegitcommit: 0f484f32709a414f05562bbaafeca9a9fc57c9ed
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/14/2020
ms.locfileid: "94631760"
---
# <a name="administer-servers-by-using-policy-based-management"></a>Администрирование серверов с помощью управления на основе политик
 [!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]
   Управление на основе политик — это система, основанная на политиках, для управления одним или несколькими экземплярами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Используйте его для создания условий, содержащих выражения условия. Затем создайте политики, применяющие условия к целевым объектам базы данных.  

Например, вы как администратор базы данных должны убедиться, что компонент Database Mail отключен на определенных серверах, и поэтому создаете условие и политику, задающую этот параметр сервера. 
   
 > **ВАЖНО!** Политики могут повлиять на работу некоторых функций. Например, система отслеживания измененных данных и репликация транзакций используют таблицу systranschemas, не имеющую индекса. При включении политики, согласно которой все таблицы должны иметь индекс, принудительная реализация этого условия приведет к отказу этой функции.  
  
 Используйте SQL Server Management Studio для создания политик и управления ими, чтобы выполнять следующие задачи:
  
1.  Выбор аспекта управления на основе политик, содержащего настраиваемые свойства.  
  
2.  Указание условия, определяющего состояние аспекта управления.  
  
3.  Указание политики, содержащей условие, дополнительные условия, фильтрующие наборы целей и режим оценки.  
  
4.  Проверка соответствия экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] политике.  
  
 Для политик, выполненных с ошибкой, обозреватель объектов формирует предупреждение о критическом состоянии в виде красного значка рядом с целью и узлами, расположенными выше в дереве обозревателя объектов.  
  
> **ПРИМЕЧАНИЕ.** Когда система вычисляет набор объектов для политики, системные объекты исключаются из него по умолчанию.  Например, если набор объектов для политики относится ко всем таблицам, политика будет неприменима к системным таблицам. Если пользователям требуется оценить политику, используя системные объекты, их можно явно добавить в набор объектов. Однако несмотря на то, что все политики поддерживаются режимом оценки **проверка по расписанию** , в режиме **проверка при внесении изменений** по соображениям производительности поддерживаются не все политики с обязательными наборами объектов. Дополнительные сведения см. в разделе [https://docs.microsoft.com/archive/blogs/sqlpbm/policy-evaluation-modes](/archive/blogs/sqlpbm/policy-evaluation-modes)  
  
## <a name="three-policy-based-management-components"></a>Три компонента управления на основе политик  
 Управление на основе политик включает три следующих компонента.  
  
-   Управление политиками. Администраторы политик создают политики.  
  
-   Явное администрирование. Администраторы выбирают одну или несколько управляемых целей и выполняют явную проверку соответствия целей определенной политике или выполняют явную настройку целей для соответствия политике.  
  
-   Режимы оценки. Существует четыре режима оценки, три из которых могут быть автоматизированы:  
  
    -   **По запросу**. В этом режиме политика непосредственно указывается пользователем.  
  
    -   **При изменении запретить**. В этом автоматизированном режиме для предотвращения нарушения политики используются триггеры DDL.  
  
        > **ВАЖНО!** Если параметр конфигурации сервера nested triggers отключен, политика **При изменении: запретить** не будет правильно работать. Управление на основе политик с помощью триггеров DDL определяет и выполняет откат DDL-операций, не соответствующих политикам, использующим режим оценки. Удаление триггеров DDL управления на основе политик или отключение вложенных триггеров приведет к отказу этого режима оценки или к непредвиденным результатам.  
  
    -   **При изменении: только внесение в журнал**. В этом автоматизированном режиме используется уведомление о событии для определения политики при возникновении соответствующего изменения.  
  
    -   **По расписанию**. В этом автоматизированном режиме для периодического определения политики используется задание агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
     Если автоматизированные политики не включены, то управление на основе политик не оказывает влияния на производительность системы.  
  
## <a name="terms"></a>Термины  
 **Целевой объект, управляемый на основе политик** Сущности, управляемые на основе политик, например экземпляр [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], база данных, таблица или индекс. Все цели на экземпляре сервера формируют иерархию целей. Набор целей — это набор целей, являющихся результатом применения набора фильтров к иерархии целей, например: все таблицы базы данных, владельцем которой является схема HumanResources.  
  
 **Аспект управления на основе политик** Набор логических свойств, моделирующих поведение или характеристики определенных типов управляемых целевых объектов. Количество и характеристики свойств встраиваются в аспект и могут быть добавлены или удалены только создателем аспекта. Тип цели может реализовать один или несколько аспектов управления, а аспект управления соответственно может быть реализован одним или несколькими типами цели. Некоторые свойства аспекта могут применяться только в определенной версии.  
  
 **Условие управления на основе политик**  
 Логическое выражение, определяющее набор разрешенных состояний целей управления на основе политик, с точки зрения аспекта управления. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] пытается просмотреть параметры сортировки при вычислении условия. Если параметры сортировки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не совпадают в точности с параметрами сортировки Windows, проверяйте состояние, чтобы определить, каким образом алгоритм разрешает конфликты.  
  
 **Политика управления на основе политик**  
 Условие управления на основе политик и ожидаемое поведение, например режим оценки, целевые фильтры и расписание. Политика может содержать только одно условие. Политики могут быть включены или отключены. Политики хранятся в базе данных msdb.  
  
 **Категория политики управления на основе политик**  
 Определяемая пользователем категория для помощи в управлении политиками. Пользователи могут классифицировать политики по различным категориям. Политика принадлежит только к одной, и только одной категории политики. Категории политик применяются к базам данных и серверам. На уровне базы данных применяются следующие условия.  
  
-   Владельцы базы данных могут подписать базу данных набором категорий политики.  
  
-   Только политики из подписанных категорий могут управлять базой данных.  
  
-   Все базы данных неявно подписаны категорией политики по умолчанию.  
  
 На уровне сервера категории политик могут применяться ко всем базам данных.  
  
 **Действующая политика**  
 Действующими политиками цели являются те политики, которые управляют этой целью. Политика действительна по отношению к цели только при выполнении следующих условий.  
  
-   Политика включена.  
  
-   Цель принадлежит к набору целей политики.  
  
-   Цель или один из ее предков подписан к группе политики, содержащей эту политику.  
  
## <a name="links-to-specific-tasks"></a>Ссылки на конкретные задачи 

 - [Хранение политик управления на основе политик.](policy-based-management-storage.md)
 - [Настройка предупреждений для уведомления администраторов политик об ошибках политик](../../relational-databases/policy-based-management/configure-alerts-to-notify-policy-administrators-of-policy-failures.md)
 - [Создание условия управления на основе политик](../../relational-databases/policy-based-management/create-a-new-policy-based-management-condition.md)
 - [Удаление условия управления на основе политик](../../relational-databases/policy-based-management/delete-a-policy-based-management-condition.md)
 - [Просмотр или изменение свойств условия управления на основе политик](../../relational-databases/policy-based-management/view-or-modify-the-properties-of-a-policy-based-management-condition.md)
 - [Экспорт политики управления на основе политик](../../relational-databases/policy-based-management/export-a-policy-based-management-policy.md)
 - [Импорт политики управления на основе политик](../../relational-databases/policy-based-management/import-a-policy-based-management-policy.md)
 - [Вычисление политики управления на основе политик на основе объекта](../../relational-databases/policy-based-management/evaluate-a-policy-based-management-policy-from-an-object.md)
 - [Работа с аспектами управления на основе политик](../../relational-databases/policy-based-management/working-with-policy-based-management-facets.md)
 - [Наблюдение с помощью управления на основе политик и принудительное применение рекомендаций с помощью управления на основе политик](../../relational-databases/policy-based-management/monitor-and-enforce-best-practices-by-using-policy-based-management.md)

## <a name="see-also"></a>См. также раздел  
 
 - [Урок 1. Создание и применение политики, отключенной по умолчанию](lesson-1-create-and-apply-an-off-by-default-policy.md)
 - [Занятие 2. Создание и применение политики стандартов именования](lesson-2-create-and-apply-a-naming-standards-policy.md)
 - [Административные представления на основе политик (Transact-SQL)](../../relational-databases/system-catalog-views/policy-based-management-views-transact-sql.md)