---
description: Настройка средств разбиения текста на слова и парадигматических модулей и управление ими для поиска (SQL Server)
title: Настройка средств разбиения текста на слова и парадигматических модулей и управление ими для поиска
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: search, sql-database
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- languages [full-text search]
- full-text search [SQL Server], stemmers
- linguistic analysis [full-text search]
- full-text indexes [SQL Server], linguistic analysis
- full-text search [SQL Server], word breakers
- default full-text language option
- stemmers [full-text search]
- conjugating verbs [full-text search]
- word breakers [full-text search]
ms.assetid: d4bdd16b-a2db-4101-a946-583d1c674229
author: pmasl
ms.author: pelopes
ms.reviewer: mikeray
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.custom: seo-lt-2019
ms.openlocfilehash: 7a33d02cb6ca1cbc100a458d254cf962d2d0d34b
ms.sourcegitcommit: 192f6a99e19e66f0f817fdb1977f564b2aaa133b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/25/2020
ms.locfileid: "96127793"
---
# <a name="configure--manage-word-breakers--stemmers-for-search-sql-server"></a>Настройка средств разбиения текста на слова и парадигматических модулей и управление ими для поиска (SQL Server)
[!INCLUDE [SQL Server Azure SQL Database](../../includes/applies-to-version/sql-asdb.md)]
Средства разбиения по словам и парадигматические модули выполняют лингвистический анализ данных, проходящих полнотекстовое индексирование. При лингвистическом анализе выполняются следующие два действия:

-   **Поиск границ слов (разбиение по словам).** *Средство разбиения по словам* определяет слова по границам слов согласно лексическим правилам языка. Каждое слово (называемое также *токеном*) вставляется в полнотекстовый индекс с использованием сжатого представления для уменьшения его размера.

-   **Спряжение глаголов (выделение основы слова).** *Парадигматический модуль* создает словоформы определенного слова на основании правил этого языка (например, "выполняется", "выполнялся" и "выполняющийся" являются различными формами слова "выполняться").

## <a name="word-breakers-and-stemmers-are-language-specific"></a>Уникальность средств разбиения по словам и парадигматических модулей в зависимости от языка

Средства разбиения по словам и парадигматические модули являются уникальными для своих языков. У разных языков правила лингвистического анализа различаются. Средства разбиения по словам для каждого языка позволяют получать более точные термы для этого языка.

Чтобы использовать средства разбиения по словам и парадигматические модули для всех языков, поддерживаемых в SQL Server, обычно не нужно предпринимать никаких действий.

-   Если имеется средство разбиения по словам для группы языков, но для конкретного языка, входящего в эту группу, его нет, используется основной язык. Например, для обработки франко-канадского текста используется средство разбиения по словам для французского языка.
-   Если для определенного языка отсутствует средство разбиения по словам, используется нейтральное средство разбиения по словам. В случае нейтрального средства разбиения по словам слова разделяются по нейтральным символам, таким как пробелы и знаки препинания.

## <a name="get-the-list-of-supported-languages"></a>Получение списка поддерживаемых языков

Чтобы просмотреть список языков, поддерживаемых компонентом [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Full-Text Search, используйте следующую инструкцию [!INCLUDE[tsql](../../includes/tsql-md.md)]. Наличие языка в этом списке указывает, что средства разбиения по словам зарегистрированы для языка. 
  
```sql
SELECT * FROM sys.fulltext_languages
```

##  <a name="get-the-list-of-registered-word-breakers"></a><a name="register"></a> Получение списка зарегистрированных средств разбиения по словам

Чтобы использовать в полнотекстовом поиске средства разбиения по словам для языка, их необходимо зарегистрировать. Если для языка зарегистрированы средства разбиения по словам, все его прочие лингвистические ресурсы, в том числе парадигматические модули, пропускаемые слова (стоп-слова) и файлы тезауруса, становятся доступными для полнотекстовой индексации и выполнения запросов.

Чтобы просмотреть список зарегистрированных компонентов средства разбиения по словам, используйте следующую инструкцию.

```sql
EXEC sp_help_fulltext_system_components 'wordbreaker';  
GO  
```

Сведения о дополнительных параметрах см. в статье [sp_help_fulltext_system_components (Transact-SQL)](../../relational-databases/system-stored-procedures/sp-help-fulltext-system-components-transact-sql.md).
 
## <a name="if-you-add-or-remove-a-word-breaker"></a>Что если добавить или удалить средство разбиения по словам  
При добавлении, удалении или изменении средства разбиения по словам следует обновить список кодов локалей, поддерживаемых в Microsoft Windows для полнотекстового индексирования и для выполнения запросов. Дополнительные сведения см. в статье [Просмотр или изменение зарегистрированных фильтры и разделители слов](../../relational-databases/search/view-or-change-registered-filters-and-word-breakers.md).  
  
##  <a name="set-the-default-full-text-language-option"></a><a name="default"></a> Установка параметра "Язык полнотекстового поиска по умолчанию"  
 Для локализованной версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]программа установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] задает в качестве значения параметра **default full-text language** язык сервера, если для него существует совпадение. Для нелокализованной версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]параметр **default full-text language** по умолчанию имеет значение, соответствующее английскому языку.  
  
 При создании или изменении полнотекстового индекса для каждого отдельного полнотекстового индексированного столбца можно указать отдельный язык. Если для столбца не указан язык, по умолчанию используется значение параметра конфигурации **язык полнотекстового поиска по умолчанию**.  
  
> [!NOTE]  
>  Если в запросе не задан параметр LANGUAGE, то все столбцы, приведенные в предложении функции полнотекстового запроса, должны использовать один и тот же язык. Язык столбца с полнотекстовым индексированием, к которому выполняется запрос, определяет правила лингвистического анализа для аргументов предикатов полнотекстового запроса ([CONTAINS](../../t-sql/queries/contains-transact-sql.md) и [FREETEXT](../../t-sql/queries/freetext-transact-sql.md)) и функций ([CONTAINSTABLE](../../relational-databases/system-functions/containstable-transact-sql.md) и [FREETEXTTABLE](../../relational-databases/system-functions/freetexttable-transact-sql.md)).  
  
##  <a name="choose-the-language-for-an-indexed-column"></a><a name="lang"></a> Выбор языка для индексированного столбца  
 При создании полнотекстового индекса рекомендуется указывать язык для каждого индексируемого столбца. Если для столбца язык не задан, то используется язык системы по умолчанию. Язык столбца определяет, какое средство разбиения по словам и какой парадигматический модуль используется для индексирования этого столбца. Кроме того, файл тезауруса этого языка будет использоваться полнотекстовыми запросами к столбцу.  
  
 При выборе языка столбца в процессе создания полнотекстового индекса следует учитывать несколько факторов. Они связаны со способом, которым текст размечается на лексемы и затем индексируется средством полнотекстового поиска. Дополнительные сведения см. в разделе [Выбор языка при создании полнотекстового индекса](../../relational-databases/search/choose-a-language-when-creating-a-full-text-index.md).  
  
Чтобы просмотреть язык средства разбиения по словам для определенных столбцов, выполните следующую инструкцию.
   
```sql 
SELECT language_id AS 'LCID' FROM sys.fulltext_index_columns;
```  

Сведения о дополнительных параметрах см. в статье [sys.fulltext_index_columns (Transact-SQL)](../../relational-databases/system-catalog-views/sys-fulltext-index-columns-transact-sql.md).

##  <a name="troubleshoot-word-breaking-time-out-errors"></a><a name="tshoot"></a> Устранение ошибок задержки разбиения по словам  
 Ошибка, связанная с истечением времени ожидания, при разбиении по словам может возникать в разных ситуациях. Дополнительные сведения о таких ситуациях и соответствующих действиях см. в статье [MSSQLSERVER_30053](../errors-events/mssqlserver-30053-database-engine-error.md).

### <a name="info-about-the-mssqlserver_30053-error"></a>Сведения об ошибке MSSQLSERVER_30053
  
|Property (Свойство)|Значение|
|-|-|
|Название продукта|SQL Server|  
|Идентификатор события|30053|  
|Источник события|MSSQLSERVER|  
|Компонент|SQLEngine|  
|Символическое имя|FTXT_QUERY_E_WORDBREAKINGTIMEOUT|  
|Текст сообщения|Истекло время ожидания при выполнении разбиения по словам для строки полнотекстового запроса. Это может произойти в том случае, если средство разбиения по словам слишком долго обрабатывало строку полнотекстового запроса либо если на сервере одновременно выполняется большое количество запросов. Попробуйте выполнить запрос еще раз при меньшей загрузке сервера.|  
  
#### <a name="explanation"></a>Объяснение  
 Ошибка времени ожидания при разбиении по словам может случаться в следующих ситуациях.  
  
-   Неправильно настроено средство разбиения по словам для языка запроса. Например, для него неправильно заданы параметры в реестре.  
  
-   Средство разбиения по словам неправильно обрабатывает определенную строку запроса.  
  
-   Средство разбиения по словам возвращает слишком много данных для определенной строки запроса. Избыток данных воспринимается как потенциальная ошибка переполнения буфера, и процесс управляющей программы фильтрации (fdhost.exe), который выполняет службы разбиения по словам.  
  
-   Неправильная конфигурация процесса управляющей программы фильтрации.  
  
     Типичные ошибки конфигурации: истек срок действия пароля или задействована политика домена, которая запрещает вход для учетной записи управляющей программы фильтрации.  
  
-   В экземпляре сервера обрабатывается чрезвычайно высокий объем нагрузки со стороны запросов. Например, средству разбиения по словам потребовалось продолжительное время для обработки строки полнотекстового запроса или на сервере выполняется большое количество запросов. Заметьте, что это наименее вероятная причина.  
  
#### <a name="user-action"></a>Действие пользователя  
 Выберите по следующей таблице действие пользователя, подходящее для устранения предполагаемой причины превышения времени ожидания.  
  
|Возможные причины|Рекомендуемые действия|  
|--------------------|-----------------|  
|Неправильно настроено средство разбиения по словам для языка запросов.|Если используется средство разбиения по словам сторонних разработчиков, оно может быть неправильно зарегистрировано в операционной системе. В этом случае повторно зарегистрируйте средство разбиения по словам. Дополнительные сведения см. в статье [Восстановление предыдущих версий средств разбиения текста на слова, используемых поиском](revert-the-word-breakers-used-by-search-to-the-previous-version.md).|  
|Средство разбиения по словам неправильно обрабатывает определенную строку запроса.|Если средство разбиения по словам поддерживается [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], обратитесь в службу поддержки пользователей Майкрософт.|  
|Средство разбиения по словам возвращает слишком много данных для определенной строки запроса.|Если средство разбиения по словам поддерживается [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], обратитесь в службу поддержки пользователей Майкрософт.|  
|Неправильная конфигурация процесса управляющей программы фильтрации.|Убедитесь, что используется текущий пароль, а политика домена не запрещает вход для учетной записи управляющей программы фильтрации.|  
|В экземпляре сервера обрабатывается рабочая нагрузка запросов очень большого объема.|Попробуйте выполнить запрос еще раз при меньшей загрузке сервера.|  

##  <a name="understand-the-impact-of-updated-word-breakers"></a><a name="impact"></a> Влияние обновленных средств разбиения по словам  
 Обычно каждая версия [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] включает новые средства разбиения по словам, которые имеют лучшие лингвистические правила и более точны, чем прежние. Новые средства разбиения по словам могут вести себя немного не так, как средства разбиения по словам в полнотекстовых индексах, импортированных из предыдущих версий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].
 
Это важно, если полнотекстовый каталог был импортирован при обновлении базы данных до текущей версии [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Один или несколько языков, используемых полнотекстовыми индексами в полнотекстовом каталоге, могут быть связаны с новыми средствами разбиения по словам. Дополнительные сведения см. в разделе [Обновление полнотекстового поиска](../../relational-databases/search/upgrade-full-text-search.md).  
 
## <a name="see-also"></a>См. также  
 [CREATE FULLTEXT INDEX (Transact-SQL)](../../t-sql/statements/create-fulltext-index-transact-sql.md)    
 [ALTER FULLTEXT INDEX (Transact-SQL)](../../t-sql/statements/alter-fulltext-index-transact-sql.md)   
 [Настройка и управление стоп-словами и списками стоп-слов для полнотекстового поиска](../../relational-databases/search/configure-and-manage-stopwords-and-stoplists-for-full-text-search.md)   

