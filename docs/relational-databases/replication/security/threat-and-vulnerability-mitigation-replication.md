---
description: Предотвращение угроз и уязвимости для безопасности (репликация)
title: Предотвращение угроз и уязвимости для безопасности (репликация) | Документация Майкрософт
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
author: MashaMSFT
ms.author: mathoma
monikerRange: =azuresqldb-mi-current||>=sql-server-2016
ms.openlocfilehash: 35f7362bc191958005d632125cb84e8e86f8b9e6
ms.sourcegitcommit: 1a544cf4dd2720b124c3697d1e62ae7741db757c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97475615"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a>Предотвращение угроз и уязвимости для безопасности (репликация)
[!INCLUDE[sql-asdbmi](../../../includes/applies-to-version/sql-asdbmi.md)]
  В этом разделе приводятся методы снижения угроз для топологии репликации.  
  
## <a name="encryption"></a>Шифрование  
 Шифрование представляет собой процесс преобразования данных в форму, которую невозможно прочитать без специального ключа, поэтому прочитать данные могут только назначенные пользователи. Репликация не производит шифрование данных, хранящихся в таблицах или передаваемых через сетевые соединения. Это сделано намеренно, так как шифрование доступно на уровне транспортировки в различных технологиях, включая следующие стандартные технологии: Виртуальные частные сети (VPN), TLS (ранее — SSL) и IPSEC. Для соединений между компьютерами в топологии репликации рекомендуется использовать один из этих методов. Дополнительные сведения см. в разделе [Включение шифрования соединений в компоненте Database Engine (диспетчер конфигураций SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md). Сведения об использовании VPN и TLS для репликации данных через Интернет см. в разделе [Защита репликации через Интернет](../../../relational-databases/replication/security/securing-replication-over-the-internet.md).  
  
 Если используется протокол TLS для защиты соединений между компьютерами в топологии репликации, задайте значение **1** или **2** для параметра **-EncryptionLevel** каждого агента репликации (рекомендуется значение **2**). Значение **1** указывает, что шифрование будет использоваться, но агент не будет проверять, подписан ли TLS/SSL-сертификат сервера доверенным издателем; значение **2** указывает, что будет проверяться подпись сертификата. Параметры агента могут задаваться в профилях агента или в командной строке. Дополнительные сведения см. в разделе:  
  
-   [Работа с профилями агента репликации](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
-   [Просмотр и изменение параметров командной строки агента репликации (среда SQL Server Management Studio)](../../../relational-databases/replication/agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [Replication Agent Executables Concepts](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 Репликация взаимодействует с главными ключами базы данных, которые используются для шифрования данных, следующим образом.  
  
-   Если главный ключ находится в базе данных, участвующей в репликации (база данных публикации, база данных подписки или база данных распространителя), репликация шифрует и дешифрует пароли агентов в этой базе данных с помощью симметричного ключа базы данных [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] . Если используются главные ключи, то их необходимо создать во всех базах данных, участвующих в репликации. Дополнительные сведения о создании главных ключей см. в статье [CREATE MASTER KEY (Transact-SQL)](../../../t-sql/statements/create-master-key-transact-sql.md).  
  
-   При репликации главные ключи не реплицируются. Если главный ключ требуется на подписчике, его необходимо экспортировать из базы данных публикации с помощью команды BACKUP MASTER KEY, а затем импортировать его в базу данных подписки с использованием команды RESTORE MASTER KEY. Дополнительные сведения см. в статьях [BACKUP MASTER KEY (Transact-SQL)](../../../t-sql/statements/backup-master-key-transact-sql.md) и [RESTORE MASTER KEY (Transact-SQL)](../../../t-sql/statements/restore-master-key-transact-sql.md).  
  
-   Если главный ключ определен для прикрепляемой базы данных подписки, укажите пароль для главного ключа с помощью параметра `@db_master_key_password` хранимой процедуры [sp_attachsubscription (Transact-SQL)](../../../relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql.md). Такое действие позволяет присоединять базу данных на подписчике.  
  
 Дополнительные сведения о шифровании и главных ключах см. в разделе [Encryption Hierarchy](../../../relational-databases/security/encryption/encryption-hierarchy.md).  
  
 Репликация позволяет публиковать данные зашифрованных столбцов. Для расшифровки и использования этих данных на подписчике ключ, который был использован при шифровании данных на издателе, должен также располагаться и на подписчике. Репликация не предоставляет безопасного механизма для передачи ключей шифрования. Необходимо вручную повторно создать ключ шифрования на подписчике. Дополнительные сведения см. в статье [Репликация данных в зашифрованных столбцах (среда SQL Server Management Studio)](../../../relational-databases/replication/security/replicate-data-in-encrypted-columns-sql-server-management-studio.md).  
  
## <a name="see-also"></a>См. также:  
 [Идентификатор и управление доступом для репликации](../../../relational-databases/replication/security/identity-and-access-control-replication.md)   
 [Просмотр и изменение параметров безопасности репликации](../../../relational-databases/replication/security/view-and-modify-replication-security-settings.md)   

  
  
