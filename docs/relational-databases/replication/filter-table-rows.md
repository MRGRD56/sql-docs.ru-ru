---
description: Фильтрация строк таблицы
title: Фильтрация строк таблицы | Документация Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- sql13.rep.newpubwizard.filtertablerows.f1
ms.assetid: 005f5c71-0401-490e-8823-adc54a2e9675
author: MashaMSFT
ms.author: mathoma
monikerRange: =azuresqldb-mi-current||>=sql-server-2016
ms.openlocfilehash: f92cdb60988e2b33a5de8382352609b5c25c466b
ms.sourcegitcommit: 1a544cf4dd2720b124c3697d1e62ae7741db757c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97464745"
---
# <a name="filter-table-rows"></a>Фильтрация строк таблицы
[!INCLUDE [SQL Server SQL MI](../../includes/applies-to-version/sql-asdbmi.md)]
  Страница **Фильтрация строк таблицы** позволяет следующее.  
  
-   Применить статические фильтры строк к статьям таблиц в моментальном снимке, в публикациях транзакций и в публикациях слиянием.  
  
-   Применить параметризованные фильтры строк к статьям таблиц в публикациях слиянием.  
  
-   Использовать фильтры соединения для расширения фильтрации статей объединенных таблиц на относящиеся к ним статьи таблиц.  
  
 Дополнительные сведения о вариантах фильтрации см. в статье [Фильтрация опубликованных данных](../../relational-databases/replication/publish/filter-published-data.md). Фильтрацию можно изменить на странице **Фильтрация строк** диалогового окна **Свойства публикации** .  
  
 Для максимальной производительности приложения и снижения объема внешнего хранилища, а также для ограничения доступа к некоторым данным для отдельных подписчиков следует публиковать только необходимые данные. Публикация может содержать как отфильтрованные, так и нефильтрованные таблицы. Например, можно включить полную (нефильтрованную) таблицу со сведениями о продукции компании и использовать фильтры строк для получения отфильтрованной таблицы заказчиков из определенного региона. С помощью фильтрации опубликованных данных можно достичь следующих целей:  
  
-   Минимизировать объем данных, передаваемых по сети.  
  
-   Снизить необходимый подписчику объем для хранения.  
  
-   Настраивать публикации и приложения на основе индивидуальных требований подписчиков.  
  
-   Избежать конфликтов или уменьшить их количество, если подписчики обновляют данные, так как различным подписчикам можно отправить различные секции данных (то есть два подписчика не будут обновлять одни и те же значения данных).  
  
-   Избежать передачи конфиденциальных данных. Фильтры строк и фильтры столбцов могут быть использованы для ограничения доступа подписчика к данным. При репликации слиянием может возникать проблема безопасности, если используется параметризованный фильтр, содержащий HOST_NAME(). Дополнительные сведения см. в подразделе «Фильтрация с использованием HOST_NAME()» раздела [Parameterized Row Filters](../../relational-databases/replication/merge/parameterized-filters-parameterized-row-filters.md).  
  
 Фильтр не должен включать столбец **rowguidcol** , который используется в процессе репликации для идентификации строк. По умолчанию этот столбец добавляется в момент настройки репликации слиянием и называется **rowguid**.  
  
## <a name="options"></a>Параметры  
 **Отфильтрованные таблицы**  
 Панель заполняется фильтрами по мере того, как они добавляются к статьям таблиц в публикации. Таблицы с фильтрами строк показаны в этой панели как узлы высшего уровня. Для публикаций слиянием таблицы, фильтрация которых была расширена с помощью фильтра соединения, показаны на панели как дочерние узлы.  
  
 **Добавление**  
 Нажмите **Добавить** , чтобы открыть диалоговое окно фильтрации статей таблицы. Нажмите **Добавить** для вызова диалогового окна моментального снимка или публикации транзакций. Нажмите **Добавить** для публикации слиянием, чтобы вывести три варианта выбора: **Добавить фильтр**; **Добавить соединение для расширения выбранного фильтра**; **Автоматически создать фильтры**.  
  
-   Выбрать **Добавить фильтр** для запуска диалогового окна **Добавить фильтр** . Это диалоговое окно позволяет применять фильтры строк к статье таблицы. В диалоговом окне **Добавить фильтр** можно, например, указать, что таблица с данными о клиентах должна содержать данные только о французских клиентах при репликации подписчикам.  
  
-   Выберите пункт **Добавить соединение для расширения выбранного фильтра** для перехода в диалоговое окно **Добавление соединения** . Диалоговое окно **Добавление соединения** позволяет расширить фильтр строк таким образом, чтобы он фильтровал данные в таблицах, связанных с таблицей с фильтром строк. Например, если фильтр таблицы заказчиков установлен таким образом, что таблица содержит данные только о французских заказчиках, а также есть связанная с ней таблица клиентских заказов, то можно задать соединение между этими двумя таблицами, чтобы таблица заказов содержала только заказы от французских заказчиков.  
  
    > [!NOTE]  
    >  Этот параметр доступен, только если сначала выбрать базовую таблицу соединения на панели фильтров.  
  
-   Выберите **Автоматически создать фильтры** для запуска диалогового окна **Создать фильтры** . Это диалоговое окно позволяет указать в публикации слиянием фильтр строк для одной таблицы, который репликация автоматически распространяет на другие таблицы, связанные через внешние ключи. Например, публикация может содержать три таблицы: таблицу клиентов, таблицу заказов (с внешним ключом к таблице клиентов), таблицу сведений о заказах (с внешним ключом к таблице заказов). Определите фильтр строк для таблицы о клиентах, и репликация распространит его на остальные таблицы.  
  
    > [!NOTE]  
    >  Когда фильтры создаются автоматически репликацией, все существующие фильтры публикации удаляются. Для включения автоматически созданных фильтров и фильтров, созданных вручную, сначала создайте фильтры. Для каждой публикации можно указать только один набор автоматически созданных фильтров.  
  
 **Edit** (Изменение)  
 Выберите фильтр строк или фильтр соединения на панели фильтров и нажмите кнопку **Изменить** для запуска диалогового окна **Изменение фильтра** или **Изменение соединения** .  
  
 **Удаление**  
 Выберите фильтр строк или фильтр соединения на панели фильтров и нажмите кнопку **Удалить** для его удаления.  
  
 **Найти таблицу**  
 Публикации слиянием только с фильтрами соединения. Нажмите **Найти таблицу** для поиска таблицы в сложном дереве фильтров. В базе данных со сложными связями таблица может быть соединена с несколькими таблицами, поэтому она может отображаться несколько раз в дереве фильтров.  
  
 Реальная таблица показана только в одном месте дерева, в других местах она представлена ярлыком. Ярлык таблицы является только ссылкой на нее, и дочерние узлы таблицы не отображаются. Узел ярлыка помечен с помощью стрелки, при развертывании узла будет отображен текст **Чтобы вывести таблицу для\<tablename>, нажмите кнопку «Поиск таблицы»** .  
  
 Выберите узел ярлыка в этой панели и щелкните **Найти таблицу**. Панель развернется, и данная таблица будет выделена. Если нажать кнопку **Найти таблицу** без указания ссылки на узел, открывается диалоговое окно **Найти таблицу** .  
  
 **Filter**  
 Содержит определение на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] для фильтра, выбранного на панели фильтров.  
  
## <a name="see-also"></a>См. также:  
 [Create a Publication](../../relational-databases/replication/publish/create-a-publication.md)   
 [Просмотр и изменение свойств публикации](../../relational-databases/replication/publish/view-and-modify-publication-properties.md)   
 [Фильтрация опубликованных данных](../../relational-databases/replication/publish/filter-published-data.md)   
 [Join Filters](../../relational-databases/replication/merge/join-filters.md)   
 [Parameterized Row Filters](../../relational-databases/replication/merge/parameterized-filters-parameterized-row-filters.md)   
 [Публикация данных и объектов базы данных](../../relational-databases/replication/publish/publish-data-and-database-objects.md)  
  
  
