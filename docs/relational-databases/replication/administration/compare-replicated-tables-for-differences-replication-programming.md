---
title: Сравнение различий между реплицированными таблицами (хранимая процедура репликации)
description: Используйте хранимые процедуры репликации для сравнения различий между реплицированными таблицами на издателе и на подписчике.
ms.custom: seo-lt-2019
ms.date: 03/14/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
dev_langs:
- TSQL
helpviewer_keywords:
- tablediff utility
- comparing replicated tables
ms.assetid: cd253a17-0c85-42b4-912c-690169ebe799
author: MashaMSFT
ms.author: mathoma
monikerRange: =azuresqldb-mi-current||>=sql-server-2016
ms.openlocfilehash: 0b9717a6c71d5aef31dae428a67de37e9d9188ca
ms.sourcegitcommit: 1a544cf4dd2720b124c3697d1e62ae7741db757c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97417080"
---
# <a name="compare-differences-between-replicated-tables-replication-programming"></a>Сравнение различий между реплицированными таблицами (программирование репликации)
[!INCLUDE[sql-asdbmi](../../../includes/applies-to-version/sql-asdbmi.md)]
  Проверка статей используется для определения того, совпадают ли опубликованные данные в статьях таблицы на издателе с данными  на подписчике. В результате могут быть выявлены расхождения. Дополнительные сведения см. в статье [Проверка реплицированных данных](../../../relational-databases/replication/validate-data-at-the-subscriber.md). Однако проверка дает только сведения о том, есть расхождение или нет. Никаких подробностей о расхождении данных в исходной таблице и целевой таблице не сообщается. Программа командной строки **tablediff** возвращает подробные сведения о расхождениях в двух таблицах и даже может создать скрипт [!INCLUDE[tsql](../../../includes/tsql-md.md)] для приведения подписки в соответствие с данными на издателе.  
  
> [!NOTE]  
>  Программа **tablediff** поддерживается только для серверов [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
### <a name="to-compare-replicated-tables-for-differences-using-tablediff"></a>Поиск различий в реплицированных таблицах с помощью средства tablediff  
  
1.  Запустите средство [tablediff Utility](../../../tools/tablediff-utility.md)из командной строки любого сервера в топологии репликации. Укажите значения следующих параметров.  
  
    -   **-sourceserver** — имя сервера, данные на котором считаются верными (обычно это издатель).  
  
    -   **-sourcedatabase** — имя базы данных, содержащей правильные данные.  
  
    -   **-sourcetable** — имя исходной таблицы для сравниваемой статьи.  
  
    -   **-sourceschema** — владелец схемы исходной таблицы, если не используется схема по умолчанию (необязательно).  
  
    -   **-sourceuser** и **-sourcepassword** , если для подключения к издателю используется проверка подлинности SQL Server (необязательно).  
  
        > [!IMPORTANT]  
        >  По возможности используйте аутентификацию Windows. При необходимости использования проверки подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] предлагайте пользователям вводить учетные данные во время выполнения. В случае необходимости хранения учетных данных в файле скрипта этот файл следует защищать во избежание несанкционированного доступа.  
  
    -   **-destinationserver** — имя сервера, данные которого сравниваются (обычно подписчик).  
  
    -   **-destinationdatabase** — имя сравниваемой базы данных.  
  
    -   **-destinationdatabase** — имя сравниваемой таблицы.  
  
    -   **-sourceschema** — владелец схемы исходной таблицы, если не используется схема по умолчанию (необязательно).  
  
    -   **-destinationuser** и **-destinationpassword** , если для подключения к подписчику используется проверка подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (необязательно).  
  
        > [!IMPORTANT]  
        >  По возможности используйте аутентификацию Windows. При необходимости использования проверки подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] предлагайте пользователям вводить учетные данные во время выполнения. В случае необходимости хранения учетных данных в файле скрипта этот файл следует защищать во избежание несанкционированного доступа.  
  
    -   Используйте **-c** для сравнения по столбцам (необязательно).  
  
    -   Используйте **-q** для быстрого сравнения количества строк и схемы (необязательно).  
  
    -   Укажите имя файла и путь для **-o** для записи результатов в файл (необязательно).  
  
    -   Укажите таблицу в базе данных подписки, куда должны вставляться результаты для **-et**(необязательно). Если таблица уже существует, задайте **-dt** , чтобы сначала удалить таблицу.  
  
    -   Используйте **-f** , чтобы создать файл [!INCLUDE[tsql](../../../includes/tsql-md.md)] для исправления данных на подписчике и приведения их в соответствие с данными на издателе (необязательно). Используйте **-df** для определения количества инструкций [!INCLUDE[tsql](../../../includes/tsql-md.md)] в каждом файле.  
  
    -   Используйте **-rc** и **-ri** для определения количества попыток повтора операции и интервала повторных попыток (необязательно).  
  
    -   Используйте **-strict** для строгого сравнения схем исходной и целевой таблиц (необязательно).  
  
## <a name="see-also"></a>См. также:  
 [Проверка данных на подписчике](../../../relational-databases/replication/validate-data-at-the-subscriber.md)  
  
  
