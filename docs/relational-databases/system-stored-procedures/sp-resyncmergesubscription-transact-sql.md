---
description: sp_resyncmergesubscription (Transact-SQL)
title: sp_resyncmergesubscription (Transact-SQL) | Документация Майкрософт
ms.custom: ''
ms.date: 03/04/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: reference
f1_keywords:
- sp_resyncmergesubscription_TSQL
- sp_resyncmergesubscription
helpviewer_keywords:
- sp_resyncmergesubscription
ms.assetid: e04d464a-60ab-4b39-a710-c066025708e6
author: markingmyname
ms.author: maghan
ms.openlocfilehash: 530c93cbb99db63c7ced6e454ea78b4f6a0f1ebf
ms.sourcegitcommit: 33f0f190f962059826e002be165a2bef4f9e350c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2021
ms.locfileid: "99183082"
---
# <a name="sp_resyncmergesubscription-transact-sql"></a>sp_resyncmergesubscription (Transact-SQL)
[!INCLUDE [SQL Server](../../includes/applies-to-version/sqlserver.md)]

  Повторно синхронизирует подписку на публикацию слиянием с указанным пользователем известным состоянием проверки. Это позволяет форсировать конвергенцию или синхронизировать базу данных подписки с определенным моментом времени, например со временем проведения последней успешной проверки или с определенной датой. При использовании этого метода для повторной синхронизации подписки моментальный снимок повторно не применяется. Эта хранимая процедура не используется для подписок на репликацию моментальных снимков или подписок на репликацию транзакций. Эта хранимая процедура выполняется на издателе в базе данных публикации либо на подписчике в базе данных подписки.  
  
 ![Значок ссылки на раздел](../../database-engine/configure-windows/media/topic-link.gif "Значок ссылки на раздел") [Синтаксические обозначения в Transact-SQL](../../t-sql/language-elements/transact-sql-syntax-conventions-transact-sql.md)  
  
## <a name="syntax"></a>Синтаксис  
  
```  
  
sp_resyncmergesubscription [ [ @publisher = ] 'publisher' ]  
    [ , [ @publisher_db = ] 'publisher_db' ]  
        , [ @publication = ] 'publication'   
    [ , [ @subscriber = ] 'subscriber' ]  
    [ , [ @subscriber_db = ] 'subscriber_db' ]  
    [ , [ @resync_type = ] resync_type ]  
    [ , [ @resync_date_str = ] resync_date_string ]  
```  
  
## <a name="arguments"></a>Аргументы  
`[ @publisher = ] 'publisher'` Имя издателя. Аргумент *Publisher* имеет тип **sysname** и значение по умолчанию NULL. Значение NULL допустимо, если хранимая процедура выполняется на издателе. Если хранимая процедура выполняется на подписчике, то надо указать издатель.  
  
`[ @publisher_db = ] 'publisher_db'` Имя базы данных публикации. Аргумент *publisher_db* имеет тип **sysname** и значение по умолчанию NULL. Значение NULL допустимо, если хранимая процедура выполняется на издателе в базе данных публикации. Если хранимая процедура выполняется на подписчике, то надо указать издатель.  
  
`[ @publication = ] 'publication'` Имя публикации. Аргумент *publication* имеет тип **sysname** и не имеет значения по умолчанию.  
  
`[ @subscriber = ] 'subscriber'` Имя подписчика. Аргумент *Subscriber* имеет тип **sysname** и значение по умолчанию NULL. Значение NULL допустимо, если хранимая процедура выполняется на подписчике. Если хранимая процедура выполняется на издателе, то надо указать подписчик.  
  
`[ @subscriber_db = ] 'subscriber_db'` Имя базы данных подписки. Аргумент *subscription_db* имеет тип **sysname** и значение по умолчанию NULL. Значение NULL допустимо, если хранимая процедура выполняется на подписчике в базе данных подписки. Если хранимая процедура выполняется на издателе, то надо указать подписчик.  
  
`[ @resync_type = ] resync_type` Определяет, когда должна начаться повторная синхронизация. *resync_type* имеет **тип int** и может принимать одно из следующих значений.  
  
|Значение|Описание|  
|-----------|-----------------|  
|**0**|Синхронизация начинается с момента формирования исходного моментального снимка. Этот аргумент является самым ресурсоемким, так как все изменения с момента формирования исходного моментального снимка заново применяются к подписчику.|  
|**1**|Синхронизация начинается с момента проведения последней успешной проверки. Все новые или неоконченные поколения, созданные со времени проведения последней успешной проверки, заново применяются к подписчику.|  
|**2**|Синхронизация начинается с даты, заданной в *resync_date_str*. Все новые или незаконченные поколения, созданные после этой даты, заново применяются к подписчику.|  
  
`[ @resync_date_str = ] resync_date_string` Определяет дату начала повторной синхронизации. *resync_date_string* имеет тип **nvarchar (30)** и значение по умолчанию NULL. Этот параметр используется, если *resync_type* имеет значение **2**. Указанная дата преобразуется в эквивалентное ему значение **DateTime** .  
  
## <a name="return-code-values"></a>Значения кода возврата  
 **0** (успешное завершение) или **1** (сбой)  
  
## <a name="remarks"></a>Замечания  
 **sp_resyncmergesubscription** используется в репликации слиянием.  
  
 Значение **0** для параметра *resync_type* , которое повторно применяет все изменения с момента создания исходного моментального снимка, может быть ресурсоемким, но, возможно, намного меньше, чем полная повторная инициализация. Например, если исходный моментальный снимок был отправлен месяц назад, это значение приведет к повторному применению данных прошедшего месяца. Если исходный моментальный снимок содержал 1 ГБ данных, а объем изменений за последний месяц составил 2 МБ измененных данных, более эффективным будет повторное применение данных, а не полного моментального снимка размером в 1 ГБ.  
  
## <a name="permissions"></a>Разрешения  
 Только члены предопределенной роли сервера **sysadmin** или предопределенной роли базы данных **db_owner** могут выполнять **sp_resyncmergesubscription**.  
  
## <a name="see-also"></a>См. также:  
 [Системные хранимые процедуры (Transact-SQL)](../../relational-databases/system-stored-procedures/system-stored-procedures-transact-sql.md)  
  
  
