---
title: Изменение процесса развертывания базы данных с помощью участников развертывания
description: Узнайте, как изменить поведение проектов баз данных. Ознакомьтесь с ресурсами для участников сборки и развертывания, а затем с примерами сценариев, в которых они используются.
ms.prod: sql
ms.technology: ssdt
ms.topic: conceptual
ms.assetid: fe2064bb-e01e-4a12-9f12-a99aa9a5203f
author: markingmyname
ms.author: maghan
ms.reviewer: “”
ms.custom: seo-lt-2019
ms.date: 02/09/2017
ms.openlocfilehash: 4ca036a22497f05141a7777ddb00ac6ca53dab84
ms.sourcegitcommit: a41e1f4199785a2b8019a419a1f3dcdc15571044
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "91987780"
---
# <a name="customize-database-build-and-deployment-by-using-build-and-deployment-contributors"></a>Изменение процесса сборки и развертывания базы данных с помощью участников сборки и развертывания

Visual Studio предоставляет точки расширяемости, с помощью которых можно изменять поведение действий сборки и развертывания для проектов базы данных.  
  
## <a name="available-extensibility-points"></a>Доступные точки расширения  
Можно создать расширение для точек расширяемости, как показано в следующей таблице.  
  
|**Действие**|**Тип участника**|**Примечания**|  
|--------------|------------------------|-------------|  
|Сборка|BuildContributor|Данный тип расширения выполняется при сборке проекта SQL после полной проверки модели проекта. Участник сборки может обращаться к завершенной модели, а также ко всем свойствам задачи сборки и пользовательским аргументам.|  
|Развертывание|DeploymentPlanModifier|Данный тип расширения выполняется при развертывании проекта SQL как часть процесса развертывания после формирования плана развертывания, но до его выполнения. С помощью DeploymentPlanModifier можно изменять план развертывания, добавляя в него шаги или удаляя их из него. Участники развертывания могут обращаться к плану развертывания, результатам сравнения, исходной и целевой модели.|  
|Развертывание|DeploymentPlanExecutor|Данный тип расширения запускается во время выполнения плана развертывания и предоставляет доступ только для чтения к плану развертывания. DeploymentPlanExectutor выполняет действия на основе плана развертывания.|  
  
### <a name="supported-extensibility-scenarios"></a>Поддерживаемые сценарии расширяемости  
Можно реализовать участников сборки или развертывания, чтобы включить следующие сценарии:  
  
-   **Создание документации по схеме во время сборки проекта**. В этом сценарии для создания документации по схеме реализуется [BuildContributor](/dotnet/api/microsoft.sqlserver.dac.deployment.buildcontributor) и переопределяется метод OnExecute. Можно создать файл targets, определяющий стандартные аргументы, которые управляют запуском расширений и определяют имя выходного файла.  
  
-   **Создание отчета об отличиях при развертывании проекта SQL**. В этом сценарии реализуется [DeploymentPlanExecutor](/dotnet/api/microsoft.sqlserver.dac.deployment.deploymentplanexecutor), который создает XML-файл при развертывании проекта SQL.  
  
-   **Изменение плана развертывания при перемещении данных**. В этом сценарии реализуется [DeploymentPlanModifier](/dotnet/api/microsoft.sqlserver.dac.deployment.deploymentplanmodifier), который выполняет итерацию по плану развертывания. Для каждого действия SqlTableMigrationStep в данном плане изучается результат сравнения для определения того, должно ли выполняться данное действие, или его следует пропустить.  
  
-   **Копирование файлов в сформированный DACPAC при развертывании проекта SQL**. С этом сценарии реализуется участник развертывания и переопределяется метод OnEstablishDeploymentConfiguration для указания файлов, помеченных в проекте как DeploymentExtensionConfiguration. Эти файлы должны быть скопированы в выходную папку и добавлены в сформированный DACPAC. Также можно изменить участника, чтобы выполнялось слияние нескольких файлов в один новый файл, который будет скопирован в выходную папку и добавлен в манифест развертывания. Во время развертывания можно реализовать метод OnApplyDeploymentConfiguration для извлечения этих файлов из DACPAC и подготовки их к использованию в методе onExecute.  
  
Также можно предоставить доступ к пользовательским аргументам участника в виде «имя-значение», которые записываются в файл проекта базы данных. Эти аргументы могут позволить участнику извлекать данные из MSBuild, а конечным пользователям участника изменять его поведение. Например, можно разрешить пользователям указывать имя входного или выходного файла.  
  
## <a name="common-tasks"></a>Общие задачи  
  
|**Общие задачи**|**Вспомогательное содержимое**|  
|--------------------|--------------------------|  
|**Дополнительные сведения о точках расширяемости**. Изучите документацию к базовым классам, на основе которых реализуются участники сборки и развертывания.|[BuildContributor](/dotnet/api/microsoft.sqlserver.dac.deployment.buildcontributor)<br /><br />[DeploymentContributor](/dotnet/api/microsoft.sqlserver.dac.deployment.deploymentcontributor)|  
|**Создание базовых участников**. Изучите действия, требуемые для создания участника сборки или развертывания. Если вы воспользуетесь данными пошаговыми руководствами, то сможете:<br /><br />создать участника сборки, который формирует отчет со всеми элементами модели;<br />создать участник развертывания, который изменяет план развертывания до его выполнения;<br />создать участник развертывания, который создает отчет о развертывании проекта SQL.<br /><br />Участники могут быть размещены в одной или в нескольких сборках с учетом того, как должны быть распределены эти модули среди разработчиков.|[Пошаговое руководство. Расширение сборки проекта базы данных для формирования статистики модели](../ssdt/walkthrough-extend-database-project-build-to-generate-model-statistics.md)<br /><br />[Пошаговое руководство. Расширение процесса развертывания проекта базы данных для изменения плана развертывания](../ssdt/walkthrough-extend-database-project-deployment-to-modify-the-deployment-plan.md)<br /><br />[Пошаговое руководство. Расширение процесса развертывания проекта базы данных для анализа плана развертывания](../ssdt/walkthrough-extend-database-project-deployment-to-analyze-the-deployment-plan.md)|  
  
## <a name="see-also"></a>См. также:  
[Определение пользовательских условий для модульных тестов SQL](/previous-versions/sql/sql-server-data-tools/jj860449(v=vs.103))  
