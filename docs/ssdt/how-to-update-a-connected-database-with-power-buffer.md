---
title: обновить подключенную базу данных с помощью Power Buffer
description: Узнайте, как использовать Power Buffer для обновления базы данных. Узнайте, как проверять изменения перед их применением и сохранять изменения в скрипте для последующего развертывания.
ms.prod: sql
ms.technology: ssdt
ms.topic: conceptual
f1_keywords:
- sql.data.tools.commitpreview.dialog
ms.assetid: 4048b7f8-71a9-47ad-b812-3fc1e8066240
author: markingmyname
ms.author: maghan
ms.reviewer: “”
ms.custom: seo-lt-2019
ms.date: 02/09/2017
ms.openlocfilehash: 2ecad870723402e33026668055368dac5dfd02c2
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100018094"
---
# <a name="how-to-update-a-connected-database-with-power-buffer"></a>Руководство. обновить подключенную базу данных с помощью Power Buffer

Технология SQL Server Data Tools Power Buffer упрощает применение изменений к подключенной базе данных, сохраняя все изменения в текущем сеансе. Любые ошибки, вызванные внесением изменений в окне Power Buffer (в редакторе Transact\-SQL или в конструкторе таблиц), немедленно отображаются на панели **Список ошибок**, которая позволяет отслеживать ошибки, обозначенные как требующие устранения. Разработчик может проверять отложенные им изменения, пока не будет готов применить их к конкретной базе данных. В ходе этого процесса обновления в SSDT автоматически создается скрипт ALTER на основе конкретных изменений и выводятся предупреждения обо всех потенциальных проблемах. После этого можно применить все изменения, накопленные во всех открытых окнах Power Buffer, к одной и той же базе данных или сохранить скрипт ALTER, предназначенный для дальнейшего развертывания.  
  
В SSDT имеются также сведения обо всех изменениях, внесенных в конкретную схему базы данных вне Visual Studio. Например, после добавления новой таблицы в существующую базу данных в среде SQL Server Management Studio соответствующее изменение немедленно отобразится в обозревателе объектов SQL Server в Visual Studio, и его не нужно обновлять вручную. Возможность обнаружения изменений гарантирует, что в обозревателе объектов SQL Server всегда отображается наиболее актуальное определение схемы базы данных. Обратите внимание, что любые объекты базы данных, открытые в конструкторе таблиц или в редакторе Transact\-SQL для изменения, не будут обновляться для отображения изменений вне Visual Studio.  
  
В следующих процедурах используются сущности, созданные ранее в рамках статьи о [разработке подключенной базы данных](../ssdt/connected-database-development.md).  
  
### <a name="to-apply-the-changes-made-in-the-previous-procedures"></a>Применение изменений, внесенных в предыдущих процедурах  
  
1.  Нажмите кнопку **Обновить** с зеленой стрелкой на панели инструментов (если навести на соответствующую кнопку указатель мыши, появится подсказка "Обновить базу данных"). Панель инструментов находится над сеткой столбцов в конструкторе таблиц.  
  
2.  Отобразится диалоговое окно **Предварительный просмотр обновлений базы данных**. В фоновом режиме будет создан скрипт развертывания на основе конкретных изменений. После этого откроется диалоговое окно со сводкой действий, которые должны быть выполнены в SSDT (таких как создание или удаление сущностей базы данных), наряду с потенциальными проблемами, которые обнаружены в SSDT (это не относится к рассматриваемой процедуре, но может потребоваться, если определение базы данных содержит ошибки, из-за которых действие обновления окажется невозможным до их исправления).  
  
3.  Если в данный момент обновление базы данных нежелательно, нажмите кнопку **Отмена**, чтобы выйти из диалогового окна **Предварительный просмотр обновлений базы данных**.  
  
4.  Если же намеченные изменения являются приемлемыми, нажмите кнопку **Обновить базу данных** в диалоговом окне **Предварительный просмотр обновлений базы данных**. От вашего имени будет выполнен скрипт развертывания, после чего накопленные изменения будут применены к базе данных.  
  
5.  Если же потребуется просмотреть скрипт развертывания для проверки или внесения изменений перед обновлением, нажмите кнопку **Создать скрипт** в диалоговом окне **Предварительный просмотр обновлений базы данных**. Созданный скрипт откроется в новом окне редактора Transact\-SQL. Нажмите кнопку **Выполнить запрос** на панели инструментов в редакторе Transact\-SQL, чтобы выполнить этот запрос. Это действие аналогично нажатию кнопки **Обновить базу данных** на шаге 4.  
  
    > [!WARNING]  
    > Если внести любые изменения в скрипт развертывания и выполнить его, то изменения не будут показаны ни в одной из открытых сущностей базы данных. Например, если будет переименован столбец таблицы `Customers` в скрипте развертывания и выполнен этот скрипт для обновления базы данных, притом что таблица `Customers` будет открыта в конструкторе таблиц, то имя столбца все еще останется прежним после нажатия кнопки **Обновить базу данных**. В таком случае придется вручную закрыть конструктор таблиц без локального сохранения его результатов в виде скрипта. После повторного открытия этой таблицы в **обозревателе объектов SQL Server** можно заметить, что база данных действительно обновлена с учетом изменений, внесенных в скрипт развертывания.  
  
6.  В области **Вывод** редактора Transact\-SQL (или в области **Сообщение**, если разработчик сам вызывает выполнение скрипта развертывания) необходимо отметить следующие указания на то, что обновление выполнено успешно:  
  
**Создание [dbo].[Customers]… Создание [dbo].[Products]… Создание [dbo].[Suppliers]… Создание FK_Products_SupplierId… Создание FK_Products_CustomerId… Создание CK_Products_ShelfLife Транзакции обновления базы данных успешно завершены. Существующие данные проверяются относительно вновь созданных ограничений. Обновление завершено.**  
  
7.  В **обозревателе объектов SQL Server** вы увидите, что новые таблицы отображаются в узле **Tables** базы данных **Trade**.  
  
### <a name="to-view-changes-made-to-a-database-outside-visual-studio"></a>Просмотр изменений, внесенных в базу данных вне Visual Studio  
  
1.  Откройте среду SQL Server Management Studio. В диалоговом окне **Подключение к серверу** укажите тот же сервер базы данных, к которому было выполнено подключение в Visual Studio, и щелкните **Подключение**.  
  
2.  В **обозревателе объектов SQL Server** разверните узел **Базы данных** и перейдите в базу данных **Trade**.  
  
3.  Щелкните правой кнопкой мыши узел **Tables** в **Trade** и выберите пункт **Создать таблицу**. В конструкторе таблиц введите **id** в качестве значения имени столбца и **int** в качестве типа данных.  
  
4.  Щелкните значок **Сохранить** на панели инструментов, чтобы сохранить таблицу. Примите имя по умолчанию и нажмите кнопку **ОК**.  
  
    Снова перейдите в Visual Studio. Изучите узел **Tables** в узле базы данных **Trade** в **обозревателе объектов SQL Server**. Обратите внимание на то, как выглядит вновь созданная таблица **Table_1**.  
  
5.  Щелкните **Table_1** правой кнопкой мыши и выберите пункт **Удалить**. Щелкните **Обновить базу данных** в диалоговом окне **Предварительный просмотр обновлений базы данных**.  
  
## <a name="see-also"></a>См. также:  
[Руководство. исправлять ошибки](../ssdt/how-to-fix-errors.md)  
  
