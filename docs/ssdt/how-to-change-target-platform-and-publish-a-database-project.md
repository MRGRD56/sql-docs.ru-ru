---
title: изменить целевую платформу и опубликовать проект базы данных
description: Узнайте, как изменить платформу для проекта базы данных SQL Server Data Tools на поддерживаемый экземпляр SQL Server. Узнайте, как опубликовать проект базы данных.
ms.prod: sql
ms.technology: ssdt
ms.topic: conceptual
f1_keywords:
- sql.data.tools.publish.dialog
- sql.data.tools.publishdacproject
ms.assetid: 6012e120-5f72-4f4f-ae6e-f9a57ae1dea7
author: markingmyname
ms.author: maghan
ms.reviewer: “”
ms.custom: seo-lt-2019
ms.date: 02/09/2017
ms.openlocfilehash: 8a5a9cec35620f408182af3df75702eb85ce4e27
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100018464"
---
# <a name="how-to-change-target-platform-and-publish-a-database-project"></a>Руководство. изменить целевую платформу и опубликовать проект базы данных

В качестве целевой версии SQL Server для проекта базы данных SQL Server Data Tools (SSDT) можно указать любой поддерживаемый экземпляр SQL Server (SQL Server 2005, 2008, 2008 R2, Microsoft SQL Server 2012 или SQL Azure). Это позволяет сосредоточить разработку базы данных в одном проекте, но при необходимости публиковать ее в нескольких экземплярах SQL Server.  
  
Кроме того, SSDT упрощает эту задачу, учитывая сведения о целевой платформе и автоматически обнаруживая любые ошибки в коде (например, если используются неподдерживаемые функциональные средства в проекте, который должен быть опубликован в SQL Azure).  
  
> [!WARNING]  
> В следующих процедурах используются сущности, созданные с помощью процедур, которые описывались ранее в разделах [Connected Database Development](../ssdt/connected-database-development.md) (Разработка подключенной базы данных) и [Project-Oriented Offline Database Development](../ssdt/project-oriented-offline-database-development.md) (Разработка базы данных вне сети с учетом проекта).  
  
### <a name="to-change-a-projects-target-platform"></a>Изменение целевой платформы проекта  
  
1.  В **обозревателе решений** щелкните правой кнопкой мыши проект и выберите пункт **Свойства**. Откройте вкладку **Параметры проекта** слева, чтобы получить доступ к странице свойств **Параметры проекта** .  
  
2.  Раскрывающийся список **Целевая платформа** на этой странице содержит все поддерживаемые платформы SQL Server, в которых может быть опубликован проект базы данных. Для этой процедуры выберите **SQL Azure**.  
  
### <a name="to-use-platform-validation-when-editing-scripts"></a>Использование проверки платформы при изменении скриптов  
  
1.  Щелкните правой кнопкой мыши таблицу **Products** в обозревателе решений и выберите **Просмотр кода**, чтобы открыть ее в редакторе Transact\-SQL.  
  
2.  Добавьте `ON [PRIMARY]` в конец инструкции `CREATE TABLE` .  
  
3.  Обратите внимание, что на панели **Список ошибок** появляется ошибка SQL70015: "Filegroup reference and partitioning scheme" is not supported in SQL Azure (SQL70015: "Ссылка на файловую группу и схема секционирования" не поддерживается в SQL Azure).  
  
    SSDT автоматически проверяет скрипт с учетом целевой платформы. В этом случае SSDT возвращает ошибку, поскольку файловая группа не поддерживается в SQL Azure. Список неподдерживаемых инструкций Transact\-SQL в SQL Azure см. в статье [Partially Supported Transact-SQL Statements (Microsoft Azure SQL Database)](/previous-versions/azure/ee336267(v=azure.100)) (Частично поддерживаемые инструкции Transact-SQL в Базе данных SQL Microsoft Azure).  
  
4.  Удалите предложение `ON` . Обратите внимание, что ошибка немедленно исчезнет из области **Список ошибок**.  
  
### <a name="to-publish-a-database-project"></a>Публикация проекта базы данных  
  
1.  Те, кто имеет доступ к экземпляру SQL Azure, могут пропустить следующий шаг. В противном случае щелкните правой кнопкой мыши проект **TradeDev** в **обозревателе решений** и выберите **Свойства**, чтобы получить доступ к странице свойств **Параметры проекта**. Воспользуйтесь раскрывающимся списком **Целевая платформа**, чтобы выбрать платформу SQL Server для публикации проекта.  
  
2.  Щелкните правой кнопкой мыши проект **TradeDev** в **обозревателе решений** и выберите команду **Опубликовать**. В SSDT начнется построение проекта. Если отсутствуют какие-либо ошибки сборки, откроется диалоговое окно **Опубликовать базу данных** .  
  
3.  В диалоговом окне **Опубликовать базу данных** щелкните **Правка** , чтобы изменить подключение целевой базы данных.  
  
4.  В диалоговом окне **Свойства соединения** введите имя экземпляра SQL Server и учетные данные для аутентификации. В поле **Подключение к базе данных** введите **NewTrade**. Это равносильно попытке опубликовать конкретный проект базы данных в новой базе данных. Кроме того, можно выбрать существующую базу для публикации в ней. Например, если выбрана существующая база данных **TradeDev**, то все изменения, внесенные в объекты (заданные как скрипты) проекта вне сети **TradeDev**, будут распространены на действующую базу данных **TradeDev**.  
  
    Если имеется разрешение на внесение каких-либо изменений в базу данных, в которой должен быть опубликован проект, нажмите кнопку **Опубликовать** . Если же у вас нет разрешений на запись в производственной базе данных, можно нажать кнопку **Создать скрипт** и сформировать скрипт публикации Transact\-SQL, который можно передать администратору базы данных. После этого администратор базы данных может запустить скрипт, чтобы внести обновления на рабочем сервере для синхронизации его схемы с проектом базы данных.  
  
5.  В окне **Операции Data Tools**  отображается ход выполнения операций публикации и выводятся уведомления об ошибках. В этом новом окне также возможен предварительный просмотр развертывания, созданного скрипта или полных результатов публикации.  
  
6.  Можно также сохранить параметры публикации в профиле, чтобы иметь возможность повторно использовать те же параметры при последующем выполнении операций публикации. Для этого нажмите кнопку **Сохранить профиль как** в диалоговом окне **Опубликовать базу данных** . В будущем можно будет нажать кнопку **Загрузить профиль** , когда снова потребуется загрузить существующие параметры.  
  
7.  Обратите внимание на сообщения в окне **Операции Data Tools** . Щелкните ссылку "Предварительный просмотр" справа от текста **Создается предварительный просмотр публикации...** . , чтобы открыть отчет с предварительным просмотром развертывания. Если целевая платформа проекта не совпадает с сервером базы данных, на котором публикуется проект, то SSDT включает в отчет предупреждение.  Например, если целевой платформой проекта является Microsoft SQL Server 2012 и вы пытаетесь опубликовать проект в экземпляре сервера SQL Server 2008 R2, то в окне **Вывод** появится следующее предупреждение:  
  
**Проект, где указана целевая платформа Microsoft SQL Server 2012, может вызвать проблемы совместимости с Microsoft SQL Server 2008**. Если этот проект содержит сущности, добавленные только в Microsoft SQL Server 2012, публикация завершится ошибкой.  
  
Развертывание завершится с ошибками, если предикаты объекта используют функцию **CONTAINS** или **FREETEXT** с вновь созданным полнотекстовым индексом, а также если используются транзакционные скрипты. Если параметр включения скриптов транзакций включен во время развертывания, то процедуры и представления определяются внутри транзакции, тогда как полнотекстовый индекс определяется за пределами транзакции в конце скрипта развертывания. В результате такого упорядочения в скрипте процедуры или представления, использующие функции CONTAINS или FREETEXT, не будут сопоставлены с полнотекстовым индексом, что приведет к ошибке развертывания.  
