---
title: Необходимые разрешения
description: Сведения о разрешениях, необходимых для выполнения различных задач в SQL Server Data Tools, таких как создание базы данных, выполнение модульных тестов и сравнение схем.
ms.custom: seo-lt-2019
ms.date: 02/09/2017
ms.prod: sql
ms.technology: ssdt
ms.topic: conceptual
ms.assetid: b27038c4-94ab-449c-90b7-29d87ce37a8b
author: markingmyname
ms.author: maghan
ms.reviewer: “”
ms.openlocfilehash: 6e519a3786b45d87344f8f5f5355353fd5865d62
ms.sourcegitcommit: 917df4ffd22e4a229af7dc481dcce3ebba0aa4d7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100072458"
---
# <a name="required-permissions-for-sql-server-data-tools"></a>Разрешения, необходимые для запуска SQL Server Data Tools

Чтобы выполнять действия с базой данных в Visual Studio, необходимо войти в систему с помощью учетной записи, предоставляющей определенные разрешения для этой базы данных. Требуемые разрешения зависят от того, какое действие требуется выполнить. В следующих разделах описываются все действия, которые вам может потребоваться выполнить, и соответствующие разрешения, которые нужны для их выполнения.  
  
-   [Разрешения для создания и развертывания базы данных](#DatabaseCreationAndDeploymentPermissions)  
  
-   [Разрешения для рефакторинга базы данных](#DatabaseRefactoringPermissions)  
  
-   [Разрешения для выполнения модульных тестов базы данных SQL Server](#DatabaseUnitTestingPermissions)  
  
-   [Разрешения для формирования данных](#DataGenerationPermissions)  
  
-   [Разрешения для сравнения схем и данных](#SchemaAndDataComparePermissions)  
  
-   [Разрешения для запуска редактора Transact-SQL](#Transact-SQLEditorPermissions)  
  
-   [Разрешения для проектов SQL Server CLR (SQL CLR)](#SQLCLRPermissions)  
  
## <a name="permissions-to-create-or-deploy-a-database"></a><a name="DatabaseCreationAndDeploymentPermissions"></a> Разрешения для создания и развертывания базы данных  
Для создания или развертывания базы данных необходимо иметь следующие разрешения.  
  
|Действия|Необходимые разрешения|  
|-|-|  
|Импорт объектов и параметров базы данных|Необходимо иметь возможность подключаться к базе данных-источнику.<br /><br />Если база данных-источник работает на основе SQL Server 2005, вам также необходимо иметь или получить разрешение **VIEW DEFINITION** для каждого объекта.<br /><br />Если база данных-источник работает на основе SQL Server 2008 или более поздней версии, вам также необходимо иметь или получить разрешение на **просмотр определения** для каждого объекта. Ваше имя для входа должно иметь разрешение **VIEW SERVER STATE** (для ключей шифрования базы данных).|  
|Импорт объектов и параметров сервера|Необходимо иметь возможность подключаться к базе данных master на указанном сервере.<br /><br />Если сервер работает под управлением SQL Server 2005, у вас должно быть разрешение на **просмотр любого определения** для этого сервера.<br /><br />Если база данных-источник работает на основе SQL Server 2008 или более поздней версии, вам также необходимо иметь разрешение на **просмотр любого определения** для этого сервера. Ваше имя для входа должно иметь разрешение **VIEW SERVER STATE** (для ключей шифрования базы данных).|  
|Создание или обновление проекта базы данных|Для создания или изменения проекта базы данных не требуется каких-либо разрешений на базу данных.|  
|Развертывание новой базы данных или развертывание с заданным параметром **Всегда создавать базу данных повторно**|Вам нужно либо иметь разрешение **CREATE DATABASE**, либо быть членом роли **dbcreator** на целевом сервере.<br /><br />При создании базы данных Visual Studio подключается к шаблону базы данных и копирует его содержимое. Первоначальное имя для входа (например, *yourLogin*), которое используется для подключения к целевой базе данных, должно иметь разрешения **db_creator** и **CONNECT SQL**. Это имя входа должно иметь сопоставление пользователя с шаблоном базы данных. При наличии разрешений **системного администратора** это сопоставление можно создать с помощью следующих инструкций Transact\-SQL:<br /><br />`USE [model] CREATE USER yourUser FROM LOGIN yourLogin`<br /><br />Пользователь (в примере это yourUser) должен иметь разрешения **CONNECT** и **VIEW DEFINITION** на шаблон базы данных. При наличии разрешений **системного администратора** эти разрешения можно предоставить с помощью следующих инструкций Transact\-SQL:<br /><br />`USE [model] GRANT CONNECT to yourUser GRANT VIEW DEFINITION TO yourUser`<br /><br />При развертывании базы данных, содержащей безымянные ограничения, когда параметр **CheckNewContraints** включен (а он включен по умолчанию), необходимо иметь разрешения **db_owner** или **sysadmin**. В противном случае развертывание завершится ошибкой. Это верно только для безымянных разрешений. Дополнительные сведения о параметре **CheckNewConstraints** см. в разделе [Параметры проекта базы данных](../ssdt/database-project-settings.md).|  
|Развертывание обновлений в существующую базу данных|Вы должны быть допустимым пользователем базы данных. Вам также нужно быть членом роли **db_ddladmin**, владеть схемой или объектами, которые требуется создать или изменить в целевой базе данных. Для работы в скриптах, выполняемых перед развертыванием и после него, с более сложными концепциями, например именами входа или связанными серверами, требуются дополнительные разрешения.<br /><br />**ПРИМЕЧАНИЕ**.При развертывании в базе данных master вам также требуется разрешение **VIEW ANY DEFINITION** на сервер, куда выполняется развертывание.|  
|Использование сборки с параметром EXTERNAL_ACCESS в проекте базы данных|Вы должны задать свойство TRUSTWORTHY для проекта базы данных. У вас должно быть разрешение на сборку внешнего доступа для своих учетных данных SQL Server.|  
|Развертывание сборок в новую или существующую базу данных|Необходимо быть членом предопределенной роли sysadmin на целевом сервере развертывания.|  
  
Дополнительные сведения см. в электронной документации по SQL Server.  
  
## <a name="permissions-to-refactor-a-database"></a><a name="DatabaseRefactoringPermissions"></a>Разрешения для рефакторинга базы данных  
*Рефакторинг базы данных* выполняется только в пределах проекта базы данных. Необходимо иметь разрешения на использование проекта базы данных. Разрешения на целевую базу данных потребуются только в тот момент, когда в нее будут развертываться внесенные изменения.  
  
## <a name="permissions-to-perform-unit-testing-on-a-sql-server-database"></a><a name="DatabaseUnitTestingPermissions"></a>Разрешения для выполнения модульного тестирования в Базе данных SQL Server  
Для выполнения тестирований модулей базы данных необходимо иметь следующие разрешения.  
  
|Действия|Необходимые разрешения|  
|-|-|   
|Выполнение теста|Необходимо использовать подключение к базе данных в контексте выполнения. Дополнительные сведения см. в разделе [Общие сведения о строках подключения и разрешениях](../ssdt/overview-of-connection-strings-and-permissions.md).|  
|Выполнение скрипта до или после развертывания|Необходимо использовать подключение к базе данных в привилегированном контексте. Это подключение к базе данных имеет больше разрешений, чем подключение в контексте выполнения.|  
|Выполнение скриптов TestInitialize и TestCleanup|Необходимо использовать подключение к базе данных в привилегированном контексте.|  
|Развертывание изменений базы данных до выполнения тестов|Необходимо использовать подключение к базе данных в привилегированном контексте. Дополнительные сведения см. в разделе [Как настроить выполнение модульного теста SQL Server](../ssdt/how-to-configure-sql-server-unit-test-execution.md).|  
|Формирование данных до выполнения тестов|Необходимо использовать подключение к базе данных в привилегированном контексте. Дополнительные сведения см. в разделе [Как настроить выполнение модульного теста SQL Server](../ssdt/how-to-configure-sql-server-unit-test-execution.md).|  
  
## <a name="permissions-to-generate-data"></a><a name="DataGenerationPermissions"></a>Разрешения для формирования данных  
Для формирования тестовых данных с помощью генератора данных у вас должны быть разрешения **INSERT** и **SELECT** на объекты из целевой базы данных. Если вы выполняете очистку данных перед формированием данных, вам также нужно иметь разрешения **DELETE** на объекты из целевой базы данных. Для сброса столбца **IDENTITY** в таблице вам нужно владеть таблицей или быть членом роли db_owner или db_ddladmin.  
  
## <a name="permissions-to-compare-schemas-and-data"></a><a name="SchemaAndDataComparePermissions"></a>Разрешения для сравнения схем и данных  
Для сравнения схем или данных необходимо иметь следующие разрешения.  
  
|Действия|Необходимые разрешения|  
|-|-|   
|Сравнение схем двух баз данных|Вам нужно иметь разрешения на импорт объектов и параметров из баз данных, описанные в разделе [Разрешения на создание и развертывание базы данных](#DatabaseCreationAndDeploymentPermissions).|  
|Сравните схемы базы данных и проекта базы данных|Вам нужно иметь разрешения на импорт объектов и параметров из базы данных, описанные в разделе [Разрешения на создание и развертывание базы данных](#DatabaseCreationAndDeploymentPermissions). У вас также должен быть открыт проект базы данных в Visual Studio.|  
|Запись обновлений в целевую базу данных|Вам нужно иметь разрешения на развертывание обновлений в целевой базе данных, описанные в разделе [Разрешения на создание и развертывание базы данных](#DatabaseCreationAndDeploymentPermissions).|  
|Сравнение данных двух баз данных|Кроме разрешений, которые требуются для сравнения схем двух баз данных, требуется также разрешение **SELECT** на все таблицы, сравнение которых намечено выполнить, и разрешение **VIEW DATABASE STATE**.|  
  
Дополнительные сведения см. в электронной документации по SQL Server.  
  
## <a name="permissions-to-run-the-transact-sql-editor"></a><a name="Transact-SQLEditorPermissions"></a>Разрешения для запуска редактора Transact\-SQL  
Действия, которые вы можете выполнить в редакторе Transact\-SQL, определяются контекстом выполнения в целевой базе данных.  
  
## <a name="permissions-for-sql-server-common-language-run-time-projects"></a><a name="SQLCLRPermissions"></a>Разрешения для проектов SQL Server в среде CLR  
В следующей таблице приведены разрешения, которые требуются для развертывания или отладки проектов CLR.  
  
|Действия|Необходимые разрешения|  
|-----------|------------------------|  
|Развертывание (первоначальное или добавочное) сборки набора разрешений safe|db_DDLAdmin ― это разрешение предоставляет разрешения CREATE и ALTER для разворачиваемых вами сборок и типов объектов<br /><br />VIEW DEFINITION уровня базы данных ― требуется для выполнения развертывания<br /><br />CONNECT уровня базы данных ― предоставляет возможность подключаться к базе данных|  
|Развертывание сборки набора разрешений external_access|db_DDLAdmin ― это разрешение предоставляет разрешения CREATE и ALTER для разворачиваемых вами сборок и типов объектов<br /><br />VIEW DEFINITION уровня базы данных ― требуется для выполнения развертывания<br /><br />CONNECT уровня базы данных ― предоставляет возможность подключаться к базе данных<br /><br />Кроме того, также требуется:<br /><br />чтобы параметр TRUSTWORTHY базы данных имел значение ON<br /><br />Имя входа, которое используется для развертывания, должно иметь разрешение сервера External Access Assembly.|  
|Развертывание сборки набора разрешений unsafe|db_DDLAdmin ― это разрешение предоставляет разрешения CREATE и ALTER для разворачиваемых вами сборок и типов объектов<br /><br />VIEW DEFINITION уровня базы данных ― требуется для выполнения развертывания<br /><br />CONNECT уровня базы данных ― предоставляет возможность подключаться к базе данных<br /><br />Кроме того, также требуется:<br /><br />чтобы параметр TRUSTWORTHY базы данных имел значение ON<br /><br />Имя входа, которое используется для развертывания, должно иметь разрешение сервера Unsafe Assembly.|  
|Удаленная отладка сборки SQL CLR|Вы должны иметь разрешение предопределенной роли sysadmin.|  
  
> [!IMPORTANT]  
> Во всех случаях владелец сборки должен быть пользователем, который используется для развертывания сборки, либо ролью, членом которой является этот пользователь. Это требование также применяется к любым сборкам, на которые ссылается разворачиваемая вами сборка.  
  
## <a name="see-also"></a>См. также:  
[Создание и определение модульных тестов SQL Server](../ssdt/creating-and-defining-sql-server-unit-tests.md)  
[SQL Server Data Tools](../ssdt/sql-server-data-tools.md)  
  
