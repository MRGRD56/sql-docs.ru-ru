---
description: CREATE MINING STRUCTURE (расширения интеллектуального анализа данных)
title: СОЗДАНИЕ СТРУКТУРЫ ИНТЕЛЛЕКТУАЛЬНОГО АНАЛИЗА ДАННЫХ (DMX) | Документация Майкрософт
ms.date: 06/07/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: dmx
ms.topic: reference
ms.author: owend
ms.reviewer: owend
author: minewiskan
ms.openlocfilehash: ab738433380302e0f3d8bc70113aa2a8d13f7ac8
ms.sourcegitcommit: c7f40918dc3ecdb0ed2ef5c237a3996cb4cd268d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/05/2020
ms.locfileid: "91726285"
---
# <a name="create-mining-structure-dmx"></a>CREATE MINING STRUCTURE (расширения интеллектуального анализа данных)
[!INCLUDE[ssas](../includes/applies-to-version/ssas.md)]

  Создает в базе данных новую структуру интеллектуального анализа данных и при необходимости определяет обучающую и проверочную секции. После создания структуры интеллектуального анализа данных для добавления моделей в структуру интеллектуального анализа данных можно использовать инструкцию [ALTER MINING structure &#40;DMX&#41;](../dmx/alter-mining-structure-dmx.md) .  
  
## <a name="syntax"></a>Синтаксис  
  
```  
  
CREATE [SESSION] MINING STRUCTURE <structure>  
(  
    [(<column definition list>)]  
)  
[WITH HOLDOUT (<holdout-specifier> [OR <holdout-specifier>])]  
[REPEATABLE(<holdout seed>)]  
<holdout-specifier>::=  <holdout-maxpercent> PERCENT | <holdout-maxcases> CASES  
```  
  
## <a name="arguments"></a>Аргументы  
 *дереве*  
 Уникальное имя структуры.  
  
 *Список определений столбцов*  
 Список определений столбцов с разделителями-запятыми.  
  
 *контрольные данные — максперцент*  
 Целое число от 1 до 100, которое показывает процентную долю данных, выделяемых для проверки.  
  
 *контрольные данные — макскасес*  
 Целое число, показывающее максимальное число вариантов, используемых для проверки.  
  
 Если указанное максимальное число вариантов больше числа входных вариантов, для проверки будут использованы все варианты и отобразится соответствующее предупреждение.  
  
> [!NOTE]  
>  Если указаны как процентная доля, так и максимальное число вариантов, применяется меньшее из ограничений.  
  
 *начальное значение контрольного значения*  
 Целое число, которое используется как начальное значение при начале секционирования данных.  
  
 Если оно равно 0, в качестве начального значения используется хэш идентификатора структуры интеллектуального анализа данных.  
  
> [!NOTE]  
>  Чтобы гарантировать возможность повторного создания секции, необходимо указать начальное значение.  
  
 По умолчанию: REPEATABLE (0)  
  
## <a name="remarks"></a>Комментарии  
 Пользователь определяет структуру интеллектуального анализа данных, указывая список столбцов, при необходимости задавая иерархические связи между столбцами, а также при необходимости выполняя секционирование структуры интеллектуального анализа данных на обучающий и проверочный наборы данных.  
  
 Необязательное ключевое слово SESSION показывает, что структура является временной и ее можно использовать только в течение текущего сеанса. После завершения сеанса структура и любые модели на ее основе удаляются. Чтобы создать временные структуры и модели интеллектуального анализа данных, необходимо сначала задать свойство базы данных AllowSessionMiningModels. Дополнительные сведения см. в статье [Data Mining Properties](/analysis-services/server-properties/data-mining-properties).  
  
## <a name="column-definition-list"></a>Список определений столбца  
 Определить структуру интеллектуального анализа данных можно путем включения в список определений каждого столбца следующих сведений.  
  
-   имя (обязательно);  
  
-   Тип данных (обязательно)  
  
-   Distribution  
  
-   Список флагов моделирования  
  
-   Тип содержимого (обязательно)  
  
-   Связь со столбцом атрибутов (обязательна, только если применима), определяемая предложением RELATED TO  
  
 Чтобы определить один столбец, используйте следующий синтаксис для списка определений столбца.  
  
```  
<column name>    <data type>    [<Distribution>]    [<Modeling Flags>]    <Content Type>    [<column relationship>]  
```  
  
 Чтобы определить столбец вложенной таблицы, используйте следующий синтаксис для списка определений столбца:  
  
```  
<column name>    TABLE    ( <column definition list> )  
```  
  
 Сведения о типах данных, типах содержимого, распределениях столбцов и флагах моделирования, используемых для определения столбца структуры, приведены в следующих разделах.  
  
-   [Типы данных (интеллектуальный анализ данных)](/analysis-services/data-mining/data-types-data-mining)  
  
-   [Типы содержимого (интеллектуальный анализ данных)](/analysis-services/data-mining/content-types-data-mining)  
  
-   [Распределения столбцов (интеллектуальный анализ данных)](/analysis-services/data-mining/column-distributions-data-mining)  
  
-   [Флаги моделирования (интеллектуальный анализ данных)](/analysis-services/data-mining/modeling-flags-data-mining)  
  
 Для столбца можно определить несколько значений флагов модели. Однако каждому столбцу может соответствовать только один тип содержимого и тип данных.  
  
### <a name="column-relationships"></a>Связи столбцов  
 К любому определению столбца можно добавить предложение, описывающее связь между двумя столбцами. [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] поддерживает использование следующего \<column relationship> предложения.  
  
 **СВЯЗАНО**  
 Показывает иерархию значений. Назначением столбца RELATED TO может быть ключевой столбец вложенной таблицы, столбец с дискретными значениями из строки вариантов или какой-либо другой столбец с предложением RELATED TO, указывающим на более глубокий уровень иерархии.  
  
## <a name="holdout-parameters"></a>Контрольные параметры  
 Если указываются контрольные параметры, создается секция данных структуры. Указанный объем контрольных данных резервируется для проверки, а оставшиеся данные используются для обучения. По умолчанию, если структура интеллектуального анализа данных создается с помощью среды [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)], создается контрольная секция, которая содержит 30% проверочных данных и 70% обучающих данных. Дополнительные сведения см. в статье [Training and Testing Data Sets](/analysis-services/data-mining/training-and-testing-data-sets).  
  
 При создании структуры интеллектуального анализа данных с помощью расширений интеллектуального анализа данных необходимо вручную указать на необходимость создания контрольной секции.  
  
> [!NOTE]  
>  Инструкция **ALTER MINING STRUCTURE** не поддерживает контрольные данные.  
  
 Можно указать до трех контрольных параметров. Если указано как максимальное число контрольных вариантов, так и процентное соотношение контрольных данных, процент вариантов будет резервироваться до тех пор, пока не будет достигнуто максимальное число вариантов. Процент контрольной доли указывается в виде целого числа, за которым следует ключевое слово **percent** , и указывается максимальное число вариантов в виде целого числа, за которым следует ключевое слово **cases** . Условия можно сочетать в любом порядке, как показано в следующих примерах:  
  
```  
WITH HOLDOUT (20 PERCENT)   
WITH HOLDOUT (2000 CASES)   
WITH HOLDOUT (20 PERCENT OR 2000 CASES)   
WITH HOLDOUT (2000 CASES OR 20 PERCENT)  
```  
  
 Начальное контрольное значение управляет начальной точкой процесса, который в случайном порядке связывает варианты либо с обучающим набором, либо с набором проверочных данных. Указание начального контрольного значения обеспечивает возможность воспроизвести секцию. Если начальное контрольное значение не указано, службы [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] используют для его создания имя структуры интеллектуального анализа данных. Если структура будет переименована, начальное значение также изменится. Параметр начального контрольного значения можно использовать вместе с одним или обоими другими контрольными параметрами.  
  
> [!NOTE]  
>  Поскольку сведения о секциях кэшируются с обучающими данными, для использования контрольных данных необходимо убедиться, что свойство **CacheMode** структуры интеллектуального анализа данных имеет значение **киптраинингдата**. Это параметр по умолчанию для новых структур интеллектуального анализа данных служб [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]. Изменение свойства **CacheMode** на **клеартраинингкасес** в существующей структуре интеллектуального анализа данных, содержащей контрольную секцию, не повлияет на все обработанные модели интеллектуального анализа данных. Однако если параметр <xref:Microsoft.AnalysisServices.MiningStructureCacheMode> не имеет значение **киптраинингдата**, контрольные параметры не будут действовать. Это означает, что все исходные данные будут использованы для обучения, а проверочный набор будет недоступен. Определение секции кэшируется в структуре. Если очистить кэш обучающих вариантов, также будет удален кэш проверочных данных и определение контрольного набора.  
  
## <a name="examples"></a>Примеры  
 В следующих примерах показано создание структуры интеллектуального анализа данных с контрольными данными с помощью расширений интеллектуального анализа данных.  
  
### <a name="example-1-adding-a-structure-with-no-training-set"></a>Пример 1. Добавление структуры без обучающего набора  
 В следующем примере создается структура интеллектуального анализа данных с именем `New Mailing`, при этом не создаются связанные с ней модели интеллектуального анализа данных или контрольные данные. Сведения о добавлении модели интеллектуального анализа данных в структуру см. в разделе [ALTER MINING structure &#40;DMX&#41;](../dmx/alter-mining-structure-dmx.md).  
  
```  
CREATE MINING STRUCTURE [New Mailing]  
(  
    CustomerKey LONG KEY,   
    Gender TEXT DISCRETE,  
    [Number Cars Owned] LONG DISCRETE,  
    [Bike Buyer] LONG DISCRETE   
)  
```  
  
### <a name="example-2-specifying-holdout-percentage-and-seed"></a>Пример 2. Указание процента контрольных значений и начального значения  
 Приведенное ниже предложение можно добавлять после списка определений столбцов, чтобы оно определяло набор данных, который можно использовать для проверки всех моделей интеллектуального анализа данных в рамках структуры интеллектуального анализа данных. Следующая инструкция создает проверочный набор, состоящий из 25 % общего числа входных вариантов, без ограничения максимального числа вариантов. В качестве начального значения при создании секции используется число 5 000. После указания начального значения эти же варианты будут выбираться для тестового набора каждый раз при обработке структуры интеллектуального анализа данных (при условии, что базовые данные не изменятся).  
  
```  
CREATE MINING STRUCTURE [New Mailing]  
(  
    CustomerKey LONG KEY,   
    Gender TEXT DISCRETE,  
    [Number Cars Owned] LONG DISCRETE,  
    [Bike Buyer] LONG DISCRETE   
)   
WITH HOLDOUT(25 PERCENT) REPEATABLE(5000)  
```  
  
### <a name="example-3-specifying-holdout-percentage-and-max-cases"></a>Пример 3. Указание процента контрольных значений и максимальных вариантов  
 Следующее предложение создает проверочный набор, состоящий из 25% общего числа входных вариантов либо из 2000 вариантов — в зависимости от того, что меньше. Поскольку в качестве начального значения указан 0, начальное значение (для начала выборки из входных вариантов) создается на основе имени структуры интеллектуального анализа данных.  
  
```  
CREATE MINING STRUCTURE [New Mailing]  
(  
    CustomerKey LONG KEY,   
    Gender TEXT DISCRETE,  
    [Number Cars Owned] LONG DISCRETE,  
    [Bike Buyer] LONG DISCRETE   
)   
WITH HOLDOUT(25 PERCENT OR 2000 CASES) REPEATABLE(0)  
```  
  
## <a name="see-also"></a>См. также  
 [Расширения интеллектуального анализа данных &#40;инструкции расширений интеллектуального анализа данных&#41; DDL](../dmx/dmx-statements-data-definition.md)   
 [Расширения интеллектуального анализа данных &#40;инструкции расширений интеллектуального анализа данных&#41;](../dmx/dmx-statements-data-manipulation.md)   
 [Справочник по расширениям интеллектуального анализа данных (расширения интеллектуального анализа данных)](../dmx/data-mining-extensions-dmx-statements.md)  
  
